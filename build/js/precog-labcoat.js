define("app/util/traverse",[],function(){function splitPath(key){return key.split(/\./g)}return{get:function(o,key){var path=splitPath(key),ref=o,segment=path.shift();while(segment&&ref){ref=ref[segment];segment=path.shift()}if("undefined"===typeof ref)return ref;else return JSON.parse(JSON.stringify(ref))},set:function(o,key,value){var path=splitPath(key),ref=o,segment=path.shift();while(path.length>0){if("undefined"===typeof ref[segment]){ref[segment]={}}ref=ref[segment];segment=path.shift()}var svalue=JSON.stringify(value);if(JSON.stringify(ref[segment])!==svalue){ref[segment]=JSON.parse(svalue);return true}else{return false}},remove:function(o,key){var path=splitPath(key),ref=o,segment=path.shift(),next;while(path.length>0){next=path.shift();ref=ref[segment];if("undefined"===typeof ref){return}segment=next}delete ref[segment]}}});!function($){if(!$||!($.toJSON||Object.toJSON||window.JSON)){throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!")}var _storage={},_storage_service={jStorage:"{}"},_storage_elm=null,_storage_size=0,json_encode=$.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),json_decode=$.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(str){return String(str).evalJSON()},_backend=false,_ttl_timeout,_XMLService={isXML:function(elm){var documentElement=(elm?elm.ownerDocument||elm:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false},encode:function(xmlNode){if(!this.isXML(xmlNode)){return false}try{return(new XMLSerializer).serializeToString(xmlNode)}catch(E1){try{return xmlNode.xml}catch(E2){}}return false},decode:function(xmlString){var dom_parser="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(_xmlString){var xml_doc=new ActiveXObject("Microsoft.XMLDOM");xml_doc.async="false";xml_doc.loadXML(_xmlString);return xml_doc},resultXML;if(!dom_parser){return false}resultXML=dom_parser.call("DOMParser"in window&&new DOMParser||window,xmlString,"text/xml");return this.isXML(resultXML)?resultXML:false}};function _init(){var localStorageReallyWorks=false;if("localStorage"in window){try{window.localStorage.setItem("_tmptest","tmpval");localStorageReallyWorks=true;window.localStorage.removeItem("_tmptest")}catch(BogusQuotaExceededErrorOnIos5){}}if(localStorageReallyWorks){try{if(window.localStorage){_storage_service=window.localStorage;_backend="localStorage"}}catch(E3){}}else if("globalStorage"in window){try{if(window.globalStorage){_storage_service=window.globalStorage[window.location.hostname];_backend="globalStorage"}}catch(E4){}}else{_storage_elm=document.createElement("link");if(_storage_elm.addBehavior){_storage_elm.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(_storage_elm);_storage_elm.load("jStorage");var data="{}";try{data=_storage_elm.getAttribute("jStorage")}catch(E5){}_storage_service.jStorage=data;_backend="userDataBehavior"}else{_storage_elm=null;return}}_load_storage();_handleTTL()}function _load_storage(){if(_storage_service.jStorage){try{_storage=json_decode(String(_storage_service.jStorage))}catch(E6){_storage_service.jStorage="{}"}}else{_storage_service.jStorage="{}"}_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0}function _save(){try{_storage_service.jStorage=json_encode(_storage);if(_storage_elm){_storage_elm.setAttribute("jStorage",_storage_service.jStorage);_storage_elm.save("jStorage")}_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0}catch(E7){}}function _checkKey(key){if(!key||typeof key!="string"&&typeof key!="number"){throw new TypeError("Key name must be string or numeric")}if(key=="__jstorage_meta"){throw new TypeError("Reserved key name")}return true}function _handleTTL(){var curtime,i,TTL,nextExpire=Infinity,changed=false;clearTimeout(_ttl_timeout);if(!_storage.__jstorage_meta||typeof _storage.__jstorage_meta.TTL!="object"){return}curtime=+new Date;TTL=_storage.__jstorage_meta.TTL;for(i in TTL){if(TTL.hasOwnProperty(i)){if(TTL[i]<=curtime){delete TTL[i];delete _storage[i];changed=true}else if(TTL[i]<nextExpire){nextExpire=TTL[i]}}}if(nextExpire!=Infinity){_ttl_timeout=setTimeout(_handleTTL,nextExpire-curtime)}if(changed){_save()}}$.jStorage={version:"0.1.7.0",set:function(key,value,options){_checkKey(key);options=options||{};if(_XMLService.isXML(value)){value={_is_xml:true,xml:_XMLService.encode(value)}}else if(typeof value=="function"){value=null}else if(value&&typeof value=="object"){value=json_decode(json_encode(value))}_storage[key]=value;if(!isNaN(options.TTL)){this.setTTL(key,options.TTL)}else{_save()}return value},get:function(key,def){_checkKey(key);if(key in _storage){if(_storage[key]&&typeof _storage[key]=="object"&&_storage[key]._is_xml&&_storage[key]._is_xml){return _XMLService.decode(_storage[key].xml)}else{return _storage[key]}}return typeof def=="undefined"?null:def},deleteKey:function(key){_checkKey(key);if(key in _storage){delete _storage[key];if(_storage.__jstorage_meta&&typeof _storage.__jstorage_meta.TTL=="object"&&key in _storage.__jstorage_meta.TTL){delete _storage.__jstorage_meta.TTL[key]}_save();return true}return false},setTTL:function(key,ttl){var curtime=+new Date;_checkKey(key);ttl=Number(ttl)||0;if(key in _storage){if(!_storage.__jstorage_meta){_storage.__jstorage_meta={}}if(!_storage.__jstorage_meta.TTL){_storage.__jstorage_meta.TTL={}}if(ttl>0){_storage.__jstorage_meta.TTL[key]=curtime+ttl}else{delete _storage.__jstorage_meta.TTL[key]}_save();_handleTTL();return true}return false},flush:function(){_storage={};_save();return true},storageObj:function(){function F(){}F.prototype=_storage;return new F},index:function(){var index=[],i;for(i in _storage){if(_storage.hasOwnProperty(i)&&i!="__jstorage_meta"){index.push(i)}}return index},storageSize:function(){return _storage_size},currentBackend:function(){return _backend},storageAvailable:function(){return!!_backend},reInit:function(){var new_storage_elm,data;if(_storage_elm&&_storage_elm.addBehavior){new_storage_elm=document.createElement("link");_storage_elm.parentNode.replaceChild(new_storage_elm,_storage_elm);_storage_elm=new_storage_elm;_storage_elm.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(_storage_elm);_storage_elm.load("jStorage");data="{}";try{data=_storage_elm.getAttribute("jStorage")}catch(E5){}_storage_service.jStorage=data;_backend="userDataBehavior"}_load_storage()}};_init()}(window.$||window.jQuery);define("libs/jquery/jstorage/jstorage",function(){});define("app/util/storage",["app/util/traverse","libs/jquery/jstorage/jstorage"],function(traverse){var localStorage=window.localStorage||{data:{},length:0,key:function(index){var i=0;for(var key in this.data){if(index===i)return key;i++}},getItem:function(key){return data[key]},setItem:function(key,data){this.data[key]=data},removeItem:function(key){delete this.data[key]}};var store={set:function(key,value){try{localStorage.setItem(key,JSON.stringify(value))}catch(e){console.error(e)}},get:function(key){var v=localStorage.getItem(key);if(v)return JSON.parse(v);else return null}};function migrate(){var keys=$.jStorage.index(),migrated=false;keys.map(function(key){if(key.indexOf("labcoat")<0&&key.indexOf("quirrel")<0)return;var value=$.jStorage.get(key);store.set(key,value);$.jStorage.deleteKey(key);migrated=true});if(migrated)console.log("MIGRATED LOCAL STORAGE");$.jStorage.flush()}$(migrate);return function(key,defaults){var LIMIT_SIZE=500,dirty=false,params=$.extend({},defaults);function cloneLimited(obj,limit){if(null==obj||"object"!==typeof obj)return obj;if(obj instanceof Date){var copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){var copy=[],len=obj.length;if(len>limit){len=limit}for(var i=0;i<len;++i){copy[i]=cloneLimited(obj[i],limit)}return copy}if(obj instanceof Object){var copy={};for(var attr in obj){if(obj.hasOwnProperty(attr))copy[attr]=cloneLimited(obj[attr],limit)}return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}function save(){var o=cloneLimited(params,LIMIT_SIZE);var result=store.set(key,o);dirty=false}function load(){if(enableDebug)console.log("Load Storage Data");var value=store.get(key);$.extend(params,value)}var delayedSave=function(){dirty=true;clearInterval(this.killDelayedSave);this.killDelayedSave=setTimeout(function(){save()},100)};load();var enableDebug=false;function debug(action,key,value){if(!enableDebug)return;var s="undefined"!==typeof value&&JSON.stringify(value)||"",len=100,ellipsis="...";if(s.length>len-ellipsis.length){s=s.substr(0,len-ellipsis.length)+ellipsis}console.log((action&&action+" "||"")+key+(s&&": "+s||""))}var storage={get:function(key,alternative){var v=traverse.get(params,key);debug("get",key,v);if("undefined"===typeof v)return alternative;else return v},set:function(key,value,instant){if(traverse.set(params,key,value)){debug("set",key,value);this.save(instant)}},remove:function(key,instant){debug("del",key);traverse.remove(params,key);this.save(instant)},keys:function(key){var ref=traverse.get(params,key);if(ref&&"object"===typeof ref){var result=[];for(var k in ref){if(ref.hasOwnProperty(k)){result.push(k)}}return result}else{return[]}},save:function(instant){if(instant)save();else delayedSave()},load:function(){load()},toString:function(){return JSON.stringify(params)},all:function(){return params},dirty:function(){return dirty}};return storage}});define("app/util/utils",[],function(){return{arrayDiff:function(a1,a2){return a1.filter(function(i){return!(a2.indexOf(i)>-1)})},guid:function(){var S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},sortNodes:function(els,comparator){var arr=$(els).map(function(){return this});arr.sort(comparator);var parent=arr[0]&&arr[0].parentNode;$(arr).each(function(i){parent.appendChild(arr[i])})},truncate:function(value,maxlen,ellipsis){maxlen=maxlen||25;ellipsis=ellipsis||"...";if(value.length>=maxlen)value=value.substr(0,maxlen-ellipsis.length)+ellipsis;return value},normalizeQueryName:function(value){value=value.trim().toLowerCase();if(value.substr(0,1)==="/")value=value.substr(1);value.replace(/[ \-.]+/g,"_");return value},arrayRemove:function(arr,el){var index=arr.indexOf(el);if(index<0)return arr;arr.splice(index,1);return arr},validateQueryName:function(query,path,queries){if(query.match(/^[a-z0-9][a-z0-9 ]*[a-z0-9]$/i)){if(queries.queryExist(path))return"a query with this identifier already exists";else return null}else return"the name can only include alpha-numeric characters, white spaces (but not in the beginning and at the end) and must be at least 2 characters long."}}});define("app/util/storagemonitor",["app/util/traverse","app/util/storage","app/util/utils"],function(traverse,buildStorage,utils){var monitors=[],timer,storage;function equals(a,b){if(typeof a!==typeof b)return false;else if(a instanceof Array){if(a.length!=b.length)return false;for(var i=0;i<a.length;i++){if(!equals(a[i],b[i]))return false}return true}else if(a instanceof Object){var akeys=$.map(a,function(value,key){return key}),bkeys=$.map(b,function(value,key){return key});if(!equals(akeys,bkeys))return false;for(var i=0;i<akeys.length;i++){if(!equals(a[akeys[i]],b[akeys[i]]))return false}return true}else{return a===b}}function loop(){var inited=false;for(var i=0;i<monitors.length;i++){storage=monitors[i];if(storage.monitor.paths.length==0||storage.dirty()){return}if(!inited){$.jStorage.reInit();inited=true}var params=storage.all(),len=storage.monitor.paths.length,cached=$.jStorage.get(storage.monitor.key,{}),path,cvalue;for(var j=0;j<len;j++){path=storage.monitor.paths[j];cvalue=traverse.get(cached,path);if("undefined"===typeof storage.monitor.last[path]){storage.monitor.last[path]=cvalue;continue}if(equals(storage.monitor.last[path],cvalue))continue;if(equals(cvalue,traverse.get(params,path)))continue;storage.monitor.last[path]=cvalue;traverse.set(params,path,cvalue);$(storage).trigger(path,[cvalue])}}}function isMonitoring(storage){return monitors.indexOf(storage)>=0}function addStorageMonitor(storage){utils.arrayRemove(monitors,storage).push(storage);if(monitors.length===1)setInterval(loop,5e3)}function removeStorageMonitor(storage){utils.arrayRemove(monitors,storage);if(monitors.length===0)clearInterval(timer)}return function(key,defaults){var storage=buildStorage(key,defaults),monitor;storage.monitor=monitor=function(){var pathsCounter={};return{paths:[],last:{},key:key,start:function(delay){addStorageMonitor(storage)},end:function(){removeStorageMonitor()},monitoring:function(){return isMonitoring(storage)},bind:function(path,handler){pathsCounter[path]=pathsCounter[path]&&++pathsCounter[path]||1;if(pathsCounter[path]===1)storage.monitor.paths.push(path);$(storage).on(path,handler)},unbind:function(path,handler){if(!pathsCounter[path])return;pathsCounter[path]--;if(pathsCounter[path]===0)storage.monitor.paths.splice(storage.monitor.paths.indexOf(path),1);$(storage).off(path,handler)}}}();return storage}});define("app/util/config",["app/util/storagemonitor"],function(createStore){var CONFIG_KEY="pg-labcoat-config",defaults={theme:"gray",indentUsingSpaces:false,tabSize:2,softTabs:true,disableClientCache:true,ioPanesVertical:true,queryLimit:1e3};return createStore(CONFIG_KEY,defaults)});define("rtext",["module"],function(module){var progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation=typeof location!=="undefined"&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||undefined),buildMap=[],masterConfig=module.config&&module.config()||{},text,fs;text={version:"2.0.1",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);if(matches){content=matches[1]}}else{content=""}return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest}else if(typeof ActiveXObject!=="undefined"){for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}}return xhr},parseName:function(name){var strip=false,index=name.indexOf("."),modName=name.substring(0,index),ext=name.substring(index+1,name.length);index=ext.indexOf("!");if(index!==-1){strip=ext.substring(index+1,ext.length);strip=strip==="strip";ext=ext.substring(0,index)}return{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var match=text.xdRegExp.exec(url),uProtocol,uHostName,uPort;if(!match){return true}uProtocol=match[2];uHostName=match[3];uHostName=uHostName.split(":");uPort=uHostName[1];uHostName=uHostName[0];return(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName.toLowerCase()===hostname.toLowerCase())&&(!uPort&&!uHostName||uPort===port)},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content;if(masterConfig.isBuild){buildMap[name]=content}onLoad(content)},load:function(name,req,onLoad,config){if(config.isBuild&&!config.inlineText){onLoad();return}masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+"."+parsed.ext,url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;if(!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)){text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){if(onLoad.error){onLoad.error(err)}})}else{req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)})}},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),nonStripName=parsed.moduleName+"."+parsed.ext,fileName=req.toUrl(parsed.moduleName+"."+parsed.ext)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)};text.write(pluginName,nonStripName,textWrite,config)},config)}};if(typeof process!=="undefined"&&process.versions&&!!process.versions.node){fs=require.nodeRequire("fs");text.get=function(url,callback){var file=fs.readFileSync(url,"utf8");if(file.indexOf("﻿")===0){file=file.substring(1)}callback(file)}}else if(text.createXhr()){text.get=function(url,callback,errback){var xhr=text.createXhr();xhr.open("GET",url,true);if(masterConfig.onXhr){masterConfig.onXhr(xhr,url)}xhr.onreadystatechange=function(evt){var status,err;if(xhr.readyState===4){status=xhr.status;if(status>399&&status<600){err=new Error(url+" HTTP status: "+status);err.xhr=xhr;errback(err)}else{callback(xhr.responseText)}}};xhr.send(null)}}else if(typeof Packages!=="undefined"){text.get=function(url,callback){var encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),stringBuffer,line,content="";try{stringBuffer=new java.lang.StringBuffer;line=input.readLine();if(line&&line.length()&&line.charAt(0)===65279){line=line.substring(1)}stringBuffer.append(line);while((line=input.readLine())!==null){stringBuffer.append(lineSeparator);stringBuffer.append(line)}content=String(stringBuffer.toString())}finally{input.close()}callback(content)}}return text});define("rtext!templates/layout.full.html",[],function(){return'<div class="pg-labcoat ui-layout-center">\n    <div class="pg-mainbar ui-layout-north pg-pane ui-widget-header"></div>\n    <div class="pg-system ui-layout-west pg-pane">\n        <div class="pg-folders ui-layout-center pg-pane">\n            <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n            <div class="pg-tree ui-layout-center pg-pane"></div>\n        </div>\n        <div class="pg-queries ui-layout-south pg-pane">\n            <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n            <div class="pg-queries ui-layout-center pg-pane"></div>\n        </div>\n    </div>\n    <div class="pg-main ui-layout-center pg-pane">\n        <div class="pg-editor-support ui-layout-center pg-pane">\n            <div class="pg-editor ui-layout-center pg-pane">\n                <div class="pg-io ui-layout-center pg-pane">\n                    <div class="pg-input ui-layout-center pg-pane">\n                        <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n                        <div class="pg-code-editor ui-layout-center pg-pane"></div>\n                    </div>\n                    <div class="pg-output ui-layout-south pg-pane">\n                        <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n                        <div class="pg-result ui-layout-center pg-pane"></div>\n                    </div>\n                </div>\n                <div class="pg-statusbar ui-layout-south pg-pane ui-widget-header"></div>\n            </div>\n            <div class="pg-support ui-layout-east pg-pane"></div>\n        </div>\n        <div class="pg-results ui-layout-south pg-pane"></div>\n    </div>\n</div>'});!function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};if($.ui.version){return}$.extend($.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem)}},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;if($.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))){scrollParent=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0)}else{scrollParent=this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0)}return/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex)}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++uuid}})},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id")}})},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0}});return size}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this)}return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size)}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}})}function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return!$(element).parents().andSelf().filter(function(){return $.css(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));div.offsetHeight;$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});$.support.minHeight=div.offsetHeight===100;$.support.selectstart="onselectstart"in div;body.removeChild(div).style.display="none"});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11){return}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args)}}}},contains:$.contains,hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false}var scroll=a&&a==="left"?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true}el[scroll]=1;has=el[scroll]>0;el[scroll]=0;return has},isOverAxis:function(x,reference,size){return x>reference&&x<reference+size},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)}})}(jQuery);define("libs/jquery/ui/jquery.ui.core",function(){});!function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseInt(offsets[0],10)*(rpercent.test(offsets[0])?width/100:1),parseInt(offsets[1],10)*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth}var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth}div.remove();return cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowX?$.position.scrollbarWidth():0,height:hasOverflowY?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments)}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),targetElem=target[0],collision=(options.collision||"flip").split(" "),offsets={};if(targetElem.nodeType===9){targetWidth=target.width();targetHeight=target.height();targetOffset={top:0,left:0}}else if($.isWindow(targetElem)){targetWidth=target.width();targetHeight=target.height();targetOffset={top:target.scrollTop(),left:target.scrollLeft()}}else if(targetElem.preventDefault){options.at="left top";targetWidth=targetHeight=0;targetOffset={top:targetElem.pageY,left:targetElem.pageX}}else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();targetOffset=target.offset()}basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});if(collision.length===1){collision[1]=collision[0]}if(options.at[0]==="right"){basePosition.left+=targetWidth}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2}if(options.at[1]==="bottom"){basePosition.top+=targetHeight}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth}else if(options.my[0]==="center"){position.left-=elemWidth/2}if(options.my[1]==="bottom"){position.top-=elemHeight}else if(options.my[1]==="center"){position.top-=elemHeight/2}position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}});if($.fn.bgiframe){elem.bgiframe()}if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center"}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle"}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal"}else{feedback.important="vertical"}options.using.call(this,props,feedback)}}elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0){position.left=withinOffset}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth}else{position.left=withinOffset}}}else if(overLeft>0){position.left+=overLeft}else if(overRight>0){position.left-=overRight}else{position.left=max(position.left-collisionPosLeft,position.left)
}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>0&&overTop<=0){position.top=withinOffset}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight}else{position.top=withinOffset}}}else if(overTop>0){position.top+=overTop}else if(overBottom>0){position.top-=overBottom}else{position.top=max(position.top-collisionPosTop,position.top)}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?0:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?0:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(position.top+myOffset+atOffset+offset>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))){position.top+=myOffset+atOffset+offset}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)){position.top+=myOffset+atOffset+offset}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};!function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"})}for(i in testElementStyle){testElement.style[i]=testElementStyle[i]}testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement)}();if($.uiBackCompat!==false){!function($){var _position=$.fn.position;$.fn.position=function(options){if(!options||!options.offset){return _position.call(this,options)}var offset=options.offset.split(" "),at=options.at.split(" ");if(offset.length===1){offset[1]=offset[0]}if(/^\d/.test(offset[0])){offset[0]="+"+offset[0]}if(/^\d/.test(offset[1])){offset[1]="+"+offset[1]}if(at.length===1){if(/left|center|right/.test(at[0])){at[1]="center"}else{at[1]=at[0];at[0]="center"}}return _position.call(this,$.extend(options,{at:at[0]+offset[0]+" "+at[1]+offset[1],offset:undefined}))}}(jQuery)}}(jQuery);define("libs/jquery/ui/jquery.ui.position",function(){});!function($,undefined){var slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove")}catch(e){}}_cleanData(elems)};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName]=function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element)}if(arguments.length){this._createWidget(options,element)}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if($.isFunction(value)){prototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}()}});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:name},prototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetBaseClass:fullName,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else{base._childConstructors.push(constructor)}$.widget.bridge(name,constructor)};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){target[key]=$.isPlainObject(value)?$.widget.extend({},target[key],value):value}}}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'")}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance")}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false}})}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init()}else{new object(options,this)}})}return returnValue}};$.Widget=function(options,element){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetName,this);$.data(element,this.widgetFullName,this);this._bind({remove:"destroy"});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName).removeData(this.widgetFullName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options)}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(value===undefined){return curOption[key]===undefined?null:curOption[key]}curOption[key]=value}else{if(value===undefined){return this.options[key]===undefined?null:this.options[key]}options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key])}return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_bind:function(element,handlers){if(!handlers){handlers=element;element=this.element}else{element=$(element);this.bindings=this.bindings.add(element)}var instance=this;$.each(handlers,function(event,handler){function handlerProxy(){if(instance.options.disabled===true||$(this).hasClass("ui-state-disabled")){return}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||jQuery.guid++}var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+"."+instance.widgetName,selector=match[2];if(selector){instance.widget().delegate(selector,eventName,handlerProxy)}else{element.bind(eventName,handlerProxy)}})},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._bind(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);this._bind(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop]}}}this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options}}var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options}}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay)}if(hasOptions&&$.effects&&($.effects.effect[effectName]||$.uiBackCompat!==false&&$.effects[effectName])){element[method](options)}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback)}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0])}next()})}}});if($.uiBackCompat!==false){$.Widget.prototype._getCreateOptions=function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]}}}(jQuery);define("libs/jquery/ui/jquery.ui.widget",function(){});!function($,undefined){var mouseHandled=false;$(document).mouseup(function(e){mouseHandled=false});$.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(mouseHandled){return}this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true},_mouseMove:function(event){if($.browser.msie&&!(document.documentMode>=9)&&!event.button){return this._mouseUp(event)}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(event)}return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(event){return this.mouseDelayMet},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true}})}(jQuery);define("libs/jquery/ui/jquery.ui.mouse",function(){});!function($,undefined){$.widget("ui.resizable",$.ui.mouse,{version:"@VERSION",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname="ui-resizable-"+handle;var axis=$('<div class="ui-resizable-handle '+hname+'"></div>');axis.css({zIndex:o.zIndex});if("se"==handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis)}}this._renderAxis=function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String)this.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize()}if(!$(this.handles[i]).length)continue}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className)var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);that.axis=axis&&axis[1]?axis[1]:"se"}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled)return;$(this).removeClass("ui-resizable-autohide");that._handles.show()}).mouseleave(function(){if(o.disabled)return;if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this},_mouseCapture:function(event){var handle=false;for(var i in this.handles){if($(this.handles[i])[0]==event.target){handle=true}}return!this.options.disabled&&handle},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()};if(el.is(".ui-draggable")||/absolute/.test(el.css("position"))){el.css({position:"absolute",top:iniPos.top,left:iniPos.left})}this._renderProxy();var curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor=="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},that=this,smp=this.originalMousePosition,a=this.axis;var dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0;var trigger=this._change[a];if(!trigger)return false;var data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey)data=this._updateRatio(data,event);data=this._respectSize(data,event);this._propagate("resize",event);el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length)this._proportionallyResize();this._updateCache(data);this._trigger("resize",event,this.ui());return false},_mouseStop:function(event){this.resizing=false;var o=this.options,that=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width;var s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;if(!o.animate)this.element.css($.extend(s,{top:top,left:left}));that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate)this._proportionallyResize()}$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper)this.helper.remove();return false},_updateVirtualBoundaries:function(forceAspectRatio){var o=this.options,pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth)b.minWidth=pMinWidth;if(pMinHeight>b.minHeight)b.minHeight=pMinHeight;if(pMaxWidth<b.maxWidth)b.maxWidth=pMaxWidth;if(pMaxHeight<b.maxHeight)b.maxHeight=pMaxHeight}this._vBoundaries=b},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset();if(isNumber(data.left))this.position.left=data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height))data.width=data.height*this.aspectRatio;else if(isNumber(data.width))data.height=data.width/this.aspectRatio;if(a=="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null}if(a=="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width)}return data},_respectSize:function(data,event){var el=this.helper,o=this._vBoundaries,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height;if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height;var cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;var isNotwh=!data.width&&!data.height;if(isNotwh&&!data.left&&data.top)data.top=null;else if(isNotwh&&!data.top&&data.left)data.left=null;return data},_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length)return;var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],p=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding})}if($.browser.msie&&!!($(element).is(":hidden")||$(element).parents(":hidden").length))continue;prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');var ie6=$.browser.msie&&$.browser.version<7,ie6offset=ie6?1:0,pxyoffset=ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:"absolute",left:this.elementOffset.left-ie6offset+"px",top:this.elementOffset.top-ie6offset+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx}},w:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);n!="resize"&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options;var _store=function(exp){$(exp).each(function(){var el=$(this);el.data("resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};if(typeof o.alsoResize=="object"&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize)}else{$.each(o.alsoResize,function(exp){_store(exp)})}}else{_store(o.alsoResize)}},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,os=that.originalSize,op=that.originalPosition;var delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)style[prop]=sum||null});el.css(style)})};if(typeof o.alsoResize=="object"&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})}else{_alsoResize(o.alsoResize)}},stop:function(event,ui){$(this).removeData("resizable-alsoresize")}});$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var that=$(this).data("resizable"),o=that.options;var pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width;var style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});that._updateCache(data);that._propagate("resize",event)}})}});$.ui.plugin.add("resizable","containment",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,el=that.element;var oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;if(!ce)return;that.containerElement=$(ce);if(/document/.test(oc)||oc==document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}
}else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};var co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,ps=that.containerSize,co=that.containerOffset,cs=that.size,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;if(ce[0]!=document&&/static/.test(ce.css("position")))cop=co;if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left);if(pRatio)that.size.height=that.size.width/that.aspectRatio;that.position.left=o.helper?co.left:0}if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top);if(pRatio)that.size.width=that.size.height*that.aspectRatio;that.position.top=that._helper?co.top:0}that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;var woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height);var isParent=that.containerElement.get(0)==that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative)woset-=that.parentData.left;if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio)that.size.height=that.size.width/that.aspectRatio}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio)that.size.width=that.size.height*that.aspectRatio}},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options,cp=that.position,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement;var helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&/relative/.test(ce.css("position")))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(that._helper&&!o.animate&&/static/.test(ce.css("position")))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}});$.ui.plugin.add("resizable","ghost",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost=="string"?o.ghost:"");that.ghost.appendTo(that.helper)},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options;if(that.ghost)that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options;if(that.ghost&&that.helper)that.helper.get(0).removeChild(that.ghost.get(0))}});$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);if(/^(se|s|e)$/.test(a)){that.size.width=os.width+ox;that.size.height=os.height+oy}else if(/^(ne)$/.test(a)){that.size.width=os.width+ox;that.size.height=os.height+oy;that.position.top=op.top-oy}else if(/^(sw)$/.test(a)){that.size.width=os.width+ox;that.size.height=os.height+oy;that.position.left=op.left-ox}else{that.size.width=os.width+ox;that.size.height=os.height+oy;that.position.top=op.top-oy;that.position.left=op.left-ox}}});var num=function(v){return parseInt(v,10)||0};var isNumber=function(value){return!isNaN(parseInt(value,10))}}(jQuery);define("libs/jquery/ui/jquery.ui.resizable",function(){});!function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){if(form){radios=$(form).find("[name='"+name+"']")}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})}}return radios};$.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",hoverClass="ui-state-hover"+(!toggleButton?" ui-state-active":""),focusClass="ui-state-focus";if(options.label===null){options.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()}this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter.button",function(){if(options.disabled){return}$(this).addClass("ui-state-hover");if(this===lastActive){$(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){if(options.disabled){return}$(this).removeClass(hoverClass)}).bind("click.button",function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation()}});this.element.bind("focus.button",function(){that.buttonElement.addClass(focusClass)}).bind("blur.button",function(){that.buttonElement.removeClass(focusClass)});if(toggleButton){this.element.bind("change.button",function(){if(clickDragged){return}that.refresh()});this.buttonElement.bind("mousedown.button",function(event){if(options.disabled){return}clickDragged=false;startXPos=event.pageX;startYPos=event.pageY}).bind("mouseup.button",function(event){if(options.disabled){return}if(startXPos!==event.pageX||startYPos!==event.pageY){clickDragged=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(options.disabled||clickDragged){return false}$(this).toggleClass("ui-state-active");that.buttonElement.attr("aria-pressed",that.element[0].checked)})}else if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(options.disabled||clickDragged){return false}$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown.button",function(){if(options.disabled){return false}$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null})}).bind("mouseup.button",function(){if(options.disabled){return false}$(this).removeClass("ui-state-active")}).bind("keydown.button",function(event){if(options.disabled){return false}if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active")}}).bind("keyup.button",function(){$(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click()}})}}this._setOption("disabled",options.disabled);this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else if(this.element.is("[type=radio]")){this.type="radio"}else if(this.element.is("input")){this.type="input"}else{this.type="button"}if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector)}}this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active")}this.buttonElement.prop("aria-pressed",checked)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){if(value){this.element.prop("disabled",true)}else{this.element.prop("disabled",false)}return}this._resetButton()},refresh:function(){var isDisabled=this.element.is(":disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled)}if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary"))}if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>")}if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>")}if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",buttonText)}}}else{buttonClasses.push("ui-button-text-only")}buttonElement.addClass(buttonClasses.join(" "))}});$.widget("ui.buttonset",{version:"@VERSION",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value)}this._super(key,value)},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery);define("libs/jquery/ui/jquery.ui.button",function(){});!function($,undefined){$.widget("ui.sortable",$.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?o.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget().toggleClass("ui-sortable-disabled",!!value)}else{$.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(event,overrideHandle){var that=this;if(this.reverting){return false}if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(event);var currentItem=null,nodes=$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")==that){currentItem=$(this);return false}});if($.data(event.target,that.widgetName+"-item")==that)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){var validHandle=false;$(this.options.handle,currentItem).find("*").andSelf().each(function(){if(this==event.target)validHandle=true});if(!validHandle)return false}this.currentItem=currentItem;this._removeCurrentsFromItems();return true},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(o.containment)this._setContainment();if(o.cursor){if($("body").css("cursor"))this._storedCursor=$("body").css("cursor");$("body").css("cursor",o.cursor)}if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)this._cacheHelperProportions();if(!noActivation){for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this))}}if($.ui.ddmanager)$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true},_mouseDrag:function(event){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var o=this.options,scrolled=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?"next":"prev"]()[0]!=itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type=="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item)}else{break}this._trigger("change",event,this._uiHash());break}}this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)$.ui.ddmanager.drop(this,event);if(this.options.revert){var that=this;var cur=this.placeholder.offset();this.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else{this._clear(event,noPropagation)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper=="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem)}else{$(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[-=_](.+)/);if(res)str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))});if(!str.length&&o.key){str.push(o.key+"=")}return str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")});return ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height;var l=item.left,r=l+item.width,t=item.top,b=t+item.height;var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var isOverElement=y1+dyClick>t&&y1+dyClick<b&&x1+dxClick>l&&x1+dxClick<r;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]){return isOverElement}else{return l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b}},_intersectsWithPointer:function(item){var isOverElementHeight=this.options.axis==="x"||$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=this.options.axis==="y"||$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)return false;return this.floating?horizontalDirection&&horizontalDirection=="right"||verticalDirection=="down"?2:1:verticalDirection&&(verticalDirection=="down"?2:1)},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return horizontalDirection=="right"&&isOverRightHalf||horizontalDirection=="left"&&!isOverRightHalf}else{return verticalDirection&&(verticalDirection=="down"&&isOverBottomHalf||verticalDirection=="up"&&!isOverBottomHalf)}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?"right":"left")},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var items=[];var queries=[];var connectWith=this._connectWith();if(connectWith&&connected){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}}}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var i=queries.length-1;i>=0;i--){queries[i][0].each(function(){items.push(this)})}return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");for(var i=0;i<this.items.length;i++){for(var j=0;j<list.length;j++){if(list[j]==this.items[i].item[0])this.items.splice(i,1)}}},_refreshItems:function(event){this.items=[];this.containers=[this];var items=this.items;var queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]];var connectWith=this._connectWith();if(connectWith&&this.ready){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst)}}}}for(var i=queries.length-1;i>=0;i--){var targetData=queries[i][1];var _queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})}}},refreshPositions:function(fast){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(item.instance!=this.currentContainer&&this.currentContainer&&item.item[0]!=this.currentItem[0])continue;var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight()}var p=t.offset();item.left=p.left;item.top=p.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}}return this},_createPlaceholder:function(that){that=that||this;var o=that.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(that.currentItem[0].nodeName)).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!className)el.style.visibility="hidden";return el},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10))}if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10))}}}}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i];innermostIndex=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!innermostContainer)return;if(this.containers.length===1){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}else if(this.currentContainer!=this.containers[innermostIndex]){var dist=1e4;var itemWithLeastDistance=null;var base=this.positionAbs[this.containers[innermostIndex].floating?"left":"top"];for(var j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;var cur=this.containers[innermostIndex].floating?this.items[j].item.offset().left:this.items[j].item.offset().top;if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];this.direction=cur-base>0?"down":"up"}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):o.helper=="clone"?this.currentItem.clone():this.currentItem;if(!helper.parents("body").length)$(o.appendTo!="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(helper[0].style.width==""||o.forceHelperSize)helper.width(this.currentItem.width());if(helper[0].style.height==""||o.forceHelperSize)helper.height(this.currentItem.height());return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj=="string"){obj=obj.split(" ")}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0}}if("left"in obj){this.offset.click.left=obj.left+this.margins.left}if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left}if("top"in obj){this.offset.click.top=obj.top+this.margins.top}if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}
},_setContainment:function(){var o=this.options;if(o.containment=="parent")o.containment=this.helper[0].parentNode;if(o.containment=="document"||o.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)){var ce=$(o.containment)[0];var co=$(o.containment).offset();var over=$(ce).css("overflow")!="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-($.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod),left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-($.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod)}},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top}if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1]:top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?i.item[0]:i.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter==this.counter)this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=false;var delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS){if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]=""}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())});if(!$.contains(this.element[0],this.currentItem[0])){if(!noPropagation)delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())});for(var i=this.containers.length-1;i>=0;i--){if($.contains(this.containers[i].element[0],this.currentItem[0])&&!noPropagation){delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.containers[i]));delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.containers[i]))}}}for(var i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this._storedCursor)$("body").css("cursor",this._storedCursor);if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event)}this._trigger("stop",event,this._uiHash())}return false}if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event)}this._trigger("stop",event,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}(jQuery);define("libs/jquery/ui/jquery.ui.sortable",function(){});!function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(event);if(!this.handle)return false;$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")});return true},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager)$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);if(o.containment)this._setContainment();if(this._trigger("start",event)===false){this._clear();return false}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this._mouseDrag(event,true);if($.ui.ddmanager)$.ui.ddmanager.dragStart(this,event);return true},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false}this.position=ui.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false},_mouseStop:function(event){var dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false}var element=this.element[0],elementInDom=false;while(element&&(element=element.parentNode)){if(element==document){elementInDom=true}}if(!elementInDom&&this.options.helper==="original")return false;if(this.options.revert=="invalid"&&!dropped||this.options.revert=="valid"&&dropped||this.options.revert===true||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)){var that=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear()}})}else{if(this._trigger("stop",event)!==false){this._clear()}}return false},_mouseUp:function(event){if(this.options.iframeFix===true){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}if($.ui.ddmanager)$.ui.ddmanager.dragStop(this,event);return $.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==event.target)handle=true});return handle},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):o.helper=="clone"?this.element.clone().removeAttr("id"):this.element;if(!helper.parents("body").length)helper.appendTo(o.appendTo=="parent"?this.element[0].parentNode:o.appendTo);if(helper[0]!=this.element[0]&&!/(fixed|absolute)/.test(helper.css("position")))helper.css("position","absolute");return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj=="string"){obj=obj.split(" ")}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0}}if("left"in obj){this.offset.click.left=obj.left+this.margins.left}if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left}if("top"in obj){this.offset.click.top=obj.top+this.margins.top}if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;if(o.containment=="parent")o.containment=this.helper[0].parentNode;if(o.containment=="document"||o.containment=="window")this.containment=[o.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment=="document"?0:$(window).scrollLeft())+$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment=="document"?0:$(window).scrollTop())+($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)&&o.containment.constructor!=Array){var c=$(o.containment);var ce=c[0];if(!ce)return;var co=c.offset();var over=$(ce).css("overflow")!="hidden";this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c}else if(o.containment.constructor==Array){this.containment=o.containment}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod),left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod)}},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else{containment=this.containment}if(event.pageX-this.offset.click.left<containment[0])pageX=containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<containment[1])pageY=containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>containment[2])pageX=containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>containment[3])pageY=containment[3]+this.offset.click.top}if(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?!(top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3])?top:!(top-this.offset.click.top<containment[1])?top-o.grid[1]:top+o.grid[1]:top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?!(left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2])?left:!(left-this.offset.click.left<containment[0])?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type=="drag")this.positionAbs=this._convertPositionTo("absolute");return $.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable)}})},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper=="original")this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable)}})},drag:function(event,ui){var inst=$(this).data("draggable"),that=this;var checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left;var itemHeight=o.height,itemWidth=o.width;var itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth)};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0]};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst}if(this.instance.currentItem)this.instance._mouseDrag(event)}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger("fromSortable",event);inst.dropped=false}}})}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$("body"),o=$(this).data("draggable").options;if(t.css("cursor"))o._cursor=t.css("cursor");t.css("cursor",o.cursor)},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._cursor)$("body").css("cursor",o._cursor)}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._opacity)$(ui.helper).css("opacity",o._opacity)}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML")i.overflowOffset=i.scrollParent.offset()},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){if(!o.axis||o.axis!="x"){if(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed}if(!o.axis||o.axis!="y"){if(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed}}else{if(!o.axis||o.axis!="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)}if(!o.axis||o.axis!="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(i,event)}});$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!=String?o.snap.items||":data(draggable)":o.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var inst=$(this).data("draggable"),o=inst.options;var d=o.snapTolerance;var x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!(l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d||l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d||l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d||l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d)){if(inst.snapElements[i].snapping)inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=false;continue}if(o.snapMode!="inner"){var ts=Math.abs(t-y2)<=d;var bs=Math.abs(b-y1)<=d;var ls=Math.abs(l-x2)<=d;var rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left}var first=ts||bs||ls||rs;if(o.snapMode!="outer"){var ts=Math.abs(t-y1)<=d;var bs=Math.abs(b-y2)<=d;var ls=Math.abs(l-x1)<=d;var rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=ts||bs||ls||rs||first}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options;var group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!group.length){return}var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i});this[0].style.zIndex=min+group.length}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._zIndex)$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery);define("libs/jquery/ui/jquery.ui.draggable",function(){});!function($){var min=Math.min,max=Math.max,round=Math.floor;function isStr(v){return $.type(v)==="string"}function runPluginCallbacks(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{if(isStr(fn))fn=eval(fn);if($.isFunction(fn))fn(Instance)}catch(ex){}}}$.layout={version:"1.3.rc30.51",revision:.033005,language:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpenTip:"Not enough room to show this pane.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size",pane:"pane",selector:"selector",errButton:"Error Adding Button \n\nInvalid ",errContainerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",errCenterPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",errContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!"},browser:{mozilla:!!$.browser.mozilla,webkit:!!$.browser.webkit||!!$.browser.safari,msie:!!$.browser.msie,isIE6:!!$.browser.msie&&$.browser.version==6,version:$.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"Top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"Bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"Right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"Left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(el){var $el=$(el),layout=$el.data("layout")||$el.data("parentLayout");if(layout){var $cont=layout.container;if($cont.data("layoutPane"))return $cont;var $pane=$cont.closest("."+$.layout.defaults.panes.paneClass);if($pane.data("layoutPane"))return $pane}return null},getParentPaneInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("layoutPane"):null},getParentLayoutInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("parentLayout"):null},getEventObject:function(evt){return typeof evt==="object"&&evt.stopPropagation?evt:null},parsePaneName:function(evt_or_pane){var evt=$.layout.getEventObject(evt_or_pane);if(evt){evt.stopPropagation();
return $(this).data("layoutEdge")}else return evt_or_pane},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&$.effects.slide}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(dim){var $c=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body");var d={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return dim.match(/^(width|height)$/)?d[dim]:d},showInvisibly:function($E,force){if(!$E)return{};if(!$E.jquery)$E=$($E);var CSS={display:$E.css("display"),visibility:$E.css("visibility")};if(force||CSS.display==="none"){$E.css({display:"block",visibility:"hidden"});return CSS}else return{}},getElementDimensions:function($E){var d={},x=d.css={},i={},b,p,N=$.layout.cssNum,off=$E.offset();d.offsetLeft=off.left;d.offsetTop=off.top;$.each("Left,Right,Top,Bottom".split(","),function(idx,e){b=x["border"+e]=$.layout.borderWidth($E,e);p=x["padding"+e]=$.layout.cssNum($E,"padding"+e);i[e]=b+p;d["inset"+e]=p});d.offsetWidth=$E.innerWidth();d.offsetHeight=$E.innerHeight();d.outerWidth=$E.outerWidth();d.outerHeight=$E.outerHeight();d.innerWidth=max(0,d.outerWidth-i.Left-i.Right);d.innerHeight=max(0,d.outerHeight-i.Top-i.Bottom);x.width=$E.width();x.height=$E.height();x.top=N($E,"top",true);x.bottom=N($E,"bottom",true);x.left=N($E,"left",true);x.right=N($E,"right",true);return d},getElementCSS:function($E,list){var CSS={},style=$E[0].style,props=list.split(","),sides="Top,Bottom,Left,Right".split(","),attrs="Color,Style,Width".split(","),p,s,a,i,j,k;for(i=0;i<props.length;i++){p=props[i];if(p.match(/(border|padding|margin)$/))for(j=0;j<4;j++){s=sides[j];if(p==="border")for(k=0;k<3;k++){a=attrs[k];CSS[p+s+a]=style[p+s+a]}else CSS[p+s]=style[p+s]}else CSS[p]=style[p]}return CSS},cssWidth:function($E,outerWidth){var b=$.layout.borderWidth,n=$.layout.cssNum;if(outerWidth<=0)return 0;if(!$.support.boxModel)return outerWidth;var W=outerWidth-b($E,"Left")-b($E,"Right")-n($E,"paddingLeft")-n($E,"paddingRight");return max(0,W)},cssHeight:function($E,outerHeight){var b=$.layout.borderWidth,n=$.layout.cssNum;if(outerHeight<=0)return 0;if(!$.support.boxModel)return outerHeight;var H=outerHeight-b($E,"Top")-b($E,"Bottom")-n($E,"paddingTop")-n($E,"paddingBottom");return max(0,H)},cssNum:function($E,prop,allowAuto){if(!$E.jquery)$E=$($E);var CSS=$.layout.showInvisibly($E),p=$.curCSS($E[0],prop,true),v=allowAuto&&p=="auto"?p:parseInt(p,10)||0;$E.css(CSS);return v},borderWidth:function(el,side){if(el.jquery)el=el[0];var b="border"+side.substr(0,1).toUpperCase()+side.substr(1);return $.curCSS(el,b+"Style",true)==="none"?0:parseInt($.curCSS(el,b+"Width",true),10)||0},isMouseOverElem:function(evt,el){var $E=$(el||this),d=$E.offset(),T=d.top,L=d.left,R=L+$E.outerWidth(),B=T+$E.outerHeight(),x=evt.pageX,y=evt.pageY;return $.layout.browser.msie&&x<0&&y<0||x>=L&&x<=R&&y>=T&&y<=B},msg:function(info,popup,debugTitle,debugOpts){if($.isPlainObject(info)&&window.debugData){if(typeof popup==="string"){debugOpts=debugTitle;debugTitle=popup}else if(typeof debugTitle==="object"){debugOpts=debugTitle;debugTitle=null}var t=debugTitle||"log( <object> )",o=$.extend({sort:false,returnHTML:false,display:false},debugOpts);if(popup===true||o.display)debugData(info,t,o);else if(window.console)console.log(debugData(info,t,o))}else if(popup)alert(info);else if(window.console)console.log(info);else{var id="#layoutLogger",$l=$(id);if(!$l.length)$l=createLog();$l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+info.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}function createLog(){var pos=$.support.fixedPosition?"fixed":"absolute",$e=$('<div id="layoutLogger" style="position: '+pos+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">'+'<div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;">'+'<span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div>'+'<ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul>'+"</div>").appendTo("body");$e.css("left",$(window).width()-$e.outerWidth()-5);if($.ui.draggable)$e.draggable({handle:":first-child"});return $e}}};var lang=$.layout.language;$.layout.defaults={name:"",containerSelector:"",containerClass:"ui-layout-container",scrollToBookmarkOnLoad:true,resizeWithWindow:true,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,autoBindCustomButtons:false,initPanes:true,showErrorMessages:true,showDebugMessages:false,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},panes:{applyDemoStyles:false,closable:true,resizable:true,slidable:true,initClosed:false,initHidden:false,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:false,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:lang.Close,togglerTip_closed:lang.Open,togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:true,autoResize:true,autoReopen:true,resizerDragOpacity:1,maskContents:false,maskObjects:false,maskZindex:null,resizingGrid:false,livePaneResizing:false,liveContentResizing:false,liveResizingTolerance:1,noRoomToOpenTip:lang.noRoomToOpenTip,resizerTip:lang.Resize,sliderTip:lang.Slide,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:false,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:false,showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:true,animatePaneSizing:false,childOptions:null,initChildLayout:true,destroyChildLayout:true,resizeChildLayout:true,triggerEventsOnLoad:false,triggerEventsDuringLiveResize:true,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};$.layout.optionsMap={layout:("stateManagement,effects,zIndexes,"+"name,zIndex,scrollToBookmarkOnLoad,showErrorMessages,"+"resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,"+"onresizeall,onresizeall_start,onresizeall_end,onload,onunload,autoBindCustomButtons").split(","),center:("paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,"+"showOverflowOnHover,maskContents,maskObjects,liveContentResizing,"+"childOptions,initChildLayout,resizeChildLayout,destroyChildLayout,"+"onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end").split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")};$.layout.transformData=function(hash){var json={panes:{},center:{}},data,branch,optKey,keys,key,val,i,c;if(typeof hash!=="object")return json;for(optKey in hash){branch=json;data=$.layout.optionsMap.layout;val=hash[optKey];keys=optKey.split("__");c=keys.length-1;for(i=0;i<=c;i++){key=keys[i];if(i===c)branch[key]=val;else if(!branch[key])branch[key]={};branch=branch[key]}}return json};$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",resizeNestedLayout:"resizeChildLayout",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure"},renameOptions:function(opts){var map=$.layout.backwardCompatibility.map,oldData,newData,value;for(var itemPath in map){oldData=getBranch(itemPath);value=oldData.branch[oldData.key];if(value!==undefined){newData=getBranch(map[itemPath],true);newData.branch[newData.key]=value;delete oldData.branch[oldData.key]}}function getBranch(path,create){var a=path.split("."),c=a.length-1,D={branch:opts,key:a[c]},i=0,k,undef;for(;i<c;i++){k=a[i];if(D.branch[k]==undefined){if(create){D.branch=D.branch[k]={}}else D.branch={}}else D.branch=D.branch[k]}return D}},renameAllOptions:function(opts){var ren=$.layout.backwardCompatibility.renameOptions;ren(opts);if(opts.defaults){if(typeof opts.panes!=="object")opts.panes={};$.extend(true,opts.panes,opts.defaults);delete opts.defaults}if(opts.panes)ren(opts.panes);$.each($.layout.config.allPanes,function(i,pane){if(opts[pane])ren(opts[pane])});return opts}};$.fn.layout=function(opts){var browser=$.layout.browser,lang=$.layout.language,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,elCSS=$.layout.getElementCSS,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(true,{},$.layout.defaults),effects=options.effects=$.extend(true,{},$.layout.effects),state={id:"layout"+$.now(),initialized:false,container:{},north:{},south:{},east:{},west:{},center:{}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(s,fn,ms){timer.clear(s);timer.data[s]=setTimeout(fn,ms)},clear:function(s){var t=timer.data;if(t[s]){clearTimeout(t[s]);delete t[s]}}},_log=function(msg,popup){$.layout.msg(options.name+" / "+msg,popup&&options.showErrorMessages)},_runCallbacks=function(evtName,pane,skipBoundEvents){var o=pane?options[pane]:options,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng],retVal="NC",args=[];if(!fn&&shrt)fn=o[shrt];if(fn){if(isStr(fn)){if(fn.match(/,/)){args=fn.split(","),fn=eval(args[0])}else fn=eval(fn)}if($.isFunction(fn)){if(args.length)retVal=fn(args[1]);else if(pane&&$Ps[pane])retVal=fn(pane,$Ps[pane],state[pane],options[pane],options.name);else retVal=fn(Instance,state,options,options.name)}}if(!skipBoundEvents&&retVal!==false){if(pane){$Ps[pane].triggerHandler("layoutpane"+lng,[pane,$Ps[pane],state[pane],options[pane],options.name]);if(shrt)$Ps[pane].triggerHandler("layoutpane"+shrt,[pane,$Ps[pane],state[pane],options[pane],options.name])}else $N.triggerHandler("layout"+lng,[pane,$Ps[pane],state[pane],options[pane],options.name])}if(evtName==="onresize_end"||evtName==="onsizecontent_end")resizeChildLayout(pane);return retVal},_fixIframe=function(pane){if(browser.mozilla)return;var $P=$Ps[pane];if(state[pane].tagName==="IFRAME")$P.css(_c.hidden).css(_c.visible);else $P.find("IFRAME").css(_c.hidden).css(_c.visible)},cssSize=function(pane,outerSize){var fn=_c[pane].dir=="horz"?cssH:cssW;return fn($Ps[pane],outerSize)},cssMinDims=function(pane){var $P=$Ps[pane],dir=_c[pane].dir,d={minWidth:1001-cssW($P,1e3),minHeight:1001-cssH($P,1e3)};if(dir==="horz")d.minSize=d.minHeight;if(dir==="vert")d.minSize=d.minWidth;return d},setOuterWidth=function(el,outerWidth,autoHide){var $E=el,w;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);w=cssW($E,outerWidth);$E.css({width:w});if(w>0){if(autoHide&&$E.data("autoHidden")&&$E.innerHeight()>0){$E.show().data("autoHidden",false);if(!browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},setOuterHeight=function(el,outerHeight,autoHide){var $E=el,h;if(isStr(el))$E=$Ps[el];else if(!el.jquery)$E=$(el);h=cssH($E,outerHeight);$E.css({height:h,visibility:"visible"});if(h>0&&$E.innerWidth()>0){if(autoHide&&$E.data("autoHidden")){$E.show().data("autoHidden",false);if(!browser.mozilla)$E.css(_c.hidden).css(_c.visible)}}else if(autoHide&&!$E.data("autoHidden"))$E.hide().data("autoHidden",true)},setOuterSize=function(el,outerSize,autoHide){if(_c[pane].dir=="horz")setOuterHeight(el,outerSize,autoHide);else setOuterWidth(el,outerSize,autoHide)},_parseSize=function(pane,size,dir){if(!dir)dir=_c[pane].dir;if(isStr(size)&&size.match(/%/))size=size==="100%"?-1:parseInt(size,10)/100;if(size===0)return 0;else if(size>=1)return parseInt(size,10);var o=options,avail=0;if(dir=="horz")avail=sC.innerHeight-($Ps.north?o.north.spacing_open:0)-($Ps.south?o.south.spacing_open:0);else if(dir=="vert")avail=sC.innerWidth-($Ps.west?o.west.spacing_open:0)-($Ps.east?o.east.spacing_open:0);if(size===-1)return avail;else if(size>0)return round(avail*size);else if(pane=="center")return 0;else{var dim=dir==="horz"?"height":"width",$P=$Ps[pane],$C=dim==="height"?$Cs[pane]:false,vis=$.layout.showInvisibly($P),szP=$P.css(dim),szC=$C?$C.css(dim):0;$P.css(dim,"auto");if($C)$C.css(dim,"auto");size=dim==="height"?$P.outerHeight():$P.outerWidth();$P.css(dim,szP).css(vis);if($C)$C.css(dim,szC);return size}},getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=inclSpace?o.spacing_open:0,cSp=inclSpace?o.spacing_closed:0;if(!$P||s.isHidden)return 0;else if(s.isClosed||s.isSliding&&inclSpace)return cSp;else if(_c[pane].dir==="horz")return $P.outerHeight()+oSp;else return $P.outerWidth()+oSp},setSizeLimits=function(pane,slide){if(!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,side=c.side.toLowerCase(),type=c.sizeType.toLowerCase(),isSliding=slide!=undefined?slide:s.isSliding,$P=$Ps[pane],paneSpacing=o.spacing_open,altPane=_c.oppositeEdge[pane],altS=state[altPane],$altP=$Ps[altPane],altPaneSize=!$altP||altS.isVisible===false||altS.isSliding?0:dir=="horz"?$altP.outerHeight():$altP.outerWidth(),altPaneSpacing=(!$altP||altS.isHidden?0:options[altPane][altS.isClosed!==false?"spacing_closed":"spacing_open"])||0,containerSize=dir=="horz"?sC.innerHeight:sC.innerWidth,minCenterDims=cssMinDims("center"),minCenterSize=dir=="horz"?max(options.center.minHeight,minCenterDims.minHeight):max(options.center.minWidth,minCenterDims.minWidth),limitSize=containerSize-paneSpacing-(isSliding?0:_parseSize("center",minCenterSize,dir)+altPaneSize+altPaneSpacing),minSize=s.minSize=max(_parseSize(pane,o.minSize),cssMinDims(pane).minSize),maxSize=s.maxSize=min(o.maxSize?_parseSize(pane,o.maxSize):1e5,limitSize),r=s.resizerPosition={},top=sC.insetTop,left=sC.insetLeft,W=sC.innerWidth,H=sC.innerHeight,rW=o.spacing_open;switch(pane){case"north":r.min=top+minSize;r.max=top+maxSize;break;case"west":r.min=left+minSize;r.max=left+maxSize;break;case"south":r.min=top+H-maxSize-rW;r.max=top+H-minSize-rW;break;case"east":r.min=left+W-maxSize-rW;r.max=left+W-minSize-rW;break}},calcNewCenterPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};d.width=sC.innerWidth-d.left-d.right;d.height=sC.innerHeight-d.bottom-d.top;d.top+=sC.insetTop;d.bottom+=sC.insetBottom;d.left+=sC.insetLeft;d.right+=sC.insetRight;return d},getHoverClasses=function(el,allStates){var $El=$(el),type=$El.data("layoutRole"),pane=$El.data("layoutEdge"),o=options[pane],root=o[type+"Class"],_pane="-"+pane,_open="-open",_closed="-closed",_slide="-sliding",_hover="-hover ",_state=$El.hasClass(root+_closed)?_closed:_open,_alt=_state===_closed?_open:_closed,classes=root+_hover+(root+_pane+_hover)+(root+_state+_hover)+(root+_pane+_state+_hover);if(allStates)classes+=root+_alt+_hover+(root+_pane+_alt+_hover);if(type=="resizer"&&$El.hasClass(root+_slide))classes+=root+_slide+_hover+(root+_pane+_slide+_hover);return $.trim(classes)},addHover=function(evt,el){var $E=$(el||this);if(evt&&$E.data("layoutRole")==="toggler")evt.stopPropagation();$E.addClass(getHoverClasses($E))},removeHover=function(evt,el){var $E=$(el||this);$E.removeClass(getHoverClasses($E,true))},onResizerEnter=function(evt){if($.fn.disableSelection)$("body").disableSelection()},onResizerLeave=function(evt,el){var e=el||this,pane=$(e).data("layoutEdge"),name=pane+"ResizerLeave";timer.clear(pane+"_openSlider");timer.clear(name);if(!el)timer.set(name,function(){onResizerLeave(evt,e)},200);else if(!state[pane].isResizing&&$.fn.enableSelection)$("body").enableSelection()},_create=function(){initOptions();var o=options;state.creatingLayout=true;runPluginCallbacks(Instance,$.layout.onCreate);if(false===_runCallbacks("onload_start"))return"cancel";_initContainer();initHotkeys();$(window).bind("unload."+sID,unload);runPluginCallbacks(Instance,$.layout.onLoad);if(o.initPanes)_initLayoutElements();delete state.creatingLayout;return state.initialized},isInitialized=function(){if(state.initialized||state.creatingLayout)return true;else return _initLayoutElements()},_initLayoutElements=function(retry){var o=options;if(!$N.is(":visible")){if(!retry&&browser.webkit&&$N[0].tagName==="BODY")setTimeout(function(){_initLayoutElements(true)},50);return false}if(!getPane("center").length){if(options.showErrorMessages)_log(lang.errCenterPaneMissing,true);return false}state.creatingLayout=true;$.extend(sC,elDims($N));initPanes();if(o.scrollToBookmarkOnLoad){var l=self.location;if(l.hash)l.replace(l.hash)}if(Instance.hasParentLayout)o.resizeWithWindow=false;else if(o.resizeWithWindow)$(window).bind("resize."+sID,windowResize);delete state.creatingLayout;state.initialized=true;runPluginCallbacks(Instance,$.layout.onReady);_runCallbacks("onload_end");return true},_initChildLayouts=function(){$.each(_c.allPanes,function(idx,pane){if(options[pane].initChildLayout)createChildLayout(pane)})},createChildLayout=function(evt_or_pane,opts){var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],C=children;if($P){var $C=$Cs[pane],o=opts||options[pane].childOptions,d="layout",$Cont=o.containerSelector?$P.find(o.containerSelector):$C||$P,containerFound=$Cont.length,child=containerFound?C[pane]=$Cont.data(d)||null:null;if(!child&&containerFound&&o)child=C[pane]=$Cont.eq(0).layout(o)||null;if(child)child.hasParentLayout=true}Instance[pane].child=C[pane]},windowResize=function(){var delay=Number(options.resizeWithWindowDelay);if(delay<10)delay=100;timer.clear("winResize");timer.set("winResize",function(){timer.clear("winResize");timer.clear("winResizeRepeater");var dims=elDims($N);if(dims.innerWidth!==sC.innerWidth||dims.innerHeight!==sC.innerHeight)resizeAll()},delay);if(!timer.data["winResizeRepeater"])setWindowResizeRepeater()},setWindowResizeRepeater=function(){var delay=Number(options.resizeWithWindowMaxDelay);if(delay>0)timer.set("winResizeRepeater",function(){setWindowResizeRepeater();resizeAll()},delay)},unload=function(){var o=options;_runCallbacks("onunload_start");runPluginCallbacks(Instance,$.layout.onUnload);_runCallbacks("onunload_end")},_initContainer=function(){var N=$N[0],tag=sC.tagName=N.tagName,id=sC.id=N.id,cls=sC.className=N.className,o=options,name=o.name,fullPage=tag==="BODY",props="overflow,position,margin,padding,border",css="layoutCSS",CSS={},hid="hidden",parent=$N.data("parentLayout"),pane=$N.data("layoutEdge"),isChild=parent&&pane;sC.selector=$N.selector.split(".slice")[0];sC.ref=(o.name?o.name+" layout / ":"")+tag+(id?"#"+id:cls?".["+cls+"]":"");$N.data({layout:Instance,layoutContainer:sID}).addClass(o.containerClass);var layoutMethods={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"},name;for(name in layoutMethods){$N.bind("layout"+name.toLowerCase()+"."+sID,Instance[layoutMethods[name]||name])}if(isChild){Instance.hasParentLayout=true;parent[pane].child=parent.children[pane]=$N.data("layout")}if(!$N.data(css)){if(fullPage){CSS=$.extend(elCSS($N,props),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")});var $H=$("html");$H.data(css,{height:"auto",overflow:$H.css("overflow"),overflowX:$H.css("overflowX"),overflowY:$H.css("overflowY")})}else CSS=elCSS($N,props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY");$N.data(css,CSS)}try{if(fullPage){$("html").css({height:"100%",overflow:hid,overflowX:hid,overflowY:hid});$("body").css({position:"relative",height:"100%",overflow:hid,overflowX:hid,overflowY:hid,margin:0,padding:0,border:"none"});$.extend(sC,elDims($N))}else{CSS={overflow:hid,overflowX:hid,overflowY:hid};var p=$N.css("position"),h=$N.css("height");if(!isChild){if(!p||!p.match(/fixed|absolute|relative/))CSS.position="relative"}$N.css(CSS);if($N.is(":visible")){$.extend(sC,elDims($N));if(o.showErrorMessages&&sC.innerHeight<1)_log(lang.errContainerHeight.replace(/CONTAINER/,sC.ref),true)}}}catch(ex){}},initHotkeys=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).bind("keydown."+sID,keyDown);return false}})},initOptions=function(){var data,d,pane,key,val,i,c,o;opts=$.layout.transformData(opts);opts=$.layout.backwardCompatibility.renameAllOptions(opts);if(!$.isEmptyObject(opts.panes)){data=$.layout.optionsMap.noDefault;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}data=$.layout.optionsMap.layout;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key]}}data=$.layout.optionsMap.layout;var rootKeys=$.layout.config.optionRootKeys;for(key in opts){val=opts[key];if($.inArray(key,rootKeys)<0&&$.inArray(key,data)<0){if(!opts.panes[key])opts.panes[key]=$.isPlainObject(val)?$.extend(true,{},val):val;delete opts[key]}}$.extend(true,options,opts);$.each(_c.allPanes,function(i,pane){_c[pane]=$.extend(true,{},_c.panes,_c[pane]);d=options.panes;o=options[pane];if(pane==="center"){data=$.layout.optionsMap.center;for(i=0,c=data.length;i<c;i++){key=data[i];if(!opts.center[key]&&(opts.panes[key]||!o[key]))o[key]=d[key]}}else{o=options[pane]=$.extend({},d,o);createFxOptions(pane);if(!o.resizerClass)o.resizerClass="ui-layout-resizer";if(!o.togglerClass)o.togglerClass="ui-layout-toggler"}if(!o.paneClass)o.paneClass="ui-layout-pane"});var zo=opts.zIndex,z=options.zIndexes;if(zo>0){z.pane_normal=zo;z.content_mask=max(zo+1,z.content_mask);z.resizer_normal=max(zo+2,z.resizer_normal)}function createFxOptions(pane){var o=options[pane],d=options.panes;if(!o.fxSettings)o.fxSettings={};if(!d.fxSettings)d.fxSettings={};$.each(["_open","_close","_size"],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n,fxName=o[sName]=o[sName]||d[sName]||o.fxName||d.fxName||"none";if(fxName==="none"||!$.effects||!$.effects[fxName]||!options.effects[fxName])fxName=o[sName]="none";var fx=options.effects[fxName]||{},fx_all=fx.all||null,fx_pane=fx[pane]||null;o[sSpeed]=o[sSpeed]||d[sSpeed]||o.fxSpeed||d.fxSpeed||null;o[sSettings]=$.extend({},fx_all,fx_pane,d.fxSettings,o.fxSettings,d[sSettings],o[sSettings])});delete o.fxName;delete o.fxSpeed;delete o.fxSettings}delete options.panes},getPane=function(pane){var sel=options[pane].paneSelector;if(sel.substr(0,1)==="#")return $N.find(sel).eq(0);else{var $P=$N.children(sel).eq(0);return $P.length?$P:$N.children("form:first").children(sel).eq(0)}},initPanes=function(){$.each(_c.allPanes,function(idx,pane){addPane(pane,true)});initHandles();$.each(_c.borderPanes,function(i,pane){if($Ps[pane]&&state[pane].isVisible){setSizeLimits(pane);makePaneFit(pane)}});sizeMidPanes("center");$.each(_c.allPanes,function(i,pane){var o=options[pane];if($Ps[pane]){if(state[pane].isVisible){sizeContent(pane);if(o.triggerEventsOnLoad)_runCallbacks("onresize_end",pane);else resizeChildLayout(pane)}if(o.initChildLayout&&o.childOptions)createChildLayout(pane)}})},addPane=function(pane,force){if(!force&&!isInitialized())return;var o=options[pane],s=state[pane],c=_c[pane],fx=s.fx,dir=c.dir,spacing=o.spacing_open||0,isCenter=pane==="center",CSS={},$P=$Ps[pane],size,minSize,maxSize;if($P)removePane(pane,false,true,false);else $Cs[pane]=false;$P=$Ps[pane]=getPane(pane);if(!$P.length){$Ps[pane]=false;return}if(!$P.data("layoutCSS")){var props="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";$P.data("layoutCSS",elCSS($P,props))}Instance[pane]={name:pane,pane:$Ps[pane],content:$Cs[pane],options:options[pane],state:state[pane],child:children[pane]};$P.data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"pane"}).css(c.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+pane).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var paneMethods={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"manualSizePane",sizePane:"manualSizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildLayout:"",resizeChildLayout:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"},name;for(name in paneMethods){$P.bind("layoutpane"+name.toLowerCase()+"."+sID,Instance[paneMethods[name]||name])}initContent(pane,false);if(!isCenter){size=s.size=_parseSize(pane,o.size);minSize=_parseSize(pane,o.minSize)||1;maxSize=_parseSize(pane,o.maxSize)||1e5;if(size>0)size=max(min(size,maxSize),minSize);s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;if(!s.pins)s.pins=[]}s.tagName=$P[0].tagName;s.edge=pane;s.noRoom=false;s.isVisible=true;switch(pane){case"north":CSS.top=sC.insetTop;CSS.left=sC.insetLeft;CSS.right=sC.insetRight;break;case"south":CSS.bottom=sC.insetBottom;CSS.left=sC.insetLeft;CSS.right=sC.insetRight;break;case"west":CSS.left=sC.insetLeft;break;case"east":CSS.right=sC.insetRight;break;case"center":}if(dir==="horz")CSS.height=cssH($P,size);else if(dir==="vert")CSS.width=cssW($P,size);$P.css(CSS);if(dir!="horz")sizeMidPanes(pane,true);if(o.initClosed&&o.closable&&!o.initHidden)close(pane,true,true);else if(o.initHidden||o.initClosed)hide(pane);else if(!s.noRoom)$P.css("display","block");$P.css("visibility","visible");if(o.showOverflowOnHover)$P.hover(allowOverflow,resetOverflow);if(state.initialized){initHandles(pane);initHotkeys(pane);resizeAll();if(s.isVisible){if(o.triggerEventsOnLoad)_runCallbacks("onresize_end",pane);else resizeChildLayout(pane)}if(o.initChildLayout&&o.childOptions)createChildLayout(pane)}},initHandles=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P)return;var o=options[pane],s=state[pane],c=_c[pane],rClass=o.resizerClass,tClass=o.togglerClass,side=c.side.toLowerCase(),spacing=s.isVisible?o.spacing_open:o.spacing_closed,_pane="-"+pane,_state=s.isVisible?"-open":"-closed",I=Instance[pane],$R=I.resizer=$Rs[pane]=$("<div></div>"),$T=I.toggler=o.closable?$Ts[pane]=$("<div></div>"):false;if(!s.isVisible&&o.slidable)$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor);$R.attr("id",o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(o.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(rClass+" "+rClass+_pane).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N);if($T){$T.attr("id",o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(o.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(tClass+" "+tClass+_pane).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo($R);if(o.togglerContent_open)$("<span>"+o.togglerContent_open+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",pane).addClass("content content-open").css("display","none").appendTo($T);if(o.togglerContent_closed)$("<span>"+o.togglerContent_closed+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo($T);enableClosable(pane)}initResizable(pane);if(s.isVisible)setAsOpen(pane);else{setAsClosed(pane);bindStartSlidingEvent(pane,true)}});sizeHandles()},initContent=function(pane,resize){if(!isInitialized())return;var o=options[pane],sel=o.contentSelector,I=Instance[pane],$P=$Ps[pane],$C;if(sel)$C=I.content=$Cs[pane]=o.findNestedContent?$P.find(sel).eq(0):$P.children(sel).eq(0);if($C&&$C.length){$C.data("layoutRole","content");if(!$C.data("layoutCSS"))$C.data("layoutCSS",elCSS($C,"height"));$C.css(_c.content.cssReq);if(o.applyDemoStyles){$C.css(_c.content.cssDemo);$P.css(_c.content.cssDemoPane)}state[pane].content={};if(resize!==false)sizeContent(pane)}else I.content=$Cs[pane]=false},initResizable=function(panes){var draggingAvailable=$.layout.plugins.draggable,side;panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(idx,pane){var o=options[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var s=state[pane],z=options.zIndexes,c=_c[pane],side=c.dir=="horz"?"top":"left",opEdge=_c.oppositeEdge[pane],masks=pane+",center,"+opEdge+(c.dir=="horz"?",west,east":""),$P=$Ps[pane],$R=$Rs[pane],base=o.resizerClass,lastPos=0,r,live,resizerClass=base+"-drag",resizerPaneClass=base+"-"+pane+"-drag",helperClass=base+"-dragging",helperPaneClass=base+"-"+pane+"-dragging",helperLimitClass=base+"-dragging-limit",helperPaneLimitClass=base+"-"+pane+"-dragging-limit",helperClassesSet=false;if(!s.isClosed)$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor);$R.draggable({containment:$N[0],axis:c.dir=="horz"?"y":"x",delay:0,distance:1,grid:o.resizingGrid,helper:"clone",opacity:o.resizerDragOpacity,addClasses:false,zIndex:z.resizer_drag,start:function(e,ui){o=options[pane];s=state[pane];live=o.livePaneResizing;if(false===_runCallbacks("ondrag_start",pane))return false;s.isResizing=true;timer.clear(pane+"_closeSlider");setSizeLimits(pane);r=s.resizerPosition;lastPos=ui.position[side];$R.addClass(resizerClass+" "+resizerPaneClass);helperClassesSet=false;$("body").disableSelection();showMasks(masks)},drag:function(e,ui){if(!helperClassesSet){ui.helper.addClass(helperClass+" "+helperPaneClass).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden");helperClassesSet=true;if(s.isSliding)$Ps[pane].css("zIndex",z.pane_sliding)}var limit=0;if(ui.position[side]<r.min){ui.position[side]=r.min;limit=-1}else if(ui.position[side]>r.max){ui.position[side]=r.max;limit=1}if(limit){ui.helper.addClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=limit>0&&pane.match(/north|west/)||limit<0&&pane.match(/south|east/)?lang.maxSizeWarning:lang.minSizeWarning
}else{ui.helper.removeClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=""}if(live&&Math.abs(ui.position[side]-lastPos)>=o.liveResizingTolerance){lastPos=ui.position[side];resizePanes(e,ui,pane)}},stop:function(e,ui){$("body").enableSelection();window.defaultStatus="";$R.removeClass(resizerClass+" "+resizerPaneClass);s.isResizing=false;resizePanes(e,ui,pane,true,masks)}})});var resizePanes=function(evt,ui,pane,resizingDone,masks){var dragPos=ui.position,c=_c[pane],o=options[pane],s=state[pane],resizerPos;switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=sC.offsetHeight-dragPos.top-o.spacing_open;break;case"east":resizerPos=sC.offsetWidth-dragPos.left-o.spacing_open;break}var newSize=resizerPos-sC["inset"+c.side];if(!resizingDone){if(Math.abs(newSize-s.size)<o.liveResizingTolerance)return;manualSizePane(pane,newSize,false,true);sizeMasks()}else{if(false!==_runCallbacks("ondrag_end",pane))manualSizePane(pane,newSize,false,true);hideMasks();if(s.isSliding&&masks)showMasks(masks,true)}}},sizeMask=function(){var $M=$(this),pane=$M.data("layoutMask"),s=state[pane];if(s.tagName=="IFRAME"&&s.isVisible)$M.css({top:s.offsetTop,left:s.offsetLeft,width:s.outerWidth,height:s.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(panes,onlyForObjects){var a=panes?panes.split(","):$.layout.config.allPanes,z=options.zIndexes,o,s;$.each(a,function(i,p){s=state[p];o=options[p];if(s.isVisible&&(!onlyForObjects&&o.maskContents||o.maskObjects)){getMasks(p).each(function(){sizeMask.call(this);this.style.zIndex=s.isSliding?z.pane_sliding+1:z.pane_normal+1;this.style.display="block"})}})},hideMasks=function(){var skip;$.each($.layout.config.borderPanes,function(i,p){if(state[p].isResizing){skip=true;return false}});if(!skip)$Ms.hide()},getMasks=function(pane){var $Masks=$([]),$M,i=0,c=$Ms.length;for(;i<c;i++){$M=$Ms.eq(i);if($M.data("layoutMask")===pane)$Masks=$Masks.add($M)}if($Masks.length)return $Masks;else return createMasks(pane)},createMasks=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes,$Masks=$([]),isIframe,el,$M,css,i;if(!o.maskContents&&!o.maskObjects)return $Masks;for(i=0;i<(o.maskObjects?2:1);i++){isIframe=o.maskObjects&&i==0;el=document.createElement(isIframe?"iframe":"div");$M=$(el).data("layoutMask",pane);el.className="ui-layout-mask ui-layout-mask-"+pane;css=el.style;css.display="block";css.position="absolute";if(isIframe){el.frameborder=0;el.src="about:blank";css.opacity=0;css.filter="Alpha(Opacity='0')";css.border=0}if(s.tagName=="IFRAME"){css.zIndex=z.pane_normal+1;$N.append(el)}else{$M.addClass("ui-layout-mask-inside-pane");css.zIndex=o.maskZindex||z.content_mask;css.top=0;css.left=0;css.width="100%";css.height="100%";$P.append(el)}$Masks=$Masks.add(el);$Ms=$Ms.add(el)}return $Masks},destroy=function(destroyChildren){$(window).unbind("."+sID);$(document).unbind("."+sID);$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID);$Ms.remove();$.each(_c.allPanes,function(i,pane){removePane(pane,false,true,destroyChildren)});var css="layoutCSS";if($N.data(css)&&!$N.data("layoutRole"))$N.css($N.data(css)).removeData(css);if(sC.tagName==="BODY"&&($N=$("html")).data(css))$N.css($N.data(css)).removeData(css);runPluginCallbacks(Instance,$.layout.onDestroy);unload();for(n in Instance)if(!n.match(/^(container|options)$/))delete Instance[n];Instance.destroyed=true;return Instance},removePane=function(evt_or_pane,remove,skipResize,destroyChild){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$C=$Cs[pane],$R=$Rs[pane],$T=$Ts[pane];if($P&&$.isEmptyObject($P.data()))$P=false;if($C&&$.isEmptyObject($C.data()))$C=false;if($R&&$.isEmptyObject($R.data()))$R=false;if($T&&$.isEmptyObject($T.data()))$T=false;if($P)$P.stop(true,true);var o=options[pane],s=state[pane],d="layout",css="layoutCSS",child=children[pane]||($P?$P.data(d):0)||($C?$C.data(d):0)||null,destroy=destroyChild!==undefined?destroyChild:o.destroyChildLayout;if(destroy&&child&&!child.destroyed){child.destroy(true);if(child.destroyed)child=null}if($P&&remove&&!child)$P.remove();else if($P&&$P[0]){var root=o.paneClass,pRoot=root+"-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",classes=[root,root+_open,root+_closed,root+_sliding,pRoot,pRoot+_open,pRoot+_closed,pRoot+_sliding];$.merge(classes,getHoverClasses($P,true));$P.removeClass(classes.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID);if($C&&$C.data(d)){$C.width($C.width());child.resizeAll()}else if($C)$C.css($C.data(css)).removeData(css).removeData("layoutRole");if(!$P.data(d))$P.css($P.data(css)).removeData(css)}if($T)$T.remove();if($R)$R.remove();Instance[pane]=$Ps[pane]=$Cs[pane]=$Rs[pane]=$Ts[pane]=children[pane]=false;s={removed:true};if(!skipResize)resizeAll()},_hidePane=function(pane){var $P=$Ps[pane],o=options[pane],s=$P[0].style;if(o.useOffscreenClose){if(!$P.data(_c.offscreenReset))$P.data(_c.offscreenReset,{left:s.left,right:s.right});$P.css(_c.offscreenCSS)}else $P.hide().removeData(_c.offscreenReset)},_showPane=function(pane){var $P=$Ps[pane],o=options[pane],off=_c.offscreenCSS,old=$P.data(_c.offscreenReset),s=$P[0].style;$P.show().removeData(_c.offscreenReset);if(o.useOffscreenClose&&old){if(s.left==off.left)s.left=old.left;if(s.right==off.right)s.right=old.right}},hide=function(evt_or_pane,noAnimation){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden)return;if(state.initialized&&false===_runCallbacks("onhide_start",pane))return;s.isSliding=false;if($R)$R.hide();if(!state.initialized||s.isClosed){s.isClosed=true;s.isHidden=true;s.isVisible=false;if(!state.initialized)_hidePane(pane);sizeMidPanes(_c[pane].dir==="horz"?"":"center");if(state.initialized||o.triggerEventsOnLoad)_runCallbacks("onhide_end",pane)}else{s.isHiding=true;close(pane,false,noAnimation)}},show=function(evt_or_pane,openPane,noAnimation,noAlert){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden)return;if(false===_runCallbacks("onshow_start",pane))return;s.isSliding=false;s.isShowing=true;if(openPane===false)close(pane,true);else open(pane,false,noAnimation,noAlert)},toggle=function(evt_or_pane,slide){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane];if(evt)evt.stopImmediatePropagation();if(s.isHidden)show(pane);else if(s.isClosed)open(pane,!!slide);else close(pane)},_closePane=function(pane,setHandles){var $P=$Ps[pane],s=state[pane];_hidePane(pane);s.isClosed=true;s.isVisible=false},close=function(evt_or_pane,force,noAnimation,skipCallback){var pane=evtPane.call(this,evt_or_pane);if(!state.initialized&&$Ps[pane]){_closePane(pane);return}if(!isInitialized())return;var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing,isHiding,wasSliding;$N.queue(function(queueNext){if(!$P||!o.closable&&!s.isShowing&&!s.isHiding||!force&&s.isClosed&&!s.isShowing)return queueNext();var abort=!s.isShowing&&false===_runCallbacks("onclose_start",pane);isShowing=s.isShowing;isHiding=s.isHiding;wasSliding=s.isSliding;delete s.isShowing;delete s.isHiding;if(abort)return queueNext();doFX=!noAnimation&&!s.isClosed&&o.fxName_close!="none";s.isMoving=true;s.isClosed=true;s.isVisible=false;if(isHiding)s.isHidden=true;else if(isShowing)s.isHidden=false;if(s.isSliding)bindStopSlidingEvents(pane,false);else sizeMidPanes(_c[pane].dir==="horz"?"":"center",false);setAsClosed(pane);if(doFX){var masks="center"+(c.dir=="horz"?",west,east":"");showMasks(masks,true);lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(s.isClosed)close_2();queueNext()})}else{_hidePane(pane);close_2();queueNext()}});function close_2(){s.isMoving=false;bindStartSlidingEvent(pane,true);var altPane=_c.oppositeEdge[pane];if(state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane)}hideMasks();if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)){if(!isShowing)_runCallbacks("onclose_end",pane);if(isShowing)_runCallbacks("onshow_end",pane);if(isHiding)_runCallbacks("onhide_end",pane)}}},setAsClosed=function(pane){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side.toLowerCase(),inset="inset"+_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed";$R.css(side,sC[inset]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed).unbind("dblclick."+sID);if(o.resizable&&$.layout.plugins.draggable)$R.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed);$T.children(".content-open").hide();$T.children(".content-closed").css("display","block")}syncPinBtns(pane,false);if(state.initialized){sizeHandles()}},open=function(evt_or_pane,slide,noAnimation,noAlert){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing;$N.queue(function(queueNext){if(!$P||!o.resizable&&!o.closable&&!s.isShowing||s.isVisible&&!s.isSliding)return queueNext();if(s.isHidden&&!s.isShowing){queueNext();show(pane,true);return}if(o.autoResize&&s.size!=o.size)sizePane(pane,o.size,true,true,true);else setSizeLimits(pane,slide);var cbReturn=_runCallbacks("onopen_start",pane);if(cbReturn==="abort")return queueNext();if(cbReturn!=="NC")setSizeLimits(pane,slide);if(s.minSize>s.maxSize){syncPinBtns(pane,false);if(!noAlert&&o.noRoomToOpenTip)alert(o.noRoomToOpenTip);return queueNext()}if(slide)bindStopSlidingEvents(pane,true);else if(s.isSliding)bindStopSlidingEvents(pane,false);else if(o.slidable)bindStartSlidingEvent(pane,false);s.noRoom=false;makePaneFit(pane);isShowing=s.isShowing;delete s.isShowing;doFX=!noAnimation&&s.isClosed&&o.fxName_open!="none";s.isMoving=true;s.isVisible=true;s.isClosed=false;if(isShowing)s.isHidden=false;if(doFX){var masks="center"+(c.dir=="horz"?",west,east":"");if(s.isSliding)masks+=","+_c.oppositeEdge[pane];showMasks(masks,true);lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isVisible)open_2();queueNext()})}else{_showPane(pane);open_2();queueNext()}});function open_2(){s.isMoving=false;_fixIframe(pane);if(!s.isSliding){hideMasks();sizeMidPanes(_c[pane].dir=="vert"?"center":"",false)}setAsOpen(pane)}},setAsOpen=function(pane,skipCallback){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side.toLowerCase(),inset="inset"+_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding";$R.css(side,sC[inset]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open);if(s.isSliding)$R.addClass(rClass+_sliding+" "+rClass+_pane+_sliding);else $R.removeClass(rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizerDblClickToggle)$R.bind("dblclick",toggle);removeHover(0,$R);if(o.resizable&&$.layout.plugins.draggable)$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip);else if(!s.isSliding)$R.css("cursor","default");if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open);removeHover(0,$T);$T.children(".content-closed").hide();$T.children(".content-open").css("display","block")}syncPinBtns(pane,!s.isSliding);$.extend(s,elDims($P));if(state.initialized){sizeHandles();sizeContent(pane,true)}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)&&$P.is(":visible")){_runCallbacks("onopen_end",pane);if(s.isShowing)_runCallbacks("onshow_end",pane);if(state.initialized)_runCallbacks("onresize_end",pane)}},slideOpen=function(evt_or_pane){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane],delay=options[pane].slideDelay_open;if(evt)evt.stopImmediatePropagation();if(s.isClosed&&evt&&evt.type==="mouseenter"&&delay>0)timer.set(pane+"_openSlider",open_NOW,delay);else open_NOW();function open_NOW(){if(!s.isClosed)bindStopSlidingEvents(pane,true);else if(!s.isMoving)open(pane,true)}},slideClose=function(evt_or_pane){if(!isInitialized())return;var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],delay=s.isMoving?1e3:300;if(s.isClosed||s.isResizing)return;else if(o.slideTrigger_close==="click")close_NOW();else if(o.preventQuickSlideClose&&s.isMoving)return;else if(o.preventPrematureSlideClose&&evt&&$.layout.isMouseOverElem(evt,$Ps[pane]))return;else if(evt)timer.set(pane+"_closeSlider",close_NOW,max(o.slideDelay_close,delay));else close_NOW();function close_NOW(){if(s.isClosed)bindStopSlidingEvents(pane,false);else if(!s.isMoving)close(pane)}},slideToggle=function(evt_or_pane){var pane=evtPane.call(this,evt_or_pane);toggle(pane,true)},lockPaneForFX=function(pane,doLock){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes;if(doLock){$P.css({zIndex:z.pane_animate});if(pane=="south")$P.css({top:sC.insetTop+sC.innerHeight-$P.outerHeight()});else if(pane=="east")$P.css({left:sC.insetLeft+sC.innerWidth-$P.outerWidth()})}else{$P.css({zIndex:s.isSliding?z.pane_sliding:z.pane_normal});if(pane=="south")$P.css({top:"auto"});else if(pane=="east"&&!$P.css("left").match(/\-99999/))$P.css({left:"auto"});if(browser.msie&&o.fxOpacityFix&&o.fxName_open!="slide"&&$P.css("filter")&&$P.css("opacity")==1)$P[0].style.removeAttribute("filter")}},bindStartSlidingEvent=function(pane,enable){var o=options[pane],$P=$Ps[pane],$R=$Rs[pane],evtName=o.slideTrigger_open.toLowerCase();if(!$R||enable&&!o.slidable)return;if(evtName.match(/mouseover/))evtName=o.slideTrigger_open="mouseenter";else if(!evtName.match(/click|dblclick|mouseenter/))evtName=o.slideTrigger_open="click";$R[enable?"bind":"unbind"](evtName+"."+sID,slideOpen).css("cursor",enable?o.sliderCursor:"default").attr("title",enable?o.sliderTip:"")},bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],c=_c[pane],z=options.zIndexes,evtName=o.slideTrigger_close.toLowerCase(),action=enable?"bind":"unbind",$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;timer.clear(pane+"_closeSlider");if(enable)bindStartSlidingEvent(pane,false);$P.css("zIndex",enable?z.pane_sliding:z.pane_normal);$R.css("zIndex",enable?z.pane_sliding+2:z.resizer_normal);if(!evtName.match(/click|mouseleave/))evtName=o.slideTrigger_close="mouseleave";$R[action](evtName,slideClose);if(evtName==="mouseleave"){$P[action]("mouseleave."+sID,slideClose);$R[action]("mouseenter."+sID,cancelMouseOut);$P[action]("mouseenter."+sID,cancelMouseOut)}if(!enable)timer.clear(pane+"_closeSlider");else if(evtName==="click"&&!o.resizable){$R.css("cursor",enable?o.sliderCursor:"default");$R.attr("title",enable?o.togglerTip_open:"")}function cancelMouseOut(evt){timer.clear(pane+"_closeSlider");evt.stopPropagation()}},makePaneFit=function(pane,isOpening,skipCallback,force){var o=options[pane],s=state[pane],c=_c[pane],$P=$Ps[pane],$R=$Rs[pane],isSidePane=c.dir==="vert",hasRoom=false;if(pane==="center"||isSidePane&&s.noVerticalRoom){hasRoom=s.maxHeight>=0;if(hasRoom&&s.noRoom){_showPane(pane);if($R)$R.show();s.isVisible=true;s.noRoom=false;if(isSidePane)s.noVerticalRoom=false;_fixIframe(pane)}else if(!hasRoom&&!s.noRoom){_hidePane(pane);if($R)$R.hide();s.isVisible=false;s.noRoom=true}}if(pane==="center"){}else if(s.minSize<=s.maxSize){hasRoom=true;if(s.size>s.maxSize)sizePane(pane,s.maxSize,skipCallback,force,true);else if(s.size<s.minSize)sizePane(pane,s.minSize,skipCallback,force,true);else if($R&&s.isVisible&&$P.is(":visible")){var side=c.side.toLowerCase(),pos=s.size+sC["inset"+c.side];if($.layout.cssNum($R,side)!=pos)$R.css(side,pos)}if(s.noRoom){if(s.wasOpen&&o.closable){if(o.autoReopen)open(pane,false,true,true);else s.noRoom=false}else show(pane,s.wasOpen,true,true)}}else{if(!s.noRoom){s.noRoom=true;s.wasOpen=!s.isClosed&&!s.isSliding;if(s.isClosed){}else if(o.closable)close(pane,true,true);else hide(pane,true)}}},manualSizePane=function(evt_or_pane,size,skipCallback,noAnimation){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],forceResize=o.livePaneResizing&&!s.isResizing;o.autoResize=false;sizePane(pane,size,skipCallback,forceResize,noAnimation)},sizePane=function(evt_or_pane,size,skipCallback,force,noAnimation){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],side=_c[pane].side.toLowerCase(),dimName=_c[pane].sizeType.toLowerCase(),inset="inset"+_c[pane].side,skipResizeWhileDragging=s.isResizing&&!o.triggerEventsDuringLiveResize,doFX=noAnimation!==true&&o.animatePaneSizing,oldSize,newSize;$N.queue(function(queueNext){setSizeLimits(pane);oldSize=s.size;size=_parseSize(pane,size);size=max(size,_parseSize(pane,o.minSize));size=min(size,s.maxSize);if(size<s.minSize){queueNext();makePaneFit(pane,false,skipCallback);return}if(!force&&size===oldSize)return queueNext();if(!skipCallback&&state.initialized&&s.isVisible)_runCallbacks("onresize_start",pane);newSize=cssSize(pane,size);if(doFX&&$P.is(":visible")){var fx=$.layout.effects.size[pane]||$.layout.effects.size.all,easing=o.fxSettings_size.easing||fx.easing,z=options.zIndexes,props={};props[dimName]=newSize+"px";s.isMoving=true;$P.css({zIndex:z.pane_animate}).show().animate(props,o.fxSpeed_size,easing,function(){$P.css({zIndex:s.isSliding?z.pane_sliding:z.pane_normal});s.isMoving=false;sizePane_2();queueNext()})}else{$P.css(dimName,newSize);if($P.is(":visible"))sizePane_2();else{s.size=size;$.extend(s,elDims($P))}queueNext()}});function sizePane_2(){var actual=dimName==="width"?$P.outerWidth():$P.outerHeight(),tries=[{pane:pane,count:1,target:size,actual:actual,correct:size===actual,attempt:size,cssSize:newSize}],lastTry=tries[0],msg="Inaccurate size after resizing the "+pane+"-pane.";while(!lastTry.correct){thisTry={pane:pane,count:lastTry.count+1,target:size};if(lastTry.actual>size)thisTry.attempt=max(0,lastTry.attempt-(lastTry.actual-size));else thisTry.attempt=max(0,lastTry.attempt+(size-lastTry.actual));thisTry.cssSize=cssSize(pane,thisTry.attempt);$P.css(dimName,thisTry.cssSize);thisTry.actual=dimName=="width"?$P.outerWidth():$P.outerHeight();thisTry.correct=size===thisTry.actual;if(options.showDebugMessages){if(tries.length===1){_log(msg,false);_log(lastTry,false)}_log(thisTry,false)}if(tries.length>3)break;tries.push(thisTry);lastTry=tries[tries.length-1]}s.size=size;$.extend(s,elDims($P));if(s.isVisible&&$P.is(":visible")){if($R)$R.css(side,size+sC[inset]);sizeContent(pane)}if(!skipCallback&&!skipResizeWhileDragging&&state.initialized&&s.isVisible)_runCallbacks("onresize_end",pane);if(!skipCallback){if(!s.isSliding)sizeMidPanes(_c[pane].dir=="horz"?"":"center",skipResizeWhileDragging,force);sizeHandles()}var altPane=_c.oppositeEdge[pane];if(size<oldSize&&state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane,false,skipCallback)}if(options.showDebugMessages&&tries.length>1)_log(msg+"\nSee the Error Console for details.",true)}},sizeMidPanes=function(panes,skipCallback,force){panes=(panes?panes:"east,west,center").split(",");$.each(panes,function(i,pane){if(!$Ps[pane])return;var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],isCenter=pane=="center",hasRoom=true,CSS={},newCenter=calcNewCenterPaneDims();$.extend(s,elDims($P));if(pane==="center"){if(!force&&s.isVisible&&newCenter.width===s.outerWidth&&newCenter.height===s.outerHeight)return true;$.extend(s,cssMinDims(pane),{maxWidth:newCenter.width,maxHeight:newCenter.height});CSS=newCenter;CSS.width=cssW($P,CSS.width);CSS.height=cssH($P,CSS.height);hasRoom=CSS.width>=0&&CSS.height>=0;if(!state.initialized&&o.minWidth>s.outerWidth){var reqPx=o.minWidth-s.outerWidth,minE=options.east.minSize||0,minW=options.west.minSize||0,sizeE=state.east.size,sizeW=state.west.size,newE=sizeE,newW=sizeW;if(reqPx>0&&state.east.isVisible&&sizeE>minE){newE=max(sizeE-minE,sizeE-reqPx);reqPx-=sizeE-newE}if(reqPx>0&&state.west.isVisible&&sizeW>minW){newW=max(sizeW-minW,sizeW-reqPx);reqPx-=sizeW-newW}if(reqPx===0){if(sizeE!=minE)sizePane("east",newE,true,force,true);if(sizeW!=minW)sizePane("west",newW,true,force,true);sizeMidPanes("center",skipCallback,force);return}}}else{if(s.isVisible&&!s.noVerticalRoom)$.extend(s,elDims($P),cssMinDims(pane));if(!force&&!s.noVerticalRoom&&newCenter.height===s.outerHeight)return true;CSS.top=newCenter.top;CSS.bottom=newCenter.bottom;CSS.height=cssH($P,newCenter.height);s.maxHeight=CSS.height;hasRoom=s.maxHeight>=0;if(!hasRoom)s.noVerticalRoom=true}if(hasRoom){if(!skipCallback&&state.initialized)_runCallbacks("onresize_start",pane);$P.css(CSS);sizeHandles(pane);if(s.noRoom&&!s.isClosed&&!s.isHidden)makePaneFit(pane);if(s.isVisible){$.extend(s,elDims($P));if(state.initialized)sizeContent(pane)}}else if(!s.noRoom&&s.isVisible)makePaneFit(pane);if(!s.isVisible)return true;if(pane==="center"){var b=$.layout.browser;var fix=b.isIE6||b.msie&&!$.support.boxModel;if($Ps.north&&(fix||state.north.tagName=="IFRAME"))$Ps.north.css("width",cssW($Ps.north,sC.innerWidth));if($Ps.south&&(fix||state.south.tagName=="IFRAME"))$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}if(!skipCallback&&state.initialized)_runCallbacks("onresize_end",pane)})},resizeAll=function(){if(!state.initialized){_initLayoutElements();return}var oldW=sC.innerWidth,oldH=sC.innerHeight;if(!$N.is(":visible:"))return;$.extend(state.container,elDims($N));if(!sC.outerHeight)return;if(false===_runCallbacks("onresizeall_start"))return false;var shrunkH=sC.innerHeight<oldH,shrunkW=sC.innerWidth<oldW,$P,o,s,dir;$.each(["south","north","east","west"],function(i,pane){if(!$Ps[pane])return;s=state[pane];o=options[pane];dir=_c[pane].dir;if(o.autoResize&&s.size!=o.size)sizePane(pane,o.size,true,true,true);else{setSizeLimits(pane);makePaneFit(pane,false,true,true)}});sizeMidPanes("",true,true);sizeHandles();o=options;$.each(_c.allPanes,function(i,pane){$P=$Ps[pane];if(!$P)return;if(state[pane].isVisible)_runCallbacks("onresize_end",pane)});_runCallbacks("onresizeall_end")},resizeChildLayout=function(evt_or_pane){var pane=evtPane.call(this,evt_or_pane);if(!options[pane].resizeChildLayout)return;var $P=$Ps[pane],$C=$Cs[pane],d="layout",P=Instance[pane],L=children[pane];if(P.child&&!L){var el=P.child.container;L=children[pane]=(el?el.data(d):0)||null}if(L&&L.destroyed)L=children[pane]=null;if(!L)L=children[pane]=$P.data(d)||($C?$C.data(d):0)||null;P.child=children[pane];if(L)L.resizeAll()},sizeContent=function(evt_or_panes,remeasure){if(!isInitialized())return;var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.allPanes;$.each(panes,function(idx,pane){var $P=$Ps[pane],$C=$Cs[pane],o=options[pane],s=state[pane],m=s.content;if(!$P||!$C||!$P.is(":visible"))return true;if(!$C.length){initContent(pane,false);if(!$C)return}if(false===_runCallbacks("onsizecontent_start",pane))return;if(!s.isMoving&&!s.isResizing||o.liveContentResizing||remeasure||m.top==undefined){_measure();if(m.hiddenFooters>0&&$P.css("overflow")==="hidden"){$P.css("overflow","visible");_measure();$P.css("overflow","hidden")}}var newH=s.innerHeight-(m.spaceAbove-s.css.paddingTop)-(m.spaceBelow-s.css.paddingBottom);if(!$C.is(":visible")||m.height!=newH){setOuterHeight($C,newH,true);m.height=newH}if(state.initialized)_runCallbacks("onsizecontent_end",pane);function _below($E){return max(s.css.paddingBottom,parseInt($E.css("marginBottom"),10)||0)}function _measure(){var ignore=options[pane].contentIgnoreSelector,$Fs=$C.nextAll().not(ignore||":lt(0)"),$Fs_vis=$Fs.filter(":visible"),$F=$Fs_vis.filter(":last");m={top:$C[0].offsetTop,height:$C.outerHeight(),numFooters:$Fs.length,hiddenFooters:$Fs.length-$Fs_vis.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;if($F.length)m.spaceBelow=$F[0].offsetTop+$F.outerHeight()-m.bottom+_below($F);else m.spaceBelow=_below($C)}})},sizeHandles=function(evt_or_panes){var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],$TC;if(!$P||!$R)return;var dir=_c[pane].dir,_state=s.isClosed?"_closed":"_open",spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,left,offset,CSS={};if(spacing===0){$R.hide();return}else if(!s.noRoom&&!s.isHidden)$R.show();if(dir==="horz"){paneLen=sC.innerWidth;s.resizerLength=paneLen;left=$.layout.cssNum($P,"left");$R.css({width:cssW($R,paneLen),height:cssH($R,spacing),left:left>-9999?left:sC.insetLeft})}else{paneLen=$P.outerHeight();s.resizerLength=paneLen;$R.css({height:cssH($R,paneLen),width:cssW($R,spacing),top:sC.insetTop+getPaneSize("north",true)})}removeHover(o,$R);if($T){if(togLen===0||s.isSliding&&o.hideTogglerOnSlide){$T.hide();return}else $T.show();if(!(togLen>0)||togLen==="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(isStr(togAlign)){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=round((paneLen-togLen)/2)}}else{var x=parseInt(togAlign,10);if(togAlign>=0)offset=x;else offset=paneLen-togLen+x}}if(dir==="horz"){var width=cssW($T,togLen);$T.css({width:width,height:cssH($T,spacing),left:offset,top:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginLeft",round((width-$TC.outerWidth())/2))})}else{var height=cssH($T,togLen);$T.css({height:height,width:cssW($T,spacing),top:offset,left:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginTop",round((height-$TC.outerHeight())/2))})}removeHover(0,$T)}if(!state.initialized&&(o.initHidden||s.noRoom)){$R.hide();if($T)$T.hide()}})},enableClosable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane],o=options[pane];if(!$T)return;o.closable=true;$T.bind("click."+sID,function(evt){evt.stopPropagation();toggle(pane)}).css("visibility","visible").css("cursor","pointer").attr("title",state[pane].isClosed?o.togglerTip_closed:o.togglerTip_open).show()},disableClosable=function(evt_or_pane,hide){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane];if(!$T)return;options[pane].closable=false;if(state[pane].isClosed)open(pane,false,true);$T.unbind("."+sID).css("visibility",hide?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].slidable=true;if(s.isClosed)bindStartSlidingEvent(pane,true)},disableSlidable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R)return;options[pane].slidable=false;if(state[pane].isSliding)close(pane,false,true);else{bindStartSlidingEvent(pane,false);$R.css("cursor","default").attr("title","");removeHover(null,$R[0])}},enableResizable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable"))return;o.resizable=true;$R.draggable("enable");if(!state[pane].isClosed)$R.css("cursor",o.resizerCursor).attr("title",o.resizerTip)},disableResizable=function(evt_or_pane){if(!isInitialized())return;var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable"))return;options[pane].resizable=false;$R.draggable("disable").css("cursor","default").attr("title","");removeHover(null,$R[0])},swapPanes=function(evt_or_pane1,pane2){if(!isInitialized())return;var pane1=evtPane.call(this,evt_or_pane1);state[pane1].edge=pane2;state[pane2].edge=pane1;if(false===_runCallbacks("onswap_start",pane1)||false===_runCallbacks("onswap_start",pane2)){state[pane1].edge=pane1;state[pane2].edge=pane2;return}var oPane1=copy(pane1),oPane2=copy(pane2),sizes={};sizes[pane1]=oPane1?oPane1.state.size:0;sizes[pane2]=oPane2?oPane2.state.size:0;$Ps[pane1]=false;$Ps[pane2]=false;state[pane1]={};state[pane2]={};if($Ts[pane1])$Ts[pane1].remove();if($Ts[pane2])$Ts[pane2].remove();if($Rs[pane1])$Rs[pane1].remove();if($Rs[pane2])$Rs[pane2].remove();$Rs[pane1]=$Rs[pane2]=$Ts[pane1]=$Ts[pane2]=false;move(oPane1,pane2);move(oPane2,pane1);oPane1=oPane2=sizes=null;if($Ps[pane1])$Ps[pane1].css(_c.visible);if($Ps[pane2])$Ps[pane2].css(_c.visible);resizeAll();_runCallbacks("onswap_end",pane1);_runCallbacks("onswap_end",pane2);return;function copy(n){var $P=$Ps[n],$C=$Cs[n];return!$P?false:{pane:n,P:$P?$P[0]:false,C:$C?$C[0]:false,state:$.extend(true,{},state[n]),options:$.extend(true,{},options[n])}}function move(oPane,pane){if(!oPane)return;var P=oPane.P,C=oPane.C,oldPane=oPane.pane,c=_c[pane],side=c.side.toLowerCase(),inset="inset"+c.side,s=$.extend({},state[pane]),o=options[pane],fx={resizerCursor:o.resizerCursor},re,size,pos;$.each("fxName,fxSpeed,fxSettings".split(","),function(i,k){fx[k+"_open"]=o[k+"_open"];fx[k+"_close"]=o[k+"_close"];fx[k+"_size"]=o[k+"_size"]});$Ps[pane]=$(P).data({layoutPane:Instance[pane],layoutEdge:pane}).css(_c.hidden).css(c.cssReq);$Cs[pane]=C?$(C):false;options[pane]=$.extend({},oPane.options,fx);state[pane]=$.extend({},oPane.state);re=new RegExp(o.paneClass+"-"+oldPane,"g");P.className=P.className.replace(re,o.paneClass+"-"+pane);initHandles(pane);if(c.dir!=_c[oldPane].dir){size=sizes[pane]||0;setSizeLimits(pane);size=max(size,state[pane].minSize);manualSizePane(pane,size,true,true)}else $Rs[pane].css(side,sC[inset]+(state[pane].isVisible?getPaneSize(pane):0));if(oPane.state.isVisible&&!s.isVisible)setAsOpen(pane,true);else{setAsClosed(pane);bindStartSlidingEvent(pane,true)}oPane=null}},syncPinBtns=function(pane,doPin){if($.layout.plugins.buttons)$.each(state[pane].pins,function(i,selector){$.layout.buttons.setPinState(Instance,$(selector),pane,doPin)})};function keyDown(evt){if(!evt)return true;var code=evt.keyCode;if(code<33)return true;var PANE={38:"north",40:"south",37:"west",39:"east"},ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,CURSOR=CTRL&&code>=37&&code<=40,o,k,m,pane;if(CURSOR&&options[PANE[code]].enableCursorHotkey)pane=PANE[code];else if(CTRL||SHIFT)$.each(_c.borderPanes,function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if(SHIFT&&m=="SHIFT"||CTRL&&m=="CTRL"||CTRL&&SHIFT){if(k&&code===(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}});if(!pane||!$Ps[pane]||!options[pane].closable||state[pane].isHidden)return true;toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane];if(s.cssSaved)resetOverflow(pane);if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:options.zIndexes.resizer_normal+1},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&!ofX.match(/visible|auto/)){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&!ofY.match(/visible|auto/)){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(_c.allPanes,function(i,p){if(p!=pane)resetOverflow(p)
})}function resetOverflow(el){if(!isInitialized())return;if(this&&this.tagName)el=this;var $P;if(isStr(el))$P=$Ps[el];else if($(el).data("layoutRole"))$P=$(el);else $(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false}});if(!$P||!$P.length)return;var pane=$P.data("layoutEdge"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing)$P.css("zIndex",options.zIndexes.pane_normal);$P.css(CSS);s.cssSaved=false}var $N=$(this).eq(0);if(!$N.length){if(options.showErrorMessages)_log(lang.errContainerMissing,true);return null}if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id;var Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,initContent:initContent,addPane:addPane,removePane:removePane,createChildLayout:createChildLayout,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:false,children:children,north:false,south:false,west:false,east:false,center:false};if(_create()==="cancel")return null;else return Instance};if(!$.ui)$.ui={};$.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(name){var c=document.cookie,cs=c?c.split(";"):[],pair;for(var i=0,n=cs.length;i<n;i++){pair=$.trim(cs[i]).split("=");if(pair[0]==name)return decodeURIComponent(pair[1])}return null},write:function(name,val,cookieOpts){var params="",date="",clear=false,o=cookieOpts||{},x=o.expires;if(x&&x.toUTCString)date=x;else if(x===null||typeof x==="number"){date=new Date;if(x>0)date.setDate(date.getDate()+x);else{date.setFullYear(1970);clear=true}}if(date)params+=";expires="+date.toUTCString();if(o.path)params+=";path="+o.path;if(o.domain)params+=";domain="+o.domain;if(o.secure)params+=";secure";document.cookie=name+"="+(clear?"":encodeURIComponent(val))+params},clear:function(name){$.ui.cookie.write(name,"",{expires:-1})}};if(!$.cookie)$.cookie=function(k,v,o){var C=$.ui.cookie;if(v===null)C.clear(k);else if(v===undefined)return C.read(k);else C.write(k,v,o)};$.layout.plugins.stateManagement=true;$.layout.config.optionRootKeys.push("stateManagement");$.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,stateKeys:"north.size,south.size,east.size,west.size,"+"north.isClosed,south.isClosed,east.isClosed,west.isClosed,"+"north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:false}};$.layout.optionsMap.layout.push("stateManagement");$.layout.state={saveCookie:function(inst,keys,cookieOpts){var o=inst.options,oS=o.stateManagement,oC=$.extend(true,{},oS.cookie,cookieOpts||null),data=inst.state.stateData=inst.readState(keys||oS.stateKeys);$.ui.cookie.write(oC.name||o.name||"Layout",$.layout.state.encodeJSON(data),oC);return $.extend(true,{},data)},deleteCookie:function(inst){var o=inst.options;$.ui.cookie.clear(o.stateManagement.cookie.name||o.name||"Layout")},readCookie:function(inst){var o=inst.options;var c=$.ui.cookie.read(o.stateManagement.cookie.name||o.name||"Layout");return c?$.layout.state.decodeJSON(c):{}},loadCookie:function(inst){var c=$.layout.state.readCookie(inst);if(c){inst.state.stateData=$.extend(true,{},c);inst.loadState(c)}return c},loadState:function(inst,stateData,animate){stateData=$.layout.transformData(stateData);if($.isEmptyObject(stateData))return;$.extend(true,inst.options,stateData);if(inst.state.initialized){var pane,vis,o,s,h,c,noAnimate=animate===false;$.each($.layout.config.borderPanes,function(idx,pane){state=inst.state[pane];o=stateData[pane];if(typeof o!="object")return;s=o.size;c=o.initClosed;h=o.initHidden;vis=state.isVisible;if(!vis)inst.sizePane(pane,s,false,false);if(h===true)inst.hide(pane,noAnimate);else if(c===false)inst.open(pane,false,noAnimate);else if(c===true)inst.close(pane,false,noAnimate);else if(h===false)inst.show(pane,false,noAnimate);if(vis)inst.sizePane(pane,s,false,noAnimate)})}},readState:function(inst,keys){var data={},alt={isClosed:"initClosed",isHidden:"initHidden"},state=inst.state,panes=$.layout.config.allPanes,pair,pane,key,val;if(!keys)keys=inst.options.stateManagement.stateKeys;if($.isArray(keys))keys=keys.join(",");keys=keys.replace(/__/g,".").split(",");for(var i=0,n=keys.length;i<n;i++){pair=keys[i].split(".");pane=pair[0];key=pair[1];if($.inArray(pane,panes)<0)continue;val=state[pane][key];if(val==undefined)continue;if(key=="isClosed"&&state[pane]["isSliding"])val=true;(data[pane]||(data[pane]={}))[alt[key]?alt[key]:key]=val}return data},encodeJSON:function(JSON){return parse(JSON);function parse(h){var D=[],i=0,k,v,t;for(k in h){v=h[k];t=typeof v;if(t=="string")v='"'+v+'"';else if(t=="object")v=parse(v);D[i++]='"'+k+'":'+v}return"{"+D.join(",")+"}"}},decodeJSON:function(str){try{return $.parseJSON?$.parseJSON(str):window["eval"]("("+str+")")||{}}catch(e){return{}}},_create:function(inst){var _=$.layout.state;$.extend(inst,{readCookie:function(){return _.readCookie(inst)},deleteCookie:function(){_.deleteCookie(inst)},saveCookie:function(keys,cookieOpts){return _.saveCookie(inst,keys,cookieOpts)},loadCookie:function(){return _.loadCookie(inst)},loadState:function(stateData,animate){_.loadState(inst,stateData,animate)},readState:function(keys){return _.readState(inst,keys)},encodeJSON:_.encodeJSON,decodeJSON:_.decodeJSON});inst.state.stateData={};var oS=inst.options.stateManagement;if(oS.enabled){if(oS.autoLoad)inst.loadCookie();else inst.state.stateData=inst.readCookie()}},_unload:function(inst){var oS=inst.options.stateManagement;if(oS.enabled){if(oS.autoSave)inst.saveCookie();else inst.state.stateData=inst.readState()}}};$.layout.onCreate.push($.layout.state._create);$.layout.onUnload.push($.layout.state._unload);$.layout.plugins.buttons=true;$.layout.defaults.autoBindCustomButtons=false;$.layout.optionsMap.layout.push("autoBindCustomButtons");var lang=$.layout.language;$.layout.buttons={init:function(inst){var pre="ui-layout-button-",layout=inst.options.name||"",name;$.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(i,action){$.each($.layout.config.borderPanes,function(ii,pane){$("."+pre+action+"-"+pane).each(function(){name=$(this).data("layoutName")||$(this).attr("layoutName");if(name==undefined||name===layout)inst.bindButton(this,action,pane)})})})},get:function(inst,selector,pane,action){var $E=$(selector),o=inst.options,err=o.showErrorMessages;if(!$E.length){if(err)$.layout.msg(lang.errButton+lang.selector+": "+selector,true)}else if($.inArray(pane,$.layout.config.borderPanes)<0){if(err)$.layout.msg(lang.errButton+lang.pane+": "+pane,true);$E=$("")}else{var btn=o[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane).data("layoutName",o.name)}return $E},bind:function(inst,selector,action,pane){var _=$.layout.buttons;switch(action.toLowerCase()){case"toggle":_.addToggle(inst,selector,pane);break;case"open":_.addOpen(inst,selector,pane);break;case"close":_.addClose(inst,selector,pane);break;case"pin":_.addPin(inst,selector,pane);break;case"toggle-slide":_.addToggle(inst,selector,pane,true);break;case"open-slide":_.addOpen(inst,selector,pane,true);break}return inst},addToggle:function(inst,selector,pane,slide){$.layout.buttons.get(inst,selector,pane,"toggle").click(function(evt){inst.toggle(pane,!!slide);evt.stopPropagation()});return inst},addOpen:function(inst,selector,pane,slide){$.layout.buttons.get(inst,selector,pane,"open").attr("title",lang.Open).click(function(evt){inst.open(pane,!!slide);evt.stopPropagation()});return inst},addClose:function(inst,selector,pane){$.layout.buttons.get(inst,selector,pane,"close").attr("title",lang.Close).click(function(evt){inst.close(pane);evt.stopPropagation()});return inst},addPin:function(inst,selector,pane){var _=$.layout.buttons,$E=_.get(inst,selector,pane,"pin");if($E.length){var s=inst.state[pane];$E.click(function(evt){_.setPinState(inst,$(this),pane,s.isSliding||s.isClosed);if(s.isSliding||s.isClosed)inst.open(pane);else inst.close(pane);evt.stopPropagation()});_.setPinState(inst,$E,pane,!s.isClosed&&!s.isSliding);s.pins.push(selector)}return inst},setPinState:function(inst,$Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin===(updown=="down"))return;var pin=inst.options[pane].buttonClass+"-pin",side=pin+"-"+pane,UP=pin+"-up "+side+"-up",DN=pin+"-down "+side+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?lang.Unpin:lang.Pin).removeClass(doPin?UP:DN).addClass(doPin?DN:UP)},syncPinBtns:function(inst,pane,doPin){$.each(state[pane].pins,function(i,selector){$.layout.buttons.setPinState(inst,$(selector),pane,doPin)})},_load:function(inst){var _=$.layout.buttons;$.extend(inst,{bindButton:function(sel,action,pane){return _.bind(inst,sel,action,pane)},addToggleBtn:function(sel,pane,slide){return _.addToggle(inst,sel,pane,slide)},addOpenBtn:function(sel,pane,slide){return _.addOpen(inst,sel,pane,slide)},addCloseBtn:function(sel,pane){return _.addClose(inst,sel,pane)},addPinBtn:function(sel,pane){return _.addPin(inst,sel,pane)}});for(var i=0;i<4;i++){var pane=$.layout.config.borderPanes[i];inst.state[pane].pins=[]}if(inst.options.autoBindCustomButtons)_.init(inst)},_unload:function(inst){}};$.layout.onLoad.push($.layout.buttons._load);$.layout.plugins.browserZoom=true;$.layout.defaults.browserZoomCheckInterval=1e3;$.layout.optionsMap.layout.push("browserZoomCheckInterval");$.layout.browserZoom={_init:function(inst){if($.layout.browserZoom.ratio()!==false)$.layout.browserZoom._setTimer(inst)},_setTimer:function(inst){if(inst.destroyed)return;var o=inst.options,s=inst.state,ms=inst.hasParentLayout?5e3:Math.max(o.browserZoomCheckInterval,100);setTimeout(function(){if(inst.destroyed||!o.resizeWithWindow)return;var d=$.layout.browserZoom.ratio();if(d!==s.browserZoom){s.browserZoom=d;inst.resizeAll()}$.layout.browserZoom._setTimer(inst)},ms)},ratio:function(){var w=window,s=screen,d=document,dE=d.documentElement||d.body,b=$.layout.browser,v=b.version,r,sW,cW;if(b.msie&&v>8||!b.msie)return false;if(s.deviceXDPI)return calc(s.deviceXDPI,s.systemXDPI);if(b.webkit&&(r=d.body.getBoundingClientRect))return calc(r.left-r.right,d.body.offsetWidth);if(b.webkit&&(sW=w.outerWidth))return calc(sW,w.innerWidth);if((sW=s.width)&&(cW=dE.clientWidth))return calc(sW,cW);return false;function calc(x,y){return(parseInt(x,10)/parseInt(y,10)*100).toFixed()}}};$.layout.onReady.push($.layout.browserZoom._init)}(jQuery);define("libs/jquery/layout/jquery.layout",function(){});define("app/layout",["rtext!templates/layout.full.html","app/util/storagemonitor","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/layout/jquery.layout"],function(template,createStore){var STORE_KEY="pg-labcoat-layout",store=createStore(STORE_KEY,{support:false});var toolbarMainHeight=38,toolbarHeight=36,doubleBar=50,statusbarHeight=24;return function(container,isvertical){var layout,layouts=[];if((container===true||container===false)&&"undefined"===typeof isvertical){isvertical=container;container=$("body")}else{container=container&&$(container)||$("body")}container.append(template);layouts.push(container.layout());var defaults={initClosed:false,resizable:true,slidable:true},toolbar={resizable:false,closable:false,slidable:false,size:toolbarHeight,spacing_open:0,spacing_closed:0},toolbarDouble={resizable:false,closable:false,slidable:false,size:doubleBar,spacing_open:0,spacing_closed:0},statusbar=$.extend({},toolbar,{size:statusbarHeight});function refreshLayouts(){for(var i=0;i<layouts.length;i++){layouts[i].resizeAll()}}layouts.push(container.find(".pg-labcoat").layout({defaults:defaults,north:$.extend({},toolbar,{size:toolbarMainHeight}),west:{size:220,initClosed:false}}));layouts.push(container.find(".pg-system").layout({defaults:defaults,south:{size:"50%",initClosed:false}}));layouts.push(container.find(".pg-folders").layout({defaults:defaults,north:toolbarDouble}));layouts.push(container.find(".pg-queries").layout({defaults:defaults,north:toolbarDouble}));layouts.push(container.find(".pg-main").layout({defaults:defaults,south:{size:114,initClosed:true}}));layouts.push(container.find(".pg-editor-support").layout({defaults:defaults,east:{size:"40%",maxSize:800,minSize:305,initClosed:store.get("support"),maskIframesOnResize:true,onclose:function(){store.set("support",true)},onopen:function(){store.set("support",false)}}}));layouts.push(container.find(".pg-editor").layout({defaults:defaults,south:statusbar}));var lio,linput,loutput;function buildIO(vertical){var panels;if(lio){layouts.splice(layouts.indexOf(lio),1);layouts.splice(layouts.indexOf(linput),1);layouts.splice(layouts.indexOf(loutput),1);lio.destroy()}if(vertical){container.find(".pg-output").removeClass("ui-layout-east").addClass("ui-layout-south");panels={defaults:defaults,south:{size:"50%",closable:false}}}else{container.find(".pg-output").removeClass("ui-layout-south").addClass("ui-layout-east");panels={defaults:defaults,east:{size:"50%",closable:false}}}layouts.push(lio=container.find(".pg-io").layout(panels));layouts.push(loutput=container.find(".pg-output").layout({defaults:defaults,north:toolbar}));layouts.push(linput=container.find(".pg-input").layout({defaults:defaults,north:toolbar,onresize:function(){$(layout).trigger("resizeCodeEditor")}}));container.find(".ui-layout-resizer").addClass("ui-widget-shadow");isvertical=vertical;$(layout).trigger("resizeCodeEditor");$(layout).trigger("ioOrientationChanged",isvertical)}buildIO(isvertical);container.addClass("ui-widget-content");container.find(".pg-pane").addClass("ui-widget-content");container.find(".ui-layout-toggler").mouseenter(function(){$(this).addClass("ui-state-hover")}).mouseleave(function(){$(this).removeClass("ui-state-hover")}).addClass("ui-widget-header");container.find(".ui-layout-resizer-dragging").addClass("ui-state-hover");return layout={container:container,refresh:refreshLayouts,getContainer:function(){return container.find(".pg-labcoat")},getInput:function(){return container.find(".pg-input")},getBarEditor:function(){return container.find(".pg-input .pg-toolbar")},getBarMain:function(){return container.find(".pg-mainbar")},getCodeEditor:function(){return container.find(".pg-input .pg-code-editor")},getOutput:function(){return container.find(".pg-output")},getStatusBar:function(){return container.find(".pg-statusbar")},getSystem:function(){return container.find(".pg-folders")},getQueries:function(){return container.find(".pg-queries")},getSupport:function(){return container.find(".pg-support")},getResults:function(){return container.find(".pg-results")},setIoVertical:buildIO,isIoVertical:function(){return isvertical}}}});define("rtext!templates/dialog.account.html",[],function(){return'<div class="pg-dialog-account">\n    <div>\n        <iframe id="blankiframe" name="blankiframe" style="display: none"></iframe>\n        <form action="https://labcoat.precog.com/actions/login" class="login signin" method="post" target="blankiframe">\n            <div>\n                <div class="row banner">\n                </div>\n                <div class="row poweredby">\n                    powered by <a href="http://www.precog.com/" target="_blank"><img src="css/images/logo-dark-precog.png" alt="precog"></a>\n                </div>\n                <div class="row header">\n                    <div class="field left">\n                        <p>\n                            <label>\n                                <input type="radio" class="choose-ui" name="choose-ui" value="login" tabindex="0">\n                                I have an existing account\n                            </label>\n                        </p>\n                        <p>\n                            <label>\n                                <input type="radio" class="choose-ui" name="choose-ui" value="create" tabindex="1">\n                                I need to create a new account\n                            </label>\n                        </p>\n                    </div>\n                    <p class="or-vertical"></p>\n                    <div class="field right content-right">\n                        <button class="try-demo ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" tabindex="2"><span class="ui-button-text">Try Demo!</span></button>\n                    </div>\n                </div>\n            </div>\n            <div class="form">\n                <div class="row">\n                    <div class="field left">\n                        <label for="email">Email</label>\n                        <div class="control"><input class="username" type="text" name="email" id="email" tabindex="3"></div>\n                        <div class="error username ui-content ui-state-error ui-corner-all"></div>\n                    </div>\n                    <div class="field right">\n                        <label for="password">Password</label>\n                        <div class="control"><input class="password" type="password" name="password" id="password" tabindex="4"></div>\n                        <div class="error password ui-content ui-state-error ui-corner-all"></div>\n                    </div>\n                </div>\n                <div id="form-error">\n                    <div class="row error ui-content ui-state-error ui-corner-all">\n\n                    </div>\n                </div>\n                <div class="create">\n                    <div class="row">\n                        <div class="field left">\n                            <label for="account-name">Name</label>\n                            <div class="control"><input type="text" name="account-name" id="account-name" tabindex="6"></div>\n                            <div class="error account-name ui-content ui-state-error ui-corner-all"></div>\n                        </div>\n                        <div class="field right">\n                            <label for="account-confirm-password">Confirm Password</label>\n                            <div class="control"><input type="password" name="account-confirm-password" id="account-confirm-password" tabindex="5"></div>\n                            <div class="error account-confirm-password ui-content ui-state-error ui-corner-all"></div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="field left">\n                            <label for="account-company">Company</label>\n                            <div class="control"><input type="text" name="account-company" id="account-company" tabindex="7"></div>\n                            <div class="error account-company ui-content ui-state-error ui-corner-all"></div>\n                        </div>\n                        <div class="field right">\n                            <label for="account-title">Title</label>\n                            <div class="control"><input type="text" name="account-title" id="account-title" tabindex="8"></div>\n                            <div class="error account-title ui-content ui-state-error ui-corner-all"></div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="field right">\n                            <div class="control">\n                                <label><input type="checkbox" name="account-accept" id="account-accept" tabindex="9">I accept the <a href="http://www.precog.com/legal/" target="_blank">terms of service agreement</a></label>\n                            </div>\n                            <div class="error account-accept ui-content ui-state-error ui-corner-all"></div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="field right content-right action">\n                            <div class="control">\n                                <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only submit" type="submit" id="account-create" tabindex="10"><span class="ui-button-text">Create Account</span></button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n                <div class="recover">\n                    <div class="row">\n                        <div class="field right">\n                            <div class="control"><a href="#" class="reset small" id="reset-password">Forgot your password? Click to reset.</a></div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="field right content-right action">\n                            <div class="control">\n                                <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only submit" type="submit" id="account-login" tabindex="11"><span class="ui-button-text">Login</span></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>'});define("app/util/dom",[],function(){return{selectText:function(element,start,end){start=start||0;end=end||$(element).text().length;if(element.setSelectionRange){element.focus();element.setSelectionRange(start,end)}else if(element.createTextRange){var range=element.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",start);range.select()}},canSelect:function(element){return!!(element.setSelectionRange||element.createTextRange)}}});!function($,undefined){$.widget("ui.progressbar",{version:"@VERSION",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(newValue){if(newValue===undefined){return this._value()}this._setOption("value",newValue);return this},_setOption:function(key,value){if(key==="value"){this.options.value=value;this._refreshValue();if(this._value()===this.options.max){this._trigger("complete")}}this._super(key,value)},_value:function(){var val=this.options.value;if(typeof val!=="number"){val=0}return Math.min(this.options.max,Math.max(this.min,val))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var value=this.value(),percentage=this._percentage();if(this.oldValue!==value){this.oldValue=value;this._trigger("change")}this.valueDiv.toggle(value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%");this.element.attr("aria-valuenow",value)}})}(jQuery);define("libs/jquery/ui/jquery.ui.progressbar",function(){});!function($,undefined){var tabId=0,rhash=/#.*$/;function getNextTabId(){return++tabId}function isLocal(anchor){anchor=anchor.cloneNode(false);return anchor.hash.length>1&&anchor.href.replace(rhash,"")===location.href.replace(rhash,"")}$.widget("ui.tabs",{version:"@VERSION",options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var panel,that=this,options=this.options,active=options.active;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this._processTabs();if(active===null){if(location.hash){this.anchors.each(function(i,anchor){if(anchor.hash===location.hash){active=i;return false}})}if(active===null){active=this.lis.filter(".ui-tabs-active").index()}if(active===null||active===-1){active=this.lis.length?0:false}}if(active!==false){active=this.lis.eq(active).index();if(active===-1){active=options.collapsible?false:0}}options.active=active;if(!options.collapsible&&options.active===false&&this.anchors.length){options.active=0}if($.isArray(options.disabled)){options.disabled=$.unique(options.disabled.concat($.map(this.lis.filter(".ui-state-disabled"),function(li){return that.lis.index(li)}))).sort()}this._refresh();this.panels.hide();this.lis.removeClass("ui-tabs-active ui-state-active");if(options.active!==false&&this.anchors.length){this.active=this._findActive(options.active);panel=this._getPanelForTab(this.active);panel.show();this.lis.eq(options.active).addClass("ui-tabs-active ui-state-active");this.load(options.active)}else{this.active=$()}},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)}},_setOption:function(key,value){if(key==="active"){this._activate(value);return}if(key==="disabled"){this._setupDisabled(value);return}this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0)}if(key==="event"){this._setupEvents(value)}if(key==="heightStyle"){this._setupHeightStyle(value)}},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var next,options=this.options,lis=this.list.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)});this._processTabs();this._refresh();this.panels.not(this._getPanelForTab(this.active)).hide();if(options.active===false||!this.anchors.length){options.active=false;this.active=$()}else if(this.active.length&&!$.contains(this.list[0],this.active[0])){next=options.active-1;this._activate(next>=0?next:0)}else{options.active=this.lis.index(this.active)}},_refresh:function(){var options=this.options;this.element.toggleClass("ui-tabs-collapsible",options.collapsible);this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.anchors.addClass("ui-tabs-anchor");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");this._setupDisabled(options.disabled);this._setupEvents(options.event);this._setupHeightStyle(options.heightStyle);this.lis.unbind(".tabs");this._focusable(this.lis);this._hoverable(this.lis)},_processTabs:function(){var that=this;this.list=this._getList();this.lis=this.list.find("> li:has(a[href])");this.anchors=this.lis.map(function(){return $("a",this)[0]});this.panels=$();this.anchors.each(function(i,a){var selector,panel,id,tab=$(a).closest("li");if(isLocal(a)){selector=a.hash;panel=that.element.find(that._sanitizeSelector(selector))}else{id=that._tabId(tab);selector="#"+id;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(id);panel.insertAfter(that.panels[i-1]||that.list)}}if(panel.length){that.panels=that.panels.add(panel)}tab.data("ui-tabs-aria-controls",tab.attr("aria-controls")).attr("aria-controls",selector.substring(1))})},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)},_setupDisabled:function(disabled){if($.isArray(disabled)){if(!disabled.length){disabled=false}else if(disabled.length===this.anchors.length){disabled=true}}for(var i=0,li;li=this.lis[i];i++){$(li).toggleClass("ui-state-disabled",disabled===true||$.inArray(i,disabled)!==-1)}this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"})}this.anchors.unbind(".tabs");this._bind(this.anchors,events)},_setupHeightStyle:function(heightStyle){var maxHeight,overflow,parent=this.element.parent();if(heightStyle==="fill"){if(!$.support.minHeight){overflow=parent.css("overflow");parent.css("overflow","hidden")}maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return}maxHeight-=elem.outerHeight(true)});if(overflow){parent.css("overflow",overflow)}this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true)});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight)}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===false){return}options.active=collapsing?false:this.lis.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort()}if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(toShow.length){this.load(this.lis.index(tab),event)}this._toggle(event,eventData)},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete)}else{toShow.show();complete()}}if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show()})}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show()}},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return}if(!active.length){active=this.active}anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop})},_findActive:function(index){return index===false?$():this.lis.eq(index)},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))}return index},_destroy:function(){if(this.xhr){this.xhr.abort()}this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.removeClass("ui-tabs-anchor").unbind(".tabs").removeData("href.tabs").removeData("load.tabs");
this.lis.unbind(".tabs").add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove()}else{$(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-active","ui-state-active","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom"].join(" "))}});this.lis.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev)}else{li.removeAttr("aria-controls")}});if(this.options.heightStyle!=="content"){this.panels.css("height","")}return this},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return}if(index===undefined){disabled=false}else{index=this._getIndex(index);if($.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null})}else{disabled=$.map(this.lis,function(li,num){return num!==index?num:null})}}this._setupDisabled(disabled)},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return}if(index===undefined){disabled=true}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return}if($.isArray(disabled)){disabled=$.merge([index],disabled).sort()}else{disabled=[index]}}this._setupDisabled(disabled)},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.lis.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};if(isLocal(anchor[0])){return}this.xhr=$.ajax({url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}});if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");this.xhr.success(function(response){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){if(status==="abort"){that.panels.stop(false,true)}tab.removeClass("ui-tabs-loading");if(jqXHR===that.xhr){delete that.xhr}},1)})}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}});if($.uiBackCompat!==false){$.ui.tabs.prototype._ui=function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)}};$.widget("ui.tabs",$.ui.tabs,{url:function(index,url){this.anchors.eq(index).attr("href",url)}});$.widget("ui.tabs",$.ui.tabs,{options:{ajaxOptions:null,cache:false},_create:function(){this._super();var that=this;this.element.bind("tabsbeforeload.tabs",function(event,ui){if($.data(ui.tab[0],"cache.tabs")){event.preventDefault();return}$.extend(ui.ajaxSettings,that.options.ajaxOptions,{error:function(xhr,s,e){try{that.options.ajaxOptions.error(xhr,s,ui.tab.closest("li").index(),ui.tab[0])}catch(e){}}});ui.jqXHR.success(function(){if(that.options.cache){$.data(ui.tab[0],"cache.tabs",true)}})})},_setOption:function(key,value){if(key==="cache"&&value===false){this.anchors.removeData("cache.tabs")}this._super(key,value)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(index,url){this.anchors.eq(index).removeData("cache.tabs");this._superApply(arguments)}});$.widget("ui.tabs",$.ui.tabs,{abort:function(){if(this.xhr){this.xhr.abort()}}});$.widget("ui.tabs",$.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._bind({tabsbeforeload:function(event,ui){if(!this.options.spinner){return}var span=ui.tab.find("span"),html=span.html();span.html(this.options.spinner);ui.jqXHR.complete(function(){span.html(html)})}})}});$.widget("ui.tabs",$.ui.tabs,{options:{enable:null,disable:null},enable:function(index){var options=this.options,trigger;if(index&&options.disabled===true||$.isArray(options.disabled)&&$.inArray(index,options.disabled)!==-1){trigger=true}this._superApply(arguments);if(trigger){this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index]))}},disable:function(index){var options=this.options,trigger;if(index&&options.disabled===false||$.isArray(options.disabled)&&$.inArray(index,options.disabled)===-1){trigger=true}this._superApply(arguments);if(trigger){this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]))}}});$.widget("ui.tabs",$.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(url,label,index){if(index===undefined){index=this.anchors.length}var doInsertAfter,panel,options=this.options,li=$(options.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=!url.indexOf("#")?url.replace("#",""):this._tabId(li);li.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",true);li.attr("aria-controls",id);doInsertAfter=index>=this.lis.length;panel=this.element.find("#"+id);if(!panel.length){panel=this._createPanel(id);if(doInsertAfter){if(index>0){panel.insertAfter(this.panels.eq(-1))}else{panel.appendTo(this.element)}}else{panel.insertBefore(this.panels[index])}}panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();if(doInsertAfter){li.appendTo(this.list)}else{li.insertBefore(this.lis[index])}options.disabled=$.map(options.disabled,function(n){return n>=index?++n:n});this.refresh();if(this.lis.length===1&&options.active===false){this.option("active",0)}this._trigger("add",null,this._ui(this.anchors[index],this.panels[index]));return this},remove:function(index){index=this._getIndex(index);var options=this.options,tab=this.lis.eq(index).remove(),panel=this._getPanelForTab(tab).remove();if(tab.hasClass("ui-tabs-active")&&this.anchors.length>2){this._activate(index+(index+1<this.anchors.length?1:-1))}options.disabled=$.map($.grep(options.disabled,function(n){return n!==index}),function(n){return n>=index?--n:n});this.refresh();this._trigger("remove",null,this._ui(tab.find("a")[0],panel[0]));return this}});$.widget("ui.tabs",$.ui.tabs,{length:function(){return this.anchors.length}});$.widget("ui.tabs",$.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(tab){var a=tab.is("li")?tab.find("a[href]"):tab;a=a[0];return $(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+getNextTabId()}});$.widget("ui.tabs",$.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(id){return $(this.options.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)}});$.widget("ui.tabs",$.ui.tabs,{_create:function(){var options=this.options;if(options.active===null&&options.selected!==undefined){options.active=options.selected===-1?false:options.selected}this._super();options.selected=options.active;if(options.selected===false){options.selected=-1}},_setOption:function(key,value){if(key!=="selected"){return this._super(key,value)}var options=this.options;this._super("active",value===-1?false:value);options.selected=options.active;if(options.selected===false){options.selected=-1}},_eventHandler:function(event){this._superApply(arguments);this.options.selected=this.options.active;if(this.options.selected===false){this.options.selected=-1}}});$.widget("ui.tabs",$.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();if(this.options.active!==false){this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))}},_trigger:function(type,event,data){var ret=this._superApply(arguments);if(!ret){return false}if(type==="beforeActivate"&&data.newTab.length){ret=this._super("select",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()})}else if(type==="activate"&&data.newTab.length){ret=this._super("show",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()})}return ret}});$.widget("ui.tabs",$.ui.tabs,{select:function(index){index=this._getIndex(index);if(index===-1){if(this.options.collapsible&&this.options.selected!==-1){index=this.options.selected}else{return}}this.anchors.eq(index).trigger(this.options.event+".tabs")}});!function(){var listId=0;$.widget("ui.tabs",$.ui.tabs,{options:{cookie:null},_create:function(){var options=this.options,active;if(options.active==null&&options.cookie){active=parseInt(this._cookie(),10);if(active===-1){active=false}options.active=active}this._super()},_cookie:function(active){var cookie=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++listId)];if(arguments.length){cookie.push(active===false?-1:active);cookie.push(this.options.cookie)}return $.cookie.apply(null,cookie)},_refresh:function(){this._super();if(this.options.cookie){this._cookie(this.options.active,this.options.cookie)}},_eventHandler:function(event){this._superApply(arguments);if(this.options.cookie){this._cookie(this.options.active,this.options.cookie)}},_destroy:function(){this._super();if(this.options.cookie){this._cookie(null,this.options.cookie)}}})}();$.widget("ui.tabs",$.ui.tabs,{_trigger:function(type,event,data){var _data=$.extend({},data);if(type==="load"){_data.panel=_data.panel[0];_data.tab=_data.tab.find(".ui-tabs-anchor")[0]}return this._super(type,event,_data)}});$.widget("ui.tabs",$.ui.tabs,{options:{fx:null},_getFx:function(){var hide,show,fx=this.options.fx;if(fx){if($.isArray(fx)){hide=fx[0];show=fx[1]}else{hide=show=fx}}return fx?{show:show,hide:hide}:null},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel,fx=this._getFx();if(!fx){return this._super(event,eventData)}that.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&fx.show){toShow.animate(fx.show,fx.show.duration,function(){complete()})}else{toShow.show();complete()}}if(toHide.length&&fx.hide){toHide.animate(fx.hide,fx.hide.duration,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show()})}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show()}}})}}(jQuery);define("libs/jquery/ui/jquery.ui.tabs",function(){});!function($){var currentEventTarget=null;$.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:300,options:{menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click.menu",$.proxy(function(event){if(this.options.disabled){event.preventDefault()}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._bind({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target);if(target[0]!==currentEventTarget){currentEventTarget=target[0];target.one("click.menu",function(event){currentEventTarget=null});if(!target.closest(".ui-menu-item").is(".ui-state-disabled")){this.select(event);this._delay(function(){if(!this.element.is(":focus")){this.element.focus()}},20)}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event){var menu=this.element,firstItem=menu.children(".ui-menu-item").eq(0);if(this._hasScroll()&&!this.active){menu.children().each(function(){var currentItem=$(this);if(currentItem.offset().top-menu.offset().top>=0){firstItem=currentItem;return false}})}else if(this.active){firstItem=this.active}this.focus(event,firstItem)},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event)}})},keydown:"_keydown"});this.refresh();this._bind(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length){this.collapseAll(event)}}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");$(currentEventTarget).unbind("click.menu")},_keydown:function(event){var match,prev,character,skip,preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(!this.active.is(".ui-state-disabled")){this.expand(event)}break;case $.ui.keyCode.ENTER:this._activate(event);break;case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true}else{character=prev+character}match=this.activeMenu.children(".ui-menu-item").filter(function(){return new RegExp("^"+escape(character),"i").test($(this).children("a").text())});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this.activeMenu.children(".ui-menu-item").filter(function(){return new RegExp("^"+escape(character),"i").test($(this).children("a").text())})}if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else{delete this.previousFilter}}else{delete this.previousFilter}}if(preventDefault){event.preventDefault()}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(event)}else{this.select(event)}}},refresh:function(){var menus,submenus=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});menus=submenus.add(this.element);menus.children(":not( .ui-menu-item ):has( a )").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);if(!/[^\-—–\s]/.test(item.text())){item.addClass("ui-widget-content ui-menu-divider")}});menus.children(".ui-state-disabled").attr("aria-disabled","true");submenus.each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$('<span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>').data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"))})},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"))}this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}nested=$("> .ui-menu",item);if(nested.length&&/^mouse/.test(event.type)){this._startOpening(nested)}this.activeMenu=item.parent();this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0){this.activeMenu.scrollTop(scroll+offset)}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight)}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer)}if(!this.active){return}this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active})},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(submenu)},this.delay)},_open:function(submenu){var position=$.extend({of:this.active},$.type(this.options.position)==="function"?this.options.position(this.active):this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents()).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element}this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element}startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);return true}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem)},20);return true}},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{next=this.active[direction+"All"](".ui-menu-item").eq(0)}}if(!next||!next.length||!this.active){next=this.activeMenu.children(".ui-menu-item")[filter]()}this.focus(event,next)},nextPage:function(event){if(!this.active){this._move("next","first",event);return}if(this.isLastItem()){return}if(this._hasScroll()){var base=this.active.offset().top,height=this.element.height(),result;this.active.nextAll(".ui-menu-item").each(function(){result=$(this);return $(this).offset().top-base-height<0});this.focus(event,result)}else{this.focus(event,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())}},previousPage:function(event){if(!this.active){this._move("next","first",event);return}if(this.isFirstItem()){return}if(this._hasScroll()){var base=this.active.offset().top,height=this.element.height(),result;this.active.prevAll(".ui-menu-item").each(function(){result=$(this);return $(this).offset().top-base+height>0});this.focus(event,result)}else{this.focus(event,this.activeMenu.children(".ui-menu-item").first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){var ui={item:this.active};this.collapseAll(event,true);this._trigger("select",event,ui)}})}(jQuery);define("libs/jquery/ui/jquery.ui.menu",function(){});!function($,undefined){var uiDialogClasses="ui-dialog ui-widget ui-widget-content ui-corner-all ",sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};$.widget("ui.dialog",{version:"@VERSION",options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var that=this,options=this.options,title=options.title||"&#160;",uiDialog=(this.uiDialog=$("<div>")).addClass(uiDialogClasses+options.dialogClass).css({display:"none",outline:0,zIndex:options.zIndex}).attr("tabIndex",-1).keydown(function(event){if(options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){that.close(event);event.preventDefault()}}).mousedown(function(event){that.moveToTop(false,event)}).appendTo("body"),uiDialogContent=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(uiDialog),uiDialogTitlebar=(this.uiDialogTitlebar=$("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  "+"ui-corner-all  ui-helper-clearfix").prependTo(uiDialog),uiDialogTitlebarClose=$("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(event){event.preventDefault();that.close(event)}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(this.uiDialogTitlebarCloseText=$("<span>")).addClass("ui-icon ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").html(title).prependTo(uiDialogTitlebar),uiDialogButtonPane=(this.uiDialogButtonPane=$("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),uiButtonSet=(this.uiButtonSet=$("<div>")).addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane);uiDialog.attr({role:"dialog","aria-labelledby":uiDialogTitle.attr("id")});uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection();this._hoverable(uiDialogTitlebarClose);this._focusable(uiDialogTitlebarClose);if(options.draggable&&$.fn.draggable){this._makeDraggable()}if(options.resizable&&$.fn.resizable){this._makeResizable()}this._createButtons(options.buttons);this._isOpen=false;if($.fn.bgiframe){uiDialog.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},_destroy:function(){var next,oldPosition=this.oldPosition;if(this.overlay){this.overlay.destroy()}this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}next=oldPosition.parent.children().eq(oldPosition.index);if(next.length){next.before(this.element)}else{oldPosition.parent.append(this.element)}},widget:function(){return this.uiDialog},close:function(event){var that=this,maxZ,thisZ;if(!this._isOpen){return}if(false===this._trigger("beforeClose",event)){return}this._isOpen=false;if(this.overlay){this.overlay.destroy()}this.uiDialog.unbind("keypress.ui-dialog");if(this.options.hide){this.uiDialog.hide(this.options.hide,function(){that._trigger("close",event)})}else{this.uiDialog.hide();this._trigger("close",event)}$.ui.dialog.overlay.resize();if(this.options.modal){maxZ=0;$(".ui-dialog").each(function(){if(this!==that.uiDialog[0]){thisZ=$(this).css("z-index");if(!isNaN(thisZ)){maxZ=Math.max(maxZ,thisZ)}}});$.ui.dialog.maxZ=maxZ}return this},isOpen:function(){return this._isOpen},moveToTop:function(force,event){var options=this.options,saveScroll;if(options.modal&&!force||!options.stack&&!options.modal){return this._trigger("focus",event)}if(options.zIndex>$.ui.dialog.maxZ){$.ui.dialog.maxZ=options.zIndex}if(this.overlay){$.ui.dialog.maxZ+=1;$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ;this.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ)}saveScroll={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};$.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",$.ui.dialog.maxZ);this.element.attr(saveScroll);this._trigger("focus",event);return this},open:function(){if(this._isOpen){return}var hasFocus,options=this.options,uiDialog=this.uiDialog;this._size();this._position(options.position);uiDialog.show(options.show);this.overlay=options.modal?new $.ui.dialog.overlay(this):null;this.moveToTop(true);if(options.modal){uiDialog.bind("keydown.ui-dialog",function(event){if(event.keyCode!==$.ui.keyCode.TAB){return}var tabbables=$(":tabbable",this),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false}else if(event.target===first[0]&&event.shiftKey){last.focus(1);return false}})}hasFocus=this.element.find(":tabbable");if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");if(!hasFocus.length){hasFocus=uiDialog}}hasFocus.eq(0).focus();this._isOpen=true;this._trigger("open");return this},_createButtons:function(buttons){var uiDialogButtonPane,uiButtonSet,that=this,hasButtons=false;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(typeof buttons==="object"&&buttons!==null){$.each(buttons,function(){return!(hasButtons=true)})}if(hasButtons){$.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$("<button type='button'>").attr(props,true).unbind("click").click(function(){props.click.apply(that.element[0],arguments)}).appendTo(that.uiButtonSet);if($.fn.button){button.button()}});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)}else{this.uiDialog.removeClass("ui-dialog-buttons")}},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()];$(this).removeClass("ui-dialog-dragging");that._trigger("dragStop",event,filteredUi(ui));$.ui.dialog.overlay.resize()}})},_makeResizable:function(handles){handles=handles===undefined?this.options.resizable:handles;var that=this,options=this.options,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing");options.height=$(this).height();options.width=$(this).width();that._trigger("resizeStop",event,filteredUi(ui));$.ui.dialog.overlay.resize()}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var options=this.options;if(options.height==="auto"){return options.minHeight}else{return Math.min(options.minHeight,options.height)}},_position:function(position){var myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==="string"||typeof position==="object"&&"0"in position){myAt=position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0]}$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition}});position={my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" ")}}position=$.extend({},$.ui.dialog.prototype.options.position,position)}else{position=$.ui.dialog.prototype.options.position}isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show()}this.uiDialog.position(position);if(!isVisible){this.uiDialog.hide()}},_setOptions:function(options){var that=this,resizableOptions={},resize=false;$.each(options,function(key,value){that._setOption(key,value);if(key in sizeRelatedOptions){resize=true}if(key in resizableRelatedOptions){resizableOptions[key]=value}});if(resize){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",resizableOptions)}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;switch(key){case"buttons":this._createButtons(value);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(this.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":if(value){uiDialog.addClass("ui-dialog-disabled")}else{uiDialog.removeClass("ui-dialog-disabled")}break;case"draggable":isDraggable=uiDialog.is(":data(draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy")}if(!isDraggable&&value){this._makeDraggable()}break;case"position":this._position(value);break;case"resizable":isResizable=uiDialog.is(":data(resizable)");if(isResizable&&!value){uiDialog.resizable("destroy")}if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value)}if(!isResizable&&value!==false){this._makeResizable(value)}break;case"title":$(".ui-dialog-title",this.uiDialogTitlebar).html(""+(value||"&#160;"));break}this._super(key,value)},_size:function(){var nonContentHeight,minContentHeight,autoHeight,options=this.options,isVisible=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(options.minWidth>options.width){options.width=options.minWidth}nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);if(options.height==="auto"){if($.support.minHeight){this.element.css({minHeight:minContentHeight,height:"auto"})}else{this.uiDialog.show();autoHeight=this.element.css("height","auto").height();if(!isVisible){this.uiDialog.hide()}this.element.height(Math.max(autoHeight,minContentHeight))}}else{this.element.height(Math.max(options.height-nonContentHeight,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())
}}});$.extend($.ui.dialog,{uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");if(!id){this.uuid+=1;id=this.uuid}return"ui-dialog-title-"+id},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog)}});$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay"}).join(" "),create:function(dialog){if(this.instances.length===0){setTimeout(function(){if($.ui.dialog.overlay.instances.length){$(document).bind($.ui.dialog.overlay.events,function(event){if($(event.target).zIndex()<$.ui.dialog.overlay.maxZ){return false}})}},1);$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize)}var $el=this.oldInstances.pop()||$("<div>").addClass("ui-widget-overlay");$(document).bind("keydown.dialog-overlay",function(event){var instances=$.ui.dialog.overlay.instances;if(instances.length!==0&&instances[instances.length-1]===$el&&dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){dialog.close(event);event.preventDefault()}});$el.appendTo(document.body).css({width:this.width(),height:this.height()});if($.fn.bgiframe){$el.bgiframe()}this.instances.push($el);return $el},destroy:function($el){var indexOf=$.inArray($el,this.instances),maxZ=0;if(indexOf!==-1){this.oldInstances.push(this.instances.splice(indexOf,1)[0])}if(this.instances.length===0){$([document,window]).unbind(".dialog-overlay")}$el.height(0).width(0).remove();$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"))});this.maxZ=maxZ},height:function(){var scrollHeight,offsetHeight;if($.browser.msie){scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight){return $(window).height()+"px"}else{return scrollHeight+"px"}}else{return $(document).height()+"px"}},width:function(){var scrollWidth,offsetWidth;if($.browser.msie){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<offsetWidth){return $(window).width()+"px"}else{return scrollWidth+"px"}}else{return $(document).width()+"px"}},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this)});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()})}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el)}})}(jQuery);define("libs/jquery/ui/jquery.ui.dialog",function(){});!function($,document,undefined){var pluses=/\+/g;function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(pluses," "))}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}value=config.json?JSON.stringify(value):String(value);return document.cookie=[encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");if(decode(parts.shift())===key){var cookie=decode(parts.join("="));return config.json?JSON.parse(cookie):cookie}}return null};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true}return false}}(jQuery,document);define("libs/jquery/jquery.cookie/jquery.cookie",function(){});define("app/util/md5",[],function(){var Md5={bitOR:function(a,b){var lsb=a&1|b&1;var msb31=a>>>1|b>>>1;return msb31<<1|lsb},bitXOR:function(a,b){var lsb=a&1^b&1;var msb31=a>>>1^b>>>1;return msb31<<1|lsb},bitAND:function(a,b){var lsb=a&1&(b&1);var msb31=a>>>1&b>>>1;return msb31<<1|lsb},addme:function(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535},rhex:function(num){var str="";var hex_chr="0123456789abcdef";var _g=0;while(_g<4){var j=_g++;str+=hex_chr.charAt(num>>j*8+4&15)+hex_chr.charAt(num>>j*8&15)}return str},str2blks:function(str){var nblk=(str.length+8>>6)+1,blks=[],_g1=0,_g=nblk*16;while(_g1<_g){blks[++_g1]=0}var i=0;while(i<str.length){blks[i>>2]|=str.charCodeAt(i)<<(str.length*8+i)%4*8;i++}blks[i>>2]|=128<<(str.length*8+i)%4*8;var l=str.length*8;var k=nblk*16-2;blks[k]=l&255;blks[k]|=(l>>>8&255)<<8;blks[k]|=(l>>>16&255)<<16;blks[k]|=(l>>>24&255)<<24;return blks},rol:function(num,cnt){return num<<cnt|num>>>32-cnt},cmn:function(q,a,b,x,s,t){return this.addme(this.rol(this.addme(this.addme(a,q),this.addme(x,t)),s),b)},ff:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,x,s,t)},gg:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,x,s,t)},hh:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,x,s,t)},ii:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,x,s,t)},doEncode:function(str){var x=this.str2blks(str),a=1732584193,b=-271733879,c=-1732584194,d=271733878,step,i=0;while(i<x.length){var olda=a;var oldb=b;var oldc=c;var oldd=d;step=0;a=this.ff(a,b,c,d,x[i],7,-680876936);d=this.ff(d,a,b,c,x[i+1],12,-389564586);c=this.ff(c,d,a,b,x[i+2],17,606105819);b=this.ff(b,c,d,a,x[i+3],22,-1044525330);a=this.ff(a,b,c,d,x[i+4],7,-176418897);d=this.ff(d,a,b,c,x[i+5],12,1200080426);c=this.ff(c,d,a,b,x[i+6],17,-1473231341);b=this.ff(b,c,d,a,x[i+7],22,-45705983);a=this.ff(a,b,c,d,x[i+8],7,1770035416);d=this.ff(d,a,b,c,x[i+9],12,-1958414417);c=this.ff(c,d,a,b,x[i+10],17,-42063);b=this.ff(b,c,d,a,x[i+11],22,-1990404162);a=this.ff(a,b,c,d,x[i+12],7,1804603682);d=this.ff(d,a,b,c,x[i+13],12,-40341101);c=this.ff(c,d,a,b,x[i+14],17,-1502002290);b=this.ff(b,c,d,a,x[i+15],22,1236535329);a=this.gg(a,b,c,d,x[i+1],5,-165796510);d=this.gg(d,a,b,c,x[i+6],9,-1069501632);c=this.gg(c,d,a,b,x[i+11],14,643717713);b=this.gg(b,c,d,a,x[i],20,-373897302);a=this.gg(a,b,c,d,x[i+5],5,-701558691);d=this.gg(d,a,b,c,x[i+10],9,38016083);c=this.gg(c,d,a,b,x[i+15],14,-660478335);b=this.gg(b,c,d,a,x[i+4],20,-405537848);a=this.gg(a,b,c,d,x[i+9],5,568446438);d=this.gg(d,a,b,c,x[i+14],9,-1019803690);c=this.gg(c,d,a,b,x[i+3],14,-187363961);b=this.gg(b,c,d,a,x[i+8],20,1163531501);a=this.gg(a,b,c,d,x[i+13],5,-1444681467);d=this.gg(d,a,b,c,x[i+2],9,-51403784);c=this.gg(c,d,a,b,x[i+7],14,1735328473);b=this.gg(b,c,d,a,x[i+12],20,-1926607734);a=this.hh(a,b,c,d,x[i+5],4,-378558);d=this.hh(d,a,b,c,x[i+8],11,-2022574463);c=this.hh(c,d,a,b,x[i+11],16,1839030562);b=this.hh(b,c,d,a,x[i+14],23,-35309556);a=this.hh(a,b,c,d,x[i+1],4,-1530992060);d=this.hh(d,a,b,c,x[i+4],11,1272893353);c=this.hh(c,d,a,b,x[i+7],16,-155497632);b=this.hh(b,c,d,a,x[i+10],23,-1094730640);a=this.hh(a,b,c,d,x[i+13],4,681279174);d=this.hh(d,a,b,c,x[i],11,-358537222);c=this.hh(c,d,a,b,x[i+3],16,-722521979);b=this.hh(b,c,d,a,x[i+6],23,76029189);a=this.hh(a,b,c,d,x[i+9],4,-640364487);d=this.hh(d,a,b,c,x[i+12],11,-421815835);c=this.hh(c,d,a,b,x[i+15],16,530742520);b=this.hh(b,c,d,a,x[i+2],23,-995338651);a=this.ii(a,b,c,d,x[i],6,-198630844);d=this.ii(d,a,b,c,x[i+7],10,1126891415);c=this.ii(c,d,a,b,x[i+14],15,-1416354905);b=this.ii(b,c,d,a,x[i+5],21,-57434055);a=this.ii(a,b,c,d,x[i+12],6,1700485571);d=this.ii(d,a,b,c,x[i+3],10,-1894986606);c=this.ii(c,d,a,b,x[i+10],15,-1051523);b=this.ii(b,c,d,a,x[i+1],21,-2054922799);a=this.ii(a,b,c,d,x[i+8],6,1873313359);d=this.ii(d,a,b,c,x[i+15],10,-30611744);c=this.ii(c,d,a,b,x[i+6],15,-1560198380);b=this.ii(b,c,d,a,x[i+13],21,1309151649);a=this.ii(a,b,c,d,x[i+4],6,-145523070);d=this.ii(d,a,b,c,x[i+11],10,-1120210379);c=this.ii(c,d,a,b,x[i+2],15,718787259);b=this.ii(b,c,d,a,x[i+9],21,-343485551);a=this.addme(a,olda);b=this.addme(b,oldb);c=this.addme(c,oldc);d=this.addme(d,oldd);i+=16}return this.rhex(a)+this.rhex(b)+this.rhex(c)+this.rhex(d)}};return function(s){return Md5.doEncode(s)}});define("rtext!templates/toolbar.main.html",[],function(){return'<div class="pg-toolbar-actions">\n    <a class="pg-brand" href="#" target="_blank"><span class="pg-logo"></span></a>\n</div>\n<div class="pg-toolbar-context">\n\n</div>'});define("app/util/fullscreen",[],function(){var isfullscreen,requestFullScreen,exitFullScreen;if(document.documentElement.requestFullscreen){requestFullScreen=function(el){el.requestFullscreen()}}else if(document.documentElement.mozRequestFullScreen){requestFullScreen=function(el){el.mozRequestFullScreen()}}else if(document.documentElement.webkitRequestFullScreen){requestFullScreen=function(el){el.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);if(!document.webkitCurrentFullScreenElement){el.webkitRequestFullScreen()}}}else{setTimeout(function(){$(".pg-precog-labcoat .pg-fullscreen").hide()},20);requestFullScreen=function(){console.log("your browser doesn't support the FullScreen option")}}if(document.exitFullscreen){exitFullScreen=function(){document.exitFullscreen()}}else if(document.mozCancelFullScreen){exitFullScreen=function(){document.mozCancelFullScreen()}}else if(document.webkitCancelFullScreen){exitFullScreen=function(el){el.webkitRequestFullScreen();document.webkitCancelFullScreen()}}else{exitFullScreen=function(){console.log("your browser doesn't support the FullScreen option")}}function toggle(){isfullscreen=!window.screenTop&&!window.screenY;$(".pg-precog-labcoat .pg-fullscreen span.k-link").text(isfullscreen?"reduce":"fullscreen")}if(document.addEventListener){document.addEventListener("fullscreenchange",toggle,false);document.addEventListener("mozfullscreenchange",toggle,false);document.addEventListener("webkitfullscreenchange",toggle,false)}toggle();return{toggle:function(n){n=n||document.documentElement;if(isfullscreen){exitFullScreen(n)}else{requestFullScreen(n)}},isFullScreen:function(){return isfullscreen}}});define("rtext!templates/dialog.confirm.html",[],function(){return'<div class="pg-dialog-confirm">\n    <div class="pg-message"></div>\n</div>'});define("app/util/numbercaptcha",[],function(){function rand(min,max){return min+Math.floor(Math.random()*(1+max-min))}return function(max){var imax=Math.round(max),operator=["+","-","/","*"][rand(0,3)],second=rand(1,imax),first,result;switch(operator){case"+":first=rand(1,imax);result=first+second;break;case"-":first=rand(1,imax);if(first<second){var t=first;first=second;second=t}result=first-second;break;case"*":first=rand(2,10);result=first*second;if(rand(0,1)){var t=first;first=second;second=t}break;case"/":first=second*rand(2,10);result=first/second;break}return{first:first,second:second,operator:operator,result:result,description:first+" "+operator+" "+second}}});define("rtext!templates/dialog.global.settings.html",[],function(){return'<div>\n    <dl class="labcoat-url-generator">\n\n        <dt class="header">Account Settings</dt>\n        <dt><label for="apiKey">API Key</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <input id="apiKey" value="" type="text" class="api-key">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt><label for="basePath">Base Path</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <input id="basePath" type="text" class="path">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt class="header">User Preferences</dt>\n        <dt><label for="limit">Limit</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <input id="limit" type="text" class="int">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt><label for="theme">Theme</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <select id="theme"></select>\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt class="header">Server Settings</dt>\n        <dt>Analytics Service</dt>\n        <dd class="ui-widget-content ui-corner-all">\n            https://<input id="analyticsService" value="" type="text" class="url">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt>Labcoat Host</dt>\n        <dd class="ui-widget-content ui-corner-all">\n            https://<input id="labcoatHost" value="" type="text" class="url">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt class="full-line output header">Labcoat Url</dt>\n        <dd class="full-line ui-widget-content ui-corner-all output ui-state-highlight"><a href="" class="labcoatUrl" target="_blank"></a></dd>\n    </dl>\n</div>'});define("app/util/dispatcher",[],function(){function skipArgs(args,skip){var len=args.length,result=[];for(var i=skip;i<len;i++){result.push(args[i])}return result}return function(){var map={},wrapper;return wrapper={emit:function(emitter,type){var listeners=map[type]||[];for(var i=0;i<listeners.length;i++){if(listeners[i].apply(emitter,skipArgs(arguments,2))===false)break}},on:function(type,handler){var list=map[type]||(map[type]=[]);if(list.indexOf(handler)>=0)return false;list.push(handler);return true},off:function(type,handler){var list=map[type],pos;if(!list||(pos=list.indexOf(handler))<0)false;list.splice(pos,1);return true}}}});define("app/util/valuemodel",["app/util/dispatcher"],function(createDispatcher){return function(defaultValue,defaultValidator,defaultFilter){var model,value=defaultValue,validator=defaultValidator||function(){return null},filter=defaultFilter||function(v){return v},dispatcher=createDispatcher(),lastError;return model={set:function(newvalue){if((lastError=validator(newvalue))!==null){dispatcher.emit(this,"validation.error",lastError,newvalue);return false}var oldvalue=value;value=filter(newvalue);dispatcher.emit(this,"value.change",value,oldvalue);return true},setDefault:function(newvalue){var oldvalue=defaultValue;defaultValue=filter(newvalue);dispatcher.emit(this,"default.change",defaultValue,oldvalue);this.set(newvalue);return true},reset:function(){if(defaultValue===value)return false;if(this.set(defaultValue)){dispatcher.emit(this,"value.reset",defaultValue);return true}return false},get:function(alt){return value!==null&&typeof value!=="undefined"&&value||alt},getDefault:function(){return defaultValue},validate:function(value){return validator(value)==null;return result===null},lastError:function(){return lastError},on:function(type,handler){dispatcher.on(type,handler)},off:function(type,handler){dispatcher.off(type,handler)},setValidator:function(newvalidator){validator=newvalidator||function(){return null};dispatcher.emit(this,"validator.change",validator)},setFilter:function(newfilter){filter=newfilter||function(){return null};dispatcher.emit(this,"filter.change",newfilter)},isDefault:function(){return value===defaultValue}}}});define("app/util/objectmodel",["app/util/dispatcher"],function(createDispatcher){return function(){var map={},dispatcher=createDispatcher(),model,validMap={},isValid=true;function validate(){for(key in validMap)if(validMap.hasOwnProperty(key))return false;return true}return model={addField:function(name,field){this.removeField(name);map[name]=field;field.on("value.change",function(){dispatcher.emit(this,"value.change",name,field);if(!isValid){delete validMap[name];isValid=validate()}if(isValid){dispatcher.emit(this,"validation.success",name,field)}dispatcher.emit(this,"object.change",name,field)});field.on("validation.error",function(){isValid=false;validMap[name]=true;dispatcher.emit(this,"validation.error",name,field)});dispatcher.emit(this,"field.add",name,field)},removeField:function(name){if(!this.hasField(name))return false;var field=map[name];delete map[name];dispatcher.emit(this,"field.remove",name,field)},hasField:function(name){return!!map[name]},getField:function(name){return map[name]},get:function(name){var field=this.getField(name);if(null==field)return null;return field.get()},on:function(type,handler){dispatcher.on(type,handler)},off:function(type,handler){dispatcher.off(type,handler)},isValid:function(){return isValid},reset:function(){for(name in map){if(map.hasOwnProperty(name)){map[name].reset()}}},hasChanged:function(){for(name in map){if(map.hasOwnProperty(name)&&!map[name].isDefault()){return true}}return false}}}});define("rtext!templates/dialog.export.html",[],function(){return'<div class="pg-dialog-export">\n    <div class="pg-toolbar pg-actions"></div>\n    <div class="pg-toolbar pg-options"></div>\n    <form method="POST">\n        <div class="pg-export">\n            <textarea name="code" class="ui-widget-content"></textarea>\n            <input type="hidden" name="name" value="">\n        </div>\n    </form>\n</div>'});!function($){$.fn.zclip=function(params){if(typeof params=="object"&&!params.length){var settings=$.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:true,setHandCursor:true,setCSSEffects:true},params);return this.each(function(){var o=$(this);if(o.is(":visible")&&(typeof settings.copy=="string"||$.isFunction(settings.copy))){ZeroClipboard.setMoviePath(settings.path);var clip=new ZeroClipboard.Client;if($.isFunction(settings.copy)){o.bind("zClip_copy",settings.copy)}if($.isFunction(settings.beforeCopy)){o.bind("zClip_beforeCopy",settings.beforeCopy)}if($.isFunction(settings.afterCopy)){o.bind("zClip_afterCopy",settings.afterCopy)}clip.setHandCursor(settings.setHandCursor);clip.setCSSEffects(settings.setCSSEffects);clip.addEventListener("mouseOver",function(client){o.trigger("mouseenter")});clip.addEventListener("mouseOut",function(client){o.trigger("mouseleave")});clip.addEventListener("mouseDown",function(client){o.trigger("mousedown");if(!$.isFunction(settings.copy)){clip.setText(settings.copy)}else{clip.setText(o.triggerHandler("zClip_copy"))}if($.isFunction(settings.beforeCopy)){o.trigger("zClip_beforeCopy")}});clip.addEventListener("complete",function(client,text){text=decodeURIComponent(text);if($.isFunction(settings.afterCopy)){o.trigger("zClip_afterCopy")}else{if(text.length>500){text=text.substr(0,500)+"...\n\n("+(text.length-500)+" characters not shown)"}o.removeClass("hover");alert("Copied text to clipboard:\n\n "+text)}if(settings.clickAfter){o.trigger("click")}});clip.glue(o[0],o.parent()[0]);$(window).bind("load resize",function(){clip.reposition()})}})}else if(typeof params=="string"){return this.each(function(){var o=$(this);params=params.toLowerCase();var zclipId=o.data("zclipId");var clipElm=$("#"+zclipId+".zclip");if(params=="remove"){clipElm.remove();o.removeClass("active hover")}else if(params=="hide"){clipElm.hide();o.removeClass("active hover")}else if(params=="show"){clipElm.show()}})}}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(thingy){if(typeof thingy=="string")thingy=document.getElementById(thingy);if(!thingy.addClass){thingy.hide=function(){this.style.display="none"};thingy.show=function(){this.style.display=""};thingy.addClass=function(name){this.removeClass(name);this.className+=" "+name};thingy.removeClass=function(name){var classes=this.className.split(/\s+/);var idx=-1;for(var k=0;k<classes.length;k++){if(classes[k]==name){idx=k;k=classes.length}}if(idx>-1){classes.splice(idx,1);this.className=classes.join(" ")}return this};thingy.hasClass=function(name){return!!this.className.match(new RegExp("\\s*"+name+"\\s*"))}}return thingy},setMoviePath:function(path){this.moviePath=path},dispatch:function(id,eventName,args){var client=this.clients[id];if(client){client.receiveEvent(eventName,args)}},register:function(id,client){this.clients[id]=client},getDOMObjectPosition:function(obj,stopObj){var info={left:0,top:0,width:obj.width?obj.width:obj.offsetWidth,height:obj.height?obj.height:obj.offsetHeight};if(obj&&obj!=stopObj){info.left+=obj.offsetLeft;info.top+=obj.offsetTop}return info},Client:function(elem){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);if(elem)this.glue(elem)}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:"",handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(elem,appendElem,stylesToAdd){this.domElement=ZeroClipboard.$(elem);var zIndex=99;if(this.domElement.style.zIndex){zIndex=parseInt(this.domElement.style.zIndex,10)+1}if(typeof appendElem=="string"){appendElem=ZeroClipboard.$(appendElem)}else if(typeof appendElem=="undefined"){appendElem=document.getElementsByTagName("body")[0]}var box=ZeroClipboard.getDOMObjectPosition(this.domElement,appendElem);this.div=document.createElement("div");this.div.className="zclip";this.div.id="zclip-"+this.movieId;$(this.domElement).data("zclipId","zclip-"+this.movieId);var style=this.div.style;style.position="absolute";style.left=""+box.left+"px";style.top=""+box.top+"px";style.width=""+box.width+"px";style.height=""+box.height+"px";style.zIndex=zIndex;if(typeof stylesToAdd=="object"){for(addedStyle in stylesToAdd){style[addedStyle]=stylesToAdd[addedStyle]}}appendElem.appendChild(this.div);this.div.innerHTML=this.getHTML(box.width,box.height)},getHTML:function(width,height){var html="";var flashvars="id="+this.id+"&width="+width+"&height="+height;if(navigator.userAgent.match(/MSIE/)){var protocol=location.href.match(/^https/i)?"https://":"http://";html+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+protocol+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+width+'" height="'+height+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+flashvars+'"/><param name="wmode" value="transparent"/></object>'}else{html+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+width+'" height="'+height+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+flashvars+'" wmode="transparent" />'}return html},hide:function(){if(this.div){this.div.style.left="-2000px"}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var body=document.getElementsByTagName("body")[0];try{body.removeChild(this.div)}catch(e){}this.domElement=null;this.div=null}},reposition:function(elem){if(elem){this.domElement=ZeroClipboard.$(elem);if(!this.domElement)this.hide()}if(this.domElement&&this.div){var box=ZeroClipboard.getDOMObjectPosition(this.domElement);var style=this.div.style;style.left=""+box.left+"px";style.top=""+box.top+"px"}},setText:function(newText){this.clipText=newText;if(this.ready){this.movie.setText(newText)}},addEventListener:function(eventName,func){eventName=eventName.toString().toLowerCase().replace(/^on/,"");if(!this.handlers[eventName]){this.handlers[eventName]=[]}this.handlers[eventName].push(func)},setHandCursor:function(enabled){this.handCursorEnabled=enabled;if(this.ready){this.movie.setHandCursor(enabled)}},setCSSEffects:function(enabled){this.cssEffects=!!enabled},receiveEvent:function(eventName,args){eventName=eventName.toString().toLowerCase().replace(/^on/,"");switch(eventName){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var self=this;setTimeout(function(){self.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var self=this;setTimeout(function(){self.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;try{this.movie.setText(this.clipText)}catch(e){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(e){}break;case"mouseover":if(this.domElement&&this.cssEffects){this.domElement.addClass("hover");if(this.recoverActive){this.domElement.addClass("active")}}break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}this.domElement.removeClass("hover")}break;case"mousedown":if(this.domElement&&this.cssEffects){this.domElement.addClass("active")}break;case"mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[eventName]){for(var idx=0,len=this.handlers[eventName].length;idx<len;idx++){var func=this.handlers[eventName][idx];if(typeof func=="function"){func(this,args)}else if(typeof func=="object"&&func.length==2){func[0][func[1]](this,args)}else if(typeof func=="string"){window[func](this,args)}}}}};define("libs/jquery/zclip/jquery.zclip",function(){});define("rtext!templates/dialog.lineinput.html",[],function(){return'<div class="pg-dialog-lineinput">\n    <div class="pg-message ui-content ui-state-highlight ui-corner-all"></div>\n    <div class="pg-lineinput">\n        <label for="pg-input-lineinput"></label> <input id="pg-input-lineinput" type="text" name="value" class="ui-widget-content" multiple/>\n    </div>\n    <div class="pg-error ui-content ui-state-error ui-corner-all"></div>\n</div>'});define("rtext!templates/toolbar.editor.html",[],function(){return'<div class="pg-toolbar-actions pg-tabs-container">\n    <div class="pg-editor-tabs">\n        <ul></ul>\n    </div>\n</div>\n<div class="pg-toolbar-context">\n</div>'});!function(Date,undefined){var moment,VERSION="1.6.2",round=Math.round,i,languages={},currentLanguage="en",hasModule=typeof module!=="undefined",langConfigProperties="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|LT|LL?L?L?)/g,parseMultipleFormatChunker=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenWord=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,isoRegex=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6};function Moment(date,isUTC){this._d=date;this._isUTC=!!isUTC}function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function Duration(duration){var data=this._data={},years=duration.years||duration.y||0,months=duration.months||duration.M||0,weeks=duration.weeks||duration.w||0,days=duration.days||duration.d||0,hours=duration.hours||duration.h||0,minutes=duration.minutes||duration.m||0,seconds=duration.seconds||duration.s||0,milliseconds=duration.milliseconds||duration.ms||0;this._milliseconds=milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=days+weeks*7;this._months=months+years*12;data.milliseconds=milliseconds%1e3;seconds+=absRound(milliseconds/1e3);data.seconds=seconds%60;minutes+=absRound(seconds/60);data.minutes=minutes%60;hours+=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);days+=weeks*7;data.days=days%30;months+=absRound(days/30);data.months=months%12;years+=absRound(months/12);data.years=years}function leftZeroFill(number,targetLength){var output=number+"";while(output.length<targetLength){output="0"+output}return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding){var ms=duration._milliseconds,d=duration._days,M=duration._months,currentDate;if(ms){mom._d.setTime(+mom+ms*isAdding)}if(d){mom.date(mom.date()+d*isAdding)}if(M){currentDate=mom.date();mom.date(1).month(mom.month()+M*isAdding).date(Math.min(currentDate,mom.daysInMonth()))}}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function dateFromArray(input){return new Date(input[0],input[1]||0,input[2]||1,input[3]||0,input[4]||0,input[5]||0,input[6]||0)}function formatMoment(m,inputString){var currentMonth=m.month(),currentDate=m.date(),currentYear=m.year(),currentDay=m.day(),currentHours=m.hours(),currentMinutes=m.minutes(),currentSeconds=m.seconds(),currentMilliseconds=m.milliseconds(),currentZone=-m.zone(),ordinal=moment.ordinal,meridiem=moment.meridiem;function replaceFunction(input){var a,b;switch(input){case"M":return currentMonth+1;case"Mo":return currentMonth+1+ordinal(currentMonth+1);case"MM":return leftZeroFill(currentMonth+1,2);case"MMM":return moment.monthsShort[currentMonth];case"MMMM":return moment.months[currentMonth];case"D":return currentDate;case"Do":return currentDate+ordinal(currentDate);case"DD":return leftZeroFill(currentDate,2);case"DDD":a=new Date(currentYear,currentMonth,currentDate);b=new Date(currentYear,0,1);return~~((a-b)/864e5+1.5);case"DDDo":a=replaceFunction("DDD");return a+ordinal(a);case"DDDD":return leftZeroFill(replaceFunction("DDD"),3);case"d":return currentDay;case"do":return currentDay+ordinal(currentDay);case"ddd":return moment.weekdaysShort[currentDay];case"dddd":return moment.weekdays[currentDay];case"w":a=new Date(currentYear,currentMonth,currentDate-currentDay+5);b=new Date(a.getFullYear(),0,4);return~~((a-b)/864e5/7+1.5);case"wo":a=replaceFunction("w");return a+ordinal(a);case"ww":return leftZeroFill(replaceFunction("w"),2);case"YY":return leftZeroFill(currentYear%100,2);case"YYYY":return currentYear;case"a":return meridiem?meridiem(currentHours,currentMinutes,false):currentHours>11?"pm":"am";case"A":return meridiem?meridiem(currentHours,currentMinutes,true):currentHours>11?"PM":"AM";case"H":return currentHours;case"HH":return leftZeroFill(currentHours,2);case"h":return currentHours%12||12;case"hh":return leftZeroFill(currentHours%12||12,2);case"m":return currentMinutes;case"mm":return leftZeroFill(currentMinutes,2);case"s":return currentSeconds;case"ss":return leftZeroFill(currentSeconds,2);case"S":return~~(currentMilliseconds/100);case"SS":return leftZeroFill(~~(currentMilliseconds/10),2);case"SSS":return leftZeroFill(currentMilliseconds,3);case"Z":return(currentZone<0?"-":"+")+leftZeroFill(~~(Math.abs(currentZone)/60),2)+":"+leftZeroFill(~~(Math.abs(currentZone)%60),2);case"ZZ":return(currentZone<0?"-":"+")+leftZeroFill(~~(10*Math.abs(currentZone)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return formatMoment(m,moment.longDateFormat[input]);default:return input.replace(/(^\[)|(\\)|\]$/g,"")}}return inputString.replace(formattingTokens,replaceFunction)}function getParseRegexForToken(token){switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"ddd":case"dddd":case"a":case"A":return parseTokenWord;
case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"dd":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return new RegExp(token.replace("\\",""))}}function addTimeToArrayFromToken(token,input,datePartArray,config){var a;switch(token){case"M":case"MM":datePartArray[1]=input==null?0:~~input-1;break;case"MMM":case"MMMM":for(a=0;a<12;a++){if(moment.monthsParse[a].test(input)){datePartArray[1]=a;break}}break;case"D":case"DD":case"DDD":case"DDDD":datePartArray[2]=~~input;break;case"YY":input=~~input;datePartArray[0]=input+(input>70?1900:2e3);break;case"YYYY":datePartArray[0]=~~Math.abs(input);break;case"a":case"A":config.isPm=(input+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":datePartArray[3]=~~input;break;case"m":case"mm":datePartArray[4]=~~input;break;case"s":case"ss":datePartArray[5]=~~input;break;case"S":case"SS":case"SSS":datePartArray[6]=~~(("0."+input)*1e3);break;case"Z":case"ZZ":config.isUTC=true;a=(input+"").match(parseTimezoneChunker);if(a&&a[1]){config.tzh=~~a[1]}if(a&&a[2]){config.tzm=~~a[2]}if(a&&a[0]==="+"){config.tzh=-config.tzh;config.tzm=-config.tzm}break}}function makeDateFromStringAndFormat(string,format){var datePartArray=[0,0,1,0,0,0,0],config={tzh:0,tzm:0},tokens=format.match(formattingTokens),i,parsedInput;for(i=0;i<tokens.length;i++){parsedInput=(getParseRegexForToken(tokens[i]).exec(string)||[])[0];string=string.replace(getParseRegexForToken(tokens[i]),"");addTimeToArrayFromToken(tokens[i],parsedInput,datePartArray,config)}if(config.isPm&&datePartArray[3]<12){datePartArray[3]+=12}if(config.isPm===false&&datePartArray[3]===12){datePartArray[3]=0}datePartArray[3]+=config.tzh;datePartArray[4]+=config.tzm;return config.isUTC?new Date(Date.UTC.apply({},datePartArray)):dateFromArray(datePartArray)}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(~~array1[i]!==~~array2[i]){diffs++}}return diffs+lengthDiff}function makeDateFromStringAndArray(string,formats){var output,inputParts=string.match(parseMultipleFormatChunker)||[],formattedInputParts,scoreToBeat=99,i,currentDate,currentScore;for(i=0;i<formats.length;i++){currentDate=makeDateFromStringAndFormat(string,formats[i]);formattedInputParts=formatMoment(new Moment(currentDate),formats[i]).match(parseMultipleFormatChunker)||[];currentScore=compareArrays(inputParts,formattedInputParts);if(currentScore<scoreToBeat){scoreToBeat=currentScore;output=currentDate}}return output}function makeDateFromString(string){var format="YYYY-MM-DDT",i;if(isoRegex.exec(string)){for(i=0;i<4;i++){if(isoTimes[i][1].exec(string)){format+=isoTimes[i][0];break}}return parseTokenTimezone.exec(string)?makeDateFromStringAndFormat(string,format+" Z"):makeDateFromStringAndFormat(string,format)}return new Date(string)}function substituteTimeAgo(string,number,withoutSuffix,isFuture){var rt=moment.relativeTime[string];return typeof rt==="function"?rt(number||1,!!withoutSuffix,string,isFuture):rt.replace(/%d/i,number||1)}function relativeTime(milliseconds,withoutSuffix){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];args[2]=withoutSuffix;args[3]=milliseconds>0;return substituteTimeAgo.apply({},args)}moment=function(input,format){if(input===null||input===""){return null}var date,matched,isUTC;if(moment.isMoment(input)){date=new Date(+input._d);isUTC=input._isUTC}else if(format){if(isArray(format)){date=makeDateFromStringAndArray(input,format)}else{date=makeDateFromStringAndFormat(input,format)}}else{matched=aspNetJsonRegex.exec(input);date=input===undefined?new Date:matched?new Date(+matched[1]):input instanceof Date?input:isArray(input)?dateFromArray(input):typeof input==="string"?makeDateFromString(input):new Date(input)}return new Moment(date,isUTC)};moment.utc=function(input,format){if(isArray(input)){return new Moment(new Date(Date.UTC.apply({},input)),true)}return format&&input?moment(input+" +0000",format+" Z").utc():moment(input&&!parseTokenTimezone.exec(input)?input+"+0000":input).utc()};moment.unix=function(input){return moment(input*1e3)};moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber=typeof input==="number",duration=isDuration?input._data:isNumber?{}:input;if(isNumber){if(key){duration[key]=input}else{duration.milliseconds=input}}return new Duration(duration)};moment.humanizeDuration=function(num,type,withSuffix){return moment.duration(num,type===true?null:type).humanize(type===true?true:withSuffix)};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.lang=function(key,values){var i,req,parse=[];if(!key){return currentLanguage}if(values){for(i=0;i<12;i++){parse[i]=new RegExp("^"+values.months[i]+"|^"+values.monthsShort[i].replace(".",""),"i")}values.monthsParse=values.monthsParse||parse;languages[key]=values}if(languages[key]){for(i=0;i<langConfigProperties.length;i++){moment[langConfigProperties[i]]=languages[key][langConfigProperties[i]]||languages.en[langConfigProperties[i]]}currentLanguage=key}else{if(hasModule){req=require("./lang/"+key);moment.lang(key,req)}}};moment.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:false,calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10;return~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"}});moment.isMoment=function(obj){return obj instanceof Moment};moment.isDuration=function(obj){return obj instanceof Duration};moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(inputString){return formatMoment(this,inputString?inputString:moment.defaultFormat)},add:function(input,val){var dur=val?moment.duration(+val,input):moment.duration(input);addOrSubtractDurationFromMoment(this,dur,1);return this},subtract:function(input,val){var dur=val?moment.duration(+val,input):moment.duration(input);addOrSubtractDurationFromMoment(this,dur,-1);return this},diff:function(input,val,asFloat){var inputMoment=this._isUTC?moment(input).utc():moment(input).local(),zoneDiff=(this.zone()-inputMoment.zone())*6e4,diff=this._d-inputMoment._d-zoneDiff,year=this.year()-inputMoment.year(),month=this.month()-inputMoment.month(),date=this.date()-inputMoment.date(),output;if(val==="months"){output=year*12+month+date/30}else if(val==="years"){output=year+(month+date/30)/12}else{output=val==="seconds"?diff/1e3:val==="minutes"?diff/6e4:val==="hours"?diff/36e5:val==="days"?diff/864e5:val==="weeks"?diff/6048e5:diff}return asFloat?output:round(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().sod(),"days",true),calendar=moment.calendar,allElse=calendar.sameElse,format=diff<-6?allElse:diff<-1?calendar.lastWeek:diff<0?calendar.lastDay:diff<1?calendar.sameDay:diff<2?calendar.nextDay:diff<7?calendar.nextWeek:allElse;return this.format(typeof format==="function"?format.apply(this):format)},isLeapYear:function(){var year=this.year();return year%4===0&&year%100!==0||year%400===0},isDST:function(){return this.zone()<moment([this.year()]).zone()||this.zone()<moment([this.year(),5]).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return input==null?day:this.add({d:input-day})},sod:function(){return moment(this).hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return moment(this).month(this.month()+1).date(0).date()}};function makeGetterAndSetter(name,key){moment.fn[name]=function(input){var utc=this._isUTC?"UTC":"";if(input!=null){this._d["set"+utc+key](input);return this}else{return this._d["get"+utc+key]()}}}for(i=0;i<proxyGettersAndSetters.length;i++){makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase(),proxyGettersAndSetters[i])}makeGetterAndSetter("year","FullYear");moment.duration.fn=Duration.prototype={weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(withSuffix){var difference=+this,rel=moment.relativeTime,output=relativeTime(difference,!withSuffix);if(withSuffix){output=(difference<=0?rel.past:rel.future).replace(/%s/i,output)}return output}};function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}for(i in unitMillisecondFactors){if(unitMillisecondFactors.hasOwnProperty(i)){makeDurationAsGetter(i,unitMillisecondFactors[i]);makeDurationGetter(i.toLowerCase())}}makeDurationAsGetter("Weeks",6048e5);if(hasModule){module.exports=moment}if(typeof window!=="undefined"&&typeof ender==="undefined"){window.moment=moment}if(typeof define==="function"&&define.amd){define("moment",[],function(){return moment})}}(Date);define("libs/moment/moment",function(){});define("rtext!templates/toolbar.status.html",[],function(){return'<div class="pg-toolbar-actions pg-tabs-container">\n    <button class="pg-editor-settings-trigger ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-secondary" role="button" aria-disabled="false">\n        <span class="ui-button-text">tab size: <span class="pg-tab-size"></span></span>\n        <span class="ui-button-icon-secondary ui-icon ui-icon-triangle-1-n"></span>\n    </button>\n    |\n    line: <span class="pg-line">1</span>,\n    column: <span class="pg-column">1</span>\n    |\n    words: <span class="pg-words">0</span>,\n    characters: <span class="pg-characters">0</span>\n</div>\n<div class="pg-toolbar-context">\n    <div class="pg-container pg-progressbar"></div>\n    <div class="pg-container pg-execution-time"></div>\n</div>'});define("rtext!templates/menu.editor.status.html",[],function(){return'<div class="pg-el pg-menu-editor-status">\n    <ul>\n        <li class="pg-change-orientation"><a href="#">change orientation</a></li>\n        <li class="pg-soft-tabs"><a href="#">indent using spaces</a></li>\n        <li data-tab-size="1" class="pg-tab-size-option"><a href="#">tab size: 1</a></li>\n        <li data-tab-size="2" class="pg-tab-size-option"><a href="#">tab size: 2</a></li>\n        <li data-tab-size="3" class="pg-tab-size-option"><a href="#">tab size: 3</a></li>\n        <li data-tab-size="4" class="pg-tab-size-option"><a href="#">tab size: 4</a></li>\n        <li data-tab-size="5" class="pg-tab-size-option"><a href="#">tab size: 5</a></li>\n        <li data-tab-size="6" class="pg-tab-size-option"><a href="#">tab size: 6</a></li>\n        <li data-tab-size="7" class="pg-tab-size-option"><a href="#">tab size: 7</a></li>\n        <li data-tab-size="8" class="pg-tab-size-option k-last"><a href="#">tab size: 8</a></li>\n    </ul>\n</div>'});define("app/config/themes",[],function(){return[{token:"gray",name:"gray",ui:"gray",group:"light",editor:{ace:"tomorrow"}},{token:"blue",name:"blue",ui:"blue",group:"light",editor:{ace:"idle_fingers"}},{token:"dark",name:"dark",ui:"dark",group:"dark",editor:{ace:"solarized_dark"}},{token:"black",name:"black",ui:"black",group:"dark",editor:{ace:"merbivore"}}]});define("app/theme",["app/config/themes"],function(themes){var UI_BASE_THEME_URL="css/jquery/ui/",map={},groups={};$.each(themes,function(){map[this.token]=this;groups[this.group]=groups[this.group]||{};groups[this.group][this.token]=this});function themeUrl(name){return UI_BASE_THEME_URL+name+"/jquery-ui.css"}function pollCSS(url,callback){function poll(){try{var sheets=document.styleSheets;for(var j=0,k=sheets.length;j<k;j++){if(sheets[j].href==url){sheets[j].cssRules}}setTimeout(callback,0)}catch(e){setTimeout(poll,50)}}poll()}function setUITheme(name,callback){var url=themeUrl(name),cssLink=$('<link href="'+url+'" type="text/css" rel="Stylesheet" class="ui-theme" />');if($.browser.safari){pollCSS(url,callback)}else{cssLink.on("load",callback)}$("head").append(cssLink);if($("link.ui-theme").size()>3){$("link.ui-theme:first").remove()}}var theme={current:null,set:function(name){if(this.current===name)return;this.current=name;$(theme).trigger("change",name);setUITheme(map[name].ui,function(){$(theme).trigger("changed",name)})},list:function(){return themes},map:function(){return map},groups:function(){return groups},getEditorTheme:function(name,editor){return map[name].editor[editor]}};return theme});define("ace/lib/regexp",["require","exports","module"],function(require,exports,module){var real={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},compliantExecNpcg=real.exec.call(/()??/,"")[1]===undefined,compliantLastIndexIncrement=function(){var x=/^/g;real.test.call(x,"");return!x.lastIndex}();if(compliantLastIndexIncrement&&compliantExecNpcg)return;RegExp.prototype.exec=function(str){var match=real.exec.apply(this,arguments),name,r2;if(typeof str=="string"&&match){if(!compliantExecNpcg&&match.length>1&&indexOf(match,"")>-1){r2=RegExp(this.source,real.replace.call(getNativeFlags(this),"g",""));real.replace.call(str.slice(match.index),r2,function(){for(var i=1;i<arguments.length-2;i++){if(arguments[i]===undefined)match[i]=undefined}})}if(this._xregexp&&this._xregexp.captureNames){for(var i=1;i<match.length;i++){name=this._xregexp.captureNames[i-1];if(name)match[name]=match[i]}}if(!compliantLastIndexIncrement&&this.global&&!match[0].length&&this.lastIndex>match.index)this.lastIndex--}return match};if(!compliantLastIndexIncrement){RegExp.prototype.test=function(str){var match=real.exec.call(this,str);if(match&&this.global&&!match[0].length&&this.lastIndex>match.index)this.lastIndex--;return!!match}}function getNativeFlags(regex){return(regex.global?"g":"")+(regex.ignoreCase?"i":"")+(regex.multiline?"m":"")+(regex.extended?"x":"")+(regex.sticky?"y":"")}function indexOf(array,item,from){if(Array.prototype.indexOf)return array.indexOf(item,from);for(var i=from||0;i<array.length;i++){if(array[i]===item)return i}return-1}});define("ace/lib/es5-shim",["require","exports","module"],function(require,exports,module){function Empty(){}if(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!="function"){throw new TypeError("Function.prototype.bind called on incompatible "+target)}var args=slice.call(arguments,1);var bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};if(target.prototype){Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}}var call=Function.prototype.call;var prototypeOfArray=Array.prototype;var prototypeOfObject=Object.prototype;var slice=prototypeOfArray.slice;var _toString=call.bind(prototypeOfObject.toString);var owns=call.bind(prototypeOfObject.hasOwnProperty);var defineGetter;var defineSetter;var lookupGetter;var lookupSetter;var supportsAccessors;if(supportsAccessors=owns(prototypeOfObject,"__defineGetter__")){defineGetter=call.bind(prototypeOfObject.__defineGetter__);defineSetter=call.bind(prototypeOfObject.__defineSetter__);lookupGetter=call.bind(prototypeOfObject.__lookupGetter__);lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)}if([1,2].splice(0).length!=2){if(function(){function makeArray(l){var a=new Array(l+2);a[0]=a[1]=0;return a}var array=[],lengthBefore;array.splice.apply(array,makeArray(20));array.splice.apply(array,makeArray(26));lengthBefore=array.length;array.splice(5,0,"XXX");lengthBefore+1==array.length;if(lengthBefore+1==array.length){return true}}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){if(!arguments.length){return[]}else{return array_splice.apply(this,[start===void 0?0:start,deleteCount===void 0?this.length-start:deleteCount].concat(slice.call(arguments,2)))}}}else{Array.prototype.splice=function(pos,removeCount){var length=this.length;if(pos>0){if(pos>length)pos=length}else if(pos==void 0){pos=0}else if(pos<0){pos=Math.max(length+pos,0)}if(!(pos+removeCount<length))removeCount=length-pos;var removed=this.slice(pos,pos+removeCount);var insert=slice.call(arguments,2);var add=insert.length;if(pos===length){if(add){this.push.apply(this,insert)}}else{var remove=Math.min(removeCount,length-pos);var tailOldPos=pos+remove;var tailNewPos=tailOldPos+add-remove;var tailCount=length-tailOldPos;var lengthAfterRemove=length-remove;if(tailNewPos<tailOldPos){for(var i=0;i<tailCount;++i){this[tailNewPos+i]=this[tailOldPos+i]}}else if(tailNewPos>tailOldPos){for(i=tailCount;i--;){this[tailNewPos+i]=this[tailOldPos+i]}}if(add&&pos===lengthAfterRemove){this.length=lengthAfterRemove;this.push.apply(this,insert)}else{this.length=lengthAfterRemove+add;for(i=0;i<add;++i){this[pos+i]=insert[i]}}}return removed}}}if(!Array.isArray){Array.isArray=function isArray(obj){return _toString(obj)=="[object Array]"}}var boxedString=Object("a"),splitString=boxedString[0]!="a"||!(0 in boxedString);if(!Array.prototype.forEach){Array.prototype.forEach=function forEach(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(_toString(fun)!="[object Function]"){throw new TypeError}while(++i<length){if(i in self){fun.call(thisp,self[i],i,object)}}}}if(!Array.prototype.map){Array.prototype.map=function map(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self)result[i]=fun.call(thisp,self[i],i,object)}return result}}if(!Array.prototype.filter){Array.prototype.filter=function filter(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,result=[],value,thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self){value=self[i];if(fun.call(thisp,value,i,object)){result.push(value)}}}return result}}if(!Array.prototype.every){Array.prototype.every=function every(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self&&!fun.call(thisp,self[i],i,object)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function some(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}for(var i=0;i<length;i++){if(i in self&&fun.call(thisp,self[i],i,object)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function reduce(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0;if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}if(!length&&arguments.length==1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var result;if(arguments.length>=2){result=arguments[1]}else{do{if(i in self){result=self[i++];break}if(++i>=length){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<length;i++){if(i in self){result=fun.call(void 0,result,self[i],i,object)}}return result}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function reduceRight(fun){var object=toObject(this),self=splitString&&_toString(this)=="[object String]"?this.split(""):object,length=self.length>>>0;if(_toString(fun)!="[object Function]"){throw new TypeError(fun+" is not a function")}if(!length&&arguments.length==1){throw new TypeError("reduceRight of empty array with no initial value")}var result,i=length-1;if(arguments.length>=2){result=arguments[1]}else{do{if(i in self){result=self[i--];break}if(--i<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}do{if(i in this){result=fun.call(void 0,result,self[i],i,object)}}while(i--);return result}}if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1){Array.prototype.indexOf=function indexOf(sought){var self=splitString&&_toString(this)=="[object String]"?this.split(""):toObject(this),length=self.length>>>0;if(!length){return-1}var i=0;if(arguments.length>1){i=toInteger(arguments[1])}i=i>=0?i:Math.max(0,length+i);for(;i<length;i++){if(i in self&&self[i]===sought){return i}}return-1}}if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1){Array.prototype.lastIndexOf=function lastIndexOf(sought){var self=splitString&&_toString(this)=="[object String]"?this.split(""):toObject(this),length=self.length>>>0;if(!length){return-1}var i=length-1;if(arguments.length>1){i=Math.min(i,toInteger(arguments[1]))}i=i>=0?i:length-Math.abs(i);for(;i>=0;i--){if(i in self&&sought===self[i]){return i}}return-1}}if(!Object.getPrototypeOf){Object.getPrototypeOf=function getPrototypeOf(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}}if(!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a "+"non-object: ";Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError(ERR_NON_OBJECT+object);if(!owns(object,property))return;var descriptor,getter,setter;descriptor={enumerable:true,configurable:true};if(supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property);var setter=lookupSetter(object,property);object.__proto__=prototype;if(getter||setter){if(getter)descriptor.get=getter;if(setter)descriptor.set=setter;return descriptor}}descriptor.value=object[property];return descriptor}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)}}if(!Object.create){var createEmpty;if(Object.prototype.__proto__===null){createEmpty=function(){return{__proto__:null}}}else{createEmpty=function(){var empty={};for(var i in empty)empty[i]=null;empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null;return empty}}Object.create=function create(prototype,properties){var object;if(prototype===null){object=createEmpty()}else{if(typeof prototype!="object")throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'");var Type=function(){};Type.prototype=prototype;object=new Type;object.__proto__=prototype}if(properties!==void 0)Object.defineProperties(object,properties);return object}}function doesDefinePropertyWork(object){try{Object.defineProperty(object,"sentinel",{});return"sentinel"in object}catch(exception){}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({});var definePropertyWorksOnDom=typeof document=="undefined"||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom){var definePropertyFallback=Object.defineProperty}}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ";var ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ";var ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined "+"on this javascript engine";Object.defineProperty=function defineProperty(object,property,descriptor){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(typeof descriptor!="object"&&typeof descriptor!="function"||descriptor===null)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback){try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}}if(owns(descriptor,"value")){if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject;delete object[property];object[property]=descriptor.value;object.__proto__=prototype}else{object[property]=descriptor.value}}else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);if(owns(descriptor,"get"))defineGetter(object,property,descriptor.get);if(owns(descriptor,"set"))defineSetter(object,property,descriptor.set)}return object}}if(!Object.defineProperties){Object.defineProperties=function defineProperties(object,properties){for(var property in properties){if(owns(properties,property))Object.defineProperty(object,property,properties[property])}return object}}if(!Object.seal){Object.seal=function seal(object){return object}}if(!Object.freeze){Object.freeze=function freeze(object){return object}}try{Object.freeze(function(){})}catch(exception){Object.freeze=function freeze(freezeObject){return function freeze(object){if(typeof object=="function"){return object}else{return freezeObject(object)}}}(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function preventExtensions(object){return object}}if(!Object.isSealed){Object.isSealed=function isSealed(object){return false}}if(!Object.isFrozen){Object.isFrozen=function isFrozen(object){return false}}if(!Object.isExtensible){Object.isExtensible=function isExtensible(object){if(Object(object)===object){throw new TypeError}var name="";while(owns(object,name)){name+="?"}object[name]=true;var returnValue=owns(object,name);delete object[name];return returnValue}}if(!Object.keys){var hasDontEnumBug=true,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null}){hasDontEnumBug=false}Object.keys=function keys(object){if(typeof object!="object"&&typeof object!="function"||object===null){throw new TypeError("Object.keys called on a non-object")}var keys=[];for(var name in object){if(owns(object,name)){keys.push(name)}}if(hasDontEnumBug){for(var i=0,ii=dontEnumsLength;i<ii;i++){var dontEnum=dontEnums[i];if(owns(object,dontEnum)){keys.push(dontEnum)}}}return keys}}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var ws="	\n\f\r   ᠎    "+"         　\u2028"+"\u2029﻿";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=new RegExp("^"+ws+ws+"*"),trimEndRegexp=new RegExp(ws+ws+"*$");String.prototype.trim=function trim(){return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}function toInteger(n){n=+n;if(n!==n){n=0}else if(n!==0&&n!==1/0&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}return n}function isPrimitive(input){var type=typeof input;return input===null||type==="undefined"||type==="boolean"||type==="number"||type==="string"}function toPrimitive(input){var val,valueOf,toString;if(isPrimitive(input)){return input}valueOf=input.valueOf;if(typeof valueOf==="function"){val=valueOf.call(input);if(isPrimitive(val)){return val}}toString=input.toString;if(typeof toString==="function"){val=toString.call(input);if(isPrimitive(val)){return val}}throw new TypeError}var toObject=function(o){if(o==null){throw new TypeError("can't convert "+o+" to object")}return Object(o)}});define("ace/lib/fixoldbrowsers",["require","exports","module","./regexp","./es5-shim"],function(require,exports,module){require("./regexp");require("./es5-shim")});define("ace/lib/dom",["require","exports","module"],function(require,exports,module){if(typeof document=="undefined")return;var XHTML_NS="http://www.w3.org/1999/xhtml";exports.getDocumentHead=function(doc){if(!doc)doc=document;return doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement};exports.createElement=function(tag,ns){return document.createElementNS?document.createElementNS(ns||XHTML_NS,tag):document.createElement(tag)};exports.hasCssClass=function(el,name){var classes=el.className.split(/\s+/g);return classes.indexOf(name)!==-1};exports.addCssClass=function(el,name){if(!exports.hasCssClass(el,name)){el.className+=" "+name}};exports.removeCssClass=function(el,name){var classes=el.className.split(/\s+/g);while(true){var index=classes.indexOf(name);if(index==-1){break}classes.splice(index,1)}el.className=classes.join(" ")};exports.toggleCssClass=function(el,name){var classes=el.className.split(/\s+/g),add=true;while(true){var index=classes.indexOf(name);if(index==-1){break}add=false;classes.splice(index,1)}if(add)classes.push(name);el.className=classes.join(" ");return add};exports.setCssClass=function(node,className,include){if(include){exports.addCssClass(node,className)}else{exports.removeCssClass(node,className)}};exports.hasCssString=function(id,doc){var index=0,sheets;doc=doc||document;if(doc.createStyleSheet&&(sheets=doc.styleSheets)){while(index<sheets.length)if(sheets[index++].owningElement.id===id)return true}else if(sheets=doc.getElementsByTagName("style")){while(index<sheets.length)if(sheets[index++].id===id)return true}return false};exports.importCssString=function importCssString(cssText,id,doc){doc=doc||document;if(id&&exports.hasCssString(id,doc))return null;var style;if(doc.createStyleSheet){style=doc.createStyleSheet();style.cssText=cssText;if(id)style.owningElement.id=id}else{style=doc.createElementNS?doc.createElementNS(XHTML_NS,"style"):doc.createElement("style");style.appendChild(doc.createTextNode(cssText));if(id)style.id=id;exports.getDocumentHead(doc).appendChild(style)}};exports.importCssStylsheet=function(uri,doc){if(doc.createStyleSheet){doc.createStyleSheet(uri)}else{var link=exports.createElement("link");link.rel="stylesheet";link.href=uri;exports.getDocumentHead(doc).appendChild(link)}};exports.getInnerWidth=function(element){return parseInt(exports.computedStyle(element,"paddingLeft"),10)+parseInt(exports.computedStyle(element,"paddingRight"),10)+element.clientWidth};exports.getInnerHeight=function(element){return parseInt(exports.computedStyle(element,"paddingTop"),10)+parseInt(exports.computedStyle(element,"paddingBottom"),10)+element.clientHeight};if(window.pageYOffset!==undefined){exports.getPageScrollTop=function(){return window.pageYOffset
};exports.getPageScrollLeft=function(){return window.pageXOffset}}else{exports.getPageScrollTop=function(){return document.body.scrollTop};exports.getPageScrollLeft=function(){return document.body.scrollLeft}}if(window.getComputedStyle)exports.computedStyle=function(element,style){if(style)return(window.getComputedStyle(element,"")||{})[style]||"";return window.getComputedStyle(element,"")||{}};else exports.computedStyle=function(element,style){if(style)return element.currentStyle[style];return element.currentStyle};exports.scrollbarWidth=function(document){var inner=exports.createElement("ace_inner");inner.style.width="100%";inner.style.minWidth="0px";inner.style.height="200px";inner.style.display="block";var outer=exports.createElement("ace_outer");var style=outer.style;style.position="absolute";style.left="-10000px";style.overflow="hidden";style.width="200px";style.minWidth="0px";style.height="150px";style.display="block";outer.appendChild(inner);var body=document.documentElement;body.appendChild(outer);var noScrollbar=inner.offsetWidth;style.overflow="scroll";var withScrollbar=inner.offsetWidth;if(noScrollbar==withScrollbar){withScrollbar=outer.clientWidth}body.removeChild(outer);return noScrollbar-withScrollbar};exports.setInnerHtml=function(el,innerHtml){var element=el.cloneNode(false);element.innerHTML=innerHtml;el.parentNode.replaceChild(element,el);return element};if("textContent"in document.documentElement){exports.setInnerText=function(el,innerText){el.textContent=innerText};exports.getInnerText=function(el){return el.textContent}}else{exports.setInnerText=function(el,innerText){el.innerText=innerText};exports.getInnerText=function(el){return el.innerText}}exports.getParentWindow=function(document){return document.defaultView||document.parentWindow}});define("ace/lib/oop",["require","exports","module"],function(require,exports,module){exports.inherits=function(){var tempCtor=function(){};return function(ctor,superCtor){tempCtor.prototype=superCtor.prototype;ctor.super_=superCtor.prototype;ctor.prototype=new tempCtor;ctor.prototype.constructor=ctor}}();exports.mixin=function(obj,mixin){for(var key in mixin){obj[key]=mixin[key]}return obj};exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}});define("ace/lib/keys",["require","exports","module","./oop"],function(require,exports,module){var oop=require("./oop");var Keys=function(){var ret={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(var i in ret.FUNCTION_KEYS){var name=ret.FUNCTION_KEYS[i].toLowerCase();ret[name]=parseInt(i,10)}oop.mixin(ret,ret.MODIFIER_KEYS);oop.mixin(ret,ret.PRINTABLE_KEYS);oop.mixin(ret,ret.FUNCTION_KEYS);ret.enter=ret["return"];ret.escape=ret.esc;ret.del=ret["delete"];ret[173]="-";return ret}();oop.mixin(exports,Keys);exports.keyCodeToString=function(keyCode){return(Keys[keyCode]||String.fromCharCode(keyCode)).toLowerCase()}});define("ace/lib/useragent",["require","exports","module"],function(require,exports,module){exports.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"};exports.getOS=function(){if(exports.isMac){return exports.OS.MAC}else if(exports.isLinux){return exports.OS.LINUX}else{return exports.OS.WINDOWS}};if(typeof navigator!="object")return;var os=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase();var ua=navigator.userAgent;exports.isWin=os=="win";exports.isMac=os=="mac";exports.isLinux=os=="linux";exports.isIE=(navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0)&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]);exports.isOldIE=exports.isIE&&exports.isIE<9;exports.isGecko=exports.isMozilla=window.controllers&&window.navigator.product==="Gecko";exports.isOldGecko=exports.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4;exports.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]";exports.isWebKit=parseFloat(ua.split("WebKit/")[1])||undefined;exports.isChrome=parseFloat(ua.split(" Chrome/")[1])||undefined;exports.isAIR=ua.indexOf("AdobeAIR")>=0;exports.isIPad=ua.indexOf("iPad")>=0;exports.isTouchPad=ua.indexOf("TouchPad")>=0});define("ace/lib/event",["require","exports","module","./keys","./useragent","./dom"],function(require,exports,module){var keys=require("./keys");var useragent=require("./useragent");var dom=require("./dom");exports.addListener=function(elem,type,callback){if(elem.addEventListener){return elem.addEventListener(type,callback,false)}if(elem.attachEvent){var wrapper=function(){callback(window.event)};callback._wrapper=wrapper;elem.attachEvent("on"+type,wrapper)}};exports.removeListener=function(elem,type,callback){if(elem.removeEventListener){return elem.removeEventListener(type,callback,false)}if(elem.detachEvent){elem.detachEvent("on"+type,callback._wrapper||callback)}};exports.stopEvent=function(e){exports.stopPropagation(e);exports.preventDefault(e);return false};exports.stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true};exports.preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false};exports.getButton=function(e){if(e.type=="dblclick")return 0;if(e.type=="contextmenu"||e.ctrlKey&&useragent.isMac)return 2;if(e.preventDefault){return e.button}else{return{1:0,2:2,4:1}[e.button]}};if(document.documentElement.setCapture){exports.capture=function(el,eventHandler,releaseCaptureHandler){var called=false;function onReleaseCapture(e){eventHandler(e);if(!called){called=true;releaseCaptureHandler(e)}exports.removeListener(el,"mousemove",eventHandler);exports.removeListener(el,"mouseup",onReleaseCapture);exports.removeListener(el,"losecapture",onReleaseCapture);el.releaseCapture()}exports.addListener(el,"mousemove",eventHandler);exports.addListener(el,"mouseup",onReleaseCapture);exports.addListener(el,"losecapture",onReleaseCapture);el.setCapture()}}else{exports.capture=function(el,eventHandler,releaseCaptureHandler){function onMouseUp(e){eventHandler&&eventHandler(e);releaseCaptureHandler&&releaseCaptureHandler(e);document.removeEventListener("mousemove",eventHandler,true);document.removeEventListener("mouseup",onMouseUp,true);e.stopPropagation()}document.addEventListener("mousemove",eventHandler,true);document.addEventListener("mouseup",onMouseUp,true)}}exports.addMouseWheelListener=function(el,callback){var factor=8;var listener=function(e){if(e.wheelDelta!==undefined){if(e.wheelDeltaX!==undefined){e.wheelX=-e.wheelDeltaX/factor;e.wheelY=-e.wheelDeltaY/factor}else{e.wheelX=0;e.wheelY=-e.wheelDelta/factor}}else{if(e.axis&&e.axis==e.HORIZONTAL_AXIS){e.wheelX=(e.detail||0)*5;e.wheelY=0}else{e.wheelX=0;e.wheelY=(e.detail||0)*5}}callback(e)};exports.addListener(el,"DOMMouseScroll",listener);exports.addListener(el,"mousewheel",listener)};exports.addMultiMouseDownListener=function(el,timeouts,eventHandler,callbackName){var clicks=0;var startX,startY,timer;var eventNames={2:"dblclick",3:"tripleclick",4:"quadclick"};exports.addListener(el,"mousedown",function(e){if(exports.getButton(e)!=0){clicks=0}else{var isNewClick=Math.abs(e.clientX-startX)>5||Math.abs(e.clientY-startY)>5;if(!timer||isNewClick)clicks=0;clicks+=1;if(timer)clearTimeout(timer);timer=setTimeout(function(){timer=null},timeouts[clicks-1]||600)}if(clicks==1){startX=e.clientX;startY=e.clientY}eventHandler[callbackName]("mousedown",e);if(clicks>4)clicks=0;else if(clicks>1)return eventHandler[callbackName](eventNames[clicks],e)});if(useragent.isOldIE){exports.addListener(el,"dblclick",function(e){clicks=2;if(timer)clearTimeout(timer);timer=setTimeout(function(){timer=null},timeouts[clicks-1]||600);eventHandler[callbackName]("mousedown",e);eventHandler[callbackName](eventNames[clicks],e)})}};function normalizeCommandKeys(callback,e,keyCode){var hashId=0;if(useragent.isOpera&&!("KeyboardEvent"in window)&&useragent.isMac){hashId=0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)}else{hashId=0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}if(keyCode in keys.MODIFIER_KEYS){switch(keys.MODIFIER_KEYS[keyCode]){case"Alt":hashId=2;break;case"Shift":hashId=4;break;case"Ctrl":hashId=1;break;default:hashId=8;break}keyCode=0}if(hashId&8&&(keyCode==91||keyCode==93)){keyCode=0}if(!hashId&&!(keyCode in keys.FUNCTION_KEYS)&&!(keyCode in keys.PRINTABLE_KEYS)){return false}return callback(e,hashId,keyCode)}exports.addCommandKeyListener=function(el,callback){var addListener=exports.addListener;if(useragent.isOldGecko||useragent.isOpera&&!("KeyboardEvent"in window)){var lastKeyDownKeyCode=null;addListener(el,"keydown",function(e){lastKeyDownKeyCode=e.keyCode});addListener(el,"keypress",function(e){return normalizeCommandKeys(callback,e,lastKeyDownKeyCode)})}else{var lastDown=null;addListener(el,"keydown",function(e){lastDown=e.keyIdentifier||e.keyCode;return normalizeCommandKeys(callback,e,e.keyCode)})}};if(window.postMessage&&!useragent.isOldIE){var postMessageId=1;exports.nextTick=function(callback,win){win=win||window;var messageName="zero-timeout-message-"+postMessageId;exports.addListener(win,"message",function listener(e){if(e.data==messageName){exports.stopPropagation(e);exports.removeListener(win,"message",listener);callback()}});win.postMessage(messageName,"*")}}exports.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;if(exports.nextFrame)exports.nextFrame=exports.nextFrame.bind(window);else exports.nextFrame=function(callback){setTimeout(callback,17)}});define("ace/lib/lang",["require","exports","module"],function(require,exports,module){exports.stringReverse=function(string){return string.split("").reverse().join("")};exports.stringRepeat=function(string,count){var result="";while(count>0){if(count&1)result+=string;if(count>>=1)string+=string}return result};var trimBeginRegexp=/^\s\s*/;var trimEndRegexp=/\s\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")};exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")};exports.copyObject=function(obj){var copy={};for(var key in obj){copy[key]=obj[key]}return copy};exports.copyArray=function(array){var copy=[];for(var i=0,l=array.length;i<l;i++){if(array[i]&&typeof array[i]=="object")copy[i]=this.copyObject(array[i]);else copy[i]=array[i]}return copy};exports.deepCopy=function(obj){if(typeof obj!="object"){return obj}var copy=obj.constructor();for(var key in obj){if(typeof obj[key]=="object"){copy[key]=this.deepCopy(obj[key])}else{copy[key]=obj[key]}}return copy};exports.arrayToMap=function(arr){var map={};for(var i=0;i<arr.length;i++){map[arr[i]]=1}return map};exports.createMap=function(props){var map=Object.create(null);for(var i in props){map[i]=props[i]}return map};exports.arrayRemove=function(array,value){for(var i=0;i<=array.length;i++){if(value===array[i]){array.splice(i,1)}}};exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")};exports.getMatchOffsets=function(string,regExp){var matches=[];string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})});return matches};exports.deferredCall=function(fcn){var timer=null;var callback=function(){timer=null;fcn()};var deferred=function(timeout){deferred.cancel();timer=setTimeout(callback,timeout||0);return deferred};deferred.schedule=deferred;deferred.call=function(){this.cancel();fcn();return deferred};deferred.cancel=function(){clearTimeout(timer);timer=null;return deferred};return deferred};exports.delayedCall=function(fcn,defaultTimeout){var timer=null;var callback=function(){timer=null;fcn()};var _self=function(timeout){timer&&clearTimeout(timer);timer=setTimeout(callback,timeout||defaultTimeout)};_self.delay=_self;_self.schedule=function(timeout){if(timer==null)timer=setTimeout(callback,timeout||0)};_self.call=function(){this.cancel();fcn()};_self.cancel=function(){timer&&clearTimeout(timer);timer=null};_self.isPending=function(){return timer};return _self}});define("ace/keyboard/textinput",["require","exports","module","../lib/event","../lib/useragent","../lib/dom","../lib/lang"],function(require,exports,module){var event=require("../lib/event");var useragent=require("../lib/useragent");var dom=require("../lib/dom");var lang=require("../lib/lang");var BROKEN_SETDATA=useragent.isChrome<18;var TextInput=function(parentNode,host){var text=dom.createElement("textarea");text.className="ace_text-input";if(useragent.isTouchPad)text.setAttribute("x-palm-disable-auto-cap",true);text.wrap="off";text.autocorrect="off";text.autocapitalize="off";text.spellcheck=false;text.style.bottom="2000em";parentNode.insertBefore(text,parentNode.firstChild);var PLACEHOLDER="";var cut=false;var copied=false;var pasted=false;var inComposition=false;var tempStyle="";var isSelectionEmpty=true;try{var isFocused=document.activeElement===text}catch(e){}event.addListener(text,"blur",function(){host.onBlur();isFocused=false});event.addListener(text,"focus",function(){isFocused=true;host.onFocus();resetSelection()});this.focus=function(){text.focus()};this.blur=function(){text.blur()};this.isFocused=function(){return isFocused};var syncSelection=lang.delayedCall(function(){isFocused&&resetSelection(isSelectionEmpty)});var syncValue=lang.delayedCall(function(){if(!inComposition){text.value=PLACEHOLDER;isFocused&&resetSelection()}});function resetSelection(isEmpty){if(inComposition)return;if(inputHandler){selectionStart=0;selectionEnd=isEmpty?0:text.value.length-1}else{var selectionStart=isEmpty?2:1;var selectionEnd=2}try{text.setSelectionRange(selectionStart,selectionEnd)}catch(e){}}function resetValue(){if(inComposition)return;text.value=PLACEHOLDER;if(useragent.isWebKit)syncValue.schedule()}useragent.isWebKit||host.addEventListener("changeSelection",function(){if(host.selection.isEmpty()!=isSelectionEmpty){isSelectionEmpty=!isSelectionEmpty;syncSelection.schedule()}});resetValue();if(isFocused)host.onFocus();var isAllSelected=function(text){return text.selectionStart===0&&text.selectionEnd===text.value.length};if(!text.setSelectionRange&&text.createTextRange){text.setSelectionRange=function(selectionStart,selectionEnd){var range=this.createTextRange();range.collapse(true);range.moveStart("character",selectionStart);range.moveEnd("character",selectionEnd);range.select()};isAllSelected=function(text){try{var range=text.ownerDocument.selection.createRange()}catch(e){}if(!range||range.parentElement()!=text)return false;return range.text==text.value}}if(useragent.isOldIE){var inPropertyChange=false;var onPropertyChange=function(e){if(inPropertyChange)return;var data=text.value;if(inComposition||!data||data==PLACEHOLDER)return;if(e&&data==PLACEHOLDER[0])return syncProperty.schedule();sendText(data);inPropertyChange=true;resetValue();inPropertyChange=false};var syncProperty=lang.delayedCall(onPropertyChange);event.addListener(text,"propertychange",onPropertyChange);var keytable={13:1,27:1};event.addListener(text,"keyup",function(e){if(inComposition&&(!text.value||keytable[e.keyCode]))setTimeout(onCompositionEnd,0);if((text.value.charCodeAt(0)||0)<129){return}inComposition?onCompositionUpdate():onCompositionStart()})}var onSelect=function(e){if(cut){cut=false}else if(copied){copied=false}else if(isAllSelected(text)){host.selectAll();resetSelection()}else if(inputHandler){resetSelection(host.selection.isEmpty())}};var inputHandler=null;this.setInputHandler=function(cb){inputHandler=cb};this.getInputHandler=function(){return inputHandler};var afterContextMenu=false;var sendText=function(data){if(inputHandler){data=inputHandler(data);inputHandler=null}if(pasted){resetSelection();if(data)host.onPaste(data);pasted=false}else if(data==PLACEHOLDER[0]){if(afterContextMenu)host.execCommand("del",{source:"ace"})}else{if(data.substring(0,2)==PLACEHOLDER)data=data.substr(2);else if(data[0]==PLACEHOLDER[0])data=data.substr(1);else if(data[data.length-1]==PLACEHOLDER[0])data=data.slice(0,-1);if(data[data.length-1]==PLACEHOLDER[0])data=data.slice(0,-1);if(data)host.onTextInput(data)}if(afterContextMenu)afterContextMenu=false};var onInput=function(e){if(inComposition)return;var data=text.value;sendText(data);resetValue()};var onCut=function(e){var data=host.getCopyText();if(!data){event.preventDefault(e);return}var clipboardData=e.clipboardData||window.clipboardData;if(clipboardData&&!BROKEN_SETDATA){var supported=clipboardData.setData("Text",data);if(supported){host.onCut();event.preventDefault(e)}}if(!supported){cut=true;text.value=data;text.select();setTimeout(function(){cut=false;resetValue();resetSelection();host.onCut()})}};var onCopy=function(e){var data=host.getCopyText();if(!data){event.preventDefault(e);return}var clipboardData=e.clipboardData||window.clipboardData;if(clipboardData&&!BROKEN_SETDATA){var supported=clipboardData.setData("Text",data);if(supported){host.onCopy();event.preventDefault(e)}}if(!supported){copied=true;text.value=data;text.select();setTimeout(function(){copied=false;resetValue();resetSelection();host.onCopy()})}};var onPaste=function(e){var clipboardData=e.clipboardData||window.clipboardData;if(clipboardData){var data=clipboardData.getData("Text");if(data)host.onPaste(data);if(useragent.isIE)setTimeout(resetSelection);event.preventDefault(e)}else{text.value="";pasted=true}};event.addCommandKeyListener(text,host.onCommandKey.bind(host));event.addListener(text,"select",onSelect);event.addListener(text,"input",onInput);event.addListener(text,"cut",onCut);event.addListener(text,"copy",onCopy);event.addListener(text,"paste",onPaste);if(!("oncut"in text)||!("oncopy"in text)||!("onpaste"in text)){event.addListener(parentNode,"keydown",function(e){if(useragent.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:onCopy(e);break;case 86:onPaste(e);break;case 88:onCut(e);break}})}var onCompositionStart=function(e){inComposition={};host.onCompositionStart();setTimeout(onCompositionUpdate,0);host.on("mousedown",onCompositionEnd);if(!host.selection.isEmpty()){host.insert("");host.session.markUndoGroup();host.selection.clearSelection()}host.session.markUndoGroup()};var onCompositionUpdate=function(){if(!inComposition)return;host.onCompositionUpdate(text.value);if(inComposition.lastValue)host.undo();inComposition.lastValue=text.value.replace(/\x01/g,"");if(inComposition.lastValue){var r=host.selection.getRange();host.insert(inComposition.lastValue);host.session.markUndoGroup();inComposition.range=host.selection.getRange();host.selection.setRange(r);host.selection.clearSelection()}};var onCompositionEnd=function(e){var c=inComposition;inComposition=false;var timer=setTimeout(function(){var str=text.value.replace(/\x01/g,"");if(!inComposition&&str==c.lastValue)resetValue()});inputHandler=function compositionInputHandler(str){clearTimeout(timer);str=str.replace(/\x01/g,"");if(str==c.lastValue)return"";if(!str){if(c.lastValue)host.undo()}return str};host.onCompositionEnd();host.removeListener("mousedown",onCompositionEnd);if(e.type=="compositionend"){host.selection.setRange(c.range)}};var syncComposition=lang.delayedCall(onCompositionUpdate,50);event.addListener(text,"compositionstart",onCompositionStart);event.addListener(text,useragent.isGecko?"text":"keyup",function(){syncComposition.schedule()});event.addListener(text,"compositionend",onCompositionEnd);this.getElement=function(){return text};this.setReadOnly=function(readOnly){text.readOnly=readOnly};this.onContextMenu=function(e){afterContextMenu=true;if(!tempStyle)tempStyle=text.style.cssText;text.style.cssText="z-index:100000;"+(useragent.isIE?"opacity:0.1;":"");resetSelection(host.selection.isEmpty());host._emit("nativecontextmenu",{target:host});var rect=host.container.getBoundingClientRect();var style=dom.computedStyle(host.container);var top=rect.top+(parseInt(style.borderTopWidth)||0);var left=rect.left+(parseInt(rect.borderLeftWidth)||0);var maxTop=rect.bottom-top-text.clientHeight;var move=function(e){text.style.left=e.clientX-left-2+"px";text.style.top=Math.min(e.clientY-top-2,maxTop)+"px"};move(e);if(e.type!="mousedown")return;if(host.renderer.$keepTextAreaAtCursor)host.renderer.$keepTextAreaAtCursor=null;if(useragent.isWin)event.capture(host.container,move,onContextMenuClose)};this.onContextMenuClose=onContextMenuClose;function onContextMenuClose(){setTimeout(function(){if(tempStyle){text.style.cssText=tempStyle;tempStyle=""}if(host.renderer.$keepTextAreaAtCursor==null){host.renderer.$keepTextAreaAtCursor=true;host.renderer.$moveTextAreaToCursor()}},0)}if(!useragent.isGecko){event.addListener(text,"contextmenu",function(e){host.textInput.onContextMenu(e);onContextMenuClose()})}};exports.TextInput=TextInput});define("ace/mouse/default_handlers",["require","exports","module","../lib/dom","../lib/useragent"],function(require,exports,module){var dom=require("../lib/dom");var useragent=require("../lib/useragent");var DRAG_OFFSET=0;function DefaultHandlers(mouseHandler){mouseHandler.$clickSelection=null;var editor=mouseHandler.editor;editor.setDefaultHandler("mousedown",this.onMouseDown.bind(mouseHandler));editor.setDefaultHandler("dblclick",this.onDoubleClick.bind(mouseHandler));editor.setDefaultHandler("tripleclick",this.onTripleClick.bind(mouseHandler));editor.setDefaultHandler("quadclick",this.onQuadClick.bind(mouseHandler));editor.setDefaultHandler("mousewheel",this.onMouseWheel.bind(mouseHandler));var exports=["select","startSelect","drag","dragEnd","dragWait","dragWaitEnd","startDrag","focusWait"];exports.forEach(function(x){mouseHandler[x]=this[x]},this);mouseHandler.selectByLines=this.extendSelectionBy.bind(mouseHandler,"getLineRange");mouseHandler.selectByWords=this.extendSelectionBy.bind(mouseHandler,"getWordRange")}!function(){this.onMouseDown=function(ev){var inSelection=ev.inSelection();var pos=ev.getDocumentPosition();this.mousedownEvent=ev;var editor=this.editor;var button=ev.getButton();if(button!==0){var selectionRange=editor.getSelectionRange();var selectionEmpty=selectionRange.isEmpty();if(selectionEmpty){editor.moveCursorToPosition(pos);editor.selection.clearSelection()}editor.textInput.onContextMenu(ev.domEvent);return}if(inSelection&&!editor.isFocused()){editor.focus();if(this.$focusTimout&&!this.$clickSelection&&!editor.inMultiSelectMode){this.setState("focusWait");this.captureMouse(ev);return ev.preventDefault()}}if(!inSelection||this.$clickSelection||ev.getShiftKey()||editor.inMultiSelectMode){this.startSelect(pos)}else if(inSelection){this.mousedownEvent.time=(new Date).getTime();this.setState("dragWait")}this.captureMouse(ev);return ev.preventDefault()};this.startSelect=function(pos){pos=pos||this.editor.renderer.screenToTextCoordinates(this.x,this.y);if(this.mousedownEvent.getShiftKey()){this.editor.selection.selectToPosition(pos)}else if(!this.$clickSelection){this.editor.moveCursorToPosition(pos);this.editor.selection.clearSelection()}this.setState("select")};this.select=function(){var anchor,editor=this.editor;var cursor=editor.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var cmp=this.$clickSelection.comparePoint(cursor);if(cmp==-1){anchor=this.$clickSelection.end}else if(cmp==1){anchor=this.$clickSelection.start}else{var orientedRange=calcRangeOrientation(this.$clickSelection,cursor);cursor=orientedRange.cursor;anchor=orientedRange.anchor}editor.selection.setSelectionAnchor(anchor.row,anchor.column)}editor.selection.selectToPosition(cursor);editor.renderer.scrollCursorIntoView()};this.extendSelectionBy=function(unitName){var anchor,editor=this.editor;var cursor=editor.renderer.screenToTextCoordinates(this.x,this.y);var range=editor.selection[unitName](cursor.row,cursor.column);if(this.$clickSelection){var cmpStart=this.$clickSelection.comparePoint(range.start);var cmpEnd=this.$clickSelection.comparePoint(range.end);if(cmpStart==-1&&cmpEnd<=0){anchor=this.$clickSelection.end;if(range.end.row!=cursor.row||range.end.column!=cursor.column)cursor=range.start}else if(cmpEnd==1&&cmpStart>=0){anchor=this.$clickSelection.start;if(range.start.row!=cursor.row||range.start.column!=cursor.column)cursor=range.end}else if(cmpStart==-1&&cmpEnd==1){cursor=range.end;anchor=range.start}else{var orientedRange=calcRangeOrientation(this.$clickSelection,cursor);cursor=orientedRange.cursor;anchor=orientedRange.anchor}editor.selection.setSelectionAnchor(anchor.row,anchor.column)}editor.selection.selectToPosition(cursor);editor.renderer.scrollCursorIntoView()};this.startDrag=function(){var editor=this.editor;this.setState("drag");this.dragRange=editor.getSelectionRange();var style=editor.getSelectionStyle();this.dragSelectionMarker=editor.session.addMarker(this.dragRange,"ace_selection",style);editor.clearSelection();dom.addCssClass(editor.container,"ace_dragging");if(!this.$dragKeybinding){this.$dragKeybinding={handleKeyboard:function(data,hashId,keyString,keyCode){if(keyString=="esc")return{command:this.command}},command:{exec:function(editor){var self=editor.$mouseHandler;self.dragCursor=null;self.dragEnd();self.startSelect()}}}}editor.keyBinding.addKeyboardHandler(this.$dragKeybinding)};this.focusWait=function(){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);var time=(new Date).getTime();if(distance>DRAG_OFFSET||time-this.mousedownEvent.time>this.$focusTimout)this.startSelect(this.mousedownEvent.getDocumentPosition())};this.dragWait=function(e){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);var time=(new Date).getTime();var editor=this.editor;if(distance>DRAG_OFFSET){this.startSelect(this.mousedownEvent.getDocumentPosition())}else if(time-this.mousedownEvent.time>editor.$mouseHandler.$dragDelay){this.startDrag()}};this.dragWaitEnd=function(e){this.mousedownEvent.domEvent=e;this.startSelect()};this.drag=function(){var editor=this.editor;this.dragCursor=editor.renderer.screenToTextCoordinates(this.x,this.y);editor.moveCursorToPosition(this.dragCursor);editor.renderer.scrollCursorIntoView()};this.dragEnd=function(e){var editor=this.editor;var dragCursor=this.dragCursor;var dragRange=this.dragRange;dom.removeCssClass(editor.container,"ace_dragging");editor.session.removeMarker(this.dragSelectionMarker);editor.keyBinding.removeKeyboardHandler(this.$dragKeybinding);if(!dragCursor)return;editor.clearSelection();if(e&&(e.ctrlKey||e.altKey)){var session=editor.session;var newRange=dragRange;newRange.end=session.insert(dragCursor,session.getTextRange(dragRange));newRange.start=dragCursor}else if(dragRange.contains(dragCursor.row,dragCursor.column)){return}else{var newRange=editor.moveText(dragRange,dragCursor)}if(!newRange)return;editor.selection.setSelectionRange(newRange)};this.onDoubleClick=function(ev){var pos=ev.getDocumentPosition();var editor=this.editor;var session=editor.session;var range=session.getBracketRange(pos);if(range){if(range.isEmpty()){range.start.column--;range.end.column++}this.$clickSelection=range;this.setState("select");return}this.$clickSelection=editor.selection.getWordRange(pos.row,pos.column);this.setState("selectByWords")};this.onTripleClick=function(ev){var pos=ev.getDocumentPosition();var editor=this.editor;this.setState("selectByLines");this.$clickSelection=editor.selection.getLineRange(pos.row)};this.onQuadClick=function(ev){var editor=this.editor;editor.selectAll();this.$clickSelection=editor.getSelectionRange();this.setState("null")};this.onMouseWheel=function(ev){if(ev.getShiftKey()||ev.getAccelKey())return;var t=ev.domEvent.timeStamp;var dt=t-(this.$lastScrollTime||0);var editor=this.editor;var isScrolable=editor.renderer.isScrollableBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed);if(isScrolable||dt<200){this.$lastScrollTime=t;editor.renderer.scrollBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed);return ev.stop()}}}.call(DefaultHandlers.prototype);exports.DefaultHandlers=DefaultHandlers;function calcDistance(ax,ay,bx,by){return Math.sqrt(Math.pow(bx-ax,2)+Math.pow(by-ay,2))}function calcRangeOrientation(range,cursor){if(range.start.row==range.end.row)var cmp=2*cursor.column-range.start.column-range.end.column;else if(range.start.row==range.end.row-1&&!range.start.column&&!range.end.column)var cmp=cursor.column-4;else var cmp=2*cursor.row-range.start.row-range.end.row;if(cmp<0)return{cursor:range.start,anchor:range.end};else return{cursor:range.end,anchor:range.start}}});define("ace/mouse/default_gutter_handler",["require","exports","module","../lib/dom","../lib/event"],function(require,exports,module){var dom=require("../lib/dom");var event=require("../lib/event");function GutterHandler(mouseHandler){var editor=mouseHandler.editor;var gutter=editor.renderer.$gutterLayer;mouseHandler.editor.setDefaultHandler("guttermousedown",function(e){if(!editor.isFocused())return;var gutterRegion=gutter.getRegion(e);if(gutterRegion=="foldWidgets")return;var row=e.getDocumentPosition().row;var selection=editor.session.selection;if(e.getShiftKey())selection.selectTo(row,0);else{if(e.domEvent.detail==2){editor.selectAll();return e.preventDefault()}mouseHandler.$clickSelection=editor.selection.getLineRange(row)}mouseHandler.captureMouse(e,"selectByLines");return e.preventDefault()});var tooltipTimeout,mouseEvent,tooltip,tooltipAnnotation;function createTooltip(){tooltip=dom.createElement("div");tooltip.className="ace_gutter-tooltip";tooltip.style.display="none";editor.container.appendChild(tooltip)}function showTooltip(){if(!tooltip){createTooltip()}var row=mouseEvent.getDocumentPosition().row;var annotation=gutter.$annotations[row];if(!annotation)return hideTooltip();var maxRow=editor.session.getLength();if(row==maxRow){var screenRow=editor.renderer.pixelToScreenCoordinates(0,mouseEvent.y).row;var pos=mouseEvent.$pos;if(screenRow>editor.session.documentToScreenRow(pos.row,pos.column))return hideTooltip()}if(tooltipAnnotation==annotation)return;tooltipAnnotation=annotation.text.join("<br/>");tooltip.style.display="block";tooltip.innerHTML=tooltipAnnotation;editor.on("mousewheel",hideTooltip);moveTooltip(mouseEvent)}function hideTooltip(){if(tooltipTimeout)tooltipTimeout=clearTimeout(tooltipTimeout);if(tooltipAnnotation){tooltip.style.display="none";tooltipAnnotation=null;editor.removeEventListener("mousewheel",hideTooltip)}}function moveTooltip(e){var rect=editor.renderer.$gutter.getBoundingClientRect();tooltip.style.left=e.x+15+"px";if(e.y+3*editor.renderer.lineHeight+15<rect.bottom){tooltip.style.bottom="";tooltip.style.top=e.y+15+"px"}else{tooltip.style.top="";tooltip.style.bottom=rect.bottom-e.y+5+"px"}}mouseHandler.editor.setDefaultHandler("guttermousemove",function(e){var target=e.domEvent.target||e.domEvent.srcElement;if(dom.hasCssClass(target,"ace_fold-widget"))return hideTooltip();if(tooltipAnnotation)moveTooltip(e);mouseEvent=e;if(tooltipTimeout)return;tooltipTimeout=setTimeout(function(){tooltipTimeout=null;if(mouseEvent&&!mouseHandler.isMousePressed)showTooltip();else hideTooltip()},50)});event.addListener(editor.renderer.$gutter,"mouseout",function(e){mouseEvent=null;
if(!tooltipAnnotation||tooltipTimeout)return;tooltipTimeout=setTimeout(function(){tooltipTimeout=null;hideTooltip()},50)})}exports.GutterHandler=GutterHandler});define("ace/mouse/mouse_event",["require","exports","module","../lib/event","../lib/useragent"],function(require,exports,module){var event=require("../lib/event");var useragent=require("../lib/useragent");var MouseEvent=exports.MouseEvent=function(domEvent,editor){this.domEvent=domEvent;this.editor=editor;this.x=this.clientX=domEvent.clientX;this.y=this.clientY=domEvent.clientY;this.$pos=null;this.$inSelection=null;this.propagationStopped=false;this.defaultPrevented=false};!function(){this.stopPropagation=function(){event.stopPropagation(this.domEvent);this.propagationStopped=true};this.preventDefault=function(){event.preventDefault(this.domEvent);this.defaultPrevented=true};this.stop=function(){this.stopPropagation();this.preventDefault()};this.getDocumentPosition=function(){if(this.$pos)return this.$pos;this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY);return this.$pos};this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var editor=this.editor;if(editor.getReadOnly()){this.$inSelection=false}else{var selectionRange=editor.getSelectionRange();if(selectionRange.isEmpty())this.$inSelection=false;else{var pos=this.getDocumentPosition();this.$inSelection=selectionRange.contains(pos.row,pos.column)}}return this.$inSelection};this.getButton=function(){return event.getButton(this.domEvent)};this.getShiftKey=function(){return this.domEvent.shiftKey};this.getAccelKey=useragent.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}.call(MouseEvent.prototype)});define("ace/mouse/dragdrop",["require","exports","module","../lib/event"],function(require,exports,module){var event=require("../lib/event");var DragdropHandler=function(mouseHandler){var editor=mouseHandler.editor;var dragSelectionMarker,x,y;var timerId,range;var dragCursor,counter=0;var mouseTarget=editor.container;event.addListener(mouseTarget,"dragenter",function(e){if(editor.getReadOnly())return;var types=e.dataTransfer.types;if(types&&Array.prototype.indexOf.call(types,"text/plain")===-1)return;if(!dragSelectionMarker)addDragMarker();counter++;return event.preventDefault(e)});event.addListener(mouseTarget,"dragover",function(e){if(editor.getReadOnly())return;var types=e.dataTransfer.types;if(types&&Array.prototype.indexOf.call(types,"text/plain")===-1)return;if(onMouseMoveTimer!==null)onMouseMoveTimer=null;x=e.clientX;y=e.clientY;return event.preventDefault(e)});var onDragInterval=function(){dragCursor=editor.renderer.screenToTextCoordinates(x,y);editor.moveCursorToPosition(dragCursor);editor.renderer.scrollCursorIntoView()};event.addListener(mouseTarget,"dragleave",function(e){counter--;if(counter<=0&&dragSelectionMarker){clearDragMarker();return event.preventDefault(e)}});event.addListener(mouseTarget,"drop",function(e){if(!dragSelectionMarker)return;range.end=editor.session.insert(dragCursor,e.dataTransfer.getData("Text"));range.start=dragCursor;clearDragMarker();editor.focus();return event.preventDefault(e)});function addDragMarker(){range=editor.selection.toOrientedRange();dragSelectionMarker=editor.session.addMarker(range,"ace_selection",editor.getSelectionStyle());editor.clearSelection();clearInterval(timerId);timerId=setInterval(onDragInterval,20);counter=0;event.addListener(document,"mousemove",onMouseMove)}function clearDragMarker(){clearInterval(timerId);editor.session.removeMarker(dragSelectionMarker);dragSelectionMarker=null;editor.selection.fromOrientedRange(range);counter=0;event.removeListener(document,"mousemove",onMouseMove)}var onMouseMoveTimer=null;function onMouseMove(){if(onMouseMoveTimer==null){onMouseMoveTimer=setTimeout(function(){if(onMouseMoveTimer!=null&&dragSelectionMarker)clearDragMarker()},20)}}};exports.DragdropHandler=DragdropHandler});define("ace/mouse/fold_handler",["require","exports","module"],function(require,exports,module){function FoldHandler(editor){editor.on("click",function(e){var position=e.getDocumentPosition();var session=editor.session;var fold=session.getFoldAt(position.row,position.column,1);if(fold){if(e.getAccelKey())session.removeFold(fold);else session.expandFold(fold);e.stop()}});editor.on("gutterclick",function(e){var gutterRegion=editor.renderer.$gutterLayer.getRegion(e);if(gutterRegion=="foldWidgets"){var row=e.getDocumentPosition().row;var session=editor.session;if(session.foldWidgets&&session.foldWidgets[row])editor.session.onFoldWidgetClick(row,e);if(!editor.isFocused())editor.focus();e.stop()}});editor.on("gutterdblclick",function(e){var gutterRegion=editor.renderer.$gutterLayer.getRegion(e);if(gutterRegion=="foldWidgets"){var row=e.getDocumentPosition().row;var session=editor.session;var data=session.getParentFoldRangeData(row,true);var range=data.range||data.firstRange;if(range){var row=range.start.row;var fold=session.getFoldAt(row,session.getLine(row).length,1);if(fold){session.removeFold(fold)}else{session.addFold("...",range);editor.renderer.scrollCursorIntoView({row:range.start.row,column:0})}}e.stop()}})}exports.FoldHandler=FoldHandler});define("ace/keyboard/keybinding",["require","exports","module","../lib/keys","../lib/event"],function(require,exports,module){var keyUtil=require("../lib/keys");var event=require("../lib/event");var KeyBinding=function(editor){this.$editor=editor;this.$data={};this.$handlers=[];this.setDefaultHandler(editor.commands)};!function(){this.setDefaultHandler=function(kb){this.removeKeyboardHandler(this.$defaultHandler);this.$defaultHandler=kb;this.addKeyboardHandler(kb,0);this.$data={editor:this.$editor}};this.setKeyboardHandler=function(kb){var h=this.$handlers;if(h[h.length-1]==kb)return;while(h[h.length-1]&&h[h.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(h[h.length-1]);this.addKeyboardHandler(kb,1)};this.addKeyboardHandler=function(kb,pos){if(!kb)return;var i=this.$handlers.indexOf(kb);if(i!=-1)this.$handlers.splice(i,1);if(pos==undefined)this.$handlers.push(kb);else this.$handlers.splice(pos,0,kb);if(i==-1&&kb.attach)kb.attach(this.$editor)};this.removeKeyboardHandler=function(kb){var i=this.$handlers.indexOf(kb);if(i==-1)return false;this.$handlers.splice(i,1);kb.detach&&kb.detach(this.$editor);return true};this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]};this.$callKeyboardHandlers=function(hashId,keyString,keyCode,e){var toExecute;var success=false;var commands=this.$editor.commands;for(var i=this.$handlers.length;i--;){toExecute=this.$handlers[i].handleKeyboard(this.$data,hashId,keyString,keyCode,e);if(!toExecute||!toExecute.command)continue;if(toExecute.command=="null"){success=toExecute.passEvent!=true}else{success=commands.exec(toExecute.command,this.$editor,toExecute.args,e)}if(success&&e&&hashId!=-1)event.stopEvent(e);if(success)break}return success};this.onCommandKey=function(e,hashId,keyCode){var keyString=keyUtil.keyCodeToString(keyCode);this.$callKeyboardHandlers(hashId,keyString,keyCode,e)};this.onTextInput=function(text){var success=this.$callKeyboardHandlers(-1,text);if(!success)this.$editor.commands.exec("insertstring",this.$editor,text)}}.call(KeyBinding.prototype);exports.KeyBinding=KeyBinding});define("ace/range",["require","exports","module"],function(require,exports,module){var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column};var Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn};this.end={row:endRow,column:endColumn}};!function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column};this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"};this.contains=function(row,column){return this.compare(row,column)==0};this.compareRange=function(range){var cmp,end=range.end,start=range.start;cmp=this.compare(end.row,end.column);if(cmp==1){cmp=this.compare(start.row,start.column);if(cmp==1){return 2}else if(cmp==0){return 1}else{return 0}}else if(cmp==-1){return-2}else{cmp=this.compare(start.row,start.column);if(cmp==-1){return-1}else if(cmp==1){return 42}else{return 0}}};this.comparePoint=function(p){return this.compare(p.row,p.column)};this.containsRange=function(range){return this.comparePoint(range.start)==0&&this.comparePoint(range.end)==0};this.intersects=function(range){var cmp=this.compareRange(range);return cmp==-1||cmp==0||cmp==1};this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column};this.isStart=function(row,column){return this.start.row==row&&this.start.column==column};this.setStart=function(row,column){if(typeof row=="object"){this.start.column=row.column;this.start.row=row.row}else{this.start.row=row;this.start.column=column}};this.setEnd=function(row,column){if(typeof row=="object"){this.end.column=row.column;this.end.row=row.row}else{this.end.row=row;this.end.column=column}};this.inside=function(row,column){if(this.compare(row,column)==0){if(this.isEnd(row,column)||this.isStart(row,column)){return false}else{return true}}return false};this.insideStart=function(row,column){if(this.compare(row,column)==0){if(this.isEnd(row,column)){return false}else{return true}}return false};this.insideEnd=function(row,column){if(this.compare(row,column)==0){if(this.isStart(row,column)){return false}else{return true}}return false};this.compare=function(row,column){if(!this.isMultiLine()){if(row===this.start.row){return column<this.start.column?-1:column>this.end.column?1:0}}if(row<this.start.row)return-1;if(row>this.end.row)return 1;if(this.start.row===row)return column>=this.start.column?0:-1;if(this.end.row===row)return column<=this.end.column?0:1;return 0};this.compareStart=function(row,column){if(this.start.row==row&&this.start.column==column){return-1}else{return this.compare(row,column)}};this.compareEnd=function(row,column){if(this.end.row==row&&this.end.column==column){return 1}else{return this.compare(row,column)}};this.compareInside=function(row,column){if(this.end.row==row&&this.end.column==column){return 1}else if(this.start.row==row&&this.start.column==column){return-1}else{return this.compare(row,column)}};this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(this.end.row<firstRow)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(this.start.row<firstRow)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)};this.extend=function(row,column){var cmp=this.compare(row,column);if(cmp==0)return this;else if(cmp==-1)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)};this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column};this.isMultiLine=function(){return this.start.row!==this.end.row};this.clone=function(){return Range.fromPoints(this.start,this.end)};this.collapseRows=function(){if(this.end.column==0)return new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0);else return new Range(this.start.row,0,this.end.row,0)};this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start);var screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)};this.moveBy=function(row,column){this.start.row+=row;this.start.column+=column;this.end.row+=row;this.end.column+=column}}.call(Range.prototype);Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)};Range.comparePoints=comparePoints;Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column};exports.Range=Range});define("ace/search",["require","exports","module","./lib/lang","./lib/oop","./range"],function(require,exports,module){var lang=require("./lib/lang");var oop=require("./lib/oop");var Range=require("./range").Range;var Search=function(){this.$options={}};!function(){this.set=function(options){oop.mixin(this.$options,options);return this};this.getOptions=function(){return lang.copyObject(this.$options)};this.setOptions=function(options){this.$options=options};this.find=function(session){var iterator=this.$matchIterator(session,this.$options);if(!iterator)return false;var firstRange=null;iterator.forEach(function(range,row,offset){if(!range.start){var column=range.offset+(offset||0);firstRange=new Range(row,column,row,column+range.length)}else firstRange=range;return true});return firstRange};this.findAll=function(session){var options=this.$options;if(!options.needle)return[];this.$assembleRegExp(options);var range=options.range;var lines=range?session.getLines(range.start.row,range.end.row):session.doc.getAllLines();var ranges=[];var re=options.re;if(options.$isMultiLine){var len=re.length;var maxRow=lines.length-len;for(var row=re.offset||0;row<=maxRow;row++){for(var j=0;j<len;j++)if(lines[row+j].search(re[j])==-1)break;var startLine=lines[row];var line=lines[row+len-1];var startIndex=startLine.match(re[0])[0].length;var endIndex=line.match(re[len-1])[0].length;ranges.push(new Range(row,startLine.length-startIndex,row+len-1,endIndex))}}else{for(var i=0;i<lines.length;i++){var matches=lang.getMatchOffsets(lines[i],re);for(var j=0;j<matches.length;j++){var match=matches[j];ranges.push(new Range(i,match.offset,i,match.offset+match.length))}}}if(range){var startColumn=range.start.column;var endColumn=range.start.column;var i=0,j=ranges.length-1;while(i<j&&ranges[i].start.column<startColumn&&ranges[i].start.row==range.start.row)i++;while(i<j&&ranges[j].end.column>endColumn&&ranges[j].end.row==range.end.row)j--;return ranges.slice(i,j+1)}return ranges};this.replace=function(input,replacement){var options=this.$options;var re=this.$assembleRegExp(options);if(options.$isMultiLine)return replacement;if(!re)return;var match=re.exec(input);if(!match||match[0].length!=input.length)return null;replacement=input.replace(re,replacement);if(options.preserveCase){replacement=replacement.split("");for(var i=Math.min(input.length,input.length);i--;){var ch=input[i];if(ch&&ch.toLowerCase()!=ch)replacement[i]=replacement[i].toUpperCase();else replacement[i]=replacement[i].toLowerCase()}replacement=replacement.join("")}return replacement};this.$matchIterator=function(session,options){var re=this.$assembleRegExp(options);if(!re)return false;var self=this,callback,backwards=options.backwards;if(options.$isMultiLine){var len=re.length;var matchIterator=function(line,row,offset){var startIndex=line.search(re[0]);if(startIndex==-1)return;for(var i=1;i<len;i++){line=session.getLine(row+i);if(line.search(re[i])==-1)return}var endIndex=line.match(re[len-1])[0].length;var range=new Range(row,startIndex,row+len-1,endIndex);if(re.offset==1){range.start.row--;range.start.column=Number.MAX_VALUE}else if(offset)range.start.column+=offset;if(callback(range))return true}}else if(backwards){var matchIterator=function(line,row,startIndex){var matches=lang.getMatchOffsets(line,re);for(var i=matches.length-1;i>=0;i--)if(callback(matches[i],row,startIndex))return true}}else{var matchIterator=function(line,row,startIndex){var matches=lang.getMatchOffsets(line,re);for(var i=0;i<matches.length;i++)if(callback(matches[i],row,startIndex))return true}}return{forEach:function(_callback){callback=_callback;self.$lineIterator(session,options).forEach(matchIterator)}}};this.$assembleRegExp=function(options){if(options.needle instanceof RegExp)return options.re=options.needle;var needle=options.needle;if(!options.needle)return options.re=false;if(!options.regExp)needle=lang.escapeRegExp(needle);if(options.wholeWord)needle="\\b"+needle+"\\b";var modifier=options.caseSensitive?"g":"gi";options.$isMultiLine=/[\n\r]/.test(needle);if(options.$isMultiLine)return options.re=this.$assembleMultilineRegExp(needle,modifier);try{var re=new RegExp(needle,modifier)}catch(e){re=false}return options.re=re};this.$assembleMultilineRegExp=function(needle,modifier){var parts=needle.replace(/\r\n|\r|\n/g,"$\n^").split("\n");var re=[];for(var i=0;i<parts.length;i++)try{re.push(new RegExp(parts[i],modifier))}catch(e){return false}if(parts[0]==""){re.shift();re.offset=1}else{re.offset=0}return re};this.$lineIterator=function(session,options){var backwards=options.backwards==true;var skipCurrent=options.skipCurrent!=false;var range=options.range;var start=options.start;if(!start)start=range?range[backwards?"end":"start"]:session.selection.getRange();if(start.start)start=start[skipCurrent!=backwards?"end":"start"];var firstRow=range?range.start.row:0;var lastRow=range?range.end.row:session.getLength()-1;var forEach=backwards?function(callback){var row=start.row;var line=session.getLine(row).substring(0,start.column);if(callback(line,row))return;for(row--;row>=firstRow;row--)if(callback(session.getLine(row),row))return;if(options.wrap==false)return;for(row=lastRow,firstRow=start.row;row>=firstRow;row--)if(callback(session.getLine(row),row))return}:function(callback){var row=start.row;var line=session.getLine(row).substr(start.column);if(callback(line,row,start.column))return;for(row=row+1;row<=lastRow;row++)if(callback(session.getLine(row),row))return;if(options.wrap==false)return;for(row=firstRow,lastRow=start.row;row<=lastRow;row++)if(callback(session.getLine(row),row))return};return{forEach:forEach}}}.call(Search.prototype);exports.Search=Search});define("ace/lib/event_emitter",["require","exports","module"],function(require,exports,module){var EventEmitter={};var stopPropagation=function(){this.propagationStopped=true};var preventDefault=function(){this.defaultPrevented=true};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={});this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[];var defaultHandler=this._defaultHandlers[eventName];if(!listeners.length&&!defaultHandler)return;if(typeof e!="object"||!e)e={};if(!e.type)e.type=eventName;if(!e.stopPropagation)e.stopPropagation=stopPropagation;if(!e.preventDefault)e.preventDefault=preventDefault;for(var i=0;i<listeners.length;i++){listeners[i](e,this);if(e.propagationStopped)break}if(defaultHandler&&!e.defaultPrevented)return defaultHandler(e,this)};EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(!listeners)return;for(var i=0;i<listeners.length;i++)listeners[i](e,this)};EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback);callback.apply(null,arguments)})};EventEmitter.setDefaultHandler=function(eventName,callback){this._defaultHandlers=this._defaultHandlers||{};if(this._defaultHandlers[eventName])throw new Error("The default handler for '"+eventName+"' is already set");this._defaultHandlers[eventName]=callback};EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(!listeners)listeners=this._eventRegistry[eventName]=[];if(listeners.indexOf(callback)==-1)listeners[capturing?"unshift":"push"](callback);return callback};EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(!listeners)return;var index=listeners.indexOf(callback);if(index!==-1)listeners.splice(index,1)};EventEmitter.removeAllListeners=function(eventName){if(this._eventRegistry)this._eventRegistry[eventName]=[]};exports.EventEmitter=EventEmitter});define("ace/selection",["require","exports","module","./lib/oop","./lib/lang","./lib/event_emitter","./range"],function(require,exports,module){var oop=require("./lib/oop");var lang=require("./lib/lang");var EventEmitter=require("./lib/event_emitter").EventEmitter;var Range=require("./range").Range;var Selection=function(session){this.session=session;this.doc=session.getDocument();this.clearSelection();this.lead=this.selectionLead=this.doc.createAnchor(0,0);this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var self=this;this.lead.on("change",function(e){self._emit("changeCursor");if(!self.$isEmpty)self._emit("changeSelection");if(!self.$keepDesiredColumnOnChange&&e.old.column!=e.value.column)self.$desiredColumn=null});this.selectionAnchor.on("change",function(){if(!self.$isEmpty)self._emit("changeSelection")})};!function(){oop.implement(this,EventEmitter);this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column};this.isMultiLine=function(){if(this.isEmpty()){return false}return this.getRange().isMultiLine()};this.getCursor=function(){return this.lead.getPosition()};this.setSelectionAnchor=function(row,column){this.anchor.setPosition(row,column);if(this.$isEmpty){this.$isEmpty=false;this._emit("changeSelection")}};this.getSelectionAnchor=function(){if(this.$isEmpty)return this.getSelectionLead();else return this.anchor.getPosition()};this.getSelectionLead=function(){return this.lead.getPosition()};this.shiftSelection=function(columns){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+columns);return}var anchor=this.getSelectionAnchor();var lead=this.getSelectionLead();var isBackwards=this.isBackwards();if(!isBackwards||anchor.column!==0)this.setSelectionAnchor(anchor.row,anchor.column+columns);if(isBackwards||lead.column!==0){this.$moveSelection(function(){this.moveCursorTo(lead.row,lead.column+columns)})}};this.isBackwards=function(){var anchor=this.anchor;var lead=this.lead;return anchor.row>lead.row||anchor.row==lead.row&&anchor.column>lead.column};this.getRange=function(){var anchor=this.anchor;var lead=this.lead;if(this.isEmpty())return Range.fromPoints(lead,lead);if(this.isBackwards()){return Range.fromPoints(lead,anchor)}else{return Range.fromPoints(anchor,lead)}};this.clearSelection=function(){if(!this.$isEmpty){this.$isEmpty=true;this._emit("changeSelection")}};this.selectAll=function(){var lastRow=this.doc.getLength()-1;this.setSelectionAnchor(0,0);this.moveCursorTo(lastRow,this.doc.getLine(lastRow).length)};this.setRange=this.setSelectionRange=function(range,reverse){if(reverse){this.setSelectionAnchor(range.end.row,range.end.column);this.selectTo(range.start.row,range.start.column)}else{this.setSelectionAnchor(range.start.row,range.start.column);this.selectTo(range.end.row,range.end.column)}this.$desiredColumn=null};this.$moveSelection=function(mover){var lead=this.lead;if(this.$isEmpty)this.setSelectionAnchor(lead.row,lead.column);mover.call(this)};this.selectTo=function(row,column){this.$moveSelection(function(){this.moveCursorTo(row,column)})};this.selectToPosition=function(pos){this.$moveSelection(function(){this.moveCursorToPosition(pos)})};this.selectUp=function(){this.$moveSelection(this.moveCursorUp)};this.selectDown=function(){this.$moveSelection(this.moveCursorDown)};this.selectRight=function(){this.$moveSelection(this.moveCursorRight)};this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)};this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)};this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)};this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)};this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)};this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)};this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)};this.getWordRange=function(row,column){if(typeof column=="undefined"){var cursor=row||this.lead;row=cursor.row;column=cursor.column}return this.session.getWordRange(row,column)};this.selectWord=function(){this.setSelectionRange(this.getWordRange())};this.selectAWord=function(){var cursor=this.getCursor();var range=this.session.getAWordRange(cursor.row,cursor.column);this.setSelectionRange(range)};this.getLineRange=function(row,excludeLastChar){var rowStart=typeof row=="number"?row:this.lead.row;var rowEnd;var foldLine=this.session.getFoldLine(rowStart);if(foldLine){rowStart=foldLine.start.row;rowEnd=foldLine.end.row}else{rowEnd=rowStart}if(excludeLastChar)return new Range(rowStart,0,rowEnd,this.session.getLine(rowEnd).length);else return new Range(rowStart,0,rowEnd+1,0)};this.selectLine=function(){this.setSelectionRange(this.getLineRange())};this.moveCursorUp=function(){this.moveCursorBy(-1,0)};this.moveCursorDown=function(){this.moveCursorBy(1,0)};this.moveCursorLeft=function(){var cursor=this.lead.getPosition(),fold;if(fold=this.session.getFoldAt(cursor.row,cursor.column,-1)){this.moveCursorTo(fold.start.row,fold.start.column)}else if(cursor.column==0){if(cursor.row>0){this.moveCursorTo(cursor.row-1,this.doc.getLine(cursor.row-1).length)}}else{var tabSize=this.session.getTabSize();if(this.session.isTabStop(cursor)&&this.doc.getLine(cursor.row).slice(cursor.column-tabSize,cursor.column).split(" ").length-1==tabSize)this.moveCursorBy(0,-tabSize);else this.moveCursorBy(0,-1)}};this.moveCursorRight=function(){var cursor=this.lead.getPosition(),fold;if(fold=this.session.getFoldAt(cursor.row,cursor.column,1)){this.moveCursorTo(fold.end.row,fold.end.column)}else if(this.lead.column==this.doc.getLine(this.lead.row).length){if(this.lead.row<this.doc.getLength()-1){this.moveCursorTo(this.lead.row+1,0)}}else{var tabSize=this.session.getTabSize();var cursor=this.lead;if(this.session.isTabStop(cursor)&&this.doc.getLine(cursor.row).slice(cursor.column,cursor.column+tabSize).split(" ").length-1==tabSize)this.moveCursorBy(0,tabSize);else this.moveCursorBy(0,1)}};this.moveCursorLineStart=function(){var row=this.lead.row;var column=this.lead.column;var screenRow=this.session.documentToScreenRow(row,column);var firstColumnPosition=this.session.screenToDocumentPosition(screenRow,0);var beforeCursor=this.session.getDisplayLine(row,null,firstColumnPosition.row,firstColumnPosition.column);var leadingSpace=beforeCursor.match(/^\s*/);if(leadingSpace[0].length!=column&&!this.session.$useEmacsStyleLineStart)firstColumnPosition.column+=leadingSpace[0].length;this.moveCursorToPosition(firstColumnPosition)};this.moveCursorLineEnd=function(){var lead=this.lead;var lineEnd=this.session.getDocumentLastRowColumnPosition(lead.row,lead.column);if(this.lead.column==lineEnd.column){var line=this.session.getLine(lineEnd.row);if(lineEnd.column==line.length){var textEnd=line.search(/\s+$/);if(textEnd>0)lineEnd.column=textEnd}}this.moveCursorTo(lineEnd.row,lineEnd.column)};this.moveCursorFileEnd=function(){var row=this.doc.getLength()-1;var column=this.doc.getLine(row).length;this.moveCursorTo(row,column)};this.moveCursorFileStart=function(){this.moveCursorTo(0,0)};this.moveCursorLongWordRight=function(){var row=this.lead.row;var column=this.lead.column;var line=this.doc.getLine(row);var rightOfCursor=line.substring(column);var match;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;var fold=this.session.getFoldAt(row,column,1);if(fold){this.moveCursorTo(fold.end.row,fold.end.column);return}if(match=this.session.nonTokenRe.exec(rightOfCursor)){column+=this.session.nonTokenRe.lastIndex;this.session.nonTokenRe.lastIndex=0;rightOfCursor=line.substring(column)}if(column>=line.length){this.moveCursorTo(row,line.length);this.moveCursorRight();if(row<this.doc.getLength()-1)this.moveCursorWordRight();return}if(match=this.session.tokenRe.exec(rightOfCursor)){column+=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(row,column)};this.moveCursorLongWordLeft=function(){var row=this.lead.row;var column=this.lead.column;var fold;if(fold=this.session.getFoldAt(row,column,-1)){this.moveCursorTo(fold.start.row,fold.start.column);return}var str=this.session.getFoldStringAt(row,column,-1);if(str==null){str=this.doc.getLine(row).substring(0,column)}var leftOfCursor=lang.stringReverse(str);var match;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;if(match=this.session.nonTokenRe.exec(leftOfCursor)){column-=this.session.nonTokenRe.lastIndex;leftOfCursor=leftOfCursor.slice(this.session.nonTokenRe.lastIndex);this.session.nonTokenRe.lastIndex=0}if(column<=0){this.moveCursorTo(row,0);this.moveCursorLeft();if(row>0)this.moveCursorWordLeft();return}if(match=this.session.tokenRe.exec(leftOfCursor)){column-=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(row,column)};this.$shortWordEndIndex=function(rightOfCursor){var match,index=0,ch;var whitespaceRe=/\s/;var tokenRe=this.session.tokenRe;tokenRe.lastIndex=0;if(match=this.session.tokenRe.exec(rightOfCursor)){index=this.session.tokenRe.lastIndex}else{while((ch=rightOfCursor[index])&&whitespaceRe.test(ch))index++;if(index<=1){tokenRe.lastIndex=0;while((ch=rightOfCursor[index])&&!tokenRe.test(ch)){tokenRe.lastIndex=0;index++;if(whitespaceRe.test(ch)){if(index>2){index--;break}else{while((ch=rightOfCursor[index])&&whitespaceRe.test(ch))index++;if(index>2)break}}}}}tokenRe.lastIndex=0;return index};this.moveCursorShortWordRight=function(){var row=this.lead.row;var column=this.lead.column;var line=this.doc.getLine(row);var rightOfCursor=line.substring(column);var fold=this.session.getFoldAt(row,column,1);if(fold)return this.moveCursorTo(fold.end.row,fold.end.column);if(column==line.length){var l=this.doc.getLength();do{row++;rightOfCursor=this.doc.getLine(row)}while(row<l&&/^\s*$/.test(rightOfCursor));if(!/^\s+/.test(rightOfCursor))rightOfCursor="";column=0}var index=this.$shortWordEndIndex(rightOfCursor);this.moveCursorTo(row,column+index)};this.moveCursorShortWordLeft=function(){var row=this.lead.row;var column=this.lead.column;var fold;if(fold=this.session.getFoldAt(row,column,-1))return this.moveCursorTo(fold.start.row,fold.start.column);var line=this.session.getLine(row).substring(0,column);if(column==0){do{row--;line=this.doc.getLine(row)}while(row>0&&/^\s*$/.test(line));column=line.length;if(!/\s+$/.test(line))line=""}var leftOfCursor=lang.stringReverse(line);var index=this.$shortWordEndIndex(leftOfCursor);return this.moveCursorTo(row,column-index)};this.moveCursorWordRight=function(){if(this.session.$selectLongWords)this.moveCursorLongWordRight();else this.moveCursorShortWordRight()};this.moveCursorWordLeft=function(){if(this.session.$selectLongWords)this.moveCursorLongWordLeft();else this.moveCursorShortWordLeft()};this.moveCursorBy=function(rows,chars){var screenPos=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(chars===0){if(this.$desiredColumn)screenPos.column=this.$desiredColumn;else this.$desiredColumn=screenPos.column}var docPos=this.session.screenToDocumentPosition(screenPos.row+rows,screenPos.column);this.moveCursorTo(docPos.row,docPos.column+chars,chars===0)};this.moveCursorToPosition=function(position){this.moveCursorTo(position.row,position.column)};this.moveCursorTo=function(row,column,keepDesiredColumn){var fold=this.session.getFoldAt(row,column,1);if(fold){row=fold.start.row;column=fold.start.column}this.$keepDesiredColumnOnChange=true;this.lead.setPosition(row,column);this.$keepDesiredColumnOnChange=false;if(!keepDesiredColumn)this.$desiredColumn=null};this.moveCursorToScreen=function(row,column,keepDesiredColumn){var pos=this.session.screenToDocumentPosition(row,column);this.moveCursorTo(pos.row,pos.column,keepDesiredColumn)};this.detach=function(){this.lead.detach();this.anchor.detach();this.session=this.doc=null};this.fromOrientedRange=function(range){this.setSelectionRange(range,range.cursor==range.start);this.$desiredColumn=range.desiredColumn||this.$desiredColumn};this.toOrientedRange=function(range){var r=this.getRange();
if(range){range.start.column=r.start.column;range.start.row=r.start.row;range.end.column=r.end.column;range.end.row=r.end.row}else{range=r}range.cursor=this.isBackwards()?range.start:range.end;range.desiredColumn=this.$desiredColumn;return range}}.call(Selection.prototype);exports.Selection=Selection});define("ace/tokenizer",["require","exports","module"],function(require,exports,module){var MAX_TOKEN_COUNT=1e3;var Tokenizer=function(rules){this.states=rules;this.regExps={};this.matchMappings={};for(var key in this.states){var state=this.states[key];var ruleRegExps=[];var matchTotal=0;var mapping=this.matchMappings[key]={defaultToken:"text"};var flag="g";for(var i=0;i<state.length;i++){var rule=state[i];if(rule.defaultToken)mapping.defaultToken=rule.defaultToken;if(rule.caseInsensitive)flag="gi";if(rule.regex==null)continue;if(rule.regex instanceof RegExp)rule.regex=rule.regex.toString().slice(1,-1);var adjustedregex=rule.regex;var matchcount=new RegExp("(?:("+adjustedregex+")|(.))").exec("a").length-2;if(Array.isArray(rule.token)){if(rule.token.length==1||matchcount==1){rule.token=rule.token[0]}else if(matchcount-1!=rule.token.length){throw new Error("number of classes and regexp groups in '"+rule.token+"'\n'"+rule.regex+"' doesn't match\n"+(matchcount-1)+"!="+rule.token.length)}else{rule.tokenArray=rule.token;rule.onMatch=this.$arrayTokens}}else if(typeof rule.token=="function"&&!rule.onMatch){if(matchcount>1)rule.onMatch=this.$applyToken;else rule.onMatch=rule.token}if(matchcount>1){if(/\\\d/.test(rule.regex)){adjustedregex=rule.regex.replace(/\\([0-9]+)/g,function(match,digit){return"\\"+(parseInt(digit,10)+matchTotal+1)})}else{matchcount=1;adjustedregex=this.removeCapturingGroups(rule.regex)}if(!rule.splitRegex&&typeof rule.token!="string")rule.splitRegex=this.createSplitterRegexp(rule.regex,flag)}mapping[matchTotal]=i;matchTotal+=matchcount;ruleRegExps.push(adjustedregex);if(!rule.onMatch)rule.onMatch=null;rule.__proto__=null}this.regExps[key]=new RegExp("("+ruleRegExps.join(")|(")+")|($)",flag)}};!function(){this.$applyToken=function(str){var values=this.splitRegex.exec(str).slice(1);var types=this.token.apply(this,values);if(typeof types==="string")return[{type:types,value:str}];var tokens=[];for(var i=0,l=types.length;i<l;i++){if(values[i])tokens[tokens.length]={type:types[i],value:values[i]}}return tokens},this.$arrayTokens=function(str){if(!str)return[];var values=this.splitRegex.exec(str);var tokens=[];var types=this.tokenArray;for(var i=0,l=types.length;i<l;i++){if(values[i+1])tokens[tokens.length]={type:types[i],value:values[i+1]}}return tokens};this.removeCapturingGroups=function(src){var r=src.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(x,y){return y?"(?:":x});return r};this.createSplitterRegexp=function(src,flag){if(src.indexOf("(?=")!=-1){var stack=0;var inChClass=false;var lastCapture={};src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(m,esc,parenOpen,parenClose,square,index){if(inChClass){inChClass=square!="]"}else if(square){inChClass=true}else if(parenClose){if(stack==lastCapture.stack){lastCapture.end=index+1;lastCapture.stack=-1}stack--}else if(parenOpen){stack++;if(parenOpen.length!=1){lastCapture.stack=stack;lastCapture.start=index}}return m});if(lastCapture.end!=null&&/^\)*$/.test(src.substr(lastCapture.end)))src=src.substring(0,lastCapture.start)+src.substr(lastCapture.end)}return new RegExp(src,(flag||"").replace("g",""))};this.getLineTokens=function(line,startState){if(startState&&typeof startState!="string"){var stack=startState.slice(0);startState=stack[0]}else var stack=[];var currentState=startState||"start";var state=this.states[currentState];var mapping=this.matchMappings[currentState];var re=this.regExps[currentState];re.lastIndex=0;var match,tokens=[];var lastIndex=0;var token={type:null,value:""};while(match=re.exec(line)){var type=mapping.defaultToken;var rule=null;var value=match[0];var index=re.lastIndex;if(index-value.length>lastIndex){var skipped=line.substring(lastIndex,index-value.length);if(token.type==type){token.value+=skipped}else{if(token.type)tokens.push(token);token={type:type,value:skipped}}}for(var i=0;i<match.length-2;i++){if(match[i+1]===undefined)continue;rule=state[mapping[i]];if(rule.onMatch)type=rule.onMatch(value,currentState,stack);else type=rule.token;if(rule.next){if(typeof rule.next=="string")currentState=rule.next;else currentState=rule.next(currentState,stack);state=this.states[currentState];if(!state){window.console&&console.error&&console.error(currentState,"doesn't exist");currentState="start";state=this.states[currentState]}mapping=this.matchMappings[currentState];lastIndex=index;re=this.regExps[currentState];re.lastIndex=index}break}if(value){if(typeof type=="string"){if((!rule||rule.merge!==false)&&token.type===type){token.value+=value}else{if(token.type)tokens.push(token);token={type:type,value:value}}}else if(type){if(token.type)tokens.push(token);token={type:null,value:""};for(var i=0;i<type.length;i++)tokens.push(type[i])}}if(lastIndex==line.length)break;lastIndex=index;if(tokens.length>MAX_TOKEN_COUNT){token.value+=line.substr(lastIndex);currentState="start";break}}if(token.type)tokens.push(token);return{tokens:tokens,state:stack.length?stack:currentState}}}.call(Tokenizer.prototype);exports.Tokenizer=Tokenizer});define("ace/mode/text_highlight_rules",["require","exports","module","../lib/lang"],function(require,exports,module){var lang=require("../lib/lang");var TextHighlightRules=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};!function(){this.addRules=function(rules,prefix){for(var key in rules){var state=rules[key];for(var i=0;i<state.length;i++){var rule=state[i];if(rule.next){rule.next=prefix+rule.next}}this.$rules[prefix+key]=state}};this.getRules=function(){return this.$rules};this.embedRules=function(HighlightRules,prefix,escapeRules,states,append){var embedRules=(new HighlightRules).getRules();if(states){for(var i=0;i<states.length;i++)states[i]=prefix+states[i]}else{states=[];for(var key in embedRules)states.push(prefix+key)}this.addRules(embedRules,prefix);if(escapeRules){var addRules=Array.prototype[append?"push":"unshift"];for(var i=0;i<states.length;i++)addRules.apply(this.$rules[states[i]],lang.deepCopy(escapeRules))}if(!this.$embeds)this.$embeds=[];this.$embeds.push(prefix)};this.getEmbeds=function(){return this.$embeds};var pushState=function(currentState,stack){if(currentState!="start")stack.unshift(this.nextState,currentState);return this.nextState};var popState=function(currentState,stack){if(stack[0]!==currentState)return"start";stack.shift();return stack.shift()};this.normalizeRules=function(){var id=0;var rules=this.$rules;function processState(key){var state=rules[key];state.processed=true;for(var i=0;i<state.length;i++){var rule=state[i];if(!rule.regex&&rule.start){rule.regex=rule.start;if(!rule.next)rule.next=[];rule.next.push({defaultToken:rule.token},{token:rule.token+".end",regex:rule.end||rule.start,next:"pop"});rule.token=rule.token+".start";rule.push=true}var next=rule.next||rule.push;if(next&&Array.isArray(next)){var stateName=rule.stateName||rule.token+id++;rules[stateName]=next;rule.next=stateName;processState(stateName)}else if(next=="pop"){rule.next=popState}if(rule.push){rule.nextState=rule.next||rule.push;rule.next=pushState;delete rule.push}if(rule.rules){for(var r in rule.rules){if(rules[r]){if(rules[r].push)rules[r].push.apply(rules[r],rule.rules[r])}else{rules[r]=rule.rules[r]}}}if(rule.include||typeof rule=="string"){var includeName=rule.include||rule;var toInsert=rules[includeName]}else if(Array.isArray(rule))toInsert=rule;if(toInsert){var args=[i,1].concat(toInsert);if(rule.noEscape)args=args.filter(function(x){return!x.next});state.splice.apply(state,args);i--;toInsert=null}}}Object.keys(rules).forEach(processState)};this.createKeywordMapper=function(map,defaultToken,ignoreCase,splitChar){var keywords=Object.create(null);Object.keys(map).forEach(function(className){var a=map[className];if(ignoreCase)a=a.toLowerCase();var list=a.split(splitChar||"|");for(var i=list.length;i--;)keywords[list[i]]=className});map=null;return ignoreCase?function(value){return keywords[value.toLowerCase()]||defaultToken}:function(value){return keywords[value]||defaultToken}};this.getKeywords=function(){return this.$keywords}}.call(TextHighlightRules.prototype);exports.TextHighlightRules=TextHighlightRules});define("ace/mode/behaviour",["require","exports","module"],function(require,exports,module){var Behaviour=function(){this.$behaviours={}};!function(){this.add=function(name,action,callback){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[name]:this.$behaviours[name]={}}this.$behaviours[name][action]=callback};this.addBehaviours=function(behaviours){for(var key in behaviours){for(var action in behaviours[key]){this.add(key,action,behaviours[key][action])}}};this.remove=function(name){if(this.$behaviours&&this.$behaviours[name]){delete this.$behaviours[name]}};this.inherit=function(mode,filter){if(typeof mode==="function"){var behaviours=(new mode).getBehaviours(filter)}else{var behaviours=mode.getBehaviours(filter)}this.addBehaviours(behaviours)};this.getBehaviours=function(filter){if(!filter){return this.$behaviours}else{var ret={};for(var i=0;i<filter.length;i++){if(this.$behaviours[filter[i]]){ret[filter[i]]=this.$behaviours[filter[i]]}}return ret}}}.call(Behaviour.prototype);exports.Behaviour=Behaviour});define("ace/unicode",["require","exports","module"],function(require,exports,module){exports.packages={};addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"});
function addUnicodePackage(pack){var codePoint=/\w{4}/g;for(var name in pack)exports.packages[name]=pack[name].replace(codePoint,"\\u$&")}});define("ace/token_iterator",["require","exports","module"],function(require,exports,module){var TokenIterator=function(session,initialRow,initialColumn){this.$session=session;this.$row=initialRow;this.$rowTokens=session.getTokens(initialRow);var token=session.getTokenAt(initialRow,initialColumn);this.$tokenIndex=token?token.index:-1};!function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0){this.$row=0;return null}this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]};this.stepForward=function(){this.$tokenIndex+=1;var rowCount;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1;if(!rowCount)rowCount=this.$session.getLength();if(this.$row>=rowCount){this.$row=rowCount-1;return null}this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]};this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]};this.getCurrentTokenRow=function(){return this.$row};this.getCurrentTokenColumn=function(){var rowTokens=this.$rowTokens;var tokenIndex=this.$tokenIndex;var column=rowTokens[tokenIndex].start;if(column!==undefined)return column;column=0;while(tokenIndex>0){tokenIndex-=1;column+=rowTokens[tokenIndex].value.length}return column}}.call(TokenIterator.prototype);exports.TokenIterator=TokenIterator});define("ace/mode/text",["require","exports","module","../tokenizer","./text_highlight_rules","./behaviour","../unicode","../lib/lang","../token_iterator","../range"],function(require,exports,module){var Tokenizer=require("../tokenizer").Tokenizer;var TextHighlightRules=require("./text_highlight_rules").TextHighlightRules;var Behaviour=require("./behaviour").Behaviour;var unicode=require("../unicode");var lang=require("../lib/lang");var TokenIterator=require("../token_iterator").TokenIterator;var Range=require("../range").Range;var Mode=function(){this.$tokenizer=new Tokenizer((new TextHighlightRules).getRules());this.$behaviour=new Behaviour};!function(){this.tokenRe=new RegExp("^["+unicode.packages.L+unicode.packages.Mn+unicode.packages.Mc+unicode.packages.Nd+unicode.packages.Pc+"\\$_]+","g");this.nonTokenRe=new RegExp("^(?:[^"+unicode.packages.L+unicode.packages.Mn+unicode.packages.Mc+unicode.packages.Nd+unicode.packages.Pc+"\\$_]|s])+","g");this.getTokenizer=function(){return this.$tokenizer};this.lineCommentStart="";this.blockComment="";this.toggleCommentLines=function(state,session,startRow,endRow){var doc=session.doc;var ignoreBlankLines=true;var shouldRemove=true;var minIndent=Infinity;if(!this.lineCommentStart){if(!this.blockComment)return false;var lineCommentStart=this.blockComment.start;var lineCommentEnd=this.blockComment.end;var regexpStart=new RegExp("^(\\s*)(?:"+lang.escapeRegExp(lineCommentStart)+")");var regexpEnd=new RegExp("(?:"+lang.escapeRegExp(lineCommentEnd)+")\\s*$");var comment=function(line,i){if(testRemove(line,i))return;if(!ignoreBlankLines||/\S/.test(line)){doc.insertInLine({row:i,column:line.length},lineCommentEnd);doc.insertInLine({row:i,column:minIndent},lineCommentStart)}};var uncomment=function(line,i){var m;if(m=line.match(regexpEnd))doc.removeInLine(i,line.length-m[0].length,line.length);if(m=line.match(regexpStart))doc.removeInLine(i,m[1].length,m[0].length)};var testRemove=function(line,row){if(regexpStart.test(line))return true;var tokens=session.getTokens(row);for(var i=0;i<tokens.length;i++){if(tokens[i].type==="comment")return true}}}else{if(Array.isArray(this.lineCommentStart)){var regexpStart=this.lineCommentStart.map(lang.escapeRegExp).join("|");var lineCommentStart=this.lineCommentStart[0]+" "}else{var regexpStart=lang.escapeRegExp(this.lineCommentStart);var lineCommentStart=this.lineCommentStart+" "}regexpStart=new RegExp("^(\\s*)(?:"+regexpStart+") ?");var uncomment=function(line,i){var m=line.match(regexpStart);m&&doc.removeInLine(i,m[1].length,m[0].length)};var comment=function(line,i){if(!ignoreBlankLines||/\S/.test(line))doc.insertInLine({row:i,column:minIndent},lineCommentStart)};var testRemove=function(line,i){return regexpStart.test(line)}}function iter(fun){for(var i=startRow;i<=endRow;i++)fun(doc.getLine(i),i)}var minEmptyLength=Infinity;iter(function(line,i){var indent=line.search(/\S/);if(indent!==-1){if(indent<minIndent)minIndent=indent;if(shouldRemove&&!testRemove(line,i))shouldRemove=false}else if(minEmptyLength>line.length){minEmptyLength=line.length}});if(minIndent==Infinity){minIndent=minEmptyLength;ignoreBlankLines=false;shouldRemove=false}iter(shouldRemove?uncomment:comment)};this.toggleBlockComment=function(state,session,range,cursor){var comment=this.blockComment;if(!comment)return;if(!comment.start&&comment[0])comment=comment[0];var iterator=new TokenIterator(session,cursor.row,cursor.column);var token=iterator.getCurrentToken();var sel=session.selection;var initialRange=session.selection.toOrientedRange();var startRow,colDiff;if(token&&/comment/.test(token.type)){var startRange,endRange;while(token&&/comment/.test(token.type)){var i=token.value.indexOf(comment.start);if(i!=-1){var row=iterator.getCurrentTokenRow();var column=iterator.getCurrentTokenColumn()+i;startRange=new Range(row,column,row,column+comment.start.length);break}token=iterator.stepBackward()}var iterator=new TokenIterator(session,cursor.row,cursor.column);var token=iterator.getCurrentToken();while(token&&/comment/.test(token.type)){var i=token.value.indexOf(comment.end);if(i!=-1){var row=iterator.getCurrentTokenRow();var column=iterator.getCurrentTokenColumn()+i;endRange=new Range(row,column,row,column+comment.end.length);break}token=iterator.stepForward()}if(endRange)session.remove(endRange);if(startRange){session.remove(startRange);startRow=startRange.start.row;colDiff=-comment.start.length}}else{colDiff=comment.start.length;startRow=range.start.row;session.insert(range.end,comment.end);session.insert(range.start,comment.start)}if(initialRange.start.row==startRow)initialRange.start.column+=colDiff;if(initialRange.end.row==startRow)initialRange.end.column+=colDiff;session.selection.fromOrientedRange(initialRange)};this.getNextLineIndent=function(state,line,tab){return this.$getIndent(line)};this.checkOutdent=function(state,line,input){return false};this.autoOutdent=function(state,doc,row){};this.$getIndent=function(line){return line.match(/^\s*/)[0]};this.createWorker=function(session){return null};this.createModeDelegates=function(mapping){if(!this.$embeds){return}this.$modes={};for(var i=0;i<this.$embeds.length;i++){if(mapping[this.$embeds[i]]){this.$modes[this.$embeds[i]]=new mapping[this.$embeds[i]]}}var delegations=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"];for(var i=0;i<delegations.length;i++){!function(scope){var functionName=delegations[i];var defaultHandler=scope[functionName];scope[delegations[i]]=function(){return this.$delegator(functionName,arguments,defaultHandler)}}(this)}};this.$delegator=function(method,args,defaultHandler){var state=args[0];for(var i=0;i<this.$embeds.length;i++){if(!this.$modes[this.$embeds[i]])continue;var split=state.split(this.$embeds[i]);if(!split[0]&&split[1]){args[0]=split[1];var mode=this.$modes[this.$embeds[i]];return mode[method].apply(mode,args)}}var ret=defaultHandler.apply(this,args);return defaultHandler?ret:undefined};this.transformAction=function(state,action,editor,session,param){if(this.$behaviour){var behaviours=this.$behaviour.getBehaviours();for(var key in behaviours){if(behaviours[key][action]){var ret=behaviours[key][action].apply(this,arguments);if(ret){return ret}}}}}}.call(Mode.prototype);exports.Mode=Mode});define("ace/anchor",["require","exports","module","./lib/oop","./lib/event_emitter"],function(require,exports,module){var oop=require("./lib/oop");var EventEmitter=require("./lib/event_emitter").EventEmitter;var Anchor=exports.Anchor=function(doc,row,column){this.document=doc;if(typeof column=="undefined")this.setPosition(row.row,row.column);else this.setPosition(row,column);this.$onChange=this.onChange.bind(this);doc.on("change",this.$onChange)};!function(){oop.implement(this,EventEmitter);this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)};this.getDocument=function(){return this.document};this.onChange=function(e){var delta=e.data;var range=delta.range;if(range.start.row==range.end.row&&range.start.row!=this.row)return;if(range.start.row>this.row)return;if(range.start.row==this.row&&range.start.column>this.column)return;var row=this.row;var column=this.column;var start=range.start;var end=range.end;if(delta.action==="insertText"){if(start.row===row&&start.column<=column){if(start.row===end.row){column+=end.column-start.column}else{column-=start.column;row+=end.row-start.row}}else if(start.row!==end.row&&start.row<row){row+=end.row-start.row}}else if(delta.action==="insertLines"){if(start.row<=row){row+=end.row-start.row}}else if(delta.action==="removeText"){if(start.row===row&&start.column<column){if(end.column>=column)column=start.column;else column=Math.max(0,column-(end.column-start.column))}else if(start.row!==end.row&&start.row<row){if(end.row===row)column=Math.max(0,column-end.column)+start.column;row-=end.row-start.row}else if(end.row===row){row-=end.row-start.row;column=Math.max(0,column-end.column)+start.column}}else if(delta.action=="removeLines"){if(start.row<=row){if(end.row<=row)row-=end.row-start.row;else{row=start.row;column=0}}}this.setPosition(row,column,true)};this.setPosition=function(row,column,noClip){var pos;if(noClip){pos={row:row,column:column}}else{pos=this.$clipPositionToDocument(row,column)}if(this.row==pos.row&&this.column==pos.column)return;var old={row:this.row,column:this.column};this.row=pos.row;this.column=pos.column;this._emit("change",{old:old,value:pos})};this.detach=function(){this.document.removeEventListener("change",this.$onChange)};this.$clipPositionToDocument=function(row,column){var pos={};if(row>=this.document.getLength()){pos.row=Math.max(0,this.document.getLength()-1);pos.column=this.document.getLine(pos.row).length}else if(row<0){pos.row=0;pos.column=0}else{pos.row=row;pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))}if(column<0)pos.column=0;return pos}}.call(Anchor.prototype)});define("ace/document",["require","exports","module","./lib/oop","./lib/event_emitter","./range","./anchor"],function(require,exports,module){var oop=require("./lib/oop");var EventEmitter=require("./lib/event_emitter").EventEmitter;var Range=require("./range").Range;var Anchor=require("./anchor").Anchor;var Document=function(text){this.$lines=[];if(text.length==0){this.$lines=[""]}else if(Array.isArray(text)){this.insertLines(0,text)}else{this.insert({row:0,column:0},text)}};!function(){oop.implement(this,EventEmitter);this.setValue=function(text){var len=this.getLength();this.remove(new Range(0,0,len,this.getLine(len-1).length));this.insert({row:0,column:0},text)};this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())};this.createAnchor=function(row,column){return new Anchor(this,row,column)};if("aaa".split(/a/).length==0)this.$split=function(text){return text.replace(/\r\n|\r/g,"\n").split("\n")};else this.$split=function(text){return text.split(/\r\n|\r|\n/)};this.$detectNewLine=function(text){var match=text.match(/^.*?(\r\n|\r|\n)/m);if(match){this.$autoNewLine=match[1]}else{this.$autoNewLine="\n"}};this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine}};this.$autoNewLine="\n";this.$newLineMode="auto";this.setNewLineMode=function(newLineMode){if(this.$newLineMode===newLineMode)return;this.$newLineMode=newLineMode};this.getNewLineMode=function(){return this.$newLineMode};this.isNewLine=function(text){return text=="\r\n"||text=="\r"||text=="\n"};this.getLine=function(row){return this.$lines[row]||""};this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)};this.getAllLines=function(){return this.getLines(0,this.getLength())};this.getLength=function(){return this.$lines.length};this.getTextRange=function(range){if(range.start.row==range.end.row){return this.$lines[range.start.row].substring(range.start.column,range.end.column)}else{var lines=this.getLines(range.start.row+1,range.end.row-1);lines.unshift((this.$lines[range.start.row]||"").substring(range.start.column));lines.push((this.$lines[range.end.row]||"").substring(0,range.end.column));return lines.join(this.getNewLineCharacter())}};this.$clipPosition=function(position){var length=this.getLength();if(position.row>=length){position.row=Math.max(0,length-1);position.column=this.getLine(length-1).length}else if(position.row<0)position.row=0;return position};this.insert=function(position,text){if(!text||text.length===0)return position;position=this.$clipPosition(position);if(this.getLength()<=1)this.$detectNewLine(text);var lines=this.$split(text);var firstLine=lines.splice(0,1)[0];var lastLine=lines.length==0?null:lines.splice(lines.length-1,1)[0];position=this.insertInLine(position,firstLine);if(lastLine!==null){position=this.insertNewLine(position);position=this.insertLines(position.row,lines);position=this.insertInLine(position,lastLine||"")}return position};this.insertLines=function(row,lines){if(lines.length==0)return{row:row,column:0};if(lines.length>65535){var end=this.insertLines(row,lines.slice(65535));lines=lines.slice(0,65535)}var args=[row,0];args.push.apply(args,lines);this.$lines.splice.apply(this.$lines,args);var range=new Range(row,0,row+lines.length,0);var delta={action:"insertLines",range:range,lines:lines};this._emit("change",{data:delta});return end||range.end};this.insertNewLine=function(position){position=this.$clipPosition(position);var line=this.$lines[position.row]||"";this.$lines[position.row]=line.substring(0,position.column);this.$lines.splice(position.row+1,0,line.substring(position.column,line.length));var end={row:position.row+1,column:0};var delta={action:"insertText",range:Range.fromPoints(position,end),text:this.getNewLineCharacter()};this._emit("change",{data:delta});return end};this.insertInLine=function(position,text){if(text.length==0)return position;var line=this.$lines[position.row]||"";this.$lines[position.row]=line.substring(0,position.column)+text+line.substring(position.column);var end={row:position.row,column:position.column+text.length};var delta={action:"insertText",range:Range.fromPoints(position,end),text:text};this._emit("change",{data:delta});return end};this.remove=function(range){range.start=this.$clipPosition(range.start);range.end=this.$clipPosition(range.end);if(range.isEmpty())return range.start;var firstRow=range.start.row;var lastRow=range.end.row;if(range.isMultiLine()){var firstFullRow=range.start.column==0?firstRow:firstRow+1;var lastFullRow=lastRow-1;if(range.end.column>0)this.removeInLine(lastRow,0,range.end.column);if(lastFullRow>=firstFullRow)this.removeLines(firstFullRow,lastFullRow);if(firstFullRow!=firstRow){this.removeInLine(firstRow,range.start.column,this.getLine(firstRow).length);this.removeNewLine(range.start.row)}}else{this.removeInLine(firstRow,range.start.column,range.end.column)}return range.start};this.removeInLine=function(row,startColumn,endColumn){if(startColumn==endColumn)return;var range=new Range(row,startColumn,row,endColumn);var line=this.getLine(row);var removed=line.substring(startColumn,endColumn);var newLine=line.substring(0,startColumn)+line.substring(endColumn,line.length);this.$lines.splice(row,1,newLine);var delta={action:"removeText",range:range,text:removed};this._emit("change",{data:delta});return range.start};this.removeLines=function(firstRow,lastRow){var range=new Range(firstRow,0,lastRow+1,0);var removed=this.$lines.splice(firstRow,lastRow-firstRow+1);var delta={action:"removeLines",range:range,nl:this.getNewLineCharacter(),lines:removed};this._emit("change",{data:delta});return removed};this.removeNewLine=function(row){var firstLine=this.getLine(row);var secondLine=this.getLine(row+1);var range=new Range(row,firstLine.length,row+1,0);var line=firstLine+secondLine;this.$lines.splice(row,2,line);var delta={action:"removeText",range:range,text:this.getNewLineCharacter()};this._emit("change",{data:delta})};this.replace=function(range,text){if(text.length==0&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);if(text){var end=this.insert(range.start,text)}else{end=range.start}return end};this.applyDeltas=function(deltas){for(var i=0;i<deltas.length;i++){var delta=deltas[i];var range=Range.fromPoints(delta.range.start,delta.range.end);if(delta.action=="insertLines")this.insertLines(range.start.row,delta.lines);else if(delta.action=="insertText")this.insert(range.start,delta.text);else if(delta.action=="removeLines")this.removeLines(range.start.row,range.end.row-1);else if(delta.action=="removeText")this.remove(range)}};this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--){var delta=deltas[i];var range=Range.fromPoints(delta.range.start,delta.range.end);if(delta.action=="insertLines")this.removeLines(range.start.row,range.end.row-1);else if(delta.action=="insertText")this.remove(range);else if(delta.action=="removeLines")this.insertLines(range.start.row,delta.lines);else if(delta.action=="removeText")this.insert(range.start,delta.text)}};this.indexToPosition=function(index,startRow){var lines=this.$lines||this.getAllLines();var newlineLength=this.getNewLineCharacter().length;for(var i=startRow||0,l=lines.length;i<l;i++){index-=lines[i].length+newlineLength;if(index<0)return{row:i,column:index+lines[i].length+newlineLength}}return{row:l-1,column:lines[l-1].length}};this.positionToIndex=function(pos,startRow){var lines=this.$lines||this.getAllLines();var newlineLength=this.getNewLineCharacter().length;var index=0;var row=Math.min(pos.row,lines.length);for(var i=startRow||0;i<row;++i)index+=lines[i].length;return index+newlineLength*i+pos.column}}.call(Document.prototype);exports.Document=Document});define("ace/background_tokenizer",["require","exports","module","./lib/oop","./lib/event_emitter"],function(require,exports,module){var oop=require("./lib/oop");var EventEmitter=require("./lib/event_emitter").EventEmitter;var BackgroundTokenizer=function(tokenizer,editor){this.running=false;this.lines=[];this.states=[];this.currentLine=0;this.tokenizer=tokenizer;var self=this;this.$worker=function(){if(!self.running){return}var workerStart=new Date;var startLine=self.currentLine;var doc=self.doc;var processedLines=0;var len=doc.getLength();while(self.currentLine<len){self.$tokenizeRow(self.currentLine);while(self.lines[self.currentLine])self.currentLine++;processedLines++;if(processedLines%5==0&&new Date-workerStart>20){self.fireUpdateEvent(startLine,self.currentLine-1);self.running=setTimeout(self.$worker,20);return}}self.running=false;self.fireUpdateEvent(startLine,len-1)}};!function(){oop.implement(this,EventEmitter);this.setTokenizer=function(tokenizer){this.tokenizer=tokenizer;this.lines=[];this.states=[];this.start(0)};this.setDocument=function(doc){this.doc=doc;this.lines=[];this.states=[];this.stop()};this.fireUpdateEvent=function(firstRow,lastRow){var data={first:firstRow,last:lastRow};this._emit("update",{data:data})};this.start=function(startRow){this.currentLine=Math.min(startRow||0,this.currentLine,this.doc.getLength());this.lines.splice(this.currentLine,this.lines.length);this.states.splice(this.currentLine,this.states.length);this.stop();this.running=setTimeout(this.$worker,700)};this.$updateOnChange=function(delta){var range=delta.range;var startRow=range.start.row;var len=range.end.row-startRow;if(len===0){this.lines[startRow]=null}else if(delta.action=="removeText"||delta.action=="removeLines"){this.lines.splice(startRow,len+1,null);this.states.splice(startRow,len+1,null)}else{var args=Array(len+1);args.unshift(startRow,1);this.lines.splice.apply(this.lines,args);this.states.splice.apply(this.states,args)}this.currentLine=Math.min(startRow,this.currentLine,this.doc.getLength());this.stop();this.running=setTimeout(this.$worker,700)};this.stop=function(){if(this.running)clearTimeout(this.running);this.running=false};this.getTokens=function(row){return this.lines[row]||this.$tokenizeRow(row)};this.getState=function(row){if(this.currentLine==row)this.$tokenizeRow(row);return this.states[row]||"start"};this.$tokenizeRow=function(row){var line=this.doc.getLine(row);var state=this.states[row-1];var data=this.tokenizer.getLineTokens(line,state,row);if(this.states[row]+""!==data.state+""){this.states[row]=data.state;this.lines[row+1]=null;if(this.currentLine>row+1)this.currentLine=row+1}else if(this.currentLine==row){this.currentLine=row+1}return this.lines[row]=data.tokens}}.call(BackgroundTokenizer.prototype);exports.BackgroundTokenizer=BackgroundTokenizer});define("ace/search_highlight",["require","exports","module","./lib/lang","./lib/oop","./range"],function(require,exports,module){var lang=require("./lib/lang");var oop=require("./lib/oop");var Range=require("./range").Range;var SearchHighlight=function(regExp,clazz,type){this.setRegexp(regExp);this.clazz=clazz;this.type=type||"text"};!function(){this.MAX_RANGES=500;this.setRegexp=function(regExp){if(this.regExp+""==regExp+"")return;this.regExp=regExp;this.cache=[]};this.update=function(html,markerLayer,session,config){if(!this.regExp)return;var start=config.firstRow,end=config.lastRow;for(var i=start;i<=end;i++){var ranges=this.cache[i];if(ranges==null){ranges=lang.getMatchOffsets(session.getLine(i),this.regExp);if(ranges.length>this.MAX_RANGES)ranges=ranges.slice(0,this.MAX_RANGES);ranges=ranges.map(function(match){return new Range(i,match.offset,i,match.offset+match.length)});this.cache[i]=ranges.length?ranges:""}for(var j=ranges.length;j--;){markerLayer.drawSingleLineMarker(html,ranges[j].toScreenRange(session),this.clazz,config,null,this.type)}}}}.call(SearchHighlight.prototype);exports.SearchHighlight=SearchHighlight});define("ace/edit_session/fold_line",["require","exports","module","../range"],function(require,exports,module){var Range=require("../range").Range;function FoldLine(foldData,folds){this.foldData=foldData;if(Array.isArray(folds)){this.folds=folds}else{folds=this.folds=[folds]}var last=folds[folds.length-1];this.range=new Range(folds[0].start.row,folds[0].start.column,last.end.row,last.end.column);this.start=this.range.start;this.end=this.range.end;this.folds.forEach(function(fold){fold.setFoldLine(this)},this)}!function(){this.shiftRow=function(shift){this.start.row+=shift;this.end.row+=shift;this.folds.forEach(function(fold){fold.start.row+=shift;fold.end.row+=shift})};this.addFold=function(fold){if(fold.sameRow){if(fold.start.row<this.startRow||fold.endRow>this.endRow){throw"Can't add a fold to this FoldLine as it has no connection"}this.folds.push(fold);this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)});if(this.range.compareEnd(fold.start.row,fold.start.column)>0){this.end.row=fold.end.row;this.end.column=fold.end.column}else if(this.range.compareStart(fold.end.row,fold.end.column)<0){this.start.row=fold.start.row;this.start.column=fold.start.column}}else if(fold.start.row==this.end.row){this.folds.push(fold);this.end.row=fold.end.row;this.end.column=fold.end.column}else if(fold.end.row==this.start.row){this.folds.unshift(fold);this.start.row=fold.start.row;this.start.column=fold.start.column}else{throw"Trying to add fold to FoldRow that doesn't have a matching row"}fold.foldLine=this};this.containsRow=function(row){return row>=this.start.row&&row<=this.end.row};this.walk=function(callback,endRow,endColumn){var lastEnd=0,folds=this.folds,fold,comp,stop,isNewRow=true;if(endRow==null){endRow=this.end.row;endColumn=this.end.column}for(var i=0;i<folds.length;i++){fold=folds[i];comp=fold.range.compareStart(endRow,endColumn);if(comp==-1){callback(null,endRow,endColumn,lastEnd,isNewRow);return}stop=callback(null,fold.start.row,fold.start.column,lastEnd,isNewRow);stop=!stop&&callback(fold.placeholder,fold.start.row,fold.start.column,lastEnd);if(stop||comp==0){return}isNewRow=!fold.sameRow;lastEnd=fold.end.column}callback(null,endRow,endColumn,lastEnd,isNewRow)};this.getNextFoldTo=function(row,column){var fold,cmp;for(var i=0;i<this.folds.length;i++){fold=this.folds[i];cmp=fold.range.compareEnd(row,column);if(cmp==-1){return{fold:fold,kind:"after"}}else if(cmp==0){return{fold:fold,kind:"inside"}}}return null};this.addRemoveChars=function(row,column,len){var ret=this.getNextFoldTo(row,column),fold,folds;if(ret){fold=ret.fold;if(ret.kind=="inside"&&fold.start.column!=column&&fold.start.row!=row){window.console&&window.console.log(row,column,fold)}else if(fold.start.row==row){folds=this.folds;var i=folds.indexOf(fold);if(i==0){this.start.column+=len}for(i;i<folds.length;i++){fold=folds[i];fold.start.column+=len;if(!fold.sameRow){return}fold.end.column+=len}this.end.column+=len}}};this.split=function(row,column){var fold=this.getNextFoldTo(row,column).fold;var folds=this.folds;var foldData=this.foldData;if(!fold)return null;var i=folds.indexOf(fold);var foldBefore=folds[i-1];this.end.row=foldBefore.end.row;this.end.column=foldBefore.end.column;folds=folds.splice(i,folds.length-i);var newFoldLine=new FoldLine(foldData,folds);foldData.splice(foldData.indexOf(this)+1,0,newFoldLine);return newFoldLine};this.merge=function(foldLineNext){var folds=foldLineNext.folds;for(var i=0;i<folds.length;i++){this.addFold(folds[i])}var foldData=this.foldData;foldData.splice(foldData.indexOf(foldLineNext),1)};this.toString=function(){var ret=[this.range.toString()+": ["];this.folds.forEach(function(fold){ret.push("  "+fold.toString())});ret.push("]");return ret.join("\n")};this.idxToPosition=function(idx){var lastFoldEndColumn=0;var fold;for(var i=0;i<this.folds.length;i++){var fold=this.folds[i];idx-=fold.start.column-lastFoldEndColumn;if(idx<0){return{row:fold.start.row,column:fold.start.column+idx}}idx-=fold.placeholder.length;if(idx<0){return fold.start}lastFoldEndColumn=fold.end.column}return{row:this.end.row,column:this.end.column+idx}}}.call(FoldLine.prototype);exports.FoldLine=FoldLine});define("ace/range_list",["require","exports","module","./range"],function(require,exports,module){var Range=require("./range").Range;var comparePoints=Range.comparePoints;var RangeList=function(){this.ranges=[]};!function(){this.comparePoints=comparePoints;this.pointIndex=function(pos,excludeEdges,startIndex){var list=this.ranges;for(var i=startIndex||0;i<list.length;i++){var range=list[i];var cmpEnd=comparePoints(pos,range.end);if(cmpEnd>0)continue;var cmpStart=comparePoints(pos,range.start);if(cmpEnd===0)return excludeEdges&&cmpStart!==0?-i-2:i;if(cmpStart>0||cmpStart===0&&!excludeEdges)return i;return-i-1}return-i-1};this.add=function(range){var excludeEdges=!range.isEmpty();var startIndex=this.pointIndex(range.start,excludeEdges);if(startIndex<0)startIndex=-startIndex-1;var endIndex=this.pointIndex(range.end,excludeEdges,startIndex);if(endIndex<0)endIndex=-endIndex-1;else endIndex++;return this.ranges.splice(startIndex,endIndex-startIndex,range)};this.addList=function(list){var removed=[];for(var i=list.length;i--;){removed.push.call(removed,this.add(list[i]))}return removed};this.substractPoint=function(pos){var i=this.pointIndex(pos);if(i>=0)return this.ranges.splice(i,1)};this.merge=function(){var removed=[];var list=this.ranges;list=list.sort(function(a,b){return comparePoints(a.start,b.start)});var next=list[0],range;for(var i=1;i<list.length;i++){range=next;next=list[i];var cmp=comparePoints(range.end,next.start);if(cmp<0)continue;if(cmp==0&&!range.isEmpty()&&!next.isEmpty())continue;if(comparePoints(range.end,next.end)<0){range.end.row=next.end.row;range.end.column=next.end.column}list.splice(i,1);removed.push(next);next=range;i--}this.ranges=list;return removed};this.contains=function(row,column){return this.pointIndex({row:row,column:column})>=0};this.containsPoint=function(pos){return this.pointIndex(pos)>=0};this.rangeAtPoint=function(pos){var i=this.pointIndex(pos);if(i>=0)return this.ranges[i]};this.clipRows=function(startRow,endRow){var list=this.ranges;if(list[0].start.row>endRow||list[list.length-1].start.row<startRow)return[];var startIndex=this.pointIndex({row:startRow,column:0});if(startIndex<0)startIndex=-startIndex-1;var endIndex=this.pointIndex({row:endRow,column:0},startIndex);if(endIndex<0)endIndex=-endIndex-1;var clipped=[];for(var i=startIndex;i<endIndex;i++){clipped.push(list[i])}return clipped};this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)};this.attach=function(session){if(this.session)this.detach();this.session=session;this.onChange=this.$onChange.bind(this);this.session.on("change",this.onChange)};this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange);this.session=null};this.$onChange=function(e){var changeRange=e.data.range;if(e.data.action[0]=="i"){var start=changeRange.start;var end=changeRange.end}else{var end=changeRange.start;var start=changeRange.end}var startRow=start.row;var endRow=end.row;var lineDif=endRow-startRow;var colDiff=-start.column+end.column;var ranges=this.ranges;for(var i=0,n=ranges.length;i<n;i++){var r=ranges[i];if(r.end.row<startRow)continue;if(r.start.row>startRow)break;if(r.start.row==startRow&&r.start.column>=start.column){r.start.column+=colDiff;r.start.row+=lineDif}if(r.end.row==startRow&&r.end.column>=start.column){if(r.end.column==start.column&&colDiff>0&&i<n-1){if(r.end.column>r.start.column&&r.end.column==ranges[i+1].start.column)r.end.column-=colDiff}r.end.column+=colDiff;r.end.row+=lineDif}}if(lineDif!=0&&i<n){for(;i<n;i++){var r=ranges[i];r.start.row+=lineDif;r.end.row+=lineDif}}}}.call(RangeList.prototype);exports.RangeList=RangeList});define("ace/edit_session/fold",["require","exports","module","../range","../range_list","../lib/oop"],function(require,exports,module){var Range=require("../range").Range;var RangeList=require("../range_list").RangeList;var oop=require("../lib/oop");var Fold=exports.Fold=function(range,placeholder){this.foldLine=null;this.placeholder=placeholder;this.range=range;this.start=range.start;this.end=range.end;this.sameRow=range.start.row==range.end.row;this.subFolds=this.ranges=[]};oop.inherits(Fold,RangeList);!function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()};this.setFoldLine=function(foldLine){this.foldLine=foldLine;this.subFolds.forEach(function(fold){fold.setFoldLine(foldLine)})};this.clone=function(){var range=this.range.clone();var fold=new Fold(range,this.placeholder);this.subFolds.forEach(function(subFold){fold.subFolds.push(subFold.clone())});fold.collapseChildren=this.collapseChildren;return fold};this.addSubFold=function(fold){if(this.range.isEqual(fold))return;if(!this.range.containsRange(fold))throw"A fold can't intersect already existing fold"+fold.range+this.range;consumeRange(fold,this.start);var row=fold.start.row,column=fold.start.column;for(var i=0,cmp=-1;i<this.subFolds.length;i++){cmp=this.subFolds[i].range.compare(row,column);if(cmp!=1)break}var afterStart=this.subFolds[i];if(cmp==0)return afterStart.addSubFold(fold);var row=fold.range.end.row,column=fold.range.end.column;for(var j=i,cmp=-1;j<this.subFolds.length;j++){cmp=this.subFolds[j].range.compare(row,column);if(cmp!=1)break}var afterEnd=this.subFolds[j];if(cmp==0)throw"A fold can't intersect already existing fold"+fold.range+this.range;var consumedFolds=this.subFolds.splice(i,j-i,fold);fold.setFoldLine(this.foldLine);return fold};this.restoreRange=function(range){return restoreRange(range,this.start)}}.call(Fold.prototype);function consumePoint(point,anchor){point.row-=anchor.row;if(point.row==0)point.column-=anchor.column
}function consumeRange(range,anchor){consumePoint(range.start,anchor);consumePoint(range.end,anchor)}function restorePoint(point,anchor){if(point.row==0)point.column+=anchor.column;point.row+=anchor.row}function restoreRange(range,anchor){restorePoint(range.start,anchor);restorePoint(range.end,anchor)}});define("ace/edit_session/folding",["require","exports","module","../range","./fold_line","./fold","../token_iterator"],function(require,exports,module){var Range=require("../range").Range;var FoldLine=require("./fold_line").FoldLine;var Fold=require("./fold").Fold;var TokenIterator=require("../token_iterator").TokenIterator;function Folding(){this.getFoldAt=function(row,column,side){var foldLine=this.getFoldLine(row);if(!foldLine)return null;var folds=foldLine.folds;for(var i=0;i<folds.length;i++){var fold=folds[i];if(fold.range.contains(row,column)){if(side==1&&fold.range.isEnd(row,column)){continue}else if(side==-1&&fold.range.isStart(row,column)){continue}return fold}}};this.getFoldsInRange=function(range){var start=range.start;var end=range.end;var foldLines=this.$foldData;var foundFolds=[];start.column+=1;end.column-=1;for(var i=0;i<foldLines.length;i++){var cmp=foldLines[i].range.compareRange(range);if(cmp==2){continue}else if(cmp==-2){break}var folds=foldLines[i].folds;for(var j=0;j<folds.length;j++){var fold=folds[j];cmp=fold.range.compareRange(range);if(cmp==-2){break}else if(cmp==2){continue}else if(cmp==42){break}foundFolds.push(fold)}}start.column-=1;end.column+=1;return foundFolds};this.getAllFolds=function(){var folds=[];var foldLines=this.$foldData;function addFold(fold){folds.push(fold)}for(var i=0;i<foldLines.length;i++)for(var j=0;j<foldLines[i].folds.length;j++)addFold(foldLines[i].folds[j]);return folds};this.getFoldStringAt=function(row,column,trim,foldLine){foldLine=foldLine||this.getFoldLine(row);if(!foldLine)return null;var lastFold={end:{column:0}};var str,fold;for(var i=0;i<foldLine.folds.length;i++){fold=foldLine.folds[i];var cmp=fold.range.compareEnd(row,column);if(cmp==-1){str=this.getLine(fold.start.row).substring(lastFold.end.column,fold.start.column);break}else if(cmp===0){return null}lastFold=fold}if(!str)str=this.getLine(fold.start.row).substring(lastFold.end.column);if(trim==-1)return str.substring(0,column-lastFold.end.column);else if(trim==1)return str.substring(column-lastFold.end.column);else return str};this.getFoldLine=function(docRow,startFoldLine){var foldData=this.$foldData;var i=0;if(startFoldLine)i=foldData.indexOf(startFoldLine);if(i==-1)i=0;for(i;i<foldData.length;i++){var foldLine=foldData[i];if(foldLine.start.row<=docRow&&foldLine.end.row>=docRow){return foldLine}else if(foldLine.end.row>docRow){return null}}return null};this.getNextFoldLine=function(docRow,startFoldLine){var foldData=this.$foldData;var i=0;if(startFoldLine)i=foldData.indexOf(startFoldLine);if(i==-1)i=0;for(i;i<foldData.length;i++){var foldLine=foldData[i];if(foldLine.end.row>=docRow){return foldLine}}return null};this.getFoldedRowCount=function(first,last){var foldData=this.$foldData,rowCount=last-first+1;for(var i=0;i<foldData.length;i++){var foldLine=foldData[i],end=foldLine.end.row,start=foldLine.start.row;if(end>=last){if(start<last){if(start>=first)rowCount-=last-start;else rowCount=0}break}else if(end>=first){if(start>=first)rowCount-=end-start;else rowCount-=end-first+1}}return rowCount};this.$addFoldLine=function(foldLine){this.$foldData.push(foldLine);this.$foldData.sort(function(a,b){return a.start.row-b.start.row});return foldLine};this.addFold=function(placeholder,range){var foldData=this.$foldData;var added=false;var fold;if(placeholder instanceof Fold)fold=placeholder;else{fold=new Fold(range,placeholder);fold.collapseChildren=range.collapseChildren}this.$clipRangeToDocument(fold.range);var startRow=fold.start.row;var startColumn=fold.start.column;var endRow=fold.end.row;var endColumn=fold.end.column;if(startRow==endRow&&endColumn-startColumn<2)throw"The range has to be at least 2 characters width";var startFold=this.getFoldAt(startRow,startColumn,1);var endFold=this.getFoldAt(endRow,endColumn,-1);if(startFold&&endFold==startFold)return startFold.addSubFold(fold);if(startFold&&!startFold.range.isStart(startRow,startColumn)||endFold&&!endFold.range.isEnd(endRow,endColumn)){throw"A fold can't intersect already existing fold"+fold.range+startFold.range}var folds=this.getFoldsInRange(fold.range);if(folds.length>0){this.removeFolds(folds);folds.forEach(function(subFold){fold.addSubFold(subFold)})}for(var i=0;i<foldData.length;i++){var foldLine=foldData[i];if(endRow==foldLine.start.row){foldLine.addFold(fold);added=true;break}else if(startRow==foldLine.end.row){foldLine.addFold(fold);added=true;if(!fold.sameRow){var foldLineNext=foldData[i+1];if(foldLineNext&&foldLineNext.start.row==endRow){foldLine.merge(foldLineNext);break}}break}else if(endRow<=foldLine.start.row){break}}if(!added)foldLine=this.$addFoldLine(new FoldLine(this.$foldData,fold));if(this.$useWrapMode)this.$updateWrapData(foldLine.start.row,foldLine.start.row);else this.$updateRowLengthCache(foldLine.start.row,foldLine.start.row);this.$modified=true;this._emit("changeFold",{data:fold});return fold};this.addFolds=function(folds){folds.forEach(function(fold){this.addFold(fold)},this)};this.removeFold=function(fold){var foldLine=fold.foldLine;var startRow=foldLine.start.row;var endRow=foldLine.end.row;var foldLines=this.$foldData;var folds=foldLine.folds;if(folds.length==1){foldLines.splice(foldLines.indexOf(foldLine),1)}else if(foldLine.range.isEnd(fold.end.row,fold.end.column)){folds.pop();foldLine.end.row=folds[folds.length-1].end.row;foldLine.end.column=folds[folds.length-1].end.column}else if(foldLine.range.isStart(fold.start.row,fold.start.column)){folds.shift();foldLine.start.row=folds[0].start.row;foldLine.start.column=folds[0].start.column}else if(fold.sameRow){folds.splice(folds.indexOf(fold),1)}else{var newFoldLine=foldLine.split(fold.start.row,fold.start.column);folds=newFoldLine.folds;folds.shift();newFoldLine.start.row=folds[0].start.row;newFoldLine.start.column=folds[0].start.column}if(!this.$updating){if(this.$useWrapMode)this.$updateWrapData(startRow,endRow);else this.$updateRowLengthCache(startRow,endRow)}this.$modified=true;this._emit("changeFold",{data:fold})};this.removeFolds=function(folds){var cloneFolds=[];for(var i=0;i<folds.length;i++){cloneFolds.push(folds[i])}cloneFolds.forEach(function(fold){this.removeFold(fold)},this);this.$modified=true};this.expandFold=function(fold){this.removeFold(fold);fold.subFolds.forEach(function(subFold){fold.restoreRange(subFold);this.addFold(subFold)},this);if(fold.collapseChildren>0){this.foldAll(fold.start.row+1,fold.end.row,fold.collapseChildren-1)}fold.subFolds=[]};this.expandFolds=function(folds){folds.forEach(function(fold){this.expandFold(fold)},this)};this.unfold=function(location,expandInner){var range,folds;if(location==null){range=new Range(0,0,this.getLength(),0);expandInner=true}else if(typeof location=="number")range=new Range(location,0,location,this.getLine(location).length);else if("row"in location)range=Range.fromPoints(location,location);else range=location;folds=this.getFoldsInRange(range);if(expandInner){this.removeFolds(folds)}else{while(folds.length){this.expandFolds(folds);folds=this.getFoldsInRange(range)}}};this.isRowFolded=function(docRow,startFoldRow){return!!this.getFoldLine(docRow,startFoldRow)};this.getRowFoldEnd=function(docRow,startFoldRow){var foldLine=this.getFoldLine(docRow,startFoldRow);return foldLine?foldLine.end.row:docRow};this.getRowFoldStart=function(docRow,startFoldRow){var foldLine=this.getFoldLine(docRow,startFoldRow);return foldLine?foldLine.start.row:docRow};this.getFoldDisplayLine=function(foldLine,endRow,endColumn,startRow,startColumn){if(startRow==null){startRow=foldLine.start.row;startColumn=0}if(endRow==null){endRow=foldLine.end.row;endColumn=this.getLine(endRow).length}var doc=this.doc;var textLine="";foldLine.walk(function(placeholder,row,column,lastColumn){if(row<startRow)return;if(row==startRow){if(column<startColumn)return;lastColumn=Math.max(startColumn,lastColumn)}if(placeholder!=null){textLine+=placeholder}else{textLine+=doc.getLine(row).substring(lastColumn,column)}},endRow,endColumn);return textLine};this.getDisplayLine=function(row,endColumn,startRow,startColumn){var foldLine=this.getFoldLine(row);if(!foldLine){var line;line=this.doc.getLine(row);return line.substring(startColumn||0,endColumn||line.length)}else{return this.getFoldDisplayLine(foldLine,row,endColumn,startRow,startColumn)}};this.$cloneFoldData=function(){var fd=[];fd=this.$foldData.map(function(foldLine){var folds=foldLine.folds.map(function(fold){return fold.clone()});return new FoldLine(fd,folds)});return fd};this.toggleFold=function(tryToUnfold){var selection=this.selection;var range=selection.getRange();var fold;var bracketPos;if(range.isEmpty()){var cursor=range.start;fold=this.getFoldAt(cursor.row,cursor.column);if(fold){this.expandFold(fold);return}else if(bracketPos=this.findMatchingBracket(cursor)){if(range.comparePoint(bracketPos)==1){range.end=bracketPos}else{range.start=bracketPos;range.start.column++;range.end.column--}}else if(bracketPos=this.findMatchingBracket({row:cursor.row,column:cursor.column+1})){if(range.comparePoint(bracketPos)==1)range.end=bracketPos;else range.start=bracketPos;range.start.column++}else{range=this.getCommentFoldRange(cursor.row,cursor.column)||range}}else{var folds=this.getFoldsInRange(range);if(tryToUnfold&&folds.length){this.expandFolds(folds);return}else if(folds.length==1){fold=folds[0]}}if(!fold)fold=this.getFoldAt(range.start.row,range.start.column);if(fold&&fold.range.toString()==range.toString()){this.expandFold(fold);return}var placeholder="...";if(!range.isMultiLine()){placeholder=this.getTextRange(range);if(placeholder.length<4)return;placeholder=placeholder.trim().substring(0,2)+".."}this.addFold(placeholder,range)};this.getCommentFoldRange=function(row,column,dir){var iterator=new TokenIterator(this,row,column);var token=iterator.getCurrentToken();if(token&&/^comment|string/.test(token.type)){var range=new Range;var re=new RegExp(token.type.replace(/\..*/,"\\."));if(dir!=1){do{token=iterator.stepBackward()}while(token&&re.test(token.type));iterator.stepForward()}range.start.row=iterator.getCurrentTokenRow();range.start.column=iterator.getCurrentTokenColumn()+2;iterator=new TokenIterator(this,row,column);if(dir!=-1){do{token=iterator.stepForward()}while(token&&re.test(token.type));token=iterator.stepBackward()}else token=iterator.getCurrentToken();range.end.row=iterator.getCurrentTokenRow();range.end.column=iterator.getCurrentTokenColumn()+token.value.length-2;return range}};this.foldAll=function(startRow,endRow,depth){if(depth==undefined)depth=1e5;var foldWidgets=this.foldWidgets;endRow=endRow||this.getLength();for(var row=startRow||0;row<endRow;row++){if(foldWidgets[row]==null)foldWidgets[row]=this.getFoldWidget(row);if(foldWidgets[row]!="start")continue;var range=this.getFoldWidgetRange(row);if(range&&range.end.row<=endRow)try{var fold=this.addFold("...",range);fold.collapseChildren=depth}catch(e){}row=range.end.row}};this.$foldStyles={manual:1,markbegin:1,markbeginend:1};this.$foldStyle="markbegin";this.setFoldStyle=function(style){if(!this.$foldStyles[style])throw new Error("invalid fold style: "+style+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==style)return;this.$foldStyle=style;if(style=="manual")this.unfold();var mode=this.$foldMode;this.$setFolding(null);this.$setFolding(mode)};this.$setFolding=function(foldMode){if(this.$foldMode==foldMode)return;this.$foldMode=foldMode;this.removeListener("change",this.$updateFoldWidgets);this._emit("changeAnnotation");if(!foldMode||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[];this.getFoldWidget=foldMode.getFoldWidget.bind(foldMode,this,this.$foldStyle);this.getFoldWidgetRange=foldMode.getFoldWidgetRange.bind(foldMode,this,this.$foldStyle);this.$updateFoldWidgets=this.updateFoldWidgets.bind(this);this.on("change",this.$updateFoldWidgets)};this.getParentFoldRangeData=function(row,ignoreCurrent){var fw=this.foldWidgets;if(!fw||ignoreCurrent&&fw[row])return{};var i=row-1,firstRange;while(i>=0){var c=fw[i];if(c==null)c=fw[i]=this.getFoldWidget(i);if(c=="start"){var range=this.getFoldWidgetRange(i);if(!firstRange)firstRange=range;if(range&&range.end.row>=row)break}i--}return{range:i!==-1&&range,firstRange:firstRange}};this.onFoldWidgetClick=function(row,e){var type=this.getFoldWidget(row);var line=this.getLine(row);e=e.domEvent;var children=e.shiftKey;var all=e.ctrlKey||e.metaKey;var siblings=e.altKey;var dir=type==="end"?-1:1;var fold=this.getFoldAt(row,dir===-1?0:line.length,dir);if(fold){if(children||all)this.removeFold(fold);else this.expandFold(fold);return}var range=this.getFoldWidgetRange(row);if(range&&!range.isMultiLine()){fold=this.getFoldAt(range.start.row,range.start.column,1);if(fold&&range.isEqual(fold.range)){this.removeFold(fold);return}}if(siblings){var data=this.getParentFoldRangeData(row);if(data.range){var startRow=data.range.start.row+1;var endRow=data.range.end.row}this.foldAll(startRow,endRow,all?1e4:0)}else if(children){var endRow=range?range.end.row:this.getLength();this.foldAll(row+1,range.end.row,all?1e4:0)}else if(range){if(all)range.collapseChildren=1e4;this.addFold("...",range)}if(!range)(e.target||e.srcElement).className+=" ace_invalid"};this.updateFoldWidgets=function(e){var delta=e.data;var range=delta.range;var firstRow=range.start.row;var len=range.end.row-firstRow;if(len===0){this.foldWidgets[firstRow]=null}else if(delta.action=="removeText"||delta.action=="removeLines"){this.foldWidgets.splice(firstRow,len+1,null)}else{var args=Array(len+1);args.unshift(firstRow,1);this.foldWidgets.splice.apply(this.foldWidgets,args)}}}exports.Folding=Folding});define("ace/edit_session/bracket_match",["require","exports","module","../token_iterator","../range"],function(require,exports,module){var TokenIterator=require("../token_iterator").TokenIterator;var Range=require("../range").Range;function BracketMatch(){this.findMatchingBracket=function(position,chr){if(position.column==0)return null;var charBeforeCursor=chr||this.getLine(position.row).charAt(position.column-1);if(charBeforeCursor=="")return null;var match=charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/);if(!match)return null;if(match[1])return this.$findClosingBracket(match[1],position);else return this.$findOpeningBracket(match[2],position)};this.getBracketRange=function(pos){var line=this.getLine(pos.row);var before=true,range;var chr=line.charAt(pos.column-1);var match=chr&&chr.match(/([\(\[\{])|([\)\]\}])/);if(!match){chr=line.charAt(pos.column);pos={row:pos.row,column:pos.column+1};match=chr&&chr.match(/([\(\[\{])|([\)\]\}])/);before=false}if(!match)return null;if(match[1]){var bracketPos=this.$findClosingBracket(match[1],pos);if(!bracketPos)return null;range=Range.fromPoints(pos,bracketPos);if(!before){range.end.column++;range.start.column--}range.cursor=range.end}else{var bracketPos=this.$findOpeningBracket(match[2],pos);if(!bracketPos)return null;range=Range.fromPoints(bracketPos,pos);if(!before){range.start.column++;range.end.column--}range.cursor=range.start}return range};this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"};this.$findOpeningBracket=function(bracket,position,typeRe){var openBracket=this.$brackets[bracket];var depth=1;var iterator=new TokenIterator(this,position.row,position.column);var token=iterator.getCurrentToken();if(!token)token=iterator.stepForward();if(!token)return;if(!typeRe){typeRe=new RegExp("(\\.?"+token.type.replace(".","\\.").replace("rparen",".paren")+")+")}var valueIndex=position.column-iterator.getCurrentTokenColumn()-2;var value=token.value;while(true){while(valueIndex>=0){var chr=value.charAt(valueIndex);if(chr==openBracket){depth-=1;if(depth==0){return{row:iterator.getCurrentTokenRow(),column:valueIndex+iterator.getCurrentTokenColumn()}}}else if(chr==bracket){depth+=1}valueIndex-=1}do{token=iterator.stepBackward()}while(token&&!typeRe.test(token.type));if(token==null)break;value=token.value;valueIndex=value.length-1}return null};this.$findClosingBracket=function(bracket,position,typeRe){var closingBracket=this.$brackets[bracket];var depth=1;var iterator=new TokenIterator(this,position.row,position.column);var token=iterator.getCurrentToken();if(!token)token=iterator.stepForward();if(!token)return;if(!typeRe){typeRe=new RegExp("(\\.?"+token.type.replace(".","\\.").replace("lparen",".paren")+")+")}var valueIndex=position.column-iterator.getCurrentTokenColumn();while(true){var value=token.value;var valueLength=value.length;while(valueIndex<valueLength){var chr=value.charAt(valueIndex);if(chr==closingBracket){depth-=1;if(depth==0){return{row:iterator.getCurrentTokenRow(),column:valueIndex+iterator.getCurrentTokenColumn()}}}else if(chr==bracket){depth+=1}valueIndex+=1}do{token=iterator.stepForward()}while(token&&!typeRe.test(token.type));if(token==null)break;valueIndex=0}return null}}exports.BracketMatch=BracketMatch});define("ace/undomanager",["require","exports","module"],function(require,exports,module){var UndoManager=function(){this.reset()};!function(){this.execute=function(options){var deltas=options.args[0];this.$doc=options.args[1];this.$undoStack.push(deltas);this.$redoStack=[]};this.undo=function(dontSelect){var deltas=this.$undoStack.pop();var undoSelectionRange=null;if(deltas){undoSelectionRange=this.$doc.undoChanges(deltas,dontSelect);this.$redoStack.push(deltas)}return undoSelectionRange};this.redo=function(dontSelect){var deltas=this.$redoStack.pop();var redoSelectionRange=null;if(deltas){redoSelectionRange=this.$doc.redoChanges(deltas,dontSelect);this.$undoStack.push(deltas)}return redoSelectionRange};this.reset=function(){this.$undoStack=[];this.$redoStack=[]};this.hasUndo=function(){return this.$undoStack.length>0};this.hasRedo=function(){return this.$redoStack.length>0}}.call(UndoManager.prototype);exports.UndoManager=UndoManager});define("ace/layer/gutter",["require","exports","module","../lib/dom","../lib/oop","../lib/lang","../lib/event_emitter"],function(require,exports,module){var dom=require("../lib/dom");var oop=require("../lib/oop");var lang=require("../lib/lang");var EventEmitter=require("../lib/event_emitter").EventEmitter;var Gutter=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_gutter-layer";parentEl.appendChild(this.element);this.setShowFoldWidgets(this.$showFoldWidgets);this.gutterWidth=0;this.$annotations=[];this.$updateAnnotations=this.$updateAnnotations.bind(this)};!function(){oop.implement(this,EventEmitter);this.setSession=function(session){if(this.session)this.session.removeEventListener("change",this.$updateAnnotations);this.session=session;session.on("change",this.$updateAnnotations)};this.addGutterDecoration=function(row,className){if(window.console)console.warn&&console.warn("deprecated use session.addGutterDecoration");this.session.addGutterDecoration(row,className)};this.removeGutterDecoration=function(row,className){if(window.console)console.warn&&console.warn("deprecated use session.removeGutterDecoration");this.session.removeGutterDecoration(row,className)};this.setAnnotations=function(annotations){this.$annotations=[];var rowInfo,row;for(var i=0;i<annotations.length;i++){var annotation=annotations[i];var row=annotation.row;var rowInfo=this.$annotations[row];if(!rowInfo)rowInfo=this.$annotations[row]={text:[]};var annoText=annotation.text;annoText=annoText?lang.escapeHTML(annoText):annotation.html||"";if(rowInfo.text.indexOf(annoText)===-1)rowInfo.text.push(annoText);var type=annotation.type;if(type=="error")rowInfo.className=" ace_error";else if(type=="warning"&&rowInfo.className!=" ace_error")rowInfo.className=" ace_warning";else if(type=="info"&&!rowInfo.className)rowInfo.className=" ace_info"}};this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var delta=e.data;var range=delta.range;var firstRow=range.start.row;var len=range.end.row-firstRow;if(len===0){}else if(delta.action=="removeText"||delta.action=="removeLines"){this.$annotations.splice(firstRow,len+1,null)}else{var args=Array(len+1);args.unshift(firstRow,1);this.$annotations.splice.apply(this.$annotations,args)}};this.update=function(config){var emptyAnno={className:""};var html=[];var i=config.firstRow;var lastRow=config.lastRow;var fold=this.session.getNextFoldLine(i);var foldStart=fold?fold.start.row:Infinity;var foldWidgets=this.$showFoldWidgets&&this.session.foldWidgets;var breakpoints=this.session.$breakpoints;var decorations=this.session.$decorations;var firstLineNumber=this.session.$firstLineNumber;var lastLineNumber=0;while(true){if(i>foldStart){i=fold.end.row+1;fold=this.session.getNextFoldLine(i,fold);foldStart=fold?fold.start.row:Infinity}if(i>lastRow)break;var annotation=this.$annotations[i]||emptyAnno;html.push("<div class='ace_gutter-cell ",breakpoints[i]||"",decorations[i]||"",annotation.className,"' style='height:",this.session.getRowLength(i)*config.lineHeight,"px;'>",lastLineNumber=i+firstLineNumber);if(foldWidgets){var c=foldWidgets[i];if(c==null)c=foldWidgets[i]=this.session.getFoldWidget(i);if(c)html.push("<span class='ace_fold-widget ace_",c,c=="start"&&i==foldStart&&i<fold.end.row?" ace_closed":" ace_open","' style='height:",config.lineHeight,"px","'></span>")}html.push("</div>");i++}this.element=dom.setInnerHtml(this.element,html.join(""));this.element.style.height=config.minHeight+"px";if(this.session.$useWrapMode)lastLineNumber=this.session.getLength();var gutterWidth=(""+lastLineNumber).length*config.characterWidth;var padding=this.$padding||this.$computePadding();gutterWidth+=padding.left+padding.right;if(gutterWidth!==this.gutterWidth){this.gutterWidth=gutterWidth;this.element.style.width=Math.ceil(this.gutterWidth)+"px";this._emit("changeGutterWidth",gutterWidth)}};this.$showFoldWidgets=true;this.setShowFoldWidgets=function(show){if(show)dom.addCssClass(this.element,"ace_folding-enabled");else dom.removeCssClass(this.element,"ace_folding-enabled");this.$showFoldWidgets=show;this.$padding=null};this.getShowFoldWidgets=function(){return this.$showFoldWidgets};this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var style=dom.computedStyle(this.element.firstChild);this.$padding={};this.$padding.left=parseInt(style.paddingLeft)+1;this.$padding.right=parseInt(style.paddingRight);return this.$padding};this.getRegion=function(point){var padding=this.$padding||this.$computePadding();var rect=this.element.getBoundingClientRect();if(point.x<padding.left+rect.left)return"markers";if(this.$showFoldWidgets&&point.x>rect.right-padding.right)return"foldWidgets"}}.call(Gutter.prototype);exports.Gutter=Gutter});define("ace/layer/marker",["require","exports","module","../range","../lib/dom"],function(require,exports,module){var Range=require("../range").Range;var dom=require("../lib/dom");var Marker=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_marker-layer";parentEl.appendChild(this.element)};!function(){this.$padding=0;this.setPadding=function(padding){this.$padding=padding};this.setSession=function(session){this.session=session};this.setMarkers=function(markers){this.markers=markers};this.update=function(config){var config=config||this.config;if(!config)return;this.config=config;var html=[];for(var key in this.markers){var marker=this.markers[key];if(!marker.range){marker.update(html,this,this.session,config);continue}var range=marker.range.clipRows(config.firstRow,config.lastRow);if(range.isEmpty())continue;range=range.toScreenRange(this.session);if(marker.renderer){var top=this.$getTop(range.start.row,config);var left=this.$padding+range.start.column*config.characterWidth;marker.renderer(html,range,left,top,config)}else if(marker.type=="fullLine"){this.drawFullLineMarker(html,range,marker.clazz,config)}else if(marker.type=="screenLine"){this.drawScreenLineMarker(html,range,marker.clazz,config)}else if(range.isMultiLine()){if(marker.type=="text")this.drawTextMarker(html,range,marker.clazz,config);else this.drawMultiLineMarker(html,range,marker.clazz,config)}else{this.drawSingleLineMarker(html,range,marker.clazz+" ace_start",config)}}this.element=dom.setInnerHtml(this.element,html.join(""))};this.$getTop=function(row,layerConfig){return(row-layerConfig.firstRowScreen)*layerConfig.lineHeight};this.drawTextMarker=function(stringBuilder,range,clazz,layerConfig){var row=range.start.row;var lineRange=new Range(row,range.start.column,row,this.session.getScreenLastRowColumn(row));this.drawSingleLineMarker(stringBuilder,lineRange,clazz+" ace_start",layerConfig,1,"text");row=range.end.row;lineRange=new Range(row,0,row,range.end.column);this.drawSingleLineMarker(stringBuilder,lineRange,clazz,layerConfig,0,"text");for(row=range.start.row+1;row<range.end.row;row++){lineRange.start.row=row;lineRange.end.row=row;lineRange.end.column=this.session.getScreenLastRowColumn(row);this.drawSingleLineMarker(stringBuilder,lineRange,clazz,layerConfig,1,"text")}};this.drawMultiLineMarker=function(stringBuilder,range,clazz,config,type){var padding=this.$padding;var height=config.lineHeight;var top=this.$getTop(range.start.row,config);var left=padding+range.start.column*config.characterWidth;stringBuilder.push("<div class='",clazz," ace_start' style='","height:",height,"px;","right:0;","top:",top,"px;","left:",left,"px;'></div>");top=this.$getTop(range.end.row,config);var width=range.end.column*config.characterWidth;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","width:",width,"px;","top:",top,"px;","left:",padding,"px;'></div>");height=(range.end.row-range.start.row-1)*config.lineHeight;if(height<0)return;top=this.$getTop(range.start.row+1,config);stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","right:0;","top:",top,"px;","left:",padding,"px;'></div>")};this.drawSingleLineMarker=function(stringBuilder,range,clazz,config,extraLength){var height=config.lineHeight;var width=(range.end.column+(extraLength||0)-range.start.column)*config.characterWidth;var top=this.$getTop(range.start.row,config);var left=this.$padding+range.start.column*config.characterWidth;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","width:",width,"px;","top:",top,"px;","left:",left,"px;'></div>")};this.drawFullLineMarker=function(stringBuilder,range,clazz,config){var top=this.$getTop(range.start.row,config);var height=config.lineHeight;if(range.start.row!=range.end.row)height+=this.$getTop(range.end.row,config)-top;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","top:",top,"px;","left:0;right:0;'></div>")};this.drawScreenLineMarker=function(stringBuilder,range,clazz,config){var top=this.$getTop(range.start.row,config);var height=config.lineHeight;stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","top:",top,"px;","left:0;right:0;'></div>")}}.call(Marker.prototype);exports.Marker=Marker});define("ace/layer/text",["require","exports","module","../lib/oop","../lib/dom","../lib/lang","../lib/useragent","../lib/event_emitter"],function(require,exports,module){var oop=require("../lib/oop");var dom=require("../lib/dom");var lang=require("../lib/lang");var useragent=require("../lib/useragent");var EventEmitter=require("../lib/event_emitter").EventEmitter;var Text=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_text-layer";parentEl.appendChild(this.element);this.$characterSize={width:0,height:0};this.checkForSizeChanges();this.$pollSizeChanges()};!function(){oop.implement(this,EventEmitter);this.EOF_CHAR="¶";this.EOL_CHAR="¬";this.TAB_CHAR="→";this.SPACE_CHAR="·";this.$padding=0;this.setPadding=function(padding){this.$padding=padding;this.element.style.padding="0 "+padding+"px"};this.getLineHeight=function(){return this.$characterSize.height||1};this.getCharacterWidth=function(){return this.$characterSize.width||1};this.checkForSizeChanges=function(){var size=this.$measureSizes();if(size&&(this.$characterSize.width!==size.width||this.$characterSize.height!==size.height)){this.$measureNode.style.fontWeight="bold";var boldSize=this.$measureSizes();this.$measureNode.style.fontWeight="";this.$characterSize=size;this.allowBoldFonts=boldSize&&boldSize.width===size.width&&boldSize.height===size.height;this._emit("changeCharacterSize",{data:size})}};this.$pollSizeChanges=function(){var self=this;this.$pollSizeChangesTimer=setInterval(function(){self.checkForSizeChanges()},500)};this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1};this.$measureSizes=useragent.isIE||useragent.isOldGecko?function(){var n=1e3;if(!this.$measureNode){var measureNode=this.$measureNode=dom.createElement("div");var style=measureNode.style;style.width=style.height="auto";style.left=style.top=-n*40+"px";style.visibility="hidden";style.position="fixed";style.overflow="visible";style.whiteSpace="nowrap";measureNode.innerHTML=lang.stringRepeat("Xy",n);if(this.element.ownerDocument.body){this.element.ownerDocument.body.appendChild(measureNode)}else{var container=this.element.parentNode;while(!dom.hasCssClass(container,"ace_editor"))container=container.parentNode;container.appendChild(measureNode)}}if(!this.element.offsetWidth)return null;var style=this.$measureNode.style;var computedStyle=dom.computedStyle(this.element);for(var prop in this.$fontStyles)style[prop]=computedStyle[prop];var size={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(n*2)};if(size.width==0||size.height==0)return null;return size}:function(){if(!this.$measureNode){var measureNode=this.$measureNode=dom.createElement("div");var style=measureNode.style;style.width=style.height="auto";style.left=style.top=-100+"px";style.visibility="hidden";style.position="fixed";style.overflow="visible";style.whiteSpace="nowrap";measureNode.innerHTML="X";var container=this.element.parentNode;while(container&&!dom.hasCssClass(container,"ace_editor"))container=container.parentNode;if(!container)return this.$measureNode=null;container.appendChild(measureNode)}var rect=this.$measureNode.getBoundingClientRect();var size={height:rect.height,width:rect.width};if(size.width==0||size.height==0)return null;return size};this.setSession=function(session){this.session=session;this.$computeTabString()};this.showInvisibles=false;this.setShowInvisibles=function(showInvisibles){if(this.showInvisibles==showInvisibles)return false;this.showInvisibles=showInvisibles;this.$computeTabString();return true};this.displayIndentGuides=true;this.setDisplayIndentGuides=function(display){if(this.displayIndentGuides==display)return false;this.displayIndentGuides=display;this.$computeTabString();return true};this.$tabStrings=[];this.onChangeTabSize=this.$computeTabString=function(){var tabSize=this.session.getTabSize();this.tabSize=tabSize;var tabStr=this.$tabStrings=[0];for(var i=1;i<tabSize+1;i++){if(this.showInvisibles){tabStr.push("<span class='ace_invisible'>"+this.TAB_CHAR+lang.stringRepeat(" ",i-1)+"</span>")}else{tabStr.push(lang.stringRepeat(" ",i))}}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var className="ace_indent-guide";if(this.showInvisibles){className+=" ace_invisible";var spaceContent=lang.stringRepeat(this.SPACE_CHAR,this.tabSize);var tabContent=this.TAB_CHAR+lang.stringRepeat(" ",this.tabSize-1)}else{var spaceContent=lang.stringRepeat(" ",this.tabSize);var tabContent=spaceContent}this.$tabStrings[" "]="<span class='"+className+"'>"+spaceContent+"</span>";this.$tabStrings["	"]="<span class='"+className+"'>"+tabContent+"</span>"}};this.updateLines=function(config,firstRow,lastRow){if(this.config.lastRow!=config.lastRow||this.config.firstRow!=config.firstRow){this.scrollLines(config)}this.config=config;var first=Math.max(firstRow,config.firstRow);var last=Math.min(lastRow,config.lastRow);
var lineElements=this.element.childNodes;var lineElementsIdx=0;for(var row=config.firstRow;row<first;row++){var foldLine=this.session.getFoldLine(row);if(foldLine){if(foldLine.containsRow(first)){first=foldLine.start.row;break}else{row=foldLine.end.row}}lineElementsIdx++}var row=first;var foldLine=this.session.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(true){if(row>foldStart){row=foldLine.end.row+1;foldLine=this.session.getNextFoldLine(row,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}if(row>last)break;var lineElement=lineElements[lineElementsIdx++];if(lineElement){var html=[];this.$renderLine(html,row,!this.$useLineGroups(),row==foldStart?foldLine:false);dom.setInnerHtml(lineElement,html.join(""))}row++}};this.scrollLines=function(config){var oldConfig=this.config;this.config=config;if(!oldConfig||oldConfig.lastRow<config.firstRow)return this.update(config);if(config.lastRow<oldConfig.firstRow)return this.update(config);var el=this.element;if(oldConfig.firstRow<config.firstRow)for(var row=this.session.getFoldedRowCount(oldConfig.firstRow,config.firstRow-1);row>0;row--)el.removeChild(el.firstChild);if(oldConfig.lastRow>config.lastRow)for(var row=this.session.getFoldedRowCount(config.lastRow+1,oldConfig.lastRow);row>0;row--)el.removeChild(el.lastChild);if(config.firstRow<oldConfig.firstRow){var fragment=this.$renderLinesFragment(config,config.firstRow,oldConfig.firstRow-1);if(el.firstChild)el.insertBefore(fragment,el.firstChild);else el.appendChild(fragment)}if(config.lastRow>oldConfig.lastRow){var fragment=this.$renderLinesFragment(config,oldConfig.lastRow+1,config.lastRow);el.appendChild(fragment)}};this.$renderLinesFragment=function(config,firstRow,lastRow){var fragment=this.element.ownerDocument.createDocumentFragment();var row=firstRow;var foldLine=this.session.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(true){if(row>foldStart){row=foldLine.end.row+1;foldLine=this.session.getNextFoldLine(row,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}if(row>lastRow)break;var container=dom.createElement("div");var html=[];this.$renderLine(html,row,false,row==foldStart?foldLine:false);container.innerHTML=html.join("");if(this.$useLineGroups()){container.className="ace_line_group";fragment.appendChild(container)}else{var lines=container.childNodes;while(lines.length)fragment.appendChild(lines[0])}row++}return fragment};this.update=function(config){this.config=config;var html=[];var firstRow=config.firstRow,lastRow=config.lastRow;var row=firstRow;var foldLine=this.session.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(true){if(row>foldStart){row=foldLine.end.row+1;foldLine=this.session.getNextFoldLine(row,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}if(row>lastRow)break;if(this.$useLineGroups())html.push("<div class='ace_line_group'>");this.$renderLine(html,row,false,row==foldStart?foldLine:false);if(this.$useLineGroups())html.push("</div>");row++}this.element=dom.setInnerHtml(this.element,html.join(""))};this.$textToken={text:true,rparen:true,lparen:true};this.$renderToken=function(stringBuilder,screenColumn,token,value){var self=this;var replaceReg=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g;var replaceFunc=function(c,a,b,tabIdx,idx4){if(a){return self.showInvisibles?"<span class='ace_invisible'>"+lang.stringRepeat(self.SPACE_CHAR,c.length)+"</span>":lang.stringRepeat(" ",c.length)}else if(c=="&"){return"&#38;"}else if(c=="<"){return"&#60;"}else if(c=="	"){var tabSize=self.session.getScreenTabSize(screenColumn+tabIdx);screenColumn+=tabSize-1;return self.$tabStrings[tabSize]}else if(c=="　"){var classToUse=self.showInvisibles?"ace_cjk ace_invisible":"ace_cjk";var space=self.showInvisibles?self.SPACE_CHAR:"";screenColumn+=1;return"<span class='"+classToUse+"' style='width:"+self.config.characterWidth*2+"px'>"+space+"</span>"}else if(b){return"<span class='ace_invisible ace_invalid'>"+self.SPACE_CHAR+"</span>"}else{screenColumn+=1;return"<span class='ace_cjk' style='width:"+self.config.characterWidth*2+"px'>"+c+"</span>"}};var output=value.replace(replaceReg,replaceFunc);if(!this.$textToken[token.type]){var classes="ace_"+token.type.replace(/\./g," ace_");var style="";if(token.type=="fold")style=" style='width:"+token.value.length*this.config.characterWidth+"px;' ";stringBuilder.push("<span class='",classes,"'",style,">",output,"</span>")}else{stringBuilder.push(output)}return screenColumn+value.length};this.renderIndentGuide=function(stringBuilder,value){var cols=value.search(this.$indentGuideRe);if(cols<=0)return value;if(value[0]==" "){cols-=cols%this.tabSize;stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "],cols/this.tabSize));return value.substr(cols)}else if(value[0]=="	"){stringBuilder.push(lang.stringRepeat(this.$tabStrings["	"],cols));return value.substr(cols)}return value};this.$renderWrappedLine=function(stringBuilder,tokens,splits,onlyContents){var chars=0;var split=0;var splitChars=splits[0];var screenColumn=0;for(var i=0;i<tokens.length;i++){var token=tokens[i];var value=token.value;if(i==0&&this.displayIndentGuides){chars=value.length;value=this.renderIndentGuide(stringBuilder,value);if(!value)continue;chars-=value.length}if(chars+value.length<splitChars){screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value);chars+=value.length}else{while(chars+value.length>=splitChars){screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value.substring(0,splitChars-chars));value=value.substring(splitChars-chars);chars=splitChars;if(!onlyContents){stringBuilder.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>")}split++;screenColumn=0;splitChars=splits[split]||Number.MAX_VALUE}if(value.length!=0){chars+=value.length;screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value)}}}};this.$renderSimpleLine=function(stringBuilder,tokens){var screenColumn=0;var token=tokens[0];var value=token.value;if(this.displayIndentGuides)value=this.renderIndentGuide(stringBuilder,value);if(value)screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value);for(var i=1;i<tokens.length;i++){token=tokens[i];value=token.value;screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value)}};this.$renderLine=function(stringBuilder,row,onlyContents,foldLine){if(!foldLine&&foldLine!=false)foldLine=this.session.getFoldLine(row);if(foldLine)var tokens=this.$getFoldLineTokens(row,foldLine);else var tokens=this.session.getTokens(row);if(!onlyContents){stringBuilder.push("<div class='ace_line' style='height:",this.config.lineHeight,"px'>")}if(tokens.length){var splits=this.session.getRowSplitData(row);if(splits&&splits.length)this.$renderWrappedLine(stringBuilder,tokens,splits,onlyContents);else this.$renderSimpleLine(stringBuilder,tokens)}if(this.showInvisibles){if(foldLine)row=foldLine.end.row;stringBuilder.push("<span class='ace_invisible'>",row==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")}if(!onlyContents)stringBuilder.push("</div>")};this.$getFoldLineTokens=function(row,foldLine){var session=this.session;var renderTokens=[];function addTokens(tokens,from,to){var idx=0,col=0;while(col+tokens[idx].value.length<from){col+=tokens[idx].value.length;idx++;if(idx==tokens.length)return}if(col!=from){var value=tokens[idx].value.substring(from-col);if(value.length>to-from)value=value.substring(0,to-from);renderTokens.push({type:tokens[idx].type,value:value});col=from+value.length;idx+=1}while(col<to&&idx<tokens.length){var value=tokens[idx].value;if(value.length+col>to){renderTokens.push({type:tokens[idx].type,value:value.substring(0,to-col)})}else renderTokens.push(tokens[idx]);col+=value.length;idx+=1}}var tokens=session.getTokens(row);foldLine.walk(function(placeholder,row,column,lastColumn,isNewRow){if(placeholder!=null){renderTokens.push({type:"fold",value:placeholder})}else{if(isNewRow)tokens=session.getTokens(row);if(tokens.length)addTokens(tokens,lastColumn,column)}},foldLine.end.row,this.session.getLine(foldLine.end.row).length);return renderTokens};this.$useLineGroups=function(){return this.session.getUseWrapMode()};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);if(this.$measureNode)this.$measureNode.parentNode.removeChild(this.$measureNode);delete this.$measureNode}}.call(Text.prototype);exports.Text=Text});define("ace/layer/cursor",["require","exports","module","../lib/dom"],function(require,exports,module){var dom=require("../lib/dom");var Cursor=function(parentEl){this.element=dom.createElement("div");this.element.className="ace_layer ace_cursor-layer";parentEl.appendChild(this.element);this.isVisible=false;this.isBlinking=true;this.blinkInterval=1e3;this.smoothBlinking=false;this.cursors=[];this.cursor=this.addCursor();dom.addCssClass(this.element,"ace_hidden-cursors")};!function(){this.$padding=0;this.setPadding=function(padding){this.$padding=padding};this.setSession=function(session){this.session=session};this.setBlinking=function(blinking){if(blinking!=this.isBlinking){this.isBlinking=blinking;this.restartTimer()}};this.setBlinkInterval=function(blinkInterval){if(blinkInterval!=this.blinkInterval){this.blinkInterval=blinkInterval;this.restartTimer()}};this.setSmoothBlinking=function(smoothBlinking){if(smoothBlinking!=this.smoothBlinking){this.smoothBlinking=smoothBlinking;if(smoothBlinking)dom.addCssClass(this.element,"ace_smooth-blinking");else dom.removeCssClass(this.element,"ace_smooth-blinking");this.restartTimer()}};this.addCursor=function(){var el=dom.createElement("div");el.className="ace_cursor";this.element.appendChild(el);this.cursors.push(el);return el};this.removeCursor=function(){if(this.cursors.length>1){var el=this.cursors.pop();el.parentNode.removeChild(el);return el}};this.hideCursor=function(){this.isVisible=false;dom.addCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.showCursor=function(){this.isVisible=true;dom.removeCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.restartTimer=function(){clearInterval(this.intervalId);clearTimeout(this.timeoutId);if(this.smoothBlinking)dom.removeCssClass(this.element,"ace_smooth-blinking");for(var i=this.cursors.length;i--;)this.cursors[i].style.opacity="";if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;if(this.smoothBlinking)setTimeout(function(){dom.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var blink=function(){this.timeoutId=setTimeout(function(){for(var i=this.cursors.length;i--;){this.cursors[i].style.opacity=0}}.bind(this),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){for(var i=this.cursors.length;i--;){this.cursors[i].style.opacity=""}blink()}.bind(this),this.blinkInterval);blink()};this.getPixelPosition=function(position,onScreen){if(!this.config||!this.session)return{left:0,top:0};if(!position)position=this.session.selection.getCursor();var pos=this.session.documentToScreenPosition(position);var cursorLeft=this.$padding+pos.column*this.config.characterWidth;var cursorTop=(pos.row-(onScreen?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:cursorLeft,top:cursorTop}};this.update=function(config){this.config=config;var selections=this.session.$selectionMarkers;var i=0,cursorIndex=0;if(selections===undefined||selections.length===0){selections=[{cursor:null}]}for(var i=0,n=selections.length;i<n;i++){var pixelPos=this.getPixelPosition(selections[i].cursor,true);if((pixelPos.top>config.height+config.offset||pixelPos.top<-config.offset)&&i>1){continue}var style=(this.cursors[cursorIndex++]||this.addCursor()).style;style.left=pixelPos.left+"px";style.top=pixelPos.top+"px";style.width=config.characterWidth+"px";style.height=config.lineHeight+"px"}while(this.cursors.length>cursorIndex)this.removeCursor();var overwrite=this.session.getOverwrite();this.$setOverwrite(overwrite);this.$pixelPos=pixelPos;this.restartTimer()};this.$setOverwrite=function(overwrite){if(overwrite!=this.overwrite){this.overwrite=overwrite;if(overwrite)dom.addCssClass(this.element,"ace_overwrite-cursors");else dom.removeCssClass(this.element,"ace_overwrite-cursors")}};this.destroy=function(){clearInterval(this.intervalId);clearTimeout(this.timeoutId)}}.call(Cursor.prototype);exports.Cursor=Cursor});define("ace/scrollbar",["require","exports","module","./lib/oop","./lib/dom","./lib/event","./lib/event_emitter"],function(require,exports,module){var oop=require("./lib/oop");var dom=require("./lib/dom");var event=require("./lib/event");var EventEmitter=require("./lib/event_emitter").EventEmitter;var ScrollBar=function(parent){this.element=dom.createElement("div");this.element.className="ace_scrollbar";this.inner=dom.createElement("div");this.inner.className="ace_scrollbar-inner";this.element.appendChild(this.inner);parent.appendChild(this.element);this.width=dom.scrollbarWidth(parent.ownerDocument);this.element.style.width=(this.width||15)+5+"px";event.addListener(this.element,"scroll",this.onScroll.bind(this))};!function(){oop.implement(this,EventEmitter);this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;this._emit("scroll",{data:this.scrollTop})}this.skipEvent=false};this.getWidth=function(){return this.width};this.setHeight=function(height){this.element.style.height=height+"px"};this.setInnerHeight=function(height){this.inner.style.height=height+"px"};this.setScrollTop=function(scrollTop){if(this.scrollTop!=scrollTop){this.skipEvent=true;this.scrollTop=this.element.scrollTop=scrollTop}}}.call(ScrollBar.prototype);exports.ScrollBar=ScrollBar});define("ace/renderloop",["require","exports","module","./lib/event"],function(require,exports,module){var event=require("./lib/event");var RenderLoop=function(onRender,win){this.onRender=onRender;this.pending=false;this.changes=0;this.window=win||window};!function(){this.schedule=function(change){this.changes=this.changes|change;if(!this.pending){this.pending=true;var _self=this;event.nextFrame(function(){_self.pending=false;var changes;while(changes=_self.changes){_self.changes=0;_self.onRender(changes)}},this.window)}}}.call(RenderLoop.prototype);exports.RenderLoop=RenderLoop});define("ace/lib/net",["require","exports","module","./dom"],function(require,exports,module){var dom=require("./dom");exports.get=function(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.onreadystatechange=function(){if(xhr.readyState===4){callback(xhr.responseText)}};xhr.send(null)};exports.loadScript=function(path,callback){var head=dom.getDocumentHead();var s=document.createElement("script");s.src=path;head.appendChild(s);s.onload=s.onreadystatechange=function(_,isAbort){if(isAbort||!s.readyState||s.readyState=="loaded"||s.readyState=="complete"){s=s.onload=s.onreadystatechange=null;if(!isAbort)callback()}}}});!function(){var globalRequire=typeof require!="undefined"&&require;define("ace/requirejs/text",["require","exports","module","../lib/net"],function(require,exports,module){exports.load=function(name,req,onLoad,config){if(globalRequire&&globalRequire.nodeRequire)onLoad(globalRequire.nodeRequire("fs").readFileSync(req.toUrl(name),"utf8"));else require("../lib/net").get(req.toUrl(name),onLoad)}})}();define("ace/mouse/multi_select_handler",["require","exports","module","../lib/event"],function(require,exports,module){var event=require("../lib/event");function isSamePoint(p1,p2){return p1.row==p2.row&&p1.column==p2.column}function onMouseDown(e){var ev=e.domEvent;var alt=ev.altKey;var shift=ev.shiftKey;var ctrl=e.getAccelKey();var button=e.getButton();if(e.editor.inMultiSelectMode&&button==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!ctrl&&!alt){if(button==0&&e.editor.inMultiSelectMode)e.editor.exitMultiSelectMode();return}var editor=e.editor;var selection=editor.selection;var isMultiSelect=editor.inMultiSelectMode;var pos=e.getDocumentPosition();var cursor=selection.getCursor();var inSelection=e.inSelection()||selection.isEmpty()&&isSamePoint(pos,cursor);var mouseX=e.x,mouseY=e.y;var onMouseSelection=function(e){mouseX=e.clientX;mouseY=e.clientY};var blockSelect=function(){var newCursor=editor.renderer.pixelToScreenCoordinates(mouseX,mouseY);var cursor=session.screenToDocumentPosition(newCursor.row,newCursor.column);if(isSamePoint(screenCursor,newCursor)&&isSamePoint(cursor,selection.selectionLead))return;screenCursor=newCursor;editor.selection.moveCursorToPosition(cursor);editor.selection.clearSelection();editor.renderer.scrollCursorIntoView();editor.removeSelectionMarkers(rectSel);rectSel=selection.rectangularRangeBlock(screenCursor,screenAnchor);rectSel.forEach(editor.addSelectionMarker,editor);editor.updateSelectionMarkers()};var session=editor.session;var screenAnchor=editor.renderer.pixelToScreenCoordinates(mouseX,mouseY);var screenCursor=screenAnchor;if(ctrl&&!shift&&!alt&&button==0){if(!isMultiSelect&&inSelection)return;if(!isMultiSelect){var range=selection.toOrientedRange();editor.addSelectionMarker(range)}var oldRange=selection.rangeList.rangeAtPoint(pos);editor.once("mouseup",function(){var tmpSel=selection.toOrientedRange();if(oldRange&&tmpSel.isEmpty()&&isSamePoint(oldRange.cursor,tmpSel.cursor))selection.substractPoint(tmpSel.cursor);else{if(range){editor.removeSelectionMarker(range);selection.addRange(range)}selection.addRange(tmpSel)}})}else if(alt&&button==0){e.stop();if(isMultiSelect&&!ctrl)selection.toSingleRange();else if(!isMultiSelect&&ctrl)selection.addRange();var rectSel=[];if(shift){screenAnchor=session.documentToScreenPosition(selection.lead);blockSelect()}else{selection.moveCursorToPosition(pos);selection.clearSelection()}var onMouseSelectionEnd=function(e){clearInterval(timerId);editor.removeSelectionMarkers(rectSel);for(var i=0;i<rectSel.length;i++)selection.addRange(rectSel[i])};var onSelectionInterval=blockSelect;event.capture(editor.container,onMouseSelection,onMouseSelectionEnd);var timerId=setInterval(function(){onSelectionInterval()},20);return e.preventDefault()}}exports.onMouseDown=onMouseDown});define("ace/keyboard/hash_handler",["require","exports","module","../lib/keys","../lib/useragent"],function(require,exports,module){var keyUtil=require("../lib/keys");var useragent=require("../lib/useragent");function HashHandler(config,platform){this.platform=platform||(useragent.isMac?"mac":"win");this.commands={};this.commmandKeyBinding={};this.addCommands(config)}!function(){this.addCommand=function(command){if(this.commands[command.name])this.removeCommand(command);this.commands[command.name]=command;if(command.bindKey)this._buildKeyHash(command)};this.removeCommand=function(command){var name=typeof command==="string"?command:command.name;command=this.commands[name];delete this.commands[name];var ckb=this.commmandKeyBinding;for(var hashId in ckb){for(var key in ckb[hashId]){if(ckb[hashId][key]==command)delete ckb[hashId][key]}}};this.bindKey=function(key,command){if(!key)return;if(typeof command=="function"){this.addCommand({exec:command,bindKey:key,name:command.name||key});return}var ckb=this.commmandKeyBinding;key.split("|").forEach(function(keyPart){var binding=this.parseKeys(keyPart,command);var hashId=binding.hashId;(ckb[hashId]||(ckb[hashId]={}))[binding.key]=command},this)};this.addCommands=function(commands){commands&&Object.keys(commands).forEach(function(name){var command=commands[name];if(typeof command==="string")return this.bindKey(command,name);if(typeof command==="function")command={exec:command};if(!command.name)command.name=name;this.addCommand(command)},this)};this.removeCommands=function(commands){Object.keys(commands).forEach(function(name){this.removeCommand(commands[name])},this)};this.bindKeys=function(keyList){Object.keys(keyList).forEach(function(key){this.bindKey(key,keyList[key])},this)};this._buildKeyHash=function(command){var binding=command.bindKey;if(!binding)return;var key=typeof binding=="string"?binding:binding[this.platform];this.bindKey(key,command)};this.parseKeys=function(keys){if(keys.indexOf(" ")!=-1)keys=keys.split(/\s+/).pop();var parts=keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x});var key=parts.pop();var keyCode=keyUtil[key];if(keyUtil.FUNCTION_KEYS[keyCode])key=keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();else if(!parts.length)return{key:key,hashId:-1};else if(parts.length==1&&parts[0]=="shift")return{key:key.toUpperCase(),hashId:-1};var hashId=0;for(var i=parts.length;i--;){var modifier=keyUtil.KEY_MODS[parts[i]];if(modifier==null){if(typeof console!="undefined")console.error("invalid modifier "+parts[i]+" in "+keys);return false}hashId|=modifier}return{key:key,hashId:hashId}};this.findKeyCommand=function findKeyCommand(hashId,keyString){var ckbr=this.commmandKeyBinding;return ckbr[hashId]&&ckbr[hashId][keyString]};this.handleKeyboard=function(data,hashId,keyString,keyCode){return{command:this.findKeyCommand(hashId,keyString)}}}.call(HashHandler.prototype);exports.HashHandler=HashHandler});define("ace/commands/command_manager",["require","exports","module","../lib/oop","../keyboard/hash_handler","../lib/event_emitter"],function(require,exports,module){var oop=require("../lib/oop");var HashHandler=require("../keyboard/hash_handler").HashHandler;var EventEmitter=require("../lib/event_emitter").EventEmitter;var CommandManager=function(platform,commands){this.platform=platform;this.commands=this.byName={};this.commmandKeyBinding={};this.addCommands(commands);this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};oop.inherits(CommandManager,HashHandler);!function(){oop.implement(this,EventEmitter);this.exec=function(command,editor,args){if(typeof command==="string")command=this.commands[command];if(!command)return false;if(editor&&editor.$readOnly&&!command.readOnly)return false;var e={editor:editor,command:command,args:args};var retvalue=this._emit("exec",e);this._signal("afterExec",e);return retvalue===false?false:true};this.toggleRecording=function(editor){if(this.$inReplay)return;editor&&editor._emit("changeStatus");if(this.recording){this.macro.pop();this.removeEventListener("exec",this.$addCommandToMacro);if(!this.macro.length)this.macro=this.oldMacro;return this.recording=false}if(!this.$addCommandToMacro){this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)}this.oldMacro=this.macro;this.macro=[];this.on("exec",this.$addCommandToMacro);return this.recording=true};this.replay=function(editor){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(editor);try{this.$inReplay=true;this.macro.forEach(function(x){if(typeof x=="string")this.exec(x,editor);else this.exec(x[0],editor,x[1])},this)}finally{this.$inReplay=false}};this.trimMacro=function(m){return m.map(function(x){if(typeof x[0]!="string")x[0]=x[0].name;if(!x[1])x=x[0];return x})}}.call(CommandManager.prototype);exports.CommandManager=CommandManager});define("ace/commands/multi_select_commands",["require","exports","module","../keyboard/hash_handler"],function(require,exports,module){exports.defaultCommands=[{name:"addCursorAbove",exec:function(editor){editor.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:true},{name:"addCursorBelow",exec:function(editor){editor.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:true},{name:"addCursorAboveSkipCurrent",exec:function(editor){editor.selectMoreLines(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:true},{name:"addCursorBelowSkipCurrent",exec:function(editor){editor.selectMoreLines(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:true},{name:"selectMoreBefore",exec:function(editor){editor.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:true},{name:"selectMoreAfter",exec:function(editor){editor.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:true},{name:"selectNextBefore",exec:function(editor){editor.selectMore(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:true},{name:"selectNextAfter",exec:function(editor){editor.selectMore(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:true},{name:"splitIntoLines",exec:function(editor){editor.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:true},{name:"alignCursors",exec:function(editor){editor.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}];exports.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(editor){editor.exitMultiSelectMode()},readonly:true,isAvailable:function(editor){return editor&&editor.inMultiSelectMode}}];var HashHandler=require("../keyboard/hash_handler").HashHandler;exports.keyboardHandler=new HashHandler(exports.multiSelectCommands)});define("ace/placeholder",["require","exports","module","./range","./lib/event_emitter","./lib/oop"],function(require,exports,module){var Range=require("./range").Range;var EventEmitter=require("./lib/event_emitter").EventEmitter;var oop=require("./lib/oop");var PlaceHolder=function(session,length,pos,others,mainClass,othersClass){var _self=this;this.length=length;this.session=session;this.doc=session.getDocument();this.mainClass=mainClass;this.othersClass=othersClass;this.$onUpdate=this.onUpdate.bind(this);this.doc.on("change",this.$onUpdate);this.$others=others;this.$onCursorChange=function(){setTimeout(function(){_self.onCursorChange()})};this.$pos=pos;var undoStack=session.getUndoManager().$undoStack||session.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=undoStack.length;this.setup();session.selection.on("changeCursor",this.$onCursorChange)};!function(){oop.implement(this,EventEmitter);this.setup=function(){var _self=this;var doc=this.doc;var session=this.session;var pos=this.$pos;this.pos=doc.createAnchor(pos.row,pos.column);this.markerId=session.addMarker(new Range(pos.row,pos.column,pos.row,pos.column+this.length),this.mainClass,null,false);this.pos.on("change",function(event){session.removeMarker(_self.markerId);_self.markerId=session.addMarker(new Range(event.value.row,event.value.column,event.value.row,event.value.column+_self.length),_self.mainClass,null,false)});this.others=[];this.$others.forEach(function(other){var anchor=doc.createAnchor(other.row,other.column);_self.others.push(anchor)});session.setUndoSelect(false)};this.showOtherMarkers=function(){if(this.othersActive)return;var session=this.session;var _self=this;this.othersActive=true;this.others.forEach(function(anchor){anchor.markerId=session.addMarker(new Range(anchor.row,anchor.column,anchor.row,anchor.column+_self.length),_self.othersClass,null,false);anchor.on("change",function(event){session.removeMarker(anchor.markerId);anchor.markerId=session.addMarker(new Range(event.value.row,event.value.column,event.value.row,event.value.column+_self.length),_self.othersClass,null,false)})})};this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=false;for(var i=0;i<this.others.length;i++){this.session.removeMarker(this.others[i].markerId)}};this.onUpdate=function(event){var delta=event.data;var range=delta.range;if(range.start.row!==range.end.row)return;if(range.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=true;var lengthDiff=delta.action==="insertText"?range.end.column-range.start.column:range.start.column-range.end.column;if(range.start.column>=this.pos.column&&range.start.column<=this.pos.column+this.length+1){var distanceFromStart=range.start.column-this.pos.column;this.length+=lengthDiff;if(!this.session.$fromUndo){if(delta.action==="insertText"){for(var i=this.others.length-1;i>=0;i--){var otherPos=this.others[i];var newPos={row:otherPos.row,column:otherPos.column+distanceFromStart};if(otherPos.row===range.start.row&&range.start.column<otherPos.column)newPos.column+=lengthDiff;this.doc.insert(newPos,delta.text)}}else if(delta.action==="removeText"){for(var i=this.others.length-1;i>=0;i--){var otherPos=this.others[i];var newPos={row:otherPos.row,column:otherPos.column+distanceFromStart};if(otherPos.row===range.start.row&&range.start.column<otherPos.column)newPos.column+=lengthDiff;this.doc.remove(new Range(newPos.row,newPos.column,newPos.row,newPos.column-lengthDiff))}}if(range.start.column===this.pos.column&&delta.action==="insertText"){setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-lengthDiff);for(var i=0;i<this.others.length;i++){var other=this.others[i];var newPos={row:other.row,column:other.column-lengthDiff};if(other.row===range.start.row&&range.start.column<other.column)newPos.column+=lengthDiff;other.setPosition(newPos.row,newPos.column)}}.bind(this),0)}else if(range.start.column===this.pos.column&&delta.action==="removeText"){setTimeout(function(){for(var i=0;i<this.others.length;i++){var other=this.others[i];if(other.row===range.start.row&&range.start.column<other.column){other.setPosition(other.row,other.column-lengthDiff)}}}.bind(this),0)}}this.pos._emit("change",{value:this.pos});for(var i=0;i<this.others.length;i++){this.others[i]._emit("change",{value:this.others[i]})}}this.$updating=false};this.onCursorChange=function(event){if(this.$updating)return;var pos=this.session.selection.getCursor();if(pos.row===this.pos.row&&pos.column>=this.pos.column&&pos.column<=this.pos.column+this.length){this.showOtherMarkers();this._emit("cursorEnter",event)}else{this.hideOtherMarkers();this._emit("cursorLeave",event)}};this.detach=function(){this.session.removeMarker(this.markerId);this.hideOtherMarkers();this.doc.removeEventListener("change",this.$onUpdate);this.session.selection.removeEventListener("changeCursor",this.$onCursorChange);this.pos.detach();for(var i=0;i<this.others.length;i++){this.others[i].detach()}this.session.setUndoSelect(true)};this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var undoManager=this.session.getUndoManager();var undosRequired=(undoManager.$undoStack||undoManager.$undostack).length-this.$undoStackDepth;for(var i=0;i<undosRequired;i++){undoManager.undo(true)}}}.call(PlaceHolder.prototype);exports.PlaceHolder=PlaceHolder});define("ace/mode/folding/fold_mode",["require","exports","module","../../range"],function(require,exports,module){var Range=require("../../range").Range;var FoldMode=exports.FoldMode=function(){};!function(){this.foldingStartMarker=null;this.foldingStopMarker=null;this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row);if(this.foldingStartMarker.test(line))return"start";if(foldStyle=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(line))return"end";return""};this.getFoldWidgetRange=function(session,foldStyle,row){return null};this.indentationBlock=function(session,row,column){var re=/\S/;var line=session.getLine(row);var startLevel=line.search(re);if(startLevel==-1)return;var startColumn=column||line.length;var maxRow=session.getLength();var startRow=row;var endRow=row;while(++row<maxRow){var level=session.getLine(row).search(re);if(level==-1)continue;if(level<=startLevel)break;endRow=row}if(endRow>startRow){var endColumn=session.getLine(endRow).length;return new Range(startRow,startColumn,endRow,endColumn)}};this.openingBracketBlock=function(session,bracket,row,column,typeRe){var start={row:row,column:column+1};var end=session.$findClosingBracket(bracket,start,typeRe);if(!end)return;var fw=session.foldWidgets[end.row];
if(fw==null)fw=this.getFoldWidget(session,end.row);if(fw=="start"&&end.row>start.row){end.row--;end.column=session.getLine(end.row).length}return Range.fromPoints(start,end)};this.closingBracketBlock=function(session,bracket,row,column,typeRe){var end={row:row,column:column};var start=session.$findOpeningBracket(bracket,end);if(!start)return;start.column++;end.column--;return Range.fromPoints(start,end)}}.call(FoldMode.prototype)});define("ace/theme/textmate",["require","exports","module","../requirejs/text!./textmate.css","../lib/dom"],function(require,exports,module){exports.isDark=false;exports.cssClass="ace-tm";exports.cssText=require("../requirejs/text!./textmate.css");var dom=require("../lib/dom");dom.importCssString(exports.cssText,exports.cssClass)});define("ace/config",["require","exports","module","./lib/lang","./lib/oop","./lib/net","./lib/event_emitter"],function(require,exports,module){"no use strict";var lang=require("./lib/lang");var oop=require("./lib/oop");var net=require("./lib/net");var EventEmitter=require("./lib/event_emitter").EventEmitter;var global=function(){return this}();var options={packaged:false,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};exports.get=function(key){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key);return options[key]};exports.set=function(key,value){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key);options[key]=value};exports.all=function(){return lang.copyObject(options)};oop.implement(exports,EventEmitter);exports.moduleUrl=function(name,component){if(options.$moduleUrls[name])return options.$moduleUrls[name];var parts=name.split("/");component=component||parts[parts.length-2]||"";var base=parts[parts.length-1].replace(component,"").replace(/(^[\-_])|([\-_]$)/,"");if(!base&&parts.length>1)base=parts[parts.length-2];var path=options[component+"Path"];if(path==null)path=options.basePath;if(path&&path.slice(-1)!="/")path+="/";return path+component+"-"+base+this.get("suffix")};exports.setModuleUrl=function(name,subst){return options.$moduleUrls[name]=subst};exports.$loading={};exports.loadModule=function(moduleName,onLoad){var module,moduleType;if(Array.isArray(moduleName)){moduleType=moduleName[0];moduleName=moduleName[1]}try{module=require(moduleName)}catch(e){}if(module&&!exports.$loading[moduleName])return onLoad&&onLoad(module);if(!exports.$loading[moduleName])exports.$loading[moduleName]=[];exports.$loading[moduleName].push(onLoad);if(exports.$loading[moduleName].length>1)return;var afterLoad=function(){require([moduleName],function(module){exports._emit("load.module",{name:moduleName,module:module});var listeners=exports.$loading[moduleName];exports.$loading[moduleName]=null;listeners.forEach(function(onLoad){onLoad&&onLoad(module)})})};if(!exports.get("packaged"))return afterLoad();net.loadScript(exports.moduleUrl(moduleName,moduleType),afterLoad)};exports.init=function(){options.packaged=require.packaged||module.packaged||global.define&&define.packaged;if(!global.document)return"";var scriptOptions={};var scriptUrl="";var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=scripts[i];var src=script.src||script.getAttribute("src");if(!src)continue;var attributes=script.attributes;for(var j=0,l=attributes.length;j<l;j++){var attr=attributes[j];if(attr.name.indexOf("data-ace-")===0){scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/,""))]=attr.value}}var m=src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);if(m)scriptUrl=m[1]}if(scriptUrl){scriptOptions.base=scriptOptions.base||scriptUrl;scriptOptions.packaged=true}scriptOptions.basePath=scriptOptions.base;scriptOptions.workerPath=scriptOptions.workerPath||scriptOptions.base;scriptOptions.modePath=scriptOptions.modePath||scriptOptions.base;scriptOptions.themePath=scriptOptions.themePath||scriptOptions.base;delete scriptOptions.base;for(var key in scriptOptions)if(typeof scriptOptions[key]!=="undefined")exports.set(key,scriptOptions[key])};function deHyphenate(str){return str.replace(/-(.)/g,function(m,m1){return m1.toUpperCase()})}var optionsProvider={setOptions:function(optList){Object.keys(optList).forEach(function(key){this.setOption(key,optList[key])},this)},getOptions:function(a){var b={};Object.keys(a).forEach(function(key){b[key]=this.getOption(key)},this);return b},setOption:function(name,value){if(this["$"+name]===value)return;var opt=this.$options[name];if(!opt)return undefined;if(opt.forwardTo)return this[opt.forwardTo]&&this[opt.forwardTo].setOption(name,value);if(!opt.handlesSet)this["$"+name]=value;if(opt&&opt.set)opt.set.call(this,value)},getOption:function(name){var opt=this.$options[name];if(!opt)return undefined;if(opt.forwardTo)return this[opt.forwardTo]&&this[opt.forwardTo].getOption(name);return opt&&opt.get?opt.get.call(this):this["$"+name]}};var defaultOptions={};exports.defineOptions=function(obj,path,options){if(!obj.$options)defaultOptions[path]=obj.$options={};Object.keys(options).forEach(function(key){var opt=options[key];if(typeof opt=="string")opt={forwardTo:opt};opt.name||(opt.name=key);obj.$options[opt.name]=opt;if("initialValue"in opt)obj["$"+opt.name]=opt.initialValue});oop.implement(obj,optionsProvider);return this};exports.resetOptions=function(obj){Object.keys(obj.$options).forEach(function(key){var opt=obj.$options[key];if("value"in opt)obj.setOption(key,opt.value)})};exports.setDefaultValue=function(path,name,value){var opts=defaultOptions[path]||(defaultOptions[path]={});if(opts[name]){if(opts.forwardTo)exports.setDefaultValue(opts.forwardTo,name,value);else opts[name].value=value}};exports.setDefaultValues=function(path,optionHash){Object.keys(optionHash).forEach(function(key){exports.setDefaultValue(path,key,optionHash[key])})}});define("ace/mouse/mouse_handler",["require","exports","module","../lib/event","../lib/useragent","./default_handlers","./default_gutter_handler","./mouse_event","./dragdrop","../config"],function(require,exports,module){var event=require("../lib/event");var useragent=require("../lib/useragent");var DefaultHandlers=require("./default_handlers").DefaultHandlers;var DefaultGutterHandler=require("./default_gutter_handler").GutterHandler;var MouseEvent=require("./mouse_event").MouseEvent;var DragdropHandler=require("./dragdrop").DragdropHandler;var config=require("../config");var MouseHandler=function(editor){this.editor=editor;new DefaultHandlers(this);new DefaultGutterHandler(this);new DragdropHandler(this);event.addListener(editor.container,"mousedown",function(e){editor.focus();return event.preventDefault(e)});var mouseTarget=editor.renderer.getMouseEventTarget();event.addListener(mouseTarget,"click",this.onMouseEvent.bind(this,"click"));event.addListener(mouseTarget,"mousemove",this.onMouseMove.bind(this,"mousemove"));event.addMultiMouseDownListener(mouseTarget,[300,300,250],this,"onMouseEvent");event.addMouseWheelListener(editor.container,this.onMouseWheel.bind(this,"mousewheel"));var gutterEl=editor.renderer.$gutter;event.addListener(gutterEl,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"));event.addListener(gutterEl,"click",this.onMouseEvent.bind(this,"gutterclick"));event.addListener(gutterEl,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"));event.addListener(gutterEl,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"))};!function(){this.onMouseEvent=function(name,e){this.editor._emit(name,new MouseEvent(e,this.editor))};this.onMouseMove=function(name,e){var listeners=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!listeners||!listeners.length)return;this.editor._emit(name,new MouseEvent(e,this.editor))};this.onMouseWheel=function(name,e){var mouseEvent=new MouseEvent(e,this.editor);mouseEvent.speed=this.$scrollSpeed*2;mouseEvent.wheelX=e.wheelX;mouseEvent.wheelY=e.wheelY;this.editor._emit(name,mouseEvent)};this.setState=function(state){this.state=state};this.captureMouse=function(ev,state){if(state)this.setState(state);this.x=ev.x;this.y=ev.y;this.isMousePressed=true;var renderer=this.editor.renderer;if(renderer.$keepTextAreaAtCursor)renderer.$keepTextAreaAtCursor=null;var self=this;var onMouseMove=function(e){self.x=e.clientX;self.y=e.clientY};var onCaptureEnd=function(e){clearInterval(timerId);onCaptureInterval();self[self.state+"End"]&&self[self.state+"End"](e);self.$clickSelection=null;if(renderer.$keepTextAreaAtCursor==null){renderer.$keepTextAreaAtCursor=true;renderer.$moveTextAreaToCursor()}self.isMousePressed=false;self.onMouseEvent("mouseup",e)};var onCaptureInterval=function(){self[self.state]&&self[self.state]()};if(useragent.isOldIE&&ev.domEvent.type=="dblclick"){return setTimeout(function(){onCaptureEnd(ev.domEvent)})}event.capture(this.editor.container,onMouseMove,onCaptureEnd);var timerId=setInterval(onCaptureInterval,20)}}.call(MouseHandler.prototype);config.defineOptions(MouseHandler.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},focusTimout:{initialValue:0}});exports.MouseHandler=MouseHandler});define("ace/commands/default_commands",["require","exports","module","../lib/lang","../config"],function(require,exports,module){var lang=require("../lib/lang");var config=require("../config");function bindKey(win,mac){return{win:win,mac:mac}}exports.commands=[{name:"showSettingsMenu",bindKey:bindKey("Ctrl-,","Command-,"),exec:function(editor){config.loadModule("ace/ext/settings_menu",function(module){module.init(editor);editor.showSettingsMenu()})},readOnly:true},{name:"selectall",bindKey:bindKey("Ctrl-A","Command-A"),exec:function(editor){editor.selectAll()},readOnly:true},{name:"centerselection",bindKey:bindKey(null,"Ctrl-L"),exec:function(editor){editor.centerSelection()},readOnly:true},{name:"gotoline",bindKey:bindKey("Ctrl-L","Command-L"),exec:function(editor){var line=parseInt(prompt("Enter line number:"),10);if(!isNaN(line)){editor.gotoLine(line)}},readOnly:true},{name:"fold",bindKey:bindKey("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(editor){editor.session.toggleFold(false)},readOnly:true},{name:"unfold",bindKey:bindKey("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(editor){editor.session.toggleFold(true)},readOnly:true},{name:"foldall",bindKey:bindKey("Alt-0","Command-Option-0"),exec:function(editor){editor.session.foldAll()},readOnly:true},{name:"unfoldall",bindKey:bindKey("Alt-Shift-0","Command-Option-Shift-0"),exec:function(editor){editor.session.unfold()},readOnly:true},{name:"findnext",bindKey:bindKey("Ctrl-K","Command-G"),exec:function(editor){editor.findNext()},readOnly:true},{name:"findprevious",bindKey:bindKey("Ctrl-Shift-K","Command-Shift-G"),exec:function(editor){editor.findPrevious()},readOnly:true},{name:"find",bindKey:bindKey("Ctrl-F","Command-F"),exec:function(editor){config.loadModule("ace/ext/searchbox",function(e){e.Search(editor)})},readOnly:true},{name:"overwrite",bindKey:"Insert",exec:function(editor){editor.toggleOverwrite()},readOnly:true},{name:"selecttostart",bindKey:bindKey("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(editor){editor.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:true},{name:"gotostart",bindKey:bindKey("Ctrl-Home","Command-Home|Command-Up"),exec:function(editor){editor.navigateFileStart()},multiSelectAction:"forEach",readOnly:true},{name:"selectup",bindKey:bindKey("Shift-Up","Shift-Up"),exec:function(editor){editor.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:true},{name:"golineup",bindKey:bindKey("Up","Up|Ctrl-P"),exec:function(editor,args){editor.navigateUp(args.times)},multiSelectAction:"forEach",readOnly:true},{name:"selecttoend",bindKey:bindKey("Ctrl-Shift-End","Command-Shift-Down"),exec:function(editor){editor.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:true},{name:"gotoend",bindKey:bindKey("Ctrl-End","Command-End|Command-Down"),exec:function(editor){editor.navigateFileEnd()},multiSelectAction:"forEach",readOnly:true},{name:"selectdown",bindKey:bindKey("Shift-Down","Shift-Down"),exec:function(editor){editor.getSelection().selectDown()},multiSelectAction:"forEach",readOnly:true},{name:"golinedown",bindKey:bindKey("Down","Down|Ctrl-N"),exec:function(editor,args){editor.navigateDown(args.times)},multiSelectAction:"forEach",readOnly:true},{name:"selectwordleft",bindKey:bindKey("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(editor){editor.getSelection().selectWordLeft()},multiSelectAction:"forEach",readOnly:true},{name:"gotowordleft",bindKey:bindKey("Ctrl-Left","Option-Left"),exec:function(editor){editor.navigateWordLeft()},multiSelectAction:"forEach",readOnly:true},{name:"selecttolinestart",bindKey:bindKey("Alt-Shift-Left","Command-Shift-Left"),exec:function(editor){editor.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:true},{name:"gotolinestart",bindKey:bindKey("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(editor){editor.navigateLineStart()},multiSelectAction:"forEach",readOnly:true},{name:"selectleft",bindKey:bindKey("Shift-Left","Shift-Left"),exec:function(editor){editor.getSelection().selectLeft()},multiSelectAction:"forEach",readOnly:true},{name:"gotoleft",bindKey:bindKey("Left","Left|Ctrl-B"),exec:function(editor,args){editor.navigateLeft(args.times)},multiSelectAction:"forEach",readOnly:true},{name:"selectwordright",bindKey:bindKey("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(editor){editor.getSelection().selectWordRight()},multiSelectAction:"forEach",readOnly:true},{name:"gotowordright",bindKey:bindKey("Ctrl-Right","Option-Right"),exec:function(editor){editor.navigateWordRight()},multiSelectAction:"forEach",readOnly:true},{name:"selecttolineend",bindKey:bindKey("Alt-Shift-Right","Command-Shift-Right"),exec:function(editor){editor.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:true},{name:"gotolineend",bindKey:bindKey("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(editor){editor.navigateLineEnd()},multiSelectAction:"forEach",readOnly:true},{name:"selectright",bindKey:bindKey("Shift-Right","Shift-Right"),exec:function(editor){editor.getSelection().selectRight()},multiSelectAction:"forEach",readOnly:true},{name:"gotoright",bindKey:bindKey("Right","Right|Ctrl-F"),exec:function(editor,args){editor.navigateRight(args.times)},multiSelectAction:"forEach",readOnly:true},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(editor){editor.selectPageDown()},readOnly:true},{name:"pagedown",bindKey:bindKey(null,"Option-PageDown"),exec:function(editor){editor.scrollPageDown()},readOnly:true},{name:"gotopagedown",bindKey:bindKey("PageDown","PageDown|Ctrl-V"),exec:function(editor){editor.gotoPageDown()},readOnly:true},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(editor){editor.selectPageUp()},readOnly:true},{name:"pageup",bindKey:bindKey(null,"Option-PageUp"),exec:function(editor){editor.scrollPageUp()},readOnly:true},{name:"gotopageup",bindKey:"PageUp",exec:function(editor){editor.gotoPageUp()},readOnly:true},{name:"scrollup",bindKey:bindKey("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"scrolldown",bindKey:bindKey("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(editor){editor.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:true},{name:"selectlineend",bindKey:"Shift-End",exec:function(editor){editor.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:true},{name:"togglerecording",bindKey:bindKey("Ctrl-Alt-E","Command-Option-E"),exec:function(editor){editor.commands.toggleRecording(editor)},readOnly:true},{name:"replaymacro",bindKey:bindKey("Ctrl-Shift-E","Command-Shift-E"),exec:function(editor){editor.commands.replay(editor)},readOnly:true},{name:"jumptomatching",bindKey:bindKey("Ctrl-P","Ctrl-Shift-P"),exec:function(editor){editor.jumpToMatching()},multiSelectAction:"forEach",readOnly:true},{name:"selecttomatching",bindKey:bindKey("Ctrl-Shift-P",null),exec:function(editor){editor.jumpToMatching(true)},multiSelectAction:"forEach",readOnly:true},{name:"cut",exec:function(editor){var range=editor.getSelectionRange();editor._emit("cut",range);if(!editor.selection.isEmpty()){editor.session.remove(range);editor.clearSelection()}},multiSelectAction:"forEach"},{name:"removeline",bindKey:bindKey("Ctrl-D","Command-D"),exec:function(editor){editor.removeLines()},multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:bindKey("Ctrl-Shift-D","Command-Shift-D"),exec:function(editor){editor.duplicateSelection()},multiSelectAction:"forEach"},{name:"sortlines",bindKey:bindKey("Ctrl-Alt-S","Command-Alt-S"),exec:function(editor){editor.sortLines()},multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:bindKey("Ctrl-/","Command-/"),exec:function(editor){editor.toggleCommentLines()},multiSelectAction:"forEachLine"},{name:"toggleBlockComment",bindKey:bindKey("Ctrl-Shift-/","Command-Shift-/"),exec:function(editor){editor.toggleBlockComment()},multiSelectAction:"forEach"},{name:"modifyNumberUp",bindKey:bindKey("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(editor){editor.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:bindKey("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(editor){editor.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:bindKey("Ctrl-H","Command-Option-F"),exec:function(editor){config.loadModule("ace/ext/searchbox",function(e){e.Search(editor,true)})}},{name:"undo",bindKey:bindKey("Ctrl-Z","Command-Z"),exec:function(editor){editor.undo()}},{name:"redo",bindKey:bindKey("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(editor){editor.redo()}},{name:"copylinesup",bindKey:bindKey("Alt-Shift-Up","Command-Option-Up"),exec:function(editor){editor.copyLinesUp()}},{name:"movelinesup",bindKey:bindKey("Alt-Up","Option-Up"),exec:function(editor){editor.moveLinesUp()}},{name:"copylinesdown",bindKey:bindKey("Alt-Shift-Down","Command-Option-Down"),exec:function(editor){editor.copyLinesDown()}},{name:"movelinesdown",bindKey:bindKey("Alt-Down","Option-Down"),exec:function(editor){editor.moveLinesDown()}},{name:"del",bindKey:bindKey("Delete","Delete|Ctrl-D"),exec:function(editor){editor.remove("right")},multiSelectAction:"forEach"},{name:"backspace",bindKey:bindKey("Command-Backspace|Option-Backspace|Shift-Backspace|Backspace","Ctrl-Backspace|Command-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(editor){editor.remove("left")},multiSelectAction:"forEach"},{name:"removetolinestart",bindKey:bindKey("Alt-Backspace","Command-Backspace"),exec:function(editor){editor.removeToLineStart()},multiSelectAction:"forEach"},{name:"removetolineend",bindKey:bindKey("Alt-Delete","Ctrl-K"),exec:function(editor){editor.removeToLineEnd()},multiSelectAction:"forEach"},{name:"removewordleft",bindKey:bindKey("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(editor){editor.removeWordLeft()},multiSelectAction:"forEach"},{name:"removewordright",bindKey:bindKey("Ctrl-Delete","Alt-Delete"),exec:function(editor){editor.removeWordRight()},multiSelectAction:"forEach"},{name:"outdent",bindKey:bindKey("Shift-Tab","Shift-Tab"),exec:function(editor){editor.blockOutdent()},multiSelectAction:"forEach"},{name:"indent",bindKey:bindKey("Tab","Tab"),exec:function(editor){editor.indent()},multiSelectAction:"forEach"},{name:"blockoutdent",bindKey:bindKey("Ctrl-[","Ctrl-["),exec:function(editor){editor.blockOutdent()},multiSelectAction:"forEachLine"},{name:"blockindent",bindKey:bindKey("Ctrl-]","Ctrl-]"),exec:function(editor){editor.blockIndent()},multiSelectAction:"forEachLine"},{name:"insertstring",exec:function(editor,str){editor.insert(str)},multiSelectAction:"forEach"},{name:"inserttext",exec:function(editor,args){editor.insert(lang.stringRepeat(args.text||"",args.times||1))},multiSelectAction:"forEach"},{name:"splitline",bindKey:bindKey(null,"Ctrl-O"),exec:function(editor){editor.splitLine()},multiSelectAction:"forEach"},{name:"transposeletters",bindKey:bindKey("Ctrl-T","Ctrl-T"),exec:function(editor){editor.transposeLetters()},multiSelectAction:function(editor){editor.transposeSelections(1)}},{name:"touppercase",bindKey:bindKey("Ctrl-U","Ctrl-U"),exec:function(editor){editor.toUpperCase()},multiSelectAction:"forEach"},{name:"tolowercase",bindKey:bindKey("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(editor){editor.toLowerCase()},multiSelectAction:"forEach"}]});define("ace/edit_session",["require","exports","module","./lib/oop","./lib/lang","./config","./lib/event_emitter","./selection","./mode/text","./range","./document","./background_tokenizer","./search_highlight","./edit_session/folding","./edit_session/bracket_match"],function(require,exports,module){var oop=require("./lib/oop");var lang=require("./lib/lang");var config=require("./config");var EventEmitter=require("./lib/event_emitter").EventEmitter;var Selection=require("./selection").Selection;var TextMode=require("./mode/text").Mode;var Range=require("./range").Range;var Document=require("./document").Document;var BackgroundTokenizer=require("./background_tokenizer").BackgroundTokenizer;var SearchHighlight=require("./search_highlight").SearchHighlight;var EditSession=function(text,mode){this.$breakpoints=[];this.$decorations=[];this.$frontMarkers={};this.$backMarkers={};this.$markerId=1;this.$undoSelect=true;this.$foldData=[];this.$foldData.toString=function(){return this.join("\n")};this.on("changeFold",this.onChangeFold.bind(this));this.$onChange=this.onChange.bind(this);if(typeof text!="object"||!text.getLine)text=new Document(text);this.setDocument(text);this.selection=new Selection(this);config.resetOptions(this);this.setMode(mode);config._emit("session",this)};!function(){oop.implement(this,EventEmitter);this.setDocument=function(doc){if(this.doc)this.doc.removeListener("change",this.$onChange);this.doc=doc;doc.on("change",this.$onChange);if(this.bgTokenizer)this.bgTokenizer.setDocument(this.getDocument());this.resetCaches()};this.getDocument=function(){return this.doc};this.$resetRowCache=function(docRow){if(!docRow){this.$docRowCache=[];this.$screenRowCache=[];return}var l=this.$docRowCache.length;var i=this.$getRowCacheIndex(this.$docRowCache,docRow)+1;if(l>i){this.$docRowCache.splice(i,l);this.$screenRowCache.splice(i,l)}};this.$getRowCacheIndex=function(cacheArray,val){var low=0;var hi=cacheArray.length-1;while(low<=hi){var mid=low+hi>>1;var c=cacheArray[mid];if(val>c)low=mid+1;else if(val<c)hi=mid-1;else return mid}return low-1};this.resetCaches=function(){this.$modified=true;this.$wrapData=[];this.$rowLengthCache=[];this.$resetRowCache(0);if(this.bgTokenizer)this.bgTokenizer.start(0)};this.onChangeFold=function(e){var fold=e.data;this.$resetRowCache(fold.start.row)};this.onChange=function(e){var delta=e.data;this.$modified=true;this.$resetRowCache(delta.range.start.row);var removedFolds=this.$updateInternalDataOnChange(e);if(!this.$fromUndo&&this.$undoManager&&!delta.ignore){this.$deltasDoc.push(delta);if(removedFolds&&removedFolds.length!=0){this.$deltasFold.push({action:"removeFolds",folds:removedFolds})}this.$informUndoManager.schedule()}this.bgTokenizer.$updateOnChange(delta);this._emit("change",e)};this.setValue=function(text){this.doc.setValue(text);this.selection.moveCursorTo(0,0);this.selection.clearSelection();this.$resetRowCache(0);this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];this.getUndoManager().reset()};this.getValue=this.toString=function(){return this.doc.getValue()};this.getSelection=function(){return this.selection};this.getState=function(row){return this.bgTokenizer.getState(row)};this.getTokens=function(row){return this.bgTokenizer.getTokens(row)};this.getTokenAt=function(row,column){var tokens=this.bgTokenizer.getTokens(row);var token,c=0;if(column==null){i=tokens.length-1;c=this.getLine(row).length}else{for(var i=0;i<tokens.length;i++){c+=tokens[i].value.length;if(c>=column)break}}token=tokens[i];if(!token)return null;token.index=i;token.start=c-token.value.length;return token};this.setUndoManager=function(undoManager){this.$undoManager=undoManager;this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];if(this.$informUndoManager)this.$informUndoManager.cancel();if(undoManager){var self=this;this.$syncInformUndoManager=function(){self.$informUndoManager.cancel();if(self.$deltasFold.length){self.$deltas.push({group:"fold",deltas:self.$deltasFold});self.$deltasFold=[]}if(self.$deltasDoc.length){self.$deltas.push({group:"doc",deltas:self.$deltasDoc});self.$deltasDoc=[]}if(self.$deltas.length>0){undoManager.execute({action:"aceupdate",args:[self.$deltas,self]})}self.$deltas=[]};this.$informUndoManager=lang.delayedCall(this.$syncInformUndoManager)}};this.markUndoGroup=function(){if(this.$syncInformUndoManager)this.$syncInformUndoManager()};this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}};this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager};this.getTabString=function(){if(this.getUseSoftTabs()){return lang.stringRepeat(" ",this.getTabSize())}else{return"	"}};this.setUseSoftTabs=function(val){this.setOption("useSoftTabs",val)};this.getUseSoftTabs=function(){return this.$useSoftTabs};this.setTabSize=function(tabSize){this.setOption("tabSize",tabSize)};this.getTabSize=function(){return this.$tabSize};this.isTabStop=function(position){return this.$useSoftTabs&&position.column%this.$tabSize==0};this.$overwrite=false;this.setOverwrite=function(overwrite){this.setOption("overwrite",overwrite)};this.getOverwrite=function(){return this.$overwrite};this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)};this.addGutterDecoration=function(row,className){if(!this.$decorations[row])this.$decorations[row]="";this.$decorations[row]+=" "+className;this._emit("changeBreakpoint",{})};this.removeGutterDecoration=function(row,className){this.$decorations[row]=(this.$decorations[row]||"").replace(" "+className,"");this._emit("changeBreakpoint",{})};this.getBreakpoints=function(){return this.$breakpoints};this.setBreakpoints=function(rows){this.$breakpoints=[];for(var i=0;i<rows.length;i++){this.$breakpoints[rows[i]]="ace_breakpoint"}this._emit("changeBreakpoint",{})};this.clearBreakpoints=function(){this.$breakpoints=[];this._emit("changeBreakpoint",{})};this.setBreakpoint=function(row,className){if(className===undefined)className="ace_breakpoint";if(className)this.$breakpoints[row]=className;else delete this.$breakpoints[row];this._emit("changeBreakpoint",{})};this.clearBreakpoint=function(row){delete this.$breakpoints[row];this._emit("changeBreakpoint",{})};this.addMarker=function(range,clazz,type,inFront){var id=this.$markerId++;var marker={range:range,type:type||"line",renderer:typeof type=="function"?type:null,clazz:clazz,inFront:!!inFront,id:id};if(inFront){this.$frontMarkers[id]=marker;this._emit("changeFrontMarker")}else{this.$backMarkers[id]=marker;this._emit("changeBackMarker")}return id};this.addDynamicMarker=function(marker,inFront){if(!marker.update)return;var id=this.$markerId++;marker.id=id;marker.inFront=!!inFront;if(inFront){this.$frontMarkers[id]=marker;this._emit("changeFrontMarker")}else{this.$backMarkers[id]=marker;this._emit("changeBackMarker")}return marker};this.removeMarker=function(markerId){var marker=this.$frontMarkers[markerId]||this.$backMarkers[markerId];if(!marker)return;var markers=marker.inFront?this.$frontMarkers:this.$backMarkers;if(marker){delete markers[markerId];this._emit(marker.inFront?"changeFrontMarker":"changeBackMarker")}};this.getMarkers=function(inFront){return inFront?this.$frontMarkers:this.$backMarkers};this.highlight=function(re){if(!this.$searchHighlight){var highlight=new SearchHighlight(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(highlight)}this.$searchHighlight.setRegexp(re)};this.highlightLines=function(startRow,endRow,clazz,inFront){if(typeof endRow!="number"){clazz=endRow;endRow=startRow}if(!clazz)clazz="ace_step";var range=new Range(startRow,0,endRow,Infinity);range.id=this.addMarker(range,clazz,"fullLine",inFront);return range};this.setAnnotations=function(annotations){this.$annotations=annotations;this._emit("changeAnnotation",{})};this.getAnnotations=function(){return this.$annotations||[]};this.clearAnnotations=function(){this.setAnnotations([])};this.$detectNewLine=function(text){var match=text.match(/^.*?(\r?\n)/m);if(match){this.$autoNewLine=match[1]}else{this.$autoNewLine="\n"}};this.getWordRange=function(row,column){var line=this.getLine(row);var inToken=false;if(column>0)inToken=!!line.charAt(column-1).match(this.tokenRe);if(!inToken)inToken=!!line.charAt(column).match(this.tokenRe);if(inToken)var re=this.tokenRe;else if(/^\s+$/.test(line.slice(column-1,column+1)))var re=/\s/;else var re=this.nonTokenRe;var start=column;if(start>0){do{start--}while(start>=0&&line.charAt(start).match(re));start++}var end=column;while(end<line.length&&line.charAt(end).match(re)){end++}return new Range(row,start,row,end)};this.getAWordRange=function(row,column){var wordRange=this.getWordRange(row,column);var line=this.getLine(wordRange.end.row);while(line.charAt(wordRange.end.column).match(/[ \t]/)){wordRange.end.column+=1}return wordRange};this.setNewLineMode=function(newLineMode){this.doc.setNewLineMode(newLineMode)};this.getNewLineMode=function(){return this.doc.getNewLineMode()};this.setUseWorker=function(useWorker){this.setOption("useWorker",useWorker)};this.getUseWorker=function(){return this.$useWorker};this.onReloadTokenizer=function(e){var rows=e.data;this.bgTokenizer.start(rows.first);this._emit("tokenizerUpdate",e)};this.$modes={};this.$mode=null;this.$modeId=null;this.setMode=function(mode){if(mode&&typeof mode==="object"){if(mode.getTokenizer)return this.$onChangeMode(mode);var options=mode;var path=options.path}else{path=mode||"ace/mode/text"}if(!this.$modes["ace/mode/text"])this.$modes["ace/mode/text"]=new TextMode;if(this.$modes[path]&&!options)return this.$onChangeMode(this.$modes[path]);this.$modeId=path;config.loadModule(["mode",path],function(m){if(this.$modeId!==path)return;if(this.$modes[path]&&!options)return this.$onChangeMode(this.$modes[path]);if(m&&m.Mode){m=new m.Mode(options);if(!options){this.$modes[path]=m;m.$id=path}this.$onChangeMode(m)}}.bind(this));if(!this.$mode)this.$onChangeMode(this.$modes["ace/mode/text"],true)};this.$onChangeMode=function(mode,$isPlaceholder){if(this.$mode===mode)return;this.$mode=mode;this.$stopWorker();if(this.$useWorker)this.$startWorker();var tokenizer=mode.getTokenizer();if(tokenizer.addEventListener!==undefined){var onReloadTokenizer=this.onReloadTokenizer.bind(this);tokenizer.addEventListener("update",onReloadTokenizer)}if(!this.bgTokenizer){this.bgTokenizer=new BackgroundTokenizer(tokenizer);var _self=this;this.bgTokenizer.addEventListener("update",function(e){_self._emit("tokenizerUpdate",e)})}else{this.bgTokenizer.setTokenizer(tokenizer)}this.bgTokenizer.setDocument(this.getDocument());this.tokenRe=mode.tokenRe;this.nonTokenRe=mode.nonTokenRe;if(!$isPlaceholder){this.$modeId=mode.$id;this.$setFolding(mode.foldingRules);this._emit("changeMode");this.bgTokenizer.start(0)}};this.$stopWorker=function(){if(this.$worker)this.$worker.terminate();this.$worker=null};this.$startWorker=function(){if(typeof Worker!=="undefined"&&!require.noWorker){try{this.$worker=this.$mode.createWorker(this)}catch(e){console.log("Could not load worker");console.log(e);this.$worker=null}}else this.$worker=null};this.getMode=function(){return this.$mode};this.$scrollTop=0;this.setScrollTop=function(scrollTop){scrollTop=Math.round(Math.max(0,scrollTop));if(this.$scrollTop===scrollTop||isNaN(scrollTop))return;this.$scrollTop=scrollTop;this._signal("changeScrollTop",scrollTop)};this.getScrollTop=function(){return this.$scrollTop};this.$scrollLeft=0;this.setScrollLeft=function(scrollLeft){scrollLeft=Math.round(Math.max(0,scrollLeft));
if(this.$scrollLeft===scrollLeft||isNaN(scrollLeft))return;this.$scrollLeft=scrollLeft;this._signal("changeScrollLeft",scrollLeft)};this.getScrollLeft=function(){return this.$scrollLeft};this.getScreenWidth=function(){this.$computeWidth();return this.screenWidth};this.$computeWidth=function(force){if(this.$modified||force){this.$modified=false;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var lines=this.doc.getAllLines();var cache=this.$rowLengthCache;var longestScreenLine=0;var foldIndex=0;var foldLine=this.$foldData[foldIndex];var foldStart=foldLine?foldLine.start.row:Infinity;var len=lines.length;for(var i=0;i<len;i++){if(i>foldStart){i=foldLine.end.row+1;if(i>=len)break;foldLine=this.$foldData[foldIndex++];foldStart=foldLine?foldLine.start.row:Infinity}if(cache[i]==null)cache[i]=this.$getStringScreenWidth(lines[i])[0];if(cache[i]>longestScreenLine)longestScreenLine=cache[i]}this.screenWidth=longestScreenLine}};this.getLine=function(row){return this.doc.getLine(row)};this.getLines=function(firstRow,lastRow){return this.doc.getLines(firstRow,lastRow)};this.getLength=function(){return this.doc.getLength()};this.getTextRange=function(range){return this.doc.getTextRange(range||this.selection.getRange())};this.insert=function(position,text){return this.doc.insert(position,text)};this.remove=function(range){return this.doc.remove(range)};this.undoChanges=function(deltas,dontSelect){if(!deltas.length)return;this.$fromUndo=true;var lastUndoRange=null;for(var i=deltas.length-1;i!=-1;i--){var delta=deltas[i];if(delta.group=="doc"){this.doc.revertDeltas(delta.deltas);lastUndoRange=this.$getUndoSelection(delta.deltas,true,lastUndoRange)}else{delta.deltas.forEach(function(foldDelta){this.addFolds(foldDelta.folds)},this)}}this.$fromUndo=false;lastUndoRange&&this.$undoSelect&&!dontSelect&&this.selection.setSelectionRange(lastUndoRange);return lastUndoRange};this.redoChanges=function(deltas,dontSelect){if(!deltas.length)return;this.$fromUndo=true;var lastUndoRange=null;for(var i=0;i<deltas.length;i++){var delta=deltas[i];if(delta.group=="doc"){this.doc.applyDeltas(delta.deltas);lastUndoRange=this.$getUndoSelection(delta.deltas,false,lastUndoRange)}}this.$fromUndo=false;lastUndoRange&&this.$undoSelect&&!dontSelect&&this.selection.setSelectionRange(lastUndoRange);return lastUndoRange};this.setUndoSelect=function(enable){this.$undoSelect=enable};this.$getUndoSelection=function(deltas,isUndo,lastUndoRange){function isInsert(delta){var insert=delta.action==="insertText"||delta.action==="insertLines";return isUndo?!insert:insert}var delta=deltas[0];var range,point;var lastDeltaIsInsert=false;if(isInsert(delta)){range=delta.range.clone();lastDeltaIsInsert=true}else{range=Range.fromPoints(delta.range.start,delta.range.start);lastDeltaIsInsert=false}for(var i=1;i<deltas.length;i++){delta=deltas[i];if(isInsert(delta)){point=delta.range.start;if(range.compare(point.row,point.column)==-1){range.setStart(delta.range.start)}point=delta.range.end;if(range.compare(point.row,point.column)==1){range.setEnd(delta.range.end)}lastDeltaIsInsert=true}else{point=delta.range.start;if(range.compare(point.row,point.column)==-1){range=Range.fromPoints(delta.range.start,delta.range.start)}lastDeltaIsInsert=false}}if(lastUndoRange!=null){var cmp=lastUndoRange.compareRange(range);if(cmp==1){range.setStart(lastUndoRange.start)}else if(cmp==-1){range.setEnd(lastUndoRange.end)}}return range};this.replace=function(range,text){return this.doc.replace(range,text)};this.moveText=function(fromRange,toPosition,copy){var text=this.getTextRange(fromRange);var folds=this.getFoldsInRange(fromRange);var toRange=Range.fromPoints(toPosition,toPosition);if(!copy){this.remove(fromRange);var rowDiff=fromRange.start.row-fromRange.end.row;var collDiff=rowDiff?-fromRange.end.column:fromRange.start.column-fromRange.end.column;if(collDiff){if(toRange.start.row==fromRange.end.row&&toRange.start.column>fromRange.end.column)toRange.start.column+=collDiff;if(toRange.end.row==fromRange.end.row&&toRange.end.column>fromRange.end.column)toRange.end.column+=collDiff}if(rowDiff&&toRange.start.row>=fromRange.end.row){toRange.start.row+=rowDiff;toRange.end.row+=rowDiff}}this.insert(toRange.start,text);if(folds.length){var oldStart=fromRange.start;var newStart=toRange.start;var rowDiff=newStart.row-oldStart.row;var collDiff=newStart.column-oldStart.column;this.addFolds(folds.map(function(x){x=x.clone();if(x.start.row==oldStart.row)x.start.column+=collDiff;if(x.end.row==oldStart.row)x.end.column+=collDiff;x.start.row+=rowDiff;x.end.row+=rowDiff;return x}))}return toRange};this.indentRows=function(startRow,endRow,indentString){indentString=indentString.replace(/\t/g,this.getTabString());for(var row=startRow;row<=endRow;row++)this.insert({row:row,column:0},indentString)};this.outdentRows=function(range){var rowRange=range.collapseRows();var deleteRange=new Range(0,0,0,0);var size=this.getTabSize();for(var i=rowRange.start.row;i<=rowRange.end.row;++i){var line=this.getLine(i);deleteRange.start.row=i;deleteRange.end.row=i;for(var j=0;j<size;++j)if(line.charAt(j)!=" ")break;if(j<size&&line.charAt(j)=="	"){deleteRange.start.column=j;deleteRange.end.column=j+1}else{deleteRange.start.column=0;deleteRange.end.column=j}this.remove(deleteRange)}};this.$moveLines=function(firstRow,lastRow,dir){firstRow=this.getRowFoldStart(firstRow);lastRow=this.getRowFoldEnd(lastRow);if(dir<0){var row=this.getRowFoldStart(firstRow+dir);if(row<0)return 0;var diff=row-firstRow}else if(dir>0){var row=this.getRowFoldEnd(lastRow+dir);if(row>this.doc.getLength()-1)return 0;var diff=row-lastRow}else{firstRow=this.$clipRowToDocument(firstRow);lastRow=this.$clipRowToDocument(lastRow);var diff=lastRow-firstRow+1}var range=new Range(firstRow,0,lastRow,Number.MAX_VALUE);var folds=this.getFoldsInRange(range).map(function(x){x=x.clone();x.start.row+=diff;x.end.row+=diff;return x});var lines=dir==0?this.doc.getLines(firstRow,lastRow):this.doc.removeLines(firstRow,lastRow);this.doc.insertLines(firstRow+diff,lines);folds.length&&this.addFolds(folds);return diff};this.moveLinesUp=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,-1)};this.moveLinesDown=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,1)};this.duplicateLines=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,0)};this.$clipRowToDocument=function(row){return Math.max(0,Math.min(row,this.doc.getLength()-1))};this.$clipColumnToRow=function(row,column){if(column<0)return 0;return Math.min(this.doc.getLine(row).length,column)};this.$clipPositionToDocument=function(row,column){column=Math.max(0,column);if(row<0){row=0;column=0}else{var len=this.doc.getLength();if(row>=len){row=len-1;column=this.doc.getLine(len-1).length}else{column=Math.min(this.doc.getLine(row).length,column)}}return{row:row,column:column}};this.$clipRangeToDocument=function(range){if(range.start.row<0){range.start.row=0;range.start.column=0}else{range.start.column=this.$clipColumnToRow(range.start.row,range.start.column)}var len=this.doc.getLength()-1;if(range.end.row>len){range.end.row=len;range.end.column=this.doc.getLine(len).length}else{range.end.column=this.$clipColumnToRow(range.end.row,range.end.column)}return range};this.$wrapLimit=80;this.$useWrapMode=false;this.$wrapLimitRange={min:null,max:null};this.setUseWrapMode=function(useWrapMode){if(useWrapMode!=this.$useWrapMode){this.$useWrapMode=useWrapMode;this.$modified=true;this.$resetRowCache(0);if(useWrapMode){var len=this.getLength();this.$wrapData=[];for(var i=0;i<len;i++){this.$wrapData.push([])}this.$updateWrapData(0,len-1)}this._emit("changeWrapMode")}};this.getUseWrapMode=function(){return this.$useWrapMode};this.setWrapLimitRange=function(min,max){if(this.$wrapLimitRange.min!==min||this.$wrapLimitRange.max!==max){this.$wrapLimitRange.min=min;this.$wrapLimitRange.max=max;this.$modified=true;this._emit("changeWrapMode")}};this.adjustWrapLimit=function(desiredLimit,$printMargin){var limits=this.$wrapLimitRange;if(limits.max<0)limits={min:$printMargin,max:$printMargin};var wrapLimit=this.$constrainWrapLimit(desiredLimit,limits.min,limits.max);if(wrapLimit!=this.$wrapLimit&&wrapLimit>1){this.$wrapLimit=wrapLimit;this.$modified=true;if(this.$useWrapMode){this.$updateWrapData(0,this.getLength()-1);this.$resetRowCache(0);this._emit("changeWrapLimit")}return true}return false};this.$constrainWrapLimit=function(wrapLimit,min,max){if(min)wrapLimit=Math.max(min,wrapLimit);if(max)wrapLimit=Math.min(max,wrapLimit);return wrapLimit};this.getWrapLimit=function(){return this.$wrapLimit};this.setWrapLimit=function(limit){this.setWrapLimitRange(limit,limit)};this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}};this.$updateInternalDataOnChange=function(e){var useWrapMode=this.$useWrapMode;var len;var action=e.data.action;var firstRow=e.data.range.start.row;var lastRow=e.data.range.end.row;var start=e.data.range.start;var end=e.data.range.end;var removedFolds=null;if(action.indexOf("Lines")!=-1){if(action=="insertLines"){lastRow=firstRow+e.data.lines.length}else{lastRow=firstRow}len=e.data.lines?e.data.lines.length:lastRow-firstRow}else{len=lastRow-firstRow}this.$updating=true;if(len!=0){if(action.indexOf("remove")!=-1){this[useWrapMode?"$wrapData":"$rowLengthCache"].splice(firstRow,len);var foldLines=this.$foldData;removedFolds=this.getFoldsInRange(e.data.range);this.removeFolds(removedFolds);var foldLine=this.getFoldLine(end.row);var idx=0;if(foldLine){foldLine.addRemoveChars(end.row,end.column,start.column-end.column);foldLine.shiftRow(-len);var foldLineBefore=this.getFoldLine(firstRow);if(foldLineBefore&&foldLineBefore!==foldLine){foldLineBefore.merge(foldLine);foldLine=foldLineBefore}idx=foldLines.indexOf(foldLine)+1}for(idx;idx<foldLines.length;idx++){var foldLine=foldLines[idx];if(foldLine.start.row>=end.row){foldLine.shiftRow(-len)}}lastRow=firstRow}else{var args;if(useWrapMode){args=[firstRow,0];for(var i=0;i<len;i++)args.push([]);this.$wrapData.splice.apply(this.$wrapData,args)}else{args=Array(len);args.unshift(firstRow,0);this.$rowLengthCache.splice.apply(this.$rowLengthCache,args)}var foldLines=this.$foldData;var foldLine=this.getFoldLine(firstRow);var idx=0;if(foldLine){var cmp=foldLine.range.compareInside(start.row,start.column);if(cmp==0){foldLine=foldLine.split(start.row,start.column);foldLine.shiftRow(len);foldLine.addRemoveChars(lastRow,0,end.column-start.column)}else if(cmp==-1){foldLine.addRemoveChars(firstRow,0,end.column-start.column);foldLine.shiftRow(len)}idx=foldLines.indexOf(foldLine)+1}for(idx;idx<foldLines.length;idx++){var foldLine=foldLines[idx];if(foldLine.start.row>=firstRow){foldLine.shiftRow(len)}}}}else{len=Math.abs(e.data.range.start.column-e.data.range.end.column);if(action.indexOf("remove")!=-1){removedFolds=this.getFoldsInRange(e.data.range);this.removeFolds(removedFolds);len=-len}var foldLine=this.getFoldLine(firstRow);if(foldLine){foldLine.addRemoveChars(firstRow,start.column,len)}}if(useWrapMode&&this.$wrapData.length!=this.doc.getLength()){console.error("doc.getLength() and $wrapData.length have to be the same!")}this.$updating=false;if(useWrapMode)this.$updateWrapData(firstRow,lastRow);else this.$updateRowLengthCache(firstRow,lastRow);return removedFolds};this.$updateRowLengthCache=function(firstRow,lastRow,b){this.$rowLengthCache[firstRow]=null;this.$rowLengthCache[lastRow]=null};this.$updateWrapData=function(firstRow,lastRow){var lines=this.doc.getAllLines();var tabSize=this.getTabSize();var wrapData=this.$wrapData;var wrapLimit=this.$wrapLimit;var tokens;var foldLine;var row=firstRow;lastRow=Math.min(lastRow,lines.length-1);while(row<=lastRow){foldLine=this.getFoldLine(row,foldLine);if(!foldLine){tokens=this.$getDisplayTokens(lang.stringTrimRight(lines[row]));wrapData[row]=this.$computeWrapSplits(tokens,wrapLimit,tabSize);row++}else{tokens=[];foldLine.walk(function(placeholder,row,column,lastColumn){var walkTokens;if(placeholder!=null){walkTokens=this.$getDisplayTokens(placeholder,tokens.length);walkTokens[0]=PLACEHOLDER_START;for(var i=1;i<walkTokens.length;i++){walkTokens[i]=PLACEHOLDER_BODY}}else{walkTokens=this.$getDisplayTokens(lines[row].substring(lastColumn,column),tokens.length)}tokens=tokens.concat(walkTokens)}.bind(this),foldLine.end.row,lines[foldLine.end.row].length+1);while(tokens.length!=0&&tokens[tokens.length-1]>=SPACE)tokens.pop();wrapData[foldLine.start.row]=this.$computeWrapSplits(tokens,wrapLimit,tabSize);row=foldLine.end.row+1}}};var CHAR=1,CHAR_EXT=2,PLACEHOLDER_START=3,PLACEHOLDER_BODY=4,PUNCTUATION=9,SPACE=10,TAB=11,TAB_SPACE=12;this.$computeWrapSplits=function(tokens,wrapLimit){if(tokens.length==0){return[]}var splits=[];var displayLength=tokens.length;var lastSplit=0,lastDocSplit=0;function addSplit(screenPos){var displayed=tokens.slice(lastSplit,screenPos);var len=displayed.length;displayed.join("").replace(/12/g,function(){len-=1}).replace(/2/g,function(){len-=1});lastDocSplit+=len;splits.push(lastDocSplit);lastSplit=screenPos}while(displayLength-lastSplit>wrapLimit){var split=lastSplit+wrapLimit;if(tokens[split]>=SPACE){while(tokens[split]>=SPACE){split++}addSplit(split);continue}if(tokens[split]==PLACEHOLDER_START||tokens[split]==PLACEHOLDER_BODY){for(split;split!=lastSplit-1;split--){if(tokens[split]==PLACEHOLDER_START){break}}if(split>lastSplit){addSplit(split);continue}split=lastSplit+wrapLimit;for(split;split<tokens.length;split++){if(tokens[split]!=PLACEHOLDER_BODY){break}}if(split==tokens.length){break}addSplit(split);continue}var minSplit=Math.max(split-10,lastSplit-1);while(split>minSplit&&tokens[split]<PLACEHOLDER_START){split--}while(split>minSplit&&tokens[split]==PUNCTUATION){split--}if(split>minSplit){addSplit(++split);continue}split=lastSplit+wrapLimit;addSplit(split)}return splits};this.$getDisplayTokens=function(str,offset){var arr=[];var tabSize;offset=offset||0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c==9){tabSize=this.getScreenTabSize(arr.length+offset);arr.push(TAB);for(var n=1;n<tabSize;n++){arr.push(TAB_SPACE)}}else if(c==32){arr.push(SPACE)}else if(c>39&&c<48||c>57&&c<64){arr.push(PUNCTUATION)}else if(c>=4352&&isFullWidth(c)){arr.push(CHAR,CHAR_EXT)}else{arr.push(CHAR)}}return arr};this.$getStringScreenWidth=function(str,maxScreenColumn,screenColumn){if(maxScreenColumn==0)return[0,0];if(maxScreenColumn==null)maxScreenColumn=Infinity;screenColumn=screenColumn||0;var c,column;for(column=0;column<str.length;column++){c=str.charCodeAt(column);if(c==9){screenColumn+=this.getScreenTabSize(screenColumn)}else if(c>=4352&&isFullWidth(c)){screenColumn+=2}else{screenColumn+=1}if(screenColumn>maxScreenColumn){break}}return[screenColumn,column]};this.getRowLength=function(row){if(!this.$useWrapMode||!this.$wrapData[row]){return 1}else{return this.$wrapData[row].length+1}};this.getScreenLastRowColumn=function(screenRow){var pos=this.screenToDocumentPosition(screenRow,Number.MAX_VALUE);return this.documentToScreenColumn(pos.row,pos.column)};this.getDocumentLastRowColumn=function(docRow,docColumn){var screenRow=this.documentToScreenRow(docRow,docColumn);return this.getScreenLastRowColumn(screenRow)};this.getDocumentLastRowColumnPosition=function(docRow,docColumn){var screenRow=this.documentToScreenRow(docRow,docColumn);return this.screenToDocumentPosition(screenRow,Number.MAX_VALUE/10)};this.getRowSplitData=function(row){if(!this.$useWrapMode){return undefined}else{return this.$wrapData[row]}};this.getScreenTabSize=function(screenColumn){return this.$tabSize-screenColumn%this.$tabSize};this.screenToDocumentRow=function(screenRow,screenColumn){return this.screenToDocumentPosition(screenRow,screenColumn).row};this.screenToDocumentColumn=function(screenRow,screenColumn){return this.screenToDocumentPosition(screenRow,screenColumn).column};this.screenToDocumentPosition=function(screenRow,screenColumn){if(screenRow<0)return{row:0,column:0};var line;var docRow=0;var docColumn=0;var column;var row=0;var rowLength=0;var rowCache=this.$screenRowCache;var i=this.$getRowCacheIndex(rowCache,screenRow);var l=rowCache.length;if(l&&i>=0){var row=rowCache[i];var docRow=this.$docRowCache[i];var doCache=screenRow>rowCache[l-1]}else{var doCache=!l}var maxRow=this.getLength()-1;var foldLine=this.getNextFoldLine(docRow);var foldStart=foldLine?foldLine.start.row:Infinity;while(row<=screenRow){rowLength=this.getRowLength(docRow);if(row+rowLength-1>=screenRow||docRow>=maxRow){break}else{row+=rowLength;docRow++;if(docRow>foldStart){docRow=foldLine.end.row+1;foldLine=this.getNextFoldLine(docRow,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}}if(doCache){this.$docRowCache.push(docRow);this.$screenRowCache.push(row)}}if(foldLine&&foldLine.start.row<=docRow){line=this.getFoldDisplayLine(foldLine);docRow=foldLine.start.row}else if(row+rowLength<=screenRow||docRow>maxRow){return{row:maxRow,column:this.getLine(maxRow).length}}else{line=this.getLine(docRow);foldLine=null}if(this.$useWrapMode){var splits=this.$wrapData[docRow];if(splits){column=splits[screenRow-row];if(screenRow>row&&splits.length){docColumn=splits[screenRow-row-1]||splits[splits.length-1];line=line.substring(docColumn)}}}docColumn+=this.$getStringScreenWidth(line,screenColumn)[1];if(this.$useWrapMode&&docColumn>=column)docColumn=column-1;if(foldLine)return foldLine.idxToPosition(docColumn);return{row:docRow,column:docColumn}};this.documentToScreenPosition=function(docRow,docColumn){if(typeof docColumn==="undefined")var pos=this.$clipPositionToDocument(docRow.row,docRow.column);else pos=this.$clipPositionToDocument(docRow,docColumn);docRow=pos.row;docColumn=pos.column;var screenRow=0;var foldStartRow=null;var fold=null;fold=this.getFoldAt(docRow,docColumn,1);if(fold){docRow=fold.start.row;docColumn=fold.start.column}var rowEnd,row=0;var rowCache=this.$docRowCache;var i=this.$getRowCacheIndex(rowCache,docRow);var l=rowCache.length;if(l&&i>=0){var row=rowCache[i];var screenRow=this.$screenRowCache[i];var doCache=docRow>rowCache[l-1]}else{var doCache=!l}var foldLine=this.getNextFoldLine(row);var foldStart=foldLine?foldLine.start.row:Infinity;while(row<docRow){if(row>=foldStart){rowEnd=foldLine.end.row+1;if(rowEnd>docRow)break;foldLine=this.getNextFoldLine(rowEnd,foldLine);foldStart=foldLine?foldLine.start.row:Infinity}else{rowEnd=row+1}screenRow+=this.getRowLength(row);row=rowEnd;if(doCache){this.$docRowCache.push(row);this.$screenRowCache.push(screenRow)}}var textLine="";if(foldLine&&row>=foldStart){textLine=this.getFoldDisplayLine(foldLine,docRow,docColumn);foldStartRow=foldLine.start.row}else{textLine=this.getLine(docRow).substring(0,docColumn);foldStartRow=docRow}if(this.$useWrapMode){var wrapRow=this.$wrapData[foldStartRow];var screenRowOffset=0;while(textLine.length>=wrapRow[screenRowOffset]){screenRow++;screenRowOffset++}textLine=textLine.substring(wrapRow[screenRowOffset-1]||0,textLine.length)}return{row:screenRow,column:this.$getStringScreenWidth(textLine)[0]}};this.documentToScreenColumn=function(row,docColumn){return this.documentToScreenPosition(row,docColumn).column};this.documentToScreenRow=function(docRow,docColumn){return this.documentToScreenPosition(docRow,docColumn).row};this.getScreenLength=function(){var screenRows=0;var fold=null;if(!this.$useWrapMode){screenRows=this.getLength();var foldData=this.$foldData;for(var i=0;i<foldData.length;i++){fold=foldData[i];screenRows-=fold.end.row-fold.start.row}}else{var lastRow=this.$wrapData.length;var row=0,i=0;var fold=this.$foldData[i++];var foldStart=fold?fold.start.row:Infinity;while(row<lastRow){screenRows+=this.$wrapData[row].length+1;row++;if(row>foldStart){row=fold.end.row+1;fold=this.$foldData[i++];foldStart=fold?fold.start.row:Infinity}}}return screenRows};function isFullWidth(c){if(c<4352)return false;return c>=4352&&c<=4447||c>=4515&&c<=4519||c>=4602&&c<=4607||c>=9001&&c<=9002||c>=11904&&c<=11929||c>=11931&&c<=12019||c>=12032&&c<=12245||c>=12272&&c<=12283||c>=12288&&c<=12350||c>=12353&&c<=12438||c>=12441&&c<=12543||c>=12549&&c<=12589||c>=12593&&c<=12686||c>=12688&&c<=12730||c>=12736&&c<=12771||c>=12784&&c<=12830||c>=12832&&c<=12871||c>=12880&&c<=13054||c>=13056&&c<=19903||c>=19968&&c<=42124||c>=42128&&c<=42182||c>=43360&&c<=43388||c>=44032&&c<=55203||c>=55216&&c<=55238||c>=55243&&c<=55291||c>=63744&&c<=64255||c>=65040&&c<=65049||c>=65072&&c<=65106||c>=65108&&c<=65126||c>=65128&&c<=65131||c>=65281&&c<=65376||c>=65504&&c<=65510}}.call(EditSession.prototype);require("./edit_session/folding").Folding.call(EditSession.prototype);require("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype);config.defineOptions(EditSession.prototype,"session",{wrap:{set:function(value){if(!value||value=="off")value=false;else if(value=="free")value=true;else if(value=="printMargin")value=-1;else if(typeof value=="string")value=parseInt(value,10)||false;if(this.$wrap==value)return;if(!value){this.setUseWrapMode(false)}else{var col=typeof value=="number"?value:null;this.setWrapLimitRange(col,col);this.setUseWrapMode(true)}this.$wrap=value},get:function(){return this.getUseWrapMode()?this.getWrapLimitRange().min||"free":"off"},handlesSet:true},firstLineNumber:{set:function(){this._emit("changeBreakpoint")},initialValue:1},useWorker:{set:function(useWorker){this.$useWorker=useWorker;this.$stopWorker();if(useWorker)this.$startWorker()},initialValue:true},useSoftTabs:{initialValue:true},tabSize:{set:function(tabSize){if(isNaN(tabSize)||this.$tabSize===tabSize)return;this.$modified=true;this.$rowLengthCache=[];this.$tabSize=tabSize;this._emit("changeTabSize")},initialValue:4,handlesSet:true},overwrite:{set:function(val){this._emit("changeOverwrite")},initialValue:false},newLineMode:{set:function(val){this.doc.setNewLineMode(val)},get:function(){return this.doc.getNewLineMode()},handlesSet:true}});exports.EditSession=EditSession});define("ace/editor",["require","exports","module","./lib/fixoldbrowsers","./lib/oop","./lib/dom","./lib/lang","./lib/useragent","./keyboard/textinput","./mouse/mouse_handler","./mouse/fold_handler","./keyboard/keybinding","./edit_session","./search","./range","./lib/event_emitter","./commands/command_manager","./commands/default_commands","./config"],function(require,exports,module){require("./lib/fixoldbrowsers");var oop=require("./lib/oop");var dom=require("./lib/dom");var lang=require("./lib/lang");var useragent=require("./lib/useragent");var TextInput=require("./keyboard/textinput").TextInput;var MouseHandler=require("./mouse/mouse_handler").MouseHandler;var FoldHandler=require("./mouse/fold_handler").FoldHandler;var KeyBinding=require("./keyboard/keybinding").KeyBinding;var EditSession=require("./edit_session").EditSession;var Search=require("./search").Search;var Range=require("./range").Range;var EventEmitter=require("./lib/event_emitter").EventEmitter;var CommandManager=require("./commands/command_manager").CommandManager;var defaultCommands=require("./commands/default_commands").commands;var config=require("./config");var Editor=function(renderer,session){var container=renderer.getContainerElement();this.container=container;this.renderer=renderer;this.commands=new CommandManager(useragent.isMac?"mac":"win",defaultCommands);this.textInput=new TextInput(renderer.getTextAreaContainer(),this);this.renderer.textarea=this.textInput.getElement();this.keyBinding=new KeyBinding(this);this.$mouseHandler=new MouseHandler(this);new FoldHandler(this);this.$blockScrolling=0;this.$search=(new Search).set({wrap:true});this.setSession(session||new EditSession(""));config.resetOptions(this);config._emit("editor",this)};!function(){oop.implement(this,EventEmitter);this.setKeyboardHandler=function(keyboardHandler){if(!keyboardHandler){this.keyBinding.setKeyboardHandler(null)}else if(typeof keyboardHandler=="string"){this.$keybindingId=keyboardHandler;var _self=this;config.loadModule(["keybinding",keyboardHandler],function(module){if(_self.$keybindingId==keyboardHandler)_self.keyBinding.setKeyboardHandler(module&&module.handler)})}else{delete this.$keybindingId;this.keyBinding.setKeyboardHandler(keyboardHandler)}};this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()};this.setSession=function(session){if(this.session==session)return;if(this.session){var oldSession=this.session;this.session.removeEventListener("change",this.$onDocumentChange);this.session.removeEventListener("changeMode",this.$onChangeMode);this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.session.removeEventListener("changeTabSize",this.$onChangeTabSize);this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode);this.session.removeEventListener("onChangeFold",this.$onChangeFold);this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker);this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation);this.session.removeEventListener("changeOverwrite",this.$onCursorChange);this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange);this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var selection=this.session.getSelection();selection.removeEventListener("changeCursor",this.$onCursorChange);selection.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=session;this.$onDocumentChange=this.onDocumentChange.bind(this);session.addEventListener("change",this.$onDocumentChange);this.renderer.setSession(session);this.$onChangeMode=this.onChangeMode.bind(this);session.addEventListener("changeMode",this.$onChangeMode);this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this);session.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer);session.addEventListener("changeTabSize",this.$onChangeTabSize);this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this);session.addEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.$onChangeWrapMode=this.onChangeWrapMode.bind(this);session.addEventListener("changeWrapMode",this.$onChangeWrapMode);this.$onChangeFold=this.onChangeFold.bind(this);session.addEventListener("changeFold",this.$onChangeFold);this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this);this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.$onChangeBackMarker=this.onChangeBackMarker.bind(this);this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker);this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this);this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.$onChangeAnnotation=this.onChangeAnnotation.bind(this);this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation);this.$onCursorChange=this.onCursorChange.bind(this);this.session.addEventListener("changeOverwrite",this.$onCursorChange);this.$onScrollTopChange=this.onScrollTopChange.bind(this);this.session.addEventListener("changeScrollTop",this.$onScrollTopChange);this.$onScrollLeftChange=this.onScrollLeftChange.bind(this);this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange);this.selection=session.getSelection();this.selection.addEventListener("changeCursor",this.$onCursorChange);this.$onSelectionChange=this.onSelectionChange.bind(this);this.selection.addEventListener("changeSelection",this.$onSelectionChange);this.onChangeMode();this.$blockScrolling+=1;this.onCursorChange();this.$blockScrolling-=1;this.onScrollTopChange();this.onScrollLeftChange();this.onSelectionChange();this.onChangeFrontMarker();this.onChangeBackMarker();this.onChangeBreakpoint();this.onChangeAnnotation();this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit();this.renderer.updateFull();this._emit("changeSession",{session:session,oldSession:oldSession})};this.getSession=function(){return this.session};this.setValue=function(val,cursorPos){this.session.doc.setValue(val);if(!cursorPos)this.selectAll();else if(cursorPos==1)this.navigateFileEnd();else if(cursorPos==-1)this.navigateFileStart();return val};this.getValue=function(){return this.session.getValue()};this.getSelection=function(){return this.selection};this.resize=function(force){this.renderer.onResize(force)};this.setTheme=function(theme){this.renderer.setTheme(theme)};this.getTheme=function(){return this.renderer.getTheme()};this.setStyle=function(style){this.renderer.setStyle(style)};this.unsetStyle=function(style){this.renderer.unsetStyle(style)};this.getFontSize=function(){return this.setOption("fontSize")||dom.computedStyle(ace.container,"fontSize")};this.setFontSize=function(size){this.setOption("fontSize",size)};this.$highlightBrackets=function(){if(this.session.$bracketHighlight){this.session.removeMarker(this.session.$bracketHighlight);this.session.$bracketHighlight=null}if(this.$highlightPending){return}var self=this;this.$highlightPending=true;setTimeout(function(){self.$highlightPending=false;var pos=self.session.findMatchingBracket(self.getCursorPosition());if(pos){var range=new Range(pos.row,pos.column,pos.row,pos.column+1)}else if(self.session.$mode.getMatching){var range=self.session.$mode.getMatching(self.session)}if(range)self.session.$bracketHighlight=self.session.addMarker(range,"ace_bracket","text")},50)};this.focus=function(){var _self=this;setTimeout(function(){_self.textInput.focus()});this.textInput.focus()};this.isFocused=function(){return this.textInput.isFocused()};this.blur=function(){this.textInput.blur()};this.onFocus=function(){if(this.$isFocused)return;this.$isFocused=true;this.renderer.showCursor();this.renderer.visualizeFocus();this._emit("focus")};this.onBlur=function(){if(!this.$isFocused)return;this.$isFocused=false;this.renderer.hideCursor();this.renderer.visualizeBlur();this._emit("blur")};this.$cursorChange=function(){this.renderer.updateCursor()};this.onDocumentChange=function(e){var delta=e.data;var range=delta.range;var lastRow;if(range.start.row==range.end.row&&delta.action!="insertLines"&&delta.action!="removeLines")lastRow=range.end.row;else lastRow=Infinity;this.renderer.updateLines(range.start.row,lastRow);this._emit("change",e);this.$cursorChange()};this.onTokenizerUpdate=function(e){var rows=e.data;this.renderer.updateLines(rows.first,rows.last)};this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())};this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())};this.onCursorChange=function(){this.$cursorChange();if(!this.$blockScrolling){this.renderer.scrollCursorIntoView()}this.$highlightBrackets();this.$updateHighlightActiveLine();this._emit("changeSelection")};this.$updateHighlightActiveLine=function(){var session=this.getSession();var highlight;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())highlight=this.getCursorPosition()}if(session.$highlightLineMarker&&!highlight){session.removeMarker(session.$highlightLineMarker.id);session.$highlightLineMarker=null}else if(!session.$highlightLineMarker&&highlight){var range=new Range(highlight.row,highlight.column,highlight.row,Infinity);range.id=session.addMarker(range,"ace_active-line","screenLine");session.$highlightLineMarker=range}else if(highlight){session.$highlightLineMarker.start.row=highlight.row;session.$highlightLineMarker.end.row=highlight.row;session.$highlightLineMarker.start.column=highlight.column;session._emit("changeBackMarker")}};this.onSelectionChange=function(e){var session=this.session;if(session.$selectionMarker){session.removeMarker(session.$selectionMarker)}session.$selectionMarker=null;if(!this.selection.isEmpty()){var range=this.selection.getRange();var style=this.getSelectionStyle();session.$selectionMarker=session.addMarker(range,"ace_selection",style)}else{this.$updateHighlightActiveLine()}var re=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();
this.session.highlight(re);this._emit("changeSelection")};this.$getSelectionHighLightRegexp=function(){var session=this.session;var selection=this.getSelectionRange();if(selection.isEmpty()||selection.isMultiLine())return;var startOuter=selection.start.column-1;var endOuter=selection.end.column+1;var line=session.getLine(selection.start.row);var lineCols=line.length;var needle=line.substring(Math.max(startOuter,0),Math.min(endOuter,lineCols));if(startOuter>=0&&/^[\w\d]/.test(needle)||endOuter<=lineCols&&/[\w\d]$/.test(needle))return;needle=line.substring(selection.start.column,selection.end.column);if(!/^[\w\d]+$/.test(needle))return;var re=this.$search.$assembleRegExp({wholeWord:true,caseSensitive:true,needle:needle});return re};this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()};this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()};this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()};this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())};this.onChangeMode=function(e){this.renderer.updateText();this._emit("changeMode",e)};this.onChangeWrapLimit=function(){this.renderer.updateFull()};this.onChangeWrapMode=function(){this.renderer.onResize(true)};this.onChangeFold=function(){this.$updateHighlightActiveLine();this.renderer.updateFull()};this.getCopyText=function(){var text="";if(!this.selection.isEmpty())text=this.session.getTextRange(this.getSelectionRange());this._emit("copy",text);return text};this.onCopy=function(){this.commands.exec("copy",this)};this.onCut=function(){this.commands.exec("cut",this)};this.onPaste=function(text){if(this.$readOnly)return;this._emit("paste",text);this.insert(text)};this.execCommand=function(command,args){this.commands.exec(command,this,args)};this.insert=function(text){var session=this.session;var mode=session.getMode();var cursor=this.getCursorPosition();if(this.getBehavioursEnabled()){var transform=mode.transformAction(session.getState(cursor.row),"insertion",this,session,text);if(transform)text=transform.text}text=text.replace("	",this.session.getTabString());if(!this.selection.isEmpty()){cursor=this.session.remove(this.getSelectionRange());this.clearSelection()}else if(this.session.getOverwrite()){var range=new Range.fromPoints(cursor,cursor);range.end.column+=text.length;this.session.remove(range)}this.clearSelection();var start=cursor.column;var lineState=session.getState(cursor.row);var line=session.getLine(cursor.row);var shouldOutdent=mode.checkOutdent(lineState,line,text);var end=session.insert(cursor,text);if(transform&&transform.selection){if(transform.selection.length==2){this.selection.setSelectionRange(new Range(cursor.row,start+transform.selection[0],cursor.row,start+transform.selection[1]))}else{this.selection.setSelectionRange(new Range(cursor.row+transform.selection[0],transform.selection[1],cursor.row+transform.selection[2],transform.selection[3]))}}if(session.getDocument().isNewLine(text)){var lineIndent=mode.getNextLineIndent(lineState,line.slice(0,cursor.column),session.getTabString());this.moveCursorTo(cursor.row+1,0);var size=session.getTabSize();var minIndent=Number.MAX_VALUE;for(var row=cursor.row+1;row<=end.row;++row){var indent=0;line=session.getLine(row);for(var i=0;i<line.length;++i)if(line.charAt(i)=="	")indent+=size;else if(line.charAt(i)==" ")indent+=1;else break;if(/[^\s]/.test(line))minIndent=Math.min(indent,minIndent)}for(var row=cursor.row+1;row<=end.row;++row){var outdent=minIndent;line=session.getLine(row);for(var i=0;i<line.length&&outdent>0;++i)if(line.charAt(i)=="	")outdent-=size;else if(line.charAt(i)==" ")outdent-=1;session.remove(new Range(row,0,row,i))}session.indentRows(cursor.row+1,end.row,lineIndent)}if(shouldOutdent)mode.autoOutdent(lineState,session,cursor.row)};this.onTextInput=function(text){this.keyBinding.onTextInput(text)};this.onCommandKey=function(e,hashId,keyCode){this.keyBinding.onCommandKey(e,hashId,keyCode)};this.setOverwrite=function(overwrite){this.session.setOverwrite(overwrite)};this.getOverwrite=function(){return this.session.getOverwrite()};this.toggleOverwrite=function(){this.session.toggleOverwrite()};this.setScrollSpeed=function(speed){this.setOption("scrollSpeed",speed)};this.getScrollSpeed=function(){return this.getOption("scrollSpeed")};this.setDragDelay=function(dragDelay){this.setOption("dragDelay",dragDelay)};this.getDragDelay=function(){return this.getOption("dragDelay")};this.setSelectionStyle=function(val){this.setOption("selectionStyle",val)};this.getSelectionStyle=function(){return this.getOption("selectionStyle")};this.setHighlightActiveLine=function(shouldHighlight){this.setOption("highlightActiveLine",shouldHighlight)};this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")};this.setHighlightGutterLine=function(shouldHighlight){this.setOption("highlightGutterLine",shouldHighlight)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.setHighlightSelectedWord=function(shouldHighlight){this.setOption("highlightSelectedWord",shouldHighlight)};this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord};this.setAnimatedScroll=function(shouldAnimate){this.renderer.setAnimatedScroll(shouldAnimate)};this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()};this.setShowInvisibles=function(showInvisibles){this.renderer.setShowInvisibles(showInvisibles)};this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()};this.setDisplayIndentGuides=function(display){this.renderer.setDisplayIndentGuides(display)};this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()};this.setShowPrintMargin=function(showPrintMargin){this.renderer.setShowPrintMargin(showPrintMargin)};this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()};this.setPrintMarginColumn=function(showPrintMargin){this.renderer.setPrintMarginColumn(showPrintMargin)};this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()};this.setReadOnly=function(readOnly){this.setOption("readOnly",readOnly)};this.getReadOnly=function(){return this.getOption("readOnly")};this.setBehavioursEnabled=function(enabled){this.setOption("behavioursEnabled",enabled)};this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")};this.setWrapBehavioursEnabled=function(enabled){this.setOption("wrapBehavioursEnabled",enabled)};this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")};this.setShowFoldWidgets=function(show){this.setOption("showFoldWidgets",show)};this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")};this.setFadeFoldWidgets=function(fade){this.setOption("fadeFoldWidgets",fade)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.remove=function(dir){if(this.selection.isEmpty()){if(dir=="left")this.selection.selectLeft();else this.selection.selectRight()}var range=this.getSelectionRange();if(this.getBehavioursEnabled()){var session=this.session;var state=session.getState(range.start.row);var new_range=session.getMode().transformAction(state,"deletion",this,session,range);if(new_range)range=new_range}this.session.remove(range);this.clearSelection()};this.removeWordRight=function(){if(this.selection.isEmpty())this.selection.selectWordRight();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeWordLeft=function(){if(this.selection.isEmpty())this.selection.selectWordLeft();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineStart=function(){if(this.selection.isEmpty())this.selection.selectLineStart();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineEnd=function(){if(this.selection.isEmpty())this.selection.selectLineEnd();var range=this.getSelectionRange();if(range.start.column==range.end.column&&range.start.row==range.end.row){range.end.column=0;range.end.row++}this.session.remove(range);this.clearSelection()};this.splitLine=function(){if(!this.selection.isEmpty()){this.session.remove(this.getSelectionRange());this.clearSelection()}var cursor=this.getCursorPosition();this.insert("\n");this.moveCursorToPosition(cursor)};this.transposeLetters=function(){if(!this.selection.isEmpty()){return}var cursor=this.getCursorPosition();var column=cursor.column;if(column===0)return;var line=this.session.getLine(cursor.row);var swap,range;if(column<line.length){swap=line.charAt(column)+line.charAt(column-1);range=new Range(cursor.row,column-1,cursor.row,column+1)}else{swap=line.charAt(column-1)+line.charAt(column-2);range=new Range(cursor.row,column-2,cursor.row,column)}this.session.replace(range,swap)};this.toLowerCase=function(){var originalRange=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var range=this.getSelectionRange();var text=this.session.getTextRange(range);this.session.replace(range,text.toLowerCase());this.selection.setSelectionRange(originalRange)};this.toUpperCase=function(){var originalRange=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var range=this.getSelectionRange();var text=this.session.getTextRange(range);this.session.replace(range,text.toUpperCase());this.selection.setSelectionRange(originalRange)};this.indent=function(){var session=this.session;var range=this.getSelectionRange();if(range.start.row<range.end.row||range.start.column<range.end.column){var rows=this.$getSelectedRows();session.indentRows(rows.first,rows.last,"	")}else{var indentString;if(this.session.getUseSoftTabs()){var size=session.getTabSize(),position=this.getCursorPosition(),column=session.documentToScreenColumn(position.row,position.column),count=size-column%size;indentString=lang.stringRepeat(" ",count)}else indentString="	";return this.insert(indentString)}};this.blockIndent=function(){var rows=this.$getSelectedRows();this.session.indentRows(rows.first,rows.last,"	")};this.blockOutdent=function(){var selection=this.session.getSelection();this.session.outdentRows(selection.getRange())};this.sortLines=function(){var rows=this.$getSelectedRows();var session=this.session;var lines=[];for(i=rows.first;i<=rows.last;i++)lines.push(session.getLine(i));lines.sort(function(a,b){if(a.toLowerCase()<b.toLowerCase())return-1;if(a.toLowerCase()>b.toLowerCase())return 1;return 0});var deleteRange=new Range(0,0,0,0);for(var i=rows.first;i<=rows.last;i++){var line=session.getLine(i);deleteRange.start.row=i;deleteRange.end.row=i;deleteRange.end.column=line.length;session.replace(deleteRange,lines[i-rows.first])}};this.toggleCommentLines=function(){var state=this.session.getState(this.getCursorPosition().row);var rows=this.$getSelectedRows();this.session.getMode().toggleCommentLines(state,this.session,rows.first,rows.last)};this.toggleBlockComment=function(){var cursor=this.getCursorPosition();var state=this.session.getState(cursor.row);var range=this.getSelectionRange();this.session.getMode().toggleBlockComment(state,this.session,range,cursor)};this.getNumberAt=function(row,column){var _numberRx=/[\-]?[0-9]+(?:\.[0-9]+)?/g;_numberRx.lastIndex=0;var s=this.session.getLine(row);while(_numberRx.lastIndex<column){var m=_numberRx.exec(s);if(m.index<=column&&m.index+m[0].length>=column){var number={value:m[0],start:m.index,end:m.index+m[0].length};return number}}return null};this.modifyNumber=function(amount){var row=this.selection.getCursor().row;var column=this.selection.getCursor().column;var charRange=new Range(row,column-1,row,column);var c=this.session.getTextRange(charRange);if(!isNaN(parseFloat(c))&&isFinite(c)){var nr=this.getNumberAt(row,column);if(nr){var fp=nr.value.indexOf(".")>=0?nr.start+nr.value.indexOf(".")+1:nr.end;var decimals=nr.start+nr.value.length-fp;var t=parseFloat(nr.value);t*=Math.pow(10,decimals);if(fp!==nr.end&&column<fp){amount*=Math.pow(10,nr.end-column-1)}else{amount*=Math.pow(10,nr.end-column)}t+=amount;t/=Math.pow(10,decimals);var nnr=t.toFixed(decimals);var replaceRange=new Range(row,nr.start,row,nr.end);this.session.replace(replaceRange,nnr);this.moveCursorTo(row,Math.max(nr.start+1,column+nnr.length-nr.value.length))}}};this.removeLines=function(){var rows=this.$getSelectedRows();var range;if(rows.first===0||rows.last+1<this.session.getLength())range=new Range(rows.first,0,rows.last+1,0);else range=new Range(rows.first-1,this.session.getLine(rows.first-1).length,rows.last,this.session.getLine(rows.last).length);this.session.remove(range);this.clearSelection()};this.duplicateSelection=function(){var sel=this.selection;var doc=this.session;var range=sel.getRange();var reverse=sel.isBackwards();if(range.isEmpty()){var row=range.start.row;doc.duplicateLines(row,row)}else{var point=reverse?range.start:range.end;var endPoint=doc.insert(point,doc.getTextRange(range),false);range.start=point;range.end=endPoint;sel.setSelectionRange(range,reverse)}};this.moveLinesDown=function(){this.$moveLines(function(firstRow,lastRow){return this.session.moveLinesDown(firstRow,lastRow)})};this.moveLinesUp=function(){this.$moveLines(function(firstRow,lastRow){return this.session.moveLinesUp(firstRow,lastRow)})};this.moveText=function(range,toPosition){return this.session.moveText(range,toPosition)};this.copyLinesUp=function(){this.$moveLines(function(firstRow,lastRow){this.session.duplicateLines(firstRow,lastRow);return 0})};this.copyLinesDown=function(){this.$moveLines(function(firstRow,lastRow){return this.session.duplicateLines(firstRow,lastRow)})};this.$moveLines=function(mover){var selection=this.selection;if(!selection.inMultiSelectMode||this.inVirtualSelectionMode){var range=selection.toOrientedRange();var rows=this.$getSelectedRows(range);var linesMoved=mover.call(this,rows.first,rows.last);range.moveBy(linesMoved,0);selection.fromOrientedRange(range)}else{var ranges=selection.rangeList.ranges;selection.rangeList.detach(this.session);for(var i=ranges.length;i--;){var rangeIndex=i;var rows=ranges[i].collapseRows();var last=rows.end.row;var first=rows.start.row;while(i--){var rows=ranges[i].collapseRows();if(first-rows.end.row<=1)first=rows.end.row;else break}i++;var linesMoved=mover.call(this,first,last);while(rangeIndex>=i){ranges[rangeIndex].moveBy(linesMoved,0);rangeIndex--}}selection.fromOrientedRange(selection.ranges[0]);selection.rangeList.attach(this.session)}};this.$getSelectedRows=function(){var range=this.getSelectionRange().collapseRows();return{first:range.start.row,last:range.end.row}};this.onCompositionStart=function(text){this.renderer.showComposition(this.getCursorPosition())};this.onCompositionUpdate=function(text){this.renderer.setCompositionText(text)};this.onCompositionEnd=function(){this.renderer.hideComposition()};this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()};this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()};this.isRowVisible=function(row){return row>=this.getFirstVisibleRow()&&row<=this.getLastVisibleRow()};this.isRowFullyVisible=function(row){return row>=this.renderer.getFirstFullyVisibleRow()&&row<=this.renderer.getLastFullyVisibleRow()};this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1};this.$moveByPage=function(dir,select){var renderer=this.renderer;var config=this.renderer.layerConfig;var rows=dir*Math.floor(config.height/config.lineHeight);this.$blockScrolling++;if(select==true){this.selection.$moveSelection(function(){this.moveCursorBy(rows,0)})}else if(select==false){this.selection.moveCursorBy(rows,0);this.selection.clearSelection()}this.$blockScrolling--;var scrollTop=renderer.scrollTop;renderer.scrollBy(0,rows*config.lineHeight);if(select!=null)renderer.scrollCursorIntoView(null,.5);renderer.animateScrolling(scrollTop)};this.selectPageDown=function(){this.$moveByPage(1,true)};this.selectPageUp=function(){this.$moveByPage(-1,true)};this.gotoPageDown=function(){this.$moveByPage(1,false)};this.gotoPageUp=function(){this.$moveByPage(-1,false)};this.scrollPageDown=function(){this.$moveByPage(1)};this.scrollPageUp=function(){this.$moveByPage(-1)};this.scrollToRow=function(row){this.renderer.scrollToRow(row)};this.scrollToLine=function(line,center,animate,callback){this.renderer.scrollToLine(line,center,animate,callback)};this.centerSelection=function(){var range=this.getSelectionRange();var pos={row:Math.floor(range.start.row+(range.end.row-range.start.row)/2),column:Math.floor(range.start.column+(range.end.column-range.start.column)/2)};this.renderer.alignCursor(pos,.5)};this.getCursorPosition=function(){return this.selection.getCursor()};this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())};this.getSelectionRange=function(){return this.selection.getRange()};this.selectAll=function(){this.$blockScrolling+=1;this.selection.selectAll();this.$blockScrolling-=1};this.clearSelection=function(){this.selection.clearSelection()};this.moveCursorTo=function(row,column){this.selection.moveCursorTo(row,column)};this.moveCursorToPosition=function(pos){this.selection.moveCursorToPosition(pos)};this.jumpToMatching=function(select){var cursor=this.getCursorPosition();var range=this.session.getBracketRange(cursor);if(!range){range=this.find({needle:/[{}()\[\]]/g,preventScroll:true,start:{row:cursor.row,column:cursor.column-1}});if(!range)return;var pos=range.start;if(pos.row==cursor.row&&Math.abs(pos.column-cursor.column)<2)range=this.session.getBracketRange(pos)}pos=range&&range.cursor||pos;if(pos){if(select){if(range&&range.isEqual(this.getSelectionRange()))this.clearSelection();else this.selection.selectTo(pos.row,pos.column)}else{this.clearSelection();this.moveCursorTo(pos.row,pos.column)}}};this.gotoLine=function(lineNumber,column,animate){this.selection.clearSelection();this.session.unfold({row:lineNumber-1,column:column||0});this.$blockScrolling+=1;this.moveCursorTo(lineNumber-1,column||0);this.$blockScrolling-=1;if(!this.isRowFullyVisible(lineNumber-1))this.scrollToLine(lineNumber-1,true,animate)};this.navigateTo=function(row,column){this.clearSelection();this.moveCursorTo(row,column)};this.navigateUp=function(times){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var selectionStart=this.selection.anchor.getPosition();return this.moveCursorToPosition(selectionStart)}this.selection.clearSelection();times=times||1;this.selection.moveCursorBy(-times,0)};this.navigateDown=function(times){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var selectionEnd=this.selection.anchor.getPosition();return this.moveCursorToPosition(selectionEnd)}this.selection.clearSelection();times=times||1;this.selection.moveCursorBy(times,0)};this.navigateLeft=function(times){if(!this.selection.isEmpty()){var selectionStart=this.getSelectionRange().start;this.moveCursorToPosition(selectionStart)}else{times=times||1;while(times--){this.selection.moveCursorLeft()}}this.clearSelection()};this.navigateRight=function(times){if(!this.selection.isEmpty()){var selectionEnd=this.getSelectionRange().end;this.moveCursorToPosition(selectionEnd)}else{times=times||1;while(times--){this.selection.moveCursorRight()}}this.clearSelection()};this.navigateLineStart=function(){this.selection.moveCursorLineStart();this.clearSelection()};this.navigateLineEnd=function(){this.selection.moveCursorLineEnd();this.clearSelection()};this.navigateFileEnd=function(){var scrollTop=this.renderer.scrollTop;this.selection.moveCursorFileEnd();this.clearSelection();this.renderer.animateScrolling(scrollTop)};this.navigateFileStart=function(){var scrollTop=this.renderer.scrollTop;this.selection.moveCursorFileStart();this.clearSelection();this.renderer.animateScrolling(scrollTop)};this.navigateWordRight=function(){this.selection.moveCursorWordRight();this.clearSelection()};this.navigateWordLeft=function(){this.selection.moveCursorWordLeft();this.clearSelection()};this.replace=function(replacement,options){if(options)this.$search.set(options);var range=this.$search.find(this.session);var replaced=0;if(!range)return replaced;if(this.$tryReplace(range,replacement)){replaced=1}if(range!==null){this.selection.setSelectionRange(range);this.renderer.scrollSelectionIntoView(range.start,range.end)}return replaced};this.replaceAll=function(replacement,options){if(options){this.$search.set(options)}var ranges=this.$search.findAll(this.session);var replaced=0;if(!ranges.length)return replaced;this.$blockScrolling+=1;var selection=this.getSelectionRange();this.clearSelection();this.selection.moveCursorTo(0,0);for(var i=ranges.length-1;i>=0;--i){if(this.$tryReplace(ranges[i],replacement)){replaced++}}this.selection.setSelectionRange(selection);this.$blockScrolling-=1;return replaced};this.$tryReplace=function(range,replacement){var input=this.session.getTextRange(range);replacement=this.$search.replace(input,replacement);if(replacement!==null){range.end=this.session.replace(range,replacement);return range}else{return null}};this.getLastSearchOptions=function(){return this.$search.getOptions()};this.find=function(needle,options,animate){if(!options)options={};if(typeof needle=="string"||needle instanceof RegExp)options.needle=needle;else if(typeof needle=="object")oop.mixin(options,needle);var range=this.selection.getRange();if(options.needle==null){needle=this.session.getTextRange(range)||this.$search.$options.needle;if(!needle){range=this.session.getWordRange(range.start.row,range.start.column);needle=this.session.getTextRange(range)}this.$search.set({needle:needle})}this.$search.set(options);if(!options.start)this.$search.set({start:range});var newRange=this.$search.find(this.session);if(options.preventScroll)return newRange;if(newRange){this.revealRange(newRange,animate);return newRange}if(options.backwards)range.start=range.end;else range.end=range.start;this.selection.setRange(range)};this.findNext=function(options,animate){this.find({skipCurrent:true,backwards:false},options,animate)};this.findPrevious=function(options,animate){this.find(options,{skipCurrent:true,backwards:true},animate)};this.revealRange=function(range,animate){this.$blockScrolling+=1;this.session.unfold(range);this.selection.setSelectionRange(range);this.$blockScrolling-=1;var scrollTop=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(range.start,range.end,.5);if(animate!=false)this.renderer.animateScrolling(scrollTop)};this.undo=function(){this.$blockScrolling++;this.session.getUndoManager().undo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,.5)};this.redo=function(){this.$blockScrolling++;this.session.getUndoManager().redo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,.5)};this.destroy=function(){this.renderer.destroy();this._emit("destroy",this)};this.setAutoScrollEditorIntoView=function(enable){if(enable===false)return;var rect;var self=this;var shouldScroll=false;if(!this.$scrollAnchor)this.$scrollAnchor=document.createElement("div");var scrollAnchor=this.$scrollAnchor;scrollAnchor.style.cssText="position:absolute";this.container.insertBefore(scrollAnchor,this.container.firstChild);var onChangeSelection=this.on("changeSelection",function(){shouldScroll=true});var onBeforeRender=this.renderer.on("beforeRender",function(){if(shouldScroll)rect=self.renderer.container.getBoundingClientRect()});var onAfterRender=this.renderer.on("afterRender",function(){if(shouldScroll&&rect&&self.isFocused()){var renderer=self.renderer;var pos=renderer.$cursorLayer.$pixelPos;var config=renderer.layerConfig;var top=pos.top-config.offset;if(pos.top>=0&&top+rect.top<0){shouldScroll=true}else if(pos.top<config.height&&pos.top+rect.top+config.lineHeight>window.innerHeight){shouldScroll=false}else{shouldScroll=null}if(shouldScroll!=null){scrollAnchor.style.top=top+"px";scrollAnchor.style.left=pos.left+"px";scrollAnchor.style.height=config.lineHeight+"px";scrollAnchor.scrollIntoView(shouldScroll)}shouldScroll=rect=null}});this.setAutoScrollEditorIntoView=function(enable){if(enable===true)return;delete this.setAutoScrollEditorIntoView;this.removeEventListener("changeSelection",onChangeSelection);this.renderer.removeEventListener("afterRender",onAfterRender);this.renderer.removeEventListener("beforeRender",onBeforeRender)}};this.$resetCursorStyle=function(){var style=this.$cursorStyle||"ace";var cursorLayer=this.renderer.$cursorLayer;if(!cursorLayer)return;cursorLayer.setSmoothBlinking(style=="smooth");cursorLayer.isBlinking=!this.$readOnly&&style!="wide"}}.call(Editor.prototype);config.defineOptions(Editor.prototype,"editor",{selectionStyle:{set:function(style){this.onSelectionChange();this._emit("changeSelectionStyle",{data:style})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:true},highlightSelectedWord:{set:function(shouldHighlight){this.$onSelectionChange()},initialValue:true},readOnly:{set:function(readOnly){this.$resetCursorStyle()},initialValue:false},cursorStyle:{set:function(val){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},behavioursEnabled:{initialValue:true},wrapBehavioursEnabled:{initialValue:true},hScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",focusTimout:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session"});exports.Editor=Editor});define("ace/multi_select",["require","exports","module","./range_list","./range","./selection","./mouse/multi_select_handler","./lib/event","./lib/lang","./commands/multi_select_commands","./search","./edit_session","./editor"],function(require,exports,module){var RangeList=require("./range_list").RangeList;var Range=require("./range").Range;var Selection=require("./selection").Selection;var onMouseDown=require("./mouse/multi_select_handler").onMouseDown;var event=require("./lib/event");var lang=require("./lib/lang");var commands=require("./commands/multi_select_commands");exports.commands=commands.defaultCommands.concat(commands.multiSelectCommands);var Search=require("./search").Search;var search=new Search;function find(session,needle,dir){search.$options.wrap=true;search.$options.needle=needle;search.$options.backwards=dir==-1;return search.find(session)}var EditSession=require("./edit_session").EditSession;!function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}.call(EditSession.prototype);!function(){this.ranges=null;this.rangeList=null;this.addRange=function(range,$blockChangeEvents){if(!range)return;if(!this.inMultiSelectMode&&this.rangeCount==0){var oldRange=this.toOrientedRange();this.rangeList.add(oldRange);this.rangeList.add(range);if(this.rangeList.ranges.length!=2){this.rangeList.removeAll();return $blockChangeEvents||this.fromOrientedRange(range)}this.rangeList.removeAll();this.rangeList.add(oldRange);this.$onAddRange(oldRange)}if(!range.cursor)range.cursor=range.end;var removed=this.rangeList.add(range);this.$onAddRange(range);if(removed.length)this.$onRemoveRange(removed);if(this.rangeCount>1&&!this.inMultiSelectMode){this._emit("multiSelect");this.inMultiSelectMode=true;this.session.$undoSelect=false;this.rangeList.attach(this.session)}return $blockChangeEvents||this.fromOrientedRange(range)};this.toSingleRange=function(range){range=range||this.ranges[0];var removed=this.rangeList.removeAll();if(removed.length)this.$onRemoveRange(removed);range&&this.fromOrientedRange(range)};this.substractPoint=function(pos){var removed=this.rangeList.substractPoint(pos);if(removed){this.$onRemoveRange(removed);return removed[0]}};this.mergeOverlappingRanges=function(){var removed=this.rangeList.merge();if(removed.length)this.$onRemoveRange(removed);else if(this.ranges[0])this.fromOrientedRange(this.ranges[0])};this.$onAddRange=function(range){this.rangeCount=this.rangeList.ranges.length;this.ranges.unshift(range);this._emit("addRange",{range:range})};this.$onRemoveRange=function(removed){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var lastRange=this.rangeList.ranges.pop();removed.push(lastRange);this.rangeCount=0}for(var i=removed.length;i--;){var index=this.ranges.indexOf(removed[i]);this.ranges.splice(index,1)}this._emit("removeRange",{ranges:removed});if(this.rangeCount==0&&this.inMultiSelectMode){this.inMultiSelectMode=false;this._emit("singleSelect");this.session.$undoSelect=true;this.rangeList.detach(this.session)}lastRange=lastRange||this.ranges[0];if(lastRange&&!lastRange.isEqual(this.getRange()))this.fromOrientedRange(lastRange)};this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new RangeList;this.ranges=[];this.rangeCount=0};this.getAllRanges=function(){return this.rangeList.ranges.concat()};this.splitIntoLines=function(){if(this.rangeCount>1){var ranges=this.rangeList.ranges;var lastRange=ranges[ranges.length-1];var range=Range.fromPoints(ranges[0].start,lastRange.end);this.toSingleRange();this.setSelectionRange(range,lastRange.cursor==lastRange.start)}else{var range=this.getRange();var isBackwards=this.isBackwards();var startRow=range.start.row;var endRow=range.end.row;if(startRow==endRow){if(isBackwards)var start=range.end,end=range.start;else var start=range.start,end=range.end;this.addRange(Range.fromPoints(end,end));this.addRange(Range.fromPoints(start,start));return}var rectSel=[];var r=this.getLineRange(startRow,true);r.start.column=range.start.column;rectSel.push(r);for(var i=startRow+1;i<endRow;i++)rectSel.push(this.getLineRange(i,true));r=this.getLineRange(endRow,true);r.end.column=range.end.column;rectSel.push(r);rectSel.forEach(this.addRange,this)}};this.toggleBlockSelection=function(){if(this.rangeCount>1){var ranges=this.rangeList.ranges;var lastRange=ranges[ranges.length-1];var range=Range.fromPoints(ranges[0].start,lastRange.end);this.toSingleRange();this.setSelectionRange(range,lastRange.cursor==lastRange.start)}else{var cursor=this.session.documentToScreenPosition(this.selectionLead);var anchor=this.session.documentToScreenPosition(this.selectionAnchor);var rectSel=this.rectangularRangeBlock(cursor,anchor);rectSel.forEach(this.addRange,this)}};this.rectangularRangeBlock=function(screenCursor,screenAnchor,includeEmptyLines){var rectSel=[];var xBackwards=screenCursor.column<screenAnchor.column;if(xBackwards){var startColumn=screenCursor.column;var endColumn=screenAnchor.column}else{var startColumn=screenAnchor.column;var endColumn=screenCursor.column}var yBackwards=screenCursor.row<screenAnchor.row;if(yBackwards){var startRow=screenCursor.row;var endRow=screenAnchor.row}else{var startRow=screenAnchor.row;var endRow=screenCursor.row}if(startColumn<0)startColumn=0;if(startRow<0)startRow=0;if(startRow==endRow)includeEmptyLines=true;for(var row=startRow;row<=endRow;row++){var range=Range.fromPoints(this.session.screenToDocumentPosition(row,startColumn),this.session.screenToDocumentPosition(row,endColumn));if(range.isEmpty()){if(docEnd&&isSamePoint(range.end,docEnd))break;var docEnd=range.end}range.cursor=xBackwards?range.start:range.end;rectSel.push(range)}if(yBackwards)rectSel.reverse();if(!includeEmptyLines){var end=rectSel.length-1;while(rectSel[end].isEmpty()&&end>0)end--;if(end>0){var start=0;while(rectSel[start].isEmpty())start++}for(var i=end;i>=start;i--){if(rectSel[i].isEmpty())rectSel.splice(i,1)}}return rectSel}}.call(Selection.prototype);var Editor=require("./editor").Editor;!function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.addSelectionMarker=function(orientedRange){if(!orientedRange.cursor)orientedRange.cursor=orientedRange.end;
var style=this.getSelectionStyle();orientedRange.marker=this.session.addMarker(orientedRange,"ace_selection",style);this.session.$selectionMarkers.push(orientedRange);this.session.selectionMarkerCount=this.session.$selectionMarkers.length;return orientedRange};this.removeSelectionMarker=function(range){if(!range.marker)return;this.session.removeMarker(range.marker);var index=this.session.$selectionMarkers.indexOf(range);if(index!=-1)this.session.$selectionMarkers.splice(index,1);this.session.selectionMarkerCount=this.session.$selectionMarkers.length};this.removeSelectionMarkers=function(ranges){var markerList=this.session.$selectionMarkers;for(var i=ranges.length;i--;){var range=ranges[i];if(!range.marker)continue;this.session.removeMarker(range.marker);var index=markerList.indexOf(range);if(index!=-1)markerList.splice(index,1)}this.session.selectionMarkerCount=markerList.length};this.$onAddRange=function(e){this.addSelectionMarker(e.range);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=true;this.setStyle("ace_multiselect");this.keyBinding.addKeyboardHandler(commands.keyboardHandler);this.commands.on("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=false;this.unsetStyle("ace_multiselect");this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);this.commands.removeEventListener("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onMultiSelectExec=function(e){var command=e.command;var editor=e.editor;if(!editor.multiSelect)return;if(!command.multiSelectAction){command.exec(editor,e.args||{});editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());editor.multiSelect.mergeOverlappingRanges()}else if(command.multiSelectAction=="forEach"){editor.forEachSelection(command,e.args)}else if(command.multiSelectAction=="forEachLine"){editor.forEachSelection(command,e.args,true)}else if(command.multiSelectAction=="single"){editor.exitMultiSelectMode();command.exec(editor,e.args||{})}else{command.multiSelectAction(editor,e.args||{})}e.preventDefault()};this.forEachSelection=function(cmd,args,$byLines){if(this.inVirtualSelectionMode)return;var session=this.session;var selection=this.selection;var rangeList=selection.rangeList;var reg=selection._eventRegistry;selection._eventRegistry={};var tmpSel=new Selection(session);this.inVirtualSelectionMode=true;for(var i=rangeList.ranges.length;i--;){if($byLines){while(i>0&&rangeList.ranges[i].start.row==rangeList.ranges[i-1].end.row)i--}tmpSel.fromOrientedRange(rangeList.ranges[i]);this.selection=session.selection=tmpSel;cmd.exec(this,args||{});tmpSel.toOrientedRange(rangeList.ranges[i])}tmpSel.detach();this.selection=session.selection=selection;this.inVirtualSelectionMode=false;selection._eventRegistry=reg;selection.mergeOverlappingRanges();this.onCursorChange();this.onSelectionChange()};this.exitMultiSelectMode=function(){if(this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()};this.getCopyText=function(){var text="";if(this.inMultiSelectMode){var ranges=this.multiSelect.rangeList.ranges;var buf=[];for(var i=0;i<ranges.length;i++){buf.push(this.session.getTextRange(ranges[i]))}var nl=this.session.getDocument().getNewLineCharacter();text=buf.join(nl);if(text.length==(buf.length-1)*nl.length)text=""}else if(!this.selection.isEmpty()){text=this.session.getTextRange(this.getSelectionRange())}return text};this.onPaste=function(text){if(this.$readOnly)return;this._signal("paste",text);if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(text);var lines=text.split(/\r\n|\r|\n/);var ranges=this.selection.rangeList.ranges;if(lines.length>ranges.length||lines.length<=2&&!lines[1])return this.commands.exec("insertstring",this,text);for(var i=ranges.length;i--;){var range=ranges[i];if(!range.isEmpty())this.session.remove(range);this.session.insert(range.start,lines[i])}};this.findAll=function(needle,options,additive){options=options||{};options.needle=needle||options.needle;this.$search.set(options);var ranges=this.$search.findAll(this.session);if(!ranges.length)return 0;this.$blockScrolling+=1;var selection=this.multiSelect;if(!additive)selection.toSingleRange(ranges[0]);for(var i=ranges.length;i--;)selection.addRange(ranges[i],true);this.$blockScrolling-=1;return ranges.length};this.selectMoreLines=function(dir,skip){var range=this.selection.toOrientedRange();var isBackwards=range.cursor==range.end;var screenLead=this.session.documentToScreenPosition(range.cursor);if(this.selection.$desiredColumn)screenLead.column=this.selection.$desiredColumn;var lead=this.session.screenToDocumentPosition(screenLead.row+dir,screenLead.column);if(!range.isEmpty()){var screenAnchor=this.session.documentToScreenPosition(isBackwards?range.end:range.start);var anchor=this.session.screenToDocumentPosition(screenAnchor.row+dir,screenAnchor.column)}else{var anchor=lead}if(isBackwards){var newRange=Range.fromPoints(lead,anchor);newRange.cursor=newRange.start}else{var newRange=Range.fromPoints(anchor,lead);newRange.cursor=newRange.end}newRange.desiredColumn=screenLead.column;if(!this.selection.inMultiSelectMode){this.selection.addRange(range)}else{if(skip)var toRemove=range.cursor}this.selection.addRange(newRange);if(toRemove)this.selection.substractPoint(toRemove)};this.transposeSelections=function(dir){var session=this.session;var sel=session.multiSelect;var all=sel.ranges;for(var i=all.length;i--;){var range=all[i];if(range.isEmpty()){var tmp=session.getWordRange(range.start.row,range.start.column);range.start.row=tmp.start.row;range.start.column=tmp.start.column;range.end.row=tmp.end.row;range.end.column=tmp.end.column}}sel.mergeOverlappingRanges();var words=[];for(var i=all.length;i--;){var range=all[i];words.unshift(session.getTextRange(range))}if(dir<0)words.unshift(words.pop());else words.push(words.shift());for(var i=all.length;i--;){var range=all[i];var tmp=range.clone();session.replace(range,words[i]);range.start.row=tmp.start.row;range.start.column=tmp.start.column}};this.selectMore=function(dir,skip){var session=this.session;var sel=session.multiSelect;var range=sel.toOrientedRange();if(range.isEmpty()){var range=session.getWordRange(range.start.row,range.start.column);range.cursor=range.end;this.multiSelect.addRange(range)}var needle=session.getTextRange(range);var newRange=find(session,needle,dir);if(newRange){newRange.cursor=dir==-1?newRange.start:newRange.end;this.multiSelect.addRange(newRange)}if(skip)this.multiSelect.substractPoint(range.cursor)};this.alignCursors=function(){var session=this.session;var sel=session.multiSelect;var ranges=sel.ranges;if(!ranges.length){var range=this.selection.getRange();var fr=range.start.row,lr=range.end.row;var lines=this.session.doc.removeLines(fr,lr);lines=this.$reAlignText(lines);this.session.doc.insertLines(fr,lines);range.start.column=0;range.end.column=lines[lines.length-1].length;this.selection.setRange(range)}else{var row=-1;var sameRowRanges=ranges.filter(function(r){if(r.cursor.row==row)return true;row=r.cursor.row});sel.$onRemoveRange(sameRowRanges);var maxCol=0;var minSpace=Infinity;var spaceOffsets=ranges.map(function(r){var p=r.cursor;var line=session.getLine(p.row);var spaceOffset=line.substr(p.column).search(/\S/g);if(spaceOffset==-1)spaceOffset=0;if(p.column>maxCol)maxCol=p.column;if(spaceOffset<minSpace)minSpace=spaceOffset;return spaceOffset});ranges.forEach(function(r,i){var p=r.cursor;var l=maxCol-p.column;var d=spaceOffsets[i]-minSpace;if(l>d)session.insert(p,lang.stringRepeat(" ",l-d));else session.remove(new Range(p.row,p.column,p.row,p.column-l+d));r.start.column=r.end.column=maxCol;r.start.row=r.end.row=p.row;r.cursor=r.end});sel.fromOrientedRange(ranges[0]);this.renderer.updateCursor();this.renderer.updateBackMarkers()}};this.$reAlignText=function(lines){var isLeftAligned=true,isRightAligned=true;var startW,textW,endW;return lines.map(function(line){var m=line.match(/(\s*)(.*?)(\s*)([=:].*)/);if(!m)return[line];if(startW==null){startW=m[1].length;textW=m[2].length;endW=m[3].length;return m}if(startW+textW+endW!=m[1].length+m[2].length+m[3].length)isRightAligned=false;if(startW!=m[1].length)isLeftAligned=false;if(startW>m[1].length)startW=m[1].length;if(textW<m[2].length)textW=m[2].length;if(endW>m[3].length)endW=m[3].length;return m}).map(isLeftAligned?isRightAligned?alignRight:alignLeft:unAlign);function spaces(n){return lang.stringRepeat(" ",n)}function alignLeft(m){return!m[2]?m[0]:spaces(startW)+m[2]+spaces(textW-m[2].length+endW)+m[4].replace(/^([=:])\s+/,"$1 ")}function alignRight(m){return!m[2]?m[0]:spaces(startW+textW-m[2].length)+m[2]+spaces(endW," ")+m[4].replace(/^([=:])\s+/,"$1 ")}function unAlign(m){return!m[2]?m[0]:spaces(startW)+m[2]+spaces(endW)+m[4].replace(/^([=:])\s+/,"$1 ")}}}.call(Editor.prototype);function isSamePoint(p1,p2){return p1.row==p2.row&&p1.column==p2.column}exports.onSessionChange=function(e){var session=e.session;if(!session.multiSelect){session.$selectionMarkers=[];session.selection.$initRangeList();session.multiSelect=session.selection}this.multiSelect=session.multiSelect;var oldSession=e.oldSession;if(oldSession){oldSession.multiSelect.removeEventListener("addRange",this.$onAddRange);oldSession.multiSelect.removeEventListener("removeRange",this.$onRemoveRange);oldSession.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect);oldSession.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)}session.multiSelect.on("addRange",this.$onAddRange);session.multiSelect.on("removeRange",this.$onRemoveRange);session.multiSelect.on("multiSelect",this.$onMultiSelect);session.multiSelect.on("singleSelect",this.$onSingleSelect);if(this.inMultiSelectMode!=session.selection.inMultiSelectMode){if(session.selection.inMultiSelectMode)this.$onMultiSelect();else this.$onSingleSelect()}};function MultiSelect(editor){editor.$onAddRange=editor.$onAddRange.bind(editor);editor.$onRemoveRange=editor.$onRemoveRange.bind(editor);editor.$onMultiSelect=editor.$onMultiSelect.bind(editor);editor.$onSingleSelect=editor.$onSingleSelect.bind(editor);exports.onSessionChange.call(editor,editor);editor.on("changeSession",exports.onSessionChange.bind(editor));editor.on("mousedown",onMouseDown);editor.commands.addCommands(commands.defaultCommands);addAltCursorListeners(editor)}function addAltCursorListeners(editor){var el=editor.textInput.getElement();var altCursor=false;var contentEl=editor.renderer.content;event.addListener(el,"keydown",function(e){if(e.keyCode==18&&!(e.ctrlKey||e.shiftKey||e.metaKey)){if(!altCursor){contentEl.style.cursor="crosshair";altCursor=true}}else if(altCursor){contentEl.style.cursor=""}});event.addListener(el,"keyup",reset);event.addListener(el,"blur",reset);function reset(){if(altCursor){contentEl.style.cursor="";altCursor=false}}}exports.MultiSelect=MultiSelect});define("ace/virtual_renderer",["require","exports","module","./lib/oop","./lib/dom","./lib/event","./lib/useragent","./config","./layer/gutter","./layer/marker","./layer/text","./layer/cursor","./scrollbar","./renderloop","./lib/event_emitter","./requirejs/text!./css/editor.css"],function(require,exports,module){var oop=require("./lib/oop");var dom=require("./lib/dom");var event=require("./lib/event");var useragent=require("./lib/useragent");var config=require("./config");var GutterLayer=require("./layer/gutter").Gutter;var MarkerLayer=require("./layer/marker").Marker;var TextLayer=require("./layer/text").Text;var CursorLayer=require("./layer/cursor").Cursor;var ScrollBar=require("./scrollbar").ScrollBar;var RenderLoop=require("./renderloop").RenderLoop;var EventEmitter=require("./lib/event_emitter").EventEmitter;var editorCss=require("./requirejs/text!./css/editor.css");dom.importCssString(editorCss,"ace_editor");var VirtualRenderer=function(container,theme){var _self=this;this.container=container||dom.createElement("div");this.$keepTextAreaAtCursor=!useragent.isIE;dom.addCssClass(this.container,"ace_editor");this.setTheme(theme);this.$gutter=dom.createElement("div");this.$gutter.className="ace_gutter";this.container.appendChild(this.$gutter);this.scroller=dom.createElement("div");this.scroller.className="ace_scroller";this.container.appendChild(this.scroller);this.content=dom.createElement("div");this.content.className="ace_content";this.scroller.appendChild(this.content);this.$gutterLayer=new GutterLayer(this.$gutter);this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this));this.$markerBack=new MarkerLayer(this.content);var textLayer=this.$textLayer=new TextLayer(this.content);this.canvas=textLayer.element;this.$markerFront=new MarkerLayer(this.content);this.$cursorLayer=new CursorLayer(this.content);this.$horizScroll=false;this.scrollBar=new ScrollBar(this.container);this.scrollBar.addEventListener("scroll",function(e){if(!_self.$inScrollAnimation)_self.session.setScrollTop(e.data)});this.scrollTop=0;this.scrollLeft=0;event.addListener(this.scroller,"scroll",function(){var scrollLeft=_self.scroller.scrollLeft;_self.scrollLeft=scrollLeft;_self.session.setScrollLeft(scrollLeft)});this.cursorPos={row:0,column:0};this.$textLayer.addEventListener("changeCharacterSize",function(){_self.updateCharacterSize();_self.onResize(true)});this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0};this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1};this.$loop=new RenderLoop(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView);this.$loop.schedule(this.CHANGE_FULL);this.updateCharacterSize();this.setPadding(4);config.resetOptions(this);config._emit("renderer",this)};!function(){this.CHANGE_CURSOR=1;this.CHANGE_MARKER=2;this.CHANGE_GUTTER=4;this.CHANGE_SCROLL=8;this.CHANGE_LINES=16;this.CHANGE_TEXT=32;this.CHANGE_SIZE=64;this.CHANGE_MARKER_BACK=128;this.CHANGE_MARKER_FRONT=256;this.CHANGE_FULL=512;this.CHANGE_H_SCROLL=1024;oop.implement(this,EventEmitter);this.updateCharacterSize=function(){if(this.$textLayer.allowBoldFonts!=this.$allowBoldFonts){this.$allowBoldFonts=this.$textLayer.allowBoldFonts;this.setStyle("ace_nobold",!this.$allowBoldFonts)}this.characterWidth=this.$textLayer.getCharacterWidth();this.lineHeight=this.$textLayer.getLineHeight();this.$updatePrintMargin()};this.setSession=function(session){this.session=session;this.scroller.className="ace_scroller";this.$cursorLayer.setSession(session);this.$markerBack.setSession(session);this.$markerFront.setSession(session);this.$gutterLayer.setSession(session);this.$textLayer.setSession(session);this.$loop.schedule(this.CHANGE_FULL)};this.updateLines=function(firstRow,lastRow){if(lastRow===undefined)lastRow=Infinity;if(!this.$changedLines){this.$changedLines={firstRow:firstRow,lastRow:lastRow}}else{if(this.$changedLines.firstRow>firstRow)this.$changedLines.firstRow=firstRow;if(this.$changedLines.lastRow<lastRow)this.$changedLines.lastRow=lastRow}if(this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow)return;this.$loop.schedule(this.CHANGE_LINES)};this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER);this.$textLayer.onChangeTabSize()};this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)};this.updateFull=function(force){if(force)this.$renderChanges(this.CHANGE_FULL,true);else this.$loop.schedule(this.CHANGE_FULL)};this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()};this.onResize=function(force,gutterWidth,width,height){var changes=0;var size=this.$size;if(this.resizing>2)return;else if(this.resizing>1)this.resizing++;else this.resizing=force?1:0;if(!height)height=dom.getInnerHeight(this.container);if(height&&(force||size.height!=height)){size.height=height;changes=this.CHANGE_SIZE;size.scrollerHeight=this.scroller.clientHeight;if(!size.scrollerHeight){size.scrollerHeight=size.height;if(this.$horizScroll)size.scrollerHeight-=this.scrollBar.getWidth()}this.scrollBar.setHeight(size.scrollerHeight);if(this.session){this.session.setScrollTop(this.getScrollTop());changes=changes|this.CHANGE_FULL}}if(!width)width=dom.getInnerWidth(this.container);if(width&&(force||this.resizing>1||size.width!=width)){changes=this.CHANGE_SIZE;size.width=width;var gutterWidth=this.$showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=gutterWidth+"px";size.scrollerWidth=Math.max(0,width-gutterWidth-this.scrollBar.getWidth());this.scroller.style.right=this.scrollBar.getWidth()+"px";if(this.session.getUseWrapMode()&&this.adjustWrapLimit()||force)changes=changes|this.CHANGE_FULL}if(!this.$size.scrollerHeight)return;if(force)this.$renderChanges(changes,true);else this.$loop.schedule(changes);if(force)this.$gutterLayer.$padding=null;if(force)delete this.resizing};this.onGutterResize=function(){var width=this.$size.width;var gutterWidth=this.$showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=gutterWidth+"px";this.$size.scrollerWidth=Math.max(0,width-gutterWidth-this.scrollBar.getWidth());if(this.session.getUseWrapMode()&&this.adjustWrapLimit())this.$loop.schedule(this.CHANGE_FULL)};this.adjustWrapLimit=function(){var availableWidth=this.$size.scrollerWidth-this.$padding*2;var limit=Math.floor(availableWidth/this.characterWidth);return this.session.adjustWrapLimit(limit,this.$showPrintMargin&&this.$printMarginColumn)};this.setAnimatedScroll=function(shouldAnimate){this.setOption("animatedScroll",shouldAnimate)};this.getAnimatedScroll=function(){return this.$animatedScroll};this.setShowInvisibles=function(showInvisibles){this.setOption("showInvisibles",showInvisibles)};this.getShowInvisibles=function(){return this.getOption("showInvisibles")};this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")};this.setDisplayIndentGuides=function(display){this.setOption("displayIndentGuides",display)};this.setShowPrintMargin=function(showPrintMargin){this.setOption("showPrintMargin",showPrintMargin)};this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")};this.setPrintMarginColumn=function(showPrintMargin){this.setOption("printMarginColumn",showPrintMargin)};this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")};this.getShowGutter=function(){return this.getOption("showGutter")};this.setShowGutter=function(show){return this.setOption("showGutter",show)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.setFadeFoldWidgets=function(show){this.setOption("fadeFoldWidgets",show)};this.setHighlightGutterLine=function(shouldHighlight){this.setOption("highlightGutterLine",shouldHighlight)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.$updateGutterLineHighlight=function(){var pos=this.$cursorLayer.$pixelPos;var height=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var cursor=this.session.selection.getCursor();cursor.column=0;pos=this.$cursorLayer.getPixelPosition(cursor,true);height*=this.session.getRowLength(cursor.row)}this.$gutterLineHighlight.style.top=pos.top-this.layerConfig.offset+"px";this.$gutterLineHighlight.style.height=height+"px"};this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var containerEl=dom.createElement("div");containerEl.className="ace_layer ace_print-margin-layer";this.$printMarginEl=dom.createElement("div");this.$printMarginEl.className="ace_print-margin";containerEl.appendChild(this.$printMarginEl);this.content.insertBefore(containerEl,this.content.firstChild)}var style=this.$printMarginEl.style;style.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px";style.visibility=this.$showPrintMargin?"visible":"hidden";if(this.session&&this.session.$wrap==-1)this.adjustWrapLimit()};this.getContainerElement=function(){return this.container};this.getMouseEventTarget=function(){return this.content};this.getTextAreaContainer=function(){return this.container};this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var config=this.layerConfig;var posTop=this.$cursorLayer.$pixelPos.top;var posLeft=this.$cursorLayer.$pixelPos.left;posTop-=config.offset;var h=this.lineHeight;if(posTop<0||posTop>config.height-h)return;var w=this.characterWidth;if(this.$composition){var val=this.textarea.value.replace(/^\x01+/,"");w*=this.session.$getStringScreenWidth(val)[0];h+=2;posTop-=1}posLeft-=this.scrollLeft;if(posLeft>this.$size.scrollerWidth-w)posLeft=this.$size.scrollerWidth-w;posLeft-=this.scrollBar.width;this.textarea.style.height=h+"px";this.textarea.style.width=w+"px";this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-posLeft-w)+"px";this.textarea.style.bottom=Math.max(0,this.$size.height-posTop-h)+"px"};this.getFirstVisibleRow=function(){return this.layerConfig.firstRow};this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)};this.getLastFullyVisibleRow=function(){var flint=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+flint};this.getLastVisibleRow=function(){return this.layerConfig.lastRow};this.$padding=null;this.setPadding=function(padding){this.$padding=padding;this.$textLayer.setPadding(padding);this.$cursorLayer.setPadding(padding);this.$markerFront.setPadding(padding);this.$markerBack.setPadding(padding);this.$loop.schedule(this.CHANGE_FULL);this.$updatePrintMargin()};this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible};this.setHScrollBarAlwaysVisible=function(alwaysVisible){this.setOption("hScrollBarAlwaysVisible",alwaysVisible)};this.$updateScrollBar=function(){this.scrollBar.setInnerHeight(this.layerConfig.maxHeight);this.scrollBar.setScrollTop(this.scrollTop)};this.$renderChanges=function(changes,force){if(!force&&(!changes||!this.session||!this.container.offsetWidth))return;this._signal("beforeRender");if(changes&this.CHANGE_FULL||changes&this.CHANGE_SIZE||changes&this.CHANGE_TEXT||changes&this.CHANGE_LINES||changes&this.CHANGE_SCROLL)this.$computeLayerConfig();if(changes&this.CHANGE_H_SCROLL){this.scroller.scrollLeft=this.scrollLeft;var scrollLeft=this.scroller.scrollLeft;this.scrollLeft=scrollLeft;this.session.setScrollLeft(scrollLeft);this.scroller.className=this.scrollLeft==0?"ace_scroller":"ace_scroller ace_scroll-left"}if(changes&this.CHANGE_FULL){this.$textLayer.checkForSizeChanges();this.$updateScrollBar();this.$textLayer.update(this.layerConfig);if(this.$showGutter)this.$gutterLayer.update(this.layerConfig);this.$markerBack.update(this.layerConfig);this.$markerFront.update(this.layerConfig);this.$cursorLayer.update(this.layerConfig);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight();this._signal("afterRender");return}if(changes&this.CHANGE_SCROLL){if(changes&this.CHANGE_TEXT||changes&this.CHANGE_LINES)this.$textLayer.update(this.layerConfig);else this.$textLayer.scrollLines(this.layerConfig);if(this.$showGutter)this.$gutterLayer.update(this.layerConfig);this.$markerBack.update(this.layerConfig);this.$markerFront.update(this.layerConfig);this.$cursorLayer.update(this.layerConfig);this.$highlightGutterLine&&this.$updateGutterLineHighlight();this.$moveTextAreaToCursor();this.$updateScrollBar();this._signal("afterRender");return}if(changes&this.CHANGE_TEXT){this.$textLayer.update(this.layerConfig);if(this.$showGutter)this.$gutterLayer.update(this.layerConfig)}else if(changes&this.CHANGE_LINES){if(this.$updateLines()||changes&this.CHANGE_GUTTER&&this.$showGutter)this.$gutterLayer.update(this.layerConfig)}else if(changes&this.CHANGE_TEXT||changes&this.CHANGE_GUTTER){if(this.$showGutter)this.$gutterLayer.update(this.layerConfig)}if(changes&this.CHANGE_CURSOR){this.$cursorLayer.update(this.layerConfig);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight()}if(changes&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)){this.$markerFront.update(this.layerConfig)}if(changes&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)){this.$markerBack.update(this.layerConfig)}if(changes&this.CHANGE_SIZE)this.$updateScrollBar();this._signal("afterRender")};this.$computeLayerConfig=function(){if(!this.$size.scrollerHeight)return this.onResize(true);var session=this.session;var offset=this.scrollTop%this.lineHeight;var minHeight=this.$size.scrollerHeight+this.lineHeight;var longestLine=this.$getLongestLine();var horizScroll=this.$hScrollBarAlwaysVisible||this.$size.scrollerWidth-longestLine<0;var horizScrollChanged=this.$horizScroll!==horizScroll;this.$horizScroll=horizScroll;if(horizScrollChanged){this.scroller.style.overflowX=horizScroll?"scroll":"hidden";if(!horizScroll)this.session.setScrollLeft(0)}var maxHeight=this.session.getScreenLength()*this.lineHeight;this.session.setScrollTop(Math.max(0,Math.min(this.scrollTop,maxHeight-this.$size.scrollerHeight)));var lineCount=Math.ceil(minHeight/this.lineHeight)-1;var firstRow=Math.max(0,Math.round((this.scrollTop-offset)/this.lineHeight));var lastRow=firstRow+lineCount;var firstRowScreen,firstRowHeight;var lineHeight=this.lineHeight;firstRow=session.screenToDocumentRow(firstRow,0);var foldLine=session.getFoldLine(firstRow);if(foldLine){firstRow=foldLine.start.row}firstRowScreen=session.documentToScreenRow(firstRow,0);firstRowHeight=session.getRowLength(firstRow)*lineHeight;lastRow=Math.min(session.screenToDocumentRow(lastRow,0),session.getLength()-1);minHeight=this.$size.scrollerHeight+session.getRowLength(lastRow)*lineHeight+firstRowHeight;offset=this.scrollTop-firstRowScreen*lineHeight;this.layerConfig={width:longestLine,padding:this.$padding,firstRow:firstRow,firstRowScreen:firstRowScreen,lastRow:lastRow,lineHeight:lineHeight,characterWidth:this.characterWidth,minHeight:minHeight,maxHeight:maxHeight,offset:offset,height:this.$size.scrollerHeight};this.$gutterLayer.element.style.marginTop=-offset+"px";this.content.style.marginTop=-offset+"px";this.content.style.width=longestLine+2*this.$padding+"px";this.content.style.height=minHeight+"px";if(horizScrollChanged)this.onResize(true)};this.$updateLines=function(){var firstRow=this.$changedLines.firstRow;var lastRow=this.$changedLines.lastRow;this.$changedLines=null;var layerConfig=this.layerConfig;if(firstRow>layerConfig.lastRow+1){return}if(lastRow<layerConfig.firstRow){return}if(lastRow===Infinity){if(this.$showGutter)this.$gutterLayer.update(layerConfig);this.$textLayer.update(layerConfig);return}this.$textLayer.updateLines(layerConfig,firstRow,lastRow);return true};this.$getLongestLine=function(){var charCount=this.session.getScreenWidth();if(this.$textLayer.showInvisibles)charCount+=1;return Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(charCount*this.characterWidth))};this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(true));this.$loop.schedule(this.CHANGE_MARKER_FRONT)};this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers());this.$loop.schedule(this.CHANGE_MARKER_BACK)};this.addGutterDecoration=function(row,className){this.$gutterLayer.addGutterDecoration(row,className)};this.removeGutterDecoration=function(row,className){this.$gutterLayer.removeGutterDecoration(row,className)};this.updateBreakpoints=function(rows){this.$loop.schedule(this.CHANGE_GUTTER)};this.setAnnotations=function(annotations){this.$gutterLayer.setAnnotations(annotations);this.$loop.schedule(this.CHANGE_GUTTER)};this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)};this.hideCursor=function(){this.$cursorLayer.hideCursor()};this.showCursor=function(){this.$cursorLayer.showCursor()};this.scrollSelectionIntoView=function(anchor,lead,offset){this.scrollCursorIntoView(anchor,offset);this.scrollCursorIntoView(lead,offset)};this.scrollCursorIntoView=function(cursor,offset){if(this.$size.scrollerHeight===0)return;var pos=this.$cursorLayer.getPixelPosition(cursor);var left=pos.left;var top=pos.top;if(this.scrollTop>top){if(offset)top-=offset*this.$size.scrollerHeight;this.session.setScrollTop(top)}else if(this.scrollTop+this.$size.scrollerHeight<top+this.lineHeight){if(offset)top+=offset*this.$size.scrollerHeight;this.session.setScrollTop(top+this.lineHeight-this.$size.scrollerHeight)}var scrollLeft=this.scrollLeft;if(scrollLeft>left){if(left<this.$padding+2*this.layerConfig.characterWidth)left=0;this.session.setScrollLeft(left)}else if(scrollLeft+this.$size.scrollerWidth<left+this.characterWidth){this.session.setScrollLeft(Math.round(left+this.characterWidth-this.$size.scrollerWidth))}};this.getScrollTop=function(){return this.session.getScrollTop()};this.getScrollLeft=function(){return this.session.getScrollLeft()};this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight};this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)};this.scrollToRow=function(row){this.session.setScrollTop(row*this.lineHeight)};this.alignCursor=function(cursor,alignment){if(typeof cursor=="number")cursor={row:cursor,column:0};var pos=this.$cursorLayer.getPixelPosition(cursor);var h=this.$size.scrollerHeight-this.lineHeight;var offset=pos.top-h*(alignment||0);this.session.setScrollTop(offset);return offset};this.STEPS=8;this.$calcSteps=function(fromValue,toValue){var i=0;var l=this.STEPS;var steps=[];var func=function(t,x_min,dx){return dx*(Math.pow(t-1,3)+1)+x_min};for(i=0;i<l;++i)steps.push(func(i/this.STEPS,fromValue,toValue-fromValue));return steps};this.scrollToLine=function(line,center,animate,callback){var pos=this.$cursorLayer.getPixelPosition({row:line,column:0});var offset=pos.top;if(center)offset-=this.$size.scrollerHeight/2;var initialScroll=this.scrollTop;this.session.setScrollTop(offset);if(animate!==false)this.animateScrolling(initialScroll,callback)};this.animateScrolling=function(fromValue,callback){var toValue=this.scrollTop;if(this.$animatedScroll&&Math.abs(fromValue-toValue)<1e5){var _self=this;var steps=_self.$calcSteps(fromValue,toValue);this.$inScrollAnimation=true;clearInterval(this.$timer);_self.session.setScrollTop(steps.shift());this.$timer=setInterval(function(){if(steps.length){_self.session.setScrollTop(steps.shift());_self.session.$scrollTop=toValue}else if(toValue!=null){_self.session.$scrollTop=-1;_self.session.setScrollTop(toValue);toValue=null}else{_self.$timer=clearInterval(_self.$timer);_self.$inScrollAnimation=false;callback&&callback()}},10)}};this.scrollToY=function(scrollTop){if(this.scrollTop!==scrollTop){this.$loop.schedule(this.CHANGE_SCROLL);this.scrollTop=scrollTop}};this.scrollToX=function(scrollLeft){if(scrollLeft<0)scrollLeft=0;if(this.scrollLeft!==scrollLeft)this.scrollLeft=scrollLeft;this.$loop.schedule(this.CHANGE_H_SCROLL)};this.scrollBy=function(deltaX,deltaY){deltaY&&this.session.setScrollTop(this.session.getScrollTop()+deltaY);deltaX&&this.session.setScrollLeft(this.session.getScrollLeft()+deltaX)};this.isScrollableBy=function(deltaX,deltaY){if(deltaY<0&&this.session.getScrollTop()>=1)return true;if(deltaY>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1)return true};this.pixelToScreenCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect();var offset=(x+this.scrollLeft-canvasPos.left-this.$padding)/this.characterWidth;var row=Math.floor((y+this.scrollTop-canvasPos.top)/this.lineHeight);var col=Math.round(offset);return{row:row,column:col,side:offset-col>0?1:-1}};this.screenToTextCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect();var col=Math.round((x+this.scrollLeft-canvasPos.left-this.$padding)/this.characterWidth);
var row=Math.floor((y+this.scrollTop-canvasPos.top)/this.lineHeight);return this.session.screenToDocumentPosition(row,Math.max(col,0))};this.textToScreenCoordinates=function(row,column){var canvasPos=this.scroller.getBoundingClientRect();var pos=this.session.documentToScreenPosition(row,column);var x=this.$padding+Math.round(pos.column*this.characterWidth);var y=pos.row*this.lineHeight;return{pageX:canvasPos.left+x-this.scrollLeft,pageY:canvasPos.top+y-this.scrollTop}};this.visualizeFocus=function(){dom.addCssClass(this.container,"ace_focus")};this.visualizeBlur=function(){dom.removeCssClass(this.container,"ace_focus")};this.showComposition=function(position){if(!this.$composition)this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText};this.$keepTextAreaAtCursor=true;dom.addCssClass(this.textarea,"ace_composition");this.textarea.style.cssText="";this.$moveTextAreaToCursor()};this.setCompositionText=function(text){this.$moveTextAreaToCursor()};this.hideComposition=function(){if(!this.$composition)return;dom.removeCssClass(this.textarea,"ace_composition");this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor;this.textarea.style.cssText=this.$composition.cssText;this.$composition=null};this.setTheme=function(theme){var _self=this;this.$themeValue=theme;_self._dispatchEvent("themeChange",{theme:theme});if(!theme||typeof theme=="string"){var moduleName=theme||"ace/theme/textmate";config.loadModule(["theme",moduleName],afterLoad)}else{afterLoad(theme)}function afterLoad(theme){if(!theme.cssClass)return;dom.importCssString(theme.cssText,theme.cssClass,_self.container.ownerDocument);if(_self.theme)dom.removeCssClass(_self.container,_self.theme.cssClass);_self.$theme=theme.cssClass;_self.theme=theme;dom.addCssClass(_self.container,theme.cssClass);dom.setCssClass(_self.container,"ace_dark",theme.isDark);var padding=theme.padding||4;if(_self.$padding&&padding!=_self.$padding)_self.setPadding(padding);if(_self.$size){_self.$size.width=0;_self.onResize()}_self._dispatchEvent("themeLoaded",{theme:theme})}};this.getTheme=function(){return this.$themeValue};this.setStyle=function setStyle(style,include){dom.setCssClass(this.container,style,include!=false)};this.unsetStyle=function unsetStyle(style){dom.removeCssClass(this.container,style)};this.destroy=function(){this.$textLayer.destroy();this.$cursorLayer.destroy()}}.call(VirtualRenderer.prototype);config.defineOptions(VirtualRenderer.prototype,"renderer",{animatedScroll:{initialValue:false},showInvisibles:{set:function(value){if(this.$textLayer.setShowInvisibles(value))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:false},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:true},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(val){if(typeof val=="number")this.$printMarginColumn=val;this.$showPrintMargin=!!val;this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(show){this.$gutter.style.display=show?"block":"none";this.onGutterResize()},initialValue:true},fadeFoldWidgets:{set:function(show){dom.setCssClass(this.$gutter,"ace_fade-fold-widgets",show)},initialValue:false},showFoldWidgets:{set:function(show){this.$gutterLayer.setShowFoldWidgets(show)},initialValue:true},displayIndentGuides:{set:function(show){if(this.$textLayer.setDisplayIndentGuides(show))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:true},highlightGutterLine:{set:function(shouldHighlight){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=dom.createElement("div");this.$gutterLineHighlight.className="ace_gutter-active-line";this.$gutter.appendChild(this.$gutterLineHighlight);return}this.$gutterLineHighlight.style.display=shouldHighlight?"":"none";if(this.$cursorLayer.$pixelPos)this.$updateGutterLineHighlight()},initialValue:false,value:true},hScrollBarAlwaysVisible:{set:function(alwaysVisible){this.$hScrollBarAlwaysVisible=alwaysVisible;if(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},fontSize:{set:function(size){if(typeof size=="number")size=size+"px";this.container.style.fontSize=size;this.updateFontSize()},initialValue:12},fontFamily:{set:function(name){this.container.style.fontFamily=name;this.updateFontSize()}}});exports.VirtualRenderer=VirtualRenderer});define("ace/worker/worker_client",["require","exports","module","../lib/oop","../lib/event_emitter","../config"],function(require,exports,module){var oop=require("../lib/oop");var EventEmitter=require("../lib/event_emitter").EventEmitter;var config=require("../config");var WorkerClient=function(topLevelNamespaces,mod,classname){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.onMessage=this.onMessage.bind(this);this.onError=this.onError.bind(this);var workerUrl;if(config.get("packaged")){workerUrl=config.moduleUrl(mod,"worker")}else{var normalizePath=this.$normalizePath;if(require.nameToUrl&&!require.toUrl)require.toUrl=require.nameToUrl;workerUrl=normalizePath(require.toUrl("ace/worker/worker.js",null,"_"));var tlns={};topLevelNamespaces.forEach(function(ns){tlns[ns]=normalizePath(require.toUrl(ns,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}this.$worker=new Worker(workerUrl);this.$worker.postMessage({init:true,tlns:tlns,module:mod,classname:classname});this.callbackId=1;this.callbacks={};this.$worker.onerror=this.onError;this.$worker.onmessage=this.onMessage};!function(){oop.implement(this,EventEmitter);this.onError=function(e){window.console&&console.log&&console.log(e);throw e};this.onMessage=function(e){var msg=e.data;switch(msg.type){case"log":window.console&&console.log&&console.log.apply(console,msg.data);break;case"event":this._emit(msg.name,{data:msg.data});break;case"call":var callback=this.callbacks[msg.id];if(callback){callback(msg.data);delete this.callbacks[msg.id]}break}};this.$normalizePath=function(path){if(!location.host)return path;path=path.replace(/^[a-z]+:\/\/[^\/]+/,"");path=location.protocol+"//"+location.host+(path.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+path.replace(/^[\/]+/,"");return path};this.terminate=function(){this._emit("terminate",{});this.$worker.terminate();this.$worker=null;this.$doc.removeEventListener("change",this.changeListener);this.$doc=null};this.send=function(cmd,args){this.$worker.postMessage({command:cmd,args:args})};this.call=function(cmd,args,callback){if(callback){var id=this.callbackId++;this.callbacks[id]=callback;args.push(id)}this.send(cmd,args)};this.emit=function(event,data){try{this.$worker.postMessage({event:event,data:{data:data.data}})}catch(ex){}};this.attachToDocument=function(doc){if(this.$doc)this.terminate();this.$doc=doc;this.call("setValue",[doc.getValue()]);doc.on("change",this.changeListener)};this.changeListener=function(e){if(!this.deltaQueue){this.deltaQueue=[e.data];setTimeout(this.$sendDeltaQueue,1)}else this.deltaQueue.push(e.data)};this.$sendDeltaQueue=function(){var q=this.deltaQueue;if(!q)return;this.deltaQueue=null;if(q.length>20&&q.length>this.$doc.getLength()>>1){this.call("setValue",[this.$doc.getValue()])}else this.emit("change",{data:q})}}.call(WorkerClient.prototype);var UIWorkerClient=function(topLevelNamespaces,mod,classname){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.callbackId=1;this.callbacks={};this.messageBuffer=[];var main=null;var sender=Object.create(EventEmitter);var _self=this;this.$worker={};this.$worker.terminate=function(){};this.$worker.postMessage=function(e){_self.messageBuffer.push(e);main&&setTimeout(processNext)};var processNext=function(){var msg=_self.messageBuffer.shift();if(msg.command)main[msg.command].apply(main,msg.args);else if(msg.event)sender._emit(msg.event,msg.data)};sender.postMessage=function(msg){_self.onMessage({data:msg})};sender.callback=function(data,callbackId){this.postMessage({type:"call",id:callbackId,data:data})};sender.emit=function(name,data){this.postMessage({type:"event",name:name,data:data})};config.loadModule(["worker",mod],function(Main){main=new Main[classname](sender);while(_self.messageBuffer.length)processNext()})};UIWorkerClient.prototype=WorkerClient.prototype;exports.UIWorkerClient=UIWorkerClient;exports.WorkerClient=WorkerClient});define("ace/ace",["require","exports","module","./lib/fixoldbrowsers","./lib/dom","./lib/event","./editor","./edit_session","./undomanager","./virtual_renderer","./multi_select","./worker/worker_client","./keyboard/hash_handler","./placeholder","./mode/folding/fold_mode","./theme/textmate","./config"],function(require,exports,module){require("./lib/fixoldbrowsers");var dom=require("./lib/dom");var event=require("./lib/event");var Editor=require("./editor").Editor;var EditSession=require("./edit_session").EditSession;var UndoManager=require("./undomanager").UndoManager;var Renderer=require("./virtual_renderer").VirtualRenderer;var MultiSelect=require("./multi_select").MultiSelect;require("./worker/worker_client");require("./keyboard/hash_handler");require("./placeholder");require("./mode/folding/fold_mode");require("./theme/textmate");exports.config=require("./config");exports.require=require;exports.edit=function(el){if(typeof el=="string"){var _id=el;var el=document.getElementById(_id);if(!el)throw"ace.edit can't find div #"+_id}if(el.env&&el.env.editor instanceof Editor)return el.env.editor;var doc=exports.createEditSession(dom.getInnerText(el));el.innerHTML="";var editor=new Editor(new Renderer(el));new MultiSelect(editor);editor.setSession(doc);var env={document:doc,editor:editor,onResize:editor.resize.bind(editor,null)};event.addListener(window,"resize",env.onResize);editor.on("destroy",function(){event.removeListener(window,"resize",env.onResize)});el.env=editor.env=env;return editor};exports.createEditSession=function(text,mode){var doc=new EditSession(text,doc);doc.setUndoManager(new UndoManager);return doc};exports.EditSession=EditSession;exports.UndoManager=UndoManager});define("ace/mode/quirrel_highlight_rules",["require","exports","module","../lib/oop","../lib/lang","./text_highlight_rules"],function(require,exports,module){var oop=require("../lib/oop");var lang=require("../lib/lang");var TextHighlightRules=require("./text_highlight_rules").TextHighlightRules;var QuirrelHighlightRules=function(){var keywords=lang.arrayToMap("difference|else|solve|if|import|intersect|new|then|union|where|with".split("|"));var builtinConstants=lang.arrayToMap("true|false|undefined|null".split("|"));var builtinFunctions=lang.arrayToMap("count|distinct|load|max|mean|geometricMean|sumSq|variance|median|min|mode|stdDev|sum".split("|"));var identifier="[A-Za-z_][A-Za-z0-9_']*";var start=[{token:"constant.language",regex:"import",next:"import"},{token:"comment",regex:"--.*$"},{token:"comment",regex:"\\(-",merge:true,next:"comment"},{token:"variable",regex:"['][A-Za-z][A-Za-z_0-9]*"},{token:"identifier",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:[^=])'},{token:"identifier",regex:"[`](?:(?:\\\\.)|(?:[^`\\\\]))*?[`]\\s*(?=:[^=])"},{token:"string",regex:'"(?:\\\\"|[^"])*"'},{token:"string",regex:"`[^`]*`"},{token:"string",regex:"/(?:/[a-zA-Z_0-9-]+)+\\b"},{token:"constant.numeric",regex:"[0-9]+(?:\\\\.[0-9]+)?(?:[eE][0-9]+)?"},{token:"keyword.operator",regex:"~|:=|\\+|\\/|\\-|\\*|&|\\||<|>|<=|=>|!=|<>|=|!|neg|union\\b"},{token:["support.function","paren.lparen"],regex:"("+identifier+")(\\s*[(])"},{token:function(value){if(keywords.hasOwnProperty(value))return"keyword";else if(builtinConstants.hasOwnProperty(value))return"constant.language";else if(builtinFunctions.hasOwnProperty(value))return"support.function";else return"identifier"},regex:"(?:[a-zA-Z]['a-zA-Z_0-9]*\\b)"},{token:"paren.lparen",regex:"[([{]"},{token:"paren.rparen",regex:"[)}\\]]"},{token:"punctuation.operator",regex:"[,]"}];this.$rules={start:start,"import":[{token:"support.function",regex:"\\s*(?:[*]|[a-z0-9_]+)(?:\\s*$|\\s+)",next:"start"},{token:"support.function",regex:"\\s*[a-z0-9_]+\\s*"},{token:"keyword.operator",regex:"[:]{2}"}],comment:[{token:"comment",regex:".*?-\\)",next:"start"},{token:"comment",merge:true,regex:".+"}]}};oop.inherits(QuirrelHighlightRules,TextHighlightRules);exports.QuirrelHighlightRules=QuirrelHighlightRules});define("ace/mode/quirrel",["require","exports","module","../lib/oop","./text","../tokenizer","./quirrel_highlight_rules","../range"],function(require,exports,module){var oop=require("../lib/oop");var TextMode=require("./text").Mode;var Tokenizer=require("../tokenizer").Tokenizer;var QuirrelHighlightRules=require("./quirrel_highlight_rules").QuirrelHighlightRules;var Range=require("../range").Range;var Mode=function(){this.$tokenizer=new Tokenizer((new QuirrelHighlightRules).getRules())};oop.inherits(Mode,TextMode);!function(){this.toggleCommentLines=function(state,doc,startRow,endRow){var outdent=true;var outentedRows=[];var re=/^(\s*)--/;for(var i=startRow;i<=endRow;i++){if(!re.test(doc.getLine(i))){outdent=false;break}}if(outdent){var deleteRange=new Range(0,0,0,0);for(var i=startRow;i<=endRow;i++){var line=doc.getLine(i);var m=line.match(re);deleteRange.start.row=i;deleteRange.end.row=i;deleteRange.end.column=m[0].length;doc.replace(deleteRange,m[1])}}else{doc.indentRows(startRow,endRow,"--")}}}.call(Mode.prototype);exports.Mode=Mode});define("app/editorsync",[],function(){return function(editor,editors,config){function change(_,code){editors.setCode(""+code)}function monitor(_,code){editor.set(""+code)}$(editors).on("deactivated",function(_,index){editors.monitor.unbind(editors.getKey(index)+".code",monitor);$(editor).off("change",change);editors.setCode(editor.get(),index)});$(editors).on("activated",function(_,index){editor.set(""+editors.getCode(index));$(editor).on("change",change);editor.focus();editors.monitor.bind(editors.getKey(index)+".code",monitor)})}});define("app/util/jsonmodel",[],function(){function formatCell(row,cell,value,columnDef,dataContext,subordinate){if("undefined"===typeof value){return"[undefined]"}else if(value===null){return"[null]"}else if(value instanceof Array){var result=[];for(var i=0;i<value.length;i++){result.push(formatCell(row,cell,value[i],columnDef,dataContext,true))}return result.join("; ")}else if("object"===typeof value){var result=[];for(var key in value){if(value.hasOwnProperty(key)){var pair=key+": "+formatCell(row,cell,value[key],columnDef,dataContext,true);result.push(pair)}}return result.join(", ")}else if(value===""){return"[empty]"}else if(isNaN(value)){value=value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return'"'+value.replace(/"/g,'\\"')+'"'}else{return value}}var now=new Date,mindate=+new Date(now.getFullYear()-10,now.getMonth(),now.getDay(),0,0,0),maxdate=+new Date(now.getFullYear()+10,now.getMonth(),now.getDay(),0,0,0);function canParse(d){try{ReportGrid.date.parse(d);return true}catch(e){return false}}function periodicity(t1,t2){var delta=t2-t1;if(delta>=3*1e3*60*60*24*365)return"year";else if(delta>=3*1e3*60*60*24*31)return"month";else if(delta>=7*1e3*60*60*24)return"day";else return"minute"}return{create:function(data){var value=data[0],columns=[];if(value!==null&&"object"===typeof value){for(var key in value){var v=value[key];if(!value.hasOwnProperty(key)||key==="#id")continue;var params={id:key,name:key,field:key,sortable:true,formatter:formatCell,pgvalue:false,type:typeof v,multivalue:v instanceof Array||"object"===this.type};if(!params.multivalue){if(params.field.match(/time|date|created/i)&&(params.type==="number"&&v>mindate&&v<maxdate||params.type==="string"&&null!==canParse(v))){params.subtype="datetime"}if(params.subtype==="datetime"&&data.length>1){data.sort(function(a,b){return ReportGrid.compare(a[key],b[key])});try{var t1=params.type==="number"?data[0][key]:ReportGrid.date.parse(data[0][key]),t2=params.type==="number"?data[data.length-1][key]:ReportGrid.date.parse(data[data.length-1][key]);params.periodicity=periodicity(t1,t2)}catch(e){}}}columns.push(params)}}else{columns.push({id:"value",name:"Value",field:"value",pgvalue:true,sortable:true,multivalue:false})}return columns},find:function(model,field){for(var i=0;i<model.length;i++)if(model[i].field===field)return model[i];return null},axis:function(model,field){var column=this.find(model,field);if(!column)return null;var axis={type:field};if(column.subtype==="datetime"&&column.periodicity){axis.type="time:"+column.periodicity;axis.transformer=function(data){if(column.type==="number"){for(var i=0;i<data.length;i++){data[i][axis.type]=data[i][column.field]}}else{for(var i=0;i<data.length;i++){data[i][axis.type]=ReportGrid.date.parse(data[i][column.field])}}return data}}return axis}}});!function(f){f.fn.drag=function(b,a,d){var e=typeof b=="string"?b:"",k=f.isFunction(b)?b:f.isFunction(a)?a:null;if(e.indexOf("drag")!==0)e="drag"+e;d=(b==k?a:d)||{};return k?this.bind(e,d,k):this.trigger(e)};var i=f.event,h=i.special,c=h.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(b){var a=f.data(this,c.datakey),d=b.data||{};a.related+=1;if(!a.live&&b.selector){a.live=true;i.add(this,"draginit."+c.livekey,c.delegate)}f.each(c.defaults,function(e){if(d[e]!==undefined)a[e]=d[e]})},remove:function(){f.data(this,c.datakey).related-=1},setup:function(){if(!f.data(this,c.datakey)){var b=f.extend({related:0},c.defaults);f.data(this,c.datakey,b);i.add(this,"mousedown",c.init,b);this.attachEvent&&this.attachEvent("ondragstart",c.dontstart)}},teardown:function(){if(!f.data(this,c.datakey).related){f.removeData(this,c.datakey);i.remove(this,"mousedown",c.init);i.remove(this,"draginit",c.delegate);c.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",c.dontstart)}},init:function(b){var a=b.data,d;if(!(a.which>0&&b.which!=a.which))if(!f(b.target).is(a.not))if(!(a.handle&&!f(b.target).closest(a.handle,b.currentTarget).length)){a.propagates=1;a.interactions=[c.interaction(this,a)];a.target=b.target;a.pageX=b.pageX;a.pageY=b.pageY;a.dragging=null;d=c.hijack(b,"draginit",a);if(a.propagates){if((d=c.flatten(d))&&d.length){a.interactions=[];f.each(d,function(){a.interactions.push(c.interaction(this,a))})}a.propagates=a.interactions.length;a.drop!==false&&h.drop&&h.drop.handler(b,a);c.textselect(false);i.add(document,"mousemove mouseup",c.handler,a);return false}}},interaction:function(b,a){return{drag:b,callback:new c.callback,droppable:[],offset:f(b)[a.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(b){var a=b.data;switch(b.type){case!a.dragging&&"mousemove":if(Math.pow(b.pageX-a.pageX,2)+Math.pow(b.pageY-a.pageY,2)<Math.pow(a.distance,2))break;b.target=a.target;c.hijack(b,"dragstart",a);if(a.propagates)a.dragging=true;case"mousemove":if(a.dragging){c.hijack(b,"drag",a);if(a.propagates){a.drop!==false&&h.drop&&h.drop.handler(b,a);break}b.type="mouseup"}case"mouseup":i.remove(document,"mousemove mouseup",c.handler);if(a.dragging){a.drop!==false&&h.drop&&h.drop.handler(b,a);c.hijack(b,"dragend",a)}c.textselect(true);if(a.click===false&&a.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);a.dragging=false}break}},delegate:function(b){var a=[],d,e=f.data(this,"events")||{};f.each(e.live||[],function(k,j){if(j.preType.indexOf("drag")===0)if(d=f(b.target).closest(j.selector,b.currentTarget)[0]){i.add(d,j.origType+"."+c.livekey,j.origHandler,j.data);f.inArray(d,a)<0&&a.push(d)}});if(!a.length)return false;return f(a).bind("dragend."+c.livekey,function(){i.remove(this,"."+c.livekey)})},hijack:function(b,a,d,e,k){if(d){var j={event:b.originalEvent,type:b.type},n=a.indexOf("drop")?"drag":"drop",l,o=e||0,g,m;e=!isNaN(e)?e:d.interactions.length;b.type=a;b.originalEvent=null;d.results=[];do if(g=d.interactions[o])if(!(a!=="dragend"&&g.cancelled)){m=c.properties(b,d,g);g.results=[];f(k||g[n]||d.droppable).each(function(q,p){l=(m.target=p)?i.handle.call(p,b,m):null;if(l===false){if(n=="drag"){g.cancelled=true;d.propagates-=1}if(a=="drop")g[n][q]=null}else if(a=="dropinit")g.droppable.push(c.element(l)||p);if(a=="dragstart")g.proxy=f(c.element(l)||g.drag)[0];g.results.push(l);delete b.result;if(a!=="dropinit")return l});d.results[o]=c.flatten(g.results);if(a=="dropinit")g.droppable=c.flatten(g.droppable);a=="dragstart"&&!g.cancelled&&m.update()}while(++o<e);b.type=j.type;b.originalEvent=j.event;return c.flatten(d.results)}},properties:function(b,a,d){var e=d.callback;e.drag=d.drag;e.proxy=d.proxy||d.drag;e.startX=a.pageX;e.startY=a.pageY;e.deltaX=b.pageX-a.pageX;e.deltaY=b.pageY-a.pageY;e.originalX=d.offset.left;e.originalY=d.offset.top;e.offsetX=b.pageX-(a.pageX-e.originalX);e.offsetY=b.pageY-(a.pageY-e.originalY);e.drop=c.flatten((d.drop||[]).slice());e.available=c.flatten((d.droppable||[]).slice());return e},element:function(b){if(b&&(b.jquery||b.nodeType==1))return b},flatten:function(b){return f.map(b,function(a){return a&&a.jquery?f.makeArray(a):a&&a.length?c.flatten(a):a})},textselect:function(b){f(document)[b?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",b?"off":"on").css("MozUserSelect",b?"":"none")},dontstart:function(){return false},callback:function(){}};c.callback.prototype={update:function(){h.drop&&this.available.length&&f.each(this.available,function(b){h.drop.locate(this,b)})}};h.draginit=h.dragstart=h.dragend=c}(jQuery);define("libs/jquery/slickgrid/jquery.event.drag-2.0.min",function(){});!function($){$.extend(true,window,{Slick:{Event:Event,EventData:EventData,EventHandler:EventHandler,Range:Range,NonDataRow:NonDataItem,Group:Group,GroupTotals:GroupTotals,EditorLock:EditorLock,GlobalEditorLock:new EditorLock}});function EventData(){var isPropagationStopped=false;var isImmediatePropagationStopped=false;this.stopPropagation=function(){isPropagationStopped=true};this.isPropagationStopped=function(){return isPropagationStopped};this.stopImmediatePropagation=function(){isImmediatePropagationStopped=true};this.isImmediatePropagationStopped=function(){return isImmediatePropagationStopped}}function Event(){var handlers=[];this.subscribe=function(fn){handlers.push(fn)};this.unsubscribe=function(fn){for(var i=handlers.length-1;i>=0;i--){if(handlers[i]===fn){handlers.splice(i,1)}}};this.notify=function(args,e,scope){e=e||new EventData;scope=scope||this;var returnValue;for(var i=0;i<handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());i++){returnValue=handlers[i].call(scope,e,args)}return returnValue}}function EventHandler(){var handlers=[];this.subscribe=function(event,handler){handlers.push({event:event,handler:handler});event.subscribe(handler);return this};this.unsubscribe=function(event,handler){var i=handlers.length;while(i--){if(handlers[i].event===event&&handlers[i].handler===handler){handlers.splice(i,1);event.unsubscribe(handler);return}}return this};this.unsubscribeAll=function(){var i=handlers.length;while(i--){handlers[i].event.unsubscribe(handlers[i].handler)}handlers=[];return this}}function Range(fromRow,fromCell,toRow,toCell){if(toRow===undefined&&toCell===undefined){toRow=fromRow;toCell=fromCell}this.fromRow=Math.min(fromRow,toRow);this.fromCell=Math.min(fromCell,toCell);this.toRow=Math.max(fromRow,toRow);this.toCell=Math.max(fromCell,toCell);this.isSingleRow=function(){return this.fromRow==this.toRow};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell};this.contains=function(row,cell){return row>=this.fromRow&&row<=this.toRow&&cell>=this.fromCell&&cell<=this.toCell};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}function NonDataItem(){this.__nonDataRow=true}function Group(){this.__group=true;this.__updated=false;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null}Group.prototype=new NonDataItem;Group.prototype.equals=function(group){return this.value===group.value&&this.count===group.count&&this.collapsed===group.collapsed};function GroupTotals(){this.__groupTotals=true;this.group=null}GroupTotals.prototype=new NonDataItem;function EditorLock(){var activeEditController=null;this.isActive=function(editController){return editController?activeEditController===editController:activeEditController!==null};this.activate=function(editController){if(editController===activeEditController){return}if(activeEditController!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController"}if(!editController.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()"}if(!editController.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()"}activeEditController=editController};this.deactivate=function(editController){if(activeEditController!==editController){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one"}activeEditController=null};this.commitCurrentEdit=function(){return activeEditController?activeEditController.commitCurrentEdit():true};this.cancelCurrentEdit=function cancelCurrentEdit(){return activeEditController?activeEditController.cancelCurrentEdit():true}}}(jQuery);define("libs/jquery/slickgrid/slick.core",function(){});if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded"}if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded"}if(typeof Slick==="undefined"){throw"slick.core.js not loaded"}!function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;var maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:false,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:50,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false,dataItemColumnValueExtractor:null,fullWidthRows:false,multiColumnSort:false,defaultFormatter:defaultFormatter};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null};var th;var h;var ph;var n;var cj;var page=0;var offset=0;var vScrollDir=1;var initialized=false;var $container;var uid="slickgrid_"+Math.round(1e6*Math.random());var self=this;var $focusSink;var $headerScroller;var $headers;var $headerRow,$headerRowScroller;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var stylesheet,columnCssRulesL,columnCssRulesR;var viewportH,viewportW;var canvasWidth;var viewportHasHScroll,viewportHasVScroll;var headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0;var absoluteColumnMinWidth;var numberOfRows=0;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var lastRenderedScrollLeft=0;var prevScrollLeft=0;var scrollLeft=0;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumns=[];var columnPosLeft=[];var columnPosRight=[];var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;function init(){$container=$(container);if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.")}maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);columnDefaults.width=options.defaultColumnWidth;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i}if(options.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded")}editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit};$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative")}$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container);$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);$headers.width(getHeadersWidth());$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide()}if(!options.showHeaderRow){$headerRowScroller.hide()}$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container);$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");$canvas=$("<div class='grid-canvas' />").appendTo($viewport);if(!options.explicitInitialization){finishInitialization()}}function finishInitialization(){if(!initialized){initialized=true;viewportW=parseFloat($.css($container[0],"width",true));measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea")})}updateColumnCaches();createColumnHeaders();setupColumnSort();createCssRules();resizeCanvas();bindAncestorScrollEvents();$container.bind("resize.slickgrid",resizeCanvas);$viewport.bind("scroll.slickgrid",handleScroll);$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave);$focusSink.bind("keydown.slickgrid",handleKeyDown);$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave)}}function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self)}function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy()}plugins.splice(i,1);break}}}function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy()}}selectionModel=model;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged)
}}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim}function getHeadersWidth(){var headersWidth=0;for(var i=0,ii=columns.length;i<ii;i++){var width=columns[i].width;headersWidth+=width}headersWidth+=scrollbarDimensions.width;return Math.max(headersWidth,viewportW)+1e3}function getCanvasWidth(){var availableWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;var rowWidth=0;var i=columns.length;while(i--){rowWidth+=columns[i].width}return options.fullWidthRows?Math.max(rowWidth,availableWidth):rowWidth}function updateCanvasWidth(forceColumnWidthsUpdate){var oldCanvasWidth=canvasWidth;canvasWidth=getCanvasWidth();if(canvasWidth!=oldCanvasWidth){$canvas.width(canvasWidth);$headerRow.width(canvasWidth);$headers.width(getHeadersWidth());viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width}if(canvasWidth!=oldCanvasWidth||forceColumnWidthsUpdate){applyColumnWidths()}}function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}}function getMaxSupportedCssHeight(){var supportedHeight=1e6;var testUpTo=$.browser.mozilla?6e6:1e9;var div=$("<div style='display:none' />").appendTo(document.body);while(true){var test=supportedHeight*2;div.css("height",test);if(test>testUpTo||div.height()!==test){break}else{supportedHeight=test}}div.remove();return supportedHeight}function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body&&elem!=null){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){$(elem).bind("scroll.slickgrid",handleActiveCellPositionChange)}}}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(columnId,title,toolTip){if(!initialized){return}var idx=getColumnIndex(columnId);var columnDef=columns[idx];var $header=$headers.children().eq(idx);if($header){if(title!==undefined){columns[idx].name=title}if(toolTip!==undefined){columns[idx].toolTip=toolTip}trigger(self.onBeforeHeaderDestroy,{headerNode:$header[0],column:columnDef});$header.attr("title",toolTip||"").children().eq(0).html(title);trigger(self.onHeaderRendered,{headerNode:$header[0],column:columnDef})}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0]}function createColumnHeaders(){function hoverBegin(){$(this).addClass("ui-state-hover")}function hoverEnd(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var columnDef=$(this).data("column");if(columnDef){trigger(self.onBeforeHeaderDestroy,{headerNode:this,column:columnDef})}});$headers.empty();$headers.width(getHeadersWidth());$headerRow.empty();for(var i=0;i<columns.length;i++){var m=columns[i];var header=$("<div class='ui-state-default slick-header-column' id='"+uid+m.id+"' />").html("<span class='slick-column-name'>"+m.name+"</span>").width(m.width-headerColumnWidthDiff).attr("title",m.toolTip||"").data("column",m).addClass(m.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||m.sortable){header.hover(hoverBegin,hoverEnd)}if(m.sortable){header.append("<span class='slick-sort-indicator' />")}trigger(self.onHeaderRendered,{headerNode:header[0],column:m});if(options.showHeaderRow){$("<div class='ui-state-default slick-headerrow-column l"+i+" r"+i+"'></div>").appendTo($headerRow)}}if(options.showHeaderRow){$("<div style='display:block;height:1px;width:10000px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScroller)}setSortColumns(sortColumns);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder()}}function setupColumnSort(){$headers.click(function(e){e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("slick-resizable-handle")){return}var $col=$(e.target).closest(".slick-header-column");if(!$col.length){return}var column=$col.data("column");if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return}var sortOpts=null;var i=0;for(;i<sortColumns.length;i++){if(sortColumns[i].columnId==column.id){sortOpts=sortColumns[i];sortOpts.sortAsc=!sortOpts.sortAsc;break}}if(e.metaKey&&options.multiColumnSort){if(sortOpts){sortColumns.splice(i,1)}}else{if(!e.shiftKey&&!e.metaKey||!options.multiColumnSort){sortColumns=[]}if(!sortOpts){sortOpts={columnId:column.id,sortAsc:true};sortColumns.push(sortOpts)}else if(sortColumns.length==0){sortColumns.push(sortOpts)}}setSortColumns(sortColumns);if(!options.multiColumnSort){trigger(self.onSort,{multiColumnSort:false,sortCol:column,sortAsc:sortOpts.sortAsc},e)}else{trigger(self.onSort,{multiColumnSort:true,sortCols:$.map(sortColumns,function(col){return{sortCol:columns[getColumnIndex(col.columnId)],sortAsc:col.sortAsc}})},e)}}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active")},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))])}setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize()}})}function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i}lastResizable=i}});if(firstResizable===undefined){return}columnElements.each(function(i,e){if(i<firstResizable||options.forceFitColumns&&i>=lastResizable){return}$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false}pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth()});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth}else{stretchLeewayOnRight=null}}shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}}var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth}else{stretchLeewayOnLeft=null}}shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth)}}if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=1e5}if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=1e5}if(stretchLeewayOnRight===null){stretchLeewayOnRight=1e5}if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=1e5}maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight)}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&c.maxWidth-c.previousWidth<x){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&c.maxWidth-c.previousWidth<x){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth}else{c.width=c.previousWidth+x;x=0}}}if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth}else{c.width=c.previousWidth+x;x=0}}}}}applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths()}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows()}}updateCanvasWidth(true);render();trigger(self.onColumnsResized,{})})})}function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0});return delta}function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0});el.remove();var r=$("<div class='slick-row' />").appendTo($canvas);el=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=options.rowHeight-cellHeightDiff;var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"];for(var i=0;i<columns.length;i++){rules.push("."+uid+" .l"+i+" { }");rules.push("."+uid+" .r"+i+" { }")}if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ")}else{$style[0].appendChild(document.createTextNode(rules.join(" ")))}}function getColumnCssRules(idx){if(!stylesheet){var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break}}if(!stylesheet){return null}columnCssRulesL=[];columnCssRulesR=[];var cssRules=stylesheet.cssRules||stylesheet.rules;var matches,columnIdx;for(var i=0;i<cssRules.length;i++){var selector=cssRules[i].selectorText;if(matches=/\.l\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesL[columnIdx]=cssRules[i]}else if(matches=/\.r\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesR[columnIdx]=cssRules[i]}}}return{left:columnCssRulesL[idx],right:columnCssRulesR[idx]}}function removeCssRules(){$style.remove();stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});var i=plugins.length;while(i--){unregisterPlugin(plugins[i])}if(options.enableColumnReorder&&$headers.sortable){$headers.sortable("destroy")}unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid)}function trigger(evt,args,e){e=e||new Slick.EventData;args=args||{};args.grid=self;return evt.notify(args,e,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(id){return columnsById[id]}function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,total=0,prevTotal,availWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);total+=c.width;if(c.resizable){shrinkLeeway+=c.width-Math.max(c.minWidth,absoluteColumnMinWidth)}}prevTotal=total;while(total>availWidth&&shrinkLeeway){var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];var width=widths[i];if(!c.resizable||width<=c.minWidth||width<=absoluteColumnMinWidth){continue}var absMinWidth=Math.max(c.minWidth,absoluteColumnMinWidth);var shrinkSize=Math.floor(shrinkProportion*(width-absMinWidth))||1;shrinkSize=Math.min(shrinkSize,width-absMinWidth);total-=shrinkSize;shrinkLeeway-=shrinkSize;widths[i]-=shrinkSize}if(prevTotal==total){break}prevTotal=total}prevTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue}var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,c.maxWidth-c.width||1e6)||1;total+=growSize;widths[i]+=growSize}if(prevTotal==total){break}prevTotal=total}var reRender=false;for(i=0;i<columns.length;i++){if(columns[i].rerenderOnResize&&columns[i].width!=widths[i]){reRender=true}columns[i].width=widths[i]}applyColumnHeaderWidths();updateCanvasWidth(true);if(reRender){invalidateAllRows();render()}}function applyColumnHeaderWidths(){if(!initialized){return}var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff)}}updateColumnCaches()}function applyColumnWidths(){var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=getColumnCssRules(i);if(null===rule){setTimeout(applyColumnWidths,1e3);return}rule.left.style.left=x+"px";rule.right.style.right=canvasWidth-x-w+"px";x+=columns[i].width}}function setSortColumn(columnId,ascending){setSortColumns([{columnId:columnId,sortAsc:ascending}])}function setSortColumns(cols){sortColumns=cols;var headerColumnEls=$headers.children();headerColumnEls.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");$.each(sortColumns,function(i,col){if(col.sortAsc==null){col.sortAsc=true}var columnIndex=getColumnIndex(col.columnId);if(columnIndex!=null){headerColumnEls.eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(col.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j)}hash[j]={};for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass}}}}setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[];columnPosRight=[];var x=0;for(var i=0,ii=columns.length;i<ii;i++){columnPosLeft[i]=x;columnPosRight[i]=x+columns[i].width;x+=columns[i].width}}function setColumns(columnDefinitions){columns=columnDefinitions;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i}updateColumnCaches();if(initialized){invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeCanvas();applyColumnWidths();handleScroll()}}function getOptions(){return options}function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return}makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength())}options=$.extend(options,args);$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");render()}function setData(newData,scrollToTop){data=newData;invalidateAllRows();updateRowCount();if(scrollToTop){scrollTo(0)}}function getData(){return data}function getDataLength(){if(data.getLength){return data.getLength()}else{return data.length}}function getDataItem(i){if(data.getItem){return data.getItem(i)}else{return data[i]}}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=true;$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=false;$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=true;$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=false;$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(y){y=Math.max(y,0);y=Math.min(y,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range);updateRowPositions()}if(prevScrollTop!=newScrollTop){vScrollDir=prevScrollTop+oldOffset<newScrollTop+offset?1:-1;$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop;trigger(self.onViewportChanged,{})}}function defaultFormatter(row,cell,value,columnDef,dataContext){if(value==null){return""}else{return value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);return columnOverrides&&columnOverrides.formatter||rowMetadata&&rowMetadata.formatter||column.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(column)||options.defaultFormatter}function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){return columnMetadata[column.id].editor}if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){return columnMetadata[cell].editor}return column.editor||options.editorFactory&&options.editorFactory.getEditor(column)}function getDataItemValueForColumn(item,columnDef){if(options.dataItemColumnValueExtractor){return options.dataItemColumnValueExtractor(item,columnDef)}return item[columnDef.field]}function appendRowHtml(stringArray,row,range){var cacheEntry=rowsCache[row];var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var rowCss="slick-row"+(dataLoading?" loading":"")+(row%2==1?" odd":" even");var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses}stringArray.push("<div class='ui-widget-content "+rowCss+"' style='top:"+(options.rowHeight*row-offset)+"px'>");var colspan,m;for(var i=0,ii=columns.length;i<ii;i++){m=columns[i];colspan=1;if(metadata&&metadata.columns){var columnData=metadata.columns[m.id]||metadata.columns[i];colspan=columnData&&columnData.colspan||1;if(colspan==="*"){colspan=ii-i}}if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){if(columnPosLeft[i]>range.rightPx){break}appendCellHtml(stringArray,row,i,colspan)}if(colspan>1){i+=colspan-1}}stringArray.push("</div>")}function appendCellHtml(stringArray,row,cell,colspan){var m=columns[cell];var d=getDataItem(row);var cellCss="slick-cell l"+cell+" r"+Math.min(columns.length-1,cell+colspan-1)+(m.cssClass?" "+m.cssClass:"");if(row===activeRow&&cell===activeCell){cellCss+=" active"}for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=" "+cellCssClasses[key][row][m.id]}}stringArray.push("<div class='"+cellCss+"'>");if(d){var value=getDataItemValueForColumn(d,m);stringArray.push(getFormatter(row,m)(row,cell,value,m,d))}stringArray.push("</div>");rowsCache[row].cellRenderQueue.push(cell);rowsCache[row].cellColSpans[cell]=colspan}function cleanupRows(rangeToKeep){for(var i in rowsCache){if((i=parseInt(i,10))!==activeRow&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i)}}}function invalidate(){updateRowCount();invalidateAllRows();render()}function invalidateAllRows(){if(currentEditor){makeActiveCellNormal()}for(var row in rowsCache){removeRowFromCache(row)}}function removeRowFromCache(row){var cacheEntry=rowsCache[row];if(!cacheEntry){return}$canvas[0].removeChild(cacheEntry.rowNode);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++}function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return}vScrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===rows[i]){makeActiveCellNormal()}if(rowsCache[rows[i]]){removeRowFromCache(rows[i])}}}function invalidateRow(row){invalidateRows([row])}function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return}var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d)}else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,getDataItemValueForColumn(d,m),m,d):"";invalidatePostProcessingResults(row)}}function updateRow(row){var cacheEntry=rowsCache[row];if(!cacheEntry){return}ensureCellNodesInRowsCache(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){columnIdx=columnIdx|0;var m=columns[columnIdx],d=getDataItem(row),node=cacheEntry.cellNodesByColumnIdx[columnIdx];if(row===activeRow&&columnIdx===activeCell&&currentEditor){currentEditor.loadValue(d)}else if(d){node.innerHTML=getFormatter(row,m)(row,columnIdx,getDataItemValueForColumn(d,m),m,d)}else{node.innerHTML=""}}invalidatePostProcessingResults(row)}function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(!initialized){return}if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0))}else{viewportH=getViewportHeight()}numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));$viewport.height(viewportH);if(options.forceFitColumns){autosizeColumns()}updateRowCount();handleScroll();render()}function updateRowCount(){if(!initialized){return}numberOfRows=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldViewportHasVScroll=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i)}}var oldH=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1)}if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop}var oldScrollTopInRange=scrollTop+offset<=th-viewportH;if(th==0||scrollTop==0){page=offset=0}else if(oldScrollTopInRange){scrollTo(scrollTop+offset)}else{scrollTo(th-viewportH)}if(h!=oldH&&options.autoHeight){resizeCanvas()}if(options.forceFitColumns&&oldViewportHasVScroll!=viewportHasVScroll){autosizeColumns()}updateCanvasWidth(false)}function getVisibleRange(viewportTop,viewportLeft){if(viewportTop==null){viewportTop=scrollTop}if(viewportLeft==null){viewportLeft=scrollLeft}return{top:Math.floor((viewportTop+offset)/options.rowHeight),bottom:Math.ceil((viewportTop+offset+viewportH)/options.rowHeight),leftPx:viewportLeft,rightPx:viewportLeft+viewportW}}function getRenderedRange(viewportTop,viewportLeft){var range=getVisibleRange(viewportTop,viewportLeft);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(vScrollDir==-1){range.top-=buffer;range.bottom+=minBuffer}else if(vScrollDir==1){range.top-=minBuffer;range.bottom+=buffer}else{range.top-=minBuffer;range.bottom+=minBuffer}range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);range.leftPx-=viewportW;range.rightPx+=viewportW;range.leftPx=Math.max(0,range.leftPx);range.rightPx=Math.min(canvasWidth,range.rightPx);return range}function ensureCellNodesInRowsCache(row){var cacheEntry=rowsCache[row];if(cacheEntry){if(cacheEntry.cellRenderQueue.length){var lastChild=cacheEntry.rowNode.lastChild;while(cacheEntry.cellRenderQueue.length){var columnIdx=cacheEntry.cellRenderQueue.pop();cacheEntry.cellNodesByColumnIdx[columnIdx]=lastChild;lastChild=lastChild.previousSibling}}}}function cleanUpCells(range,row){var totalCellsRemoved=0;var cacheEntry=rowsCache[row];var cellsToRemove=[];for(var i in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)){continue}i=i|0;var colspan=cacheEntry.cellColSpans[i];if(columnPosLeft[i]>range.rightPx||columnPosRight[Math.min(columns.length-1,i+colspan-1)]<range.leftPx){if(!(row==activeRow&&i==activeCell)){cellsToRemove.push(i)}}}var cellToRemove;while((cellToRemove=cellsToRemove.pop())!=null){cacheEntry.rowNode.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove]);delete cacheEntry.cellColSpans[cellToRemove];delete cacheEntry.cellNodesByColumnIdx[cellToRemove];if(postProcessedRows[row]){delete postProcessedRows[row][cellToRemove]}totalCellsRemoved++}}function cleanUpAndRenderCells(range){var cacheEntry;var stringArray=[];var processedRows=[];var cellsAdded;var totalCellsAdded=0;var colspan;for(var row=range.top;row<=range.bottom;row++){cacheEntry=rowsCache[row];if(!cacheEntry){continue}ensureCellNodesInRowsCache(row);cleanUpCells(range,row);cellsAdded=0;var metadata=data.getItemMetadata&&data.getItemMetadata(row);metadata=metadata&&metadata.columns;for(var i=0,ii=columns.length;i<ii;i++){if(columnPosLeft[i]>range.rightPx){break}if((colspan=cacheEntry.cellColSpans[i])!=null){i+=colspan>1?colspan-1:0;continue}colspan=1;if(metadata){var columnData=metadata[columns[i].id]||metadata[i];colspan=columnData&&columnData.colspan||1;if(colspan==="*"){colspan=ii-i}}if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){appendCellHtml(stringArray,row,i,colspan);cellsAdded++}i+=colspan>1?colspan-1:0}if(cellsAdded){totalCellsAdded+=cellsAdded;processedRows.push(row)}}if(!stringArray.length){return}var x=document.createElement("div");x.innerHTML=stringArray.join("");var processedRow;var node;while((processedRow=processedRows.pop())!=null){cacheEntry=rowsCache[processedRow];var columnIdx;while((columnIdx=cacheEntry.cellRenderQueue.pop())!=null){node=x.lastChild;cacheEntry.rowNode.appendChild(node);cacheEntry.cellNodesByColumnIdx[columnIdx]=node}}}function renderRows(range){var parentNode=$canvas[0],stringArray=[],rows=[],needToReselectCell=false;for(var i=range.top;i<=range.bottom;i++){if(rowsCache[i]){continue}renderedRows++;rows.push(i);rowsCache[i]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]};appendRowHtml(stringArray,i,range);if(activeCellNode&&activeRow===i){needToReselectCell=true}counter_rows_rendered++}if(!rows.length){return}var x=document.createElement("div");x.innerHTML=stringArray.join("");for(var i=0,ii=rows.length;i<ii;i++){rowsCache[rows[i]].rowNode=parentNode.appendChild(x.firstChild)}if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell)}}function startPostProcessing(){if(!options.enableAsyncPostRender){return}clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing()}function updateRowPositions(){for(var row in rowsCache){rowsCache[row].rowNode.style.top=row*options.rowHeight-offset+"px"}}function render(){if(!initialized){return}var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);if(lastRenderedScrollLeft!=scrollLeft){cleanUpAndRenderCells(rendered)}renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;lastRenderedScrollLeft=scrollLeft;h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;scrollLeft=$viewport[0].scrollLeft;var vScrollDist=Math.abs(scrollTop-prevScrollTop);var hScrollDist=Math.abs(scrollLeft-prevScrollLeft);if(hScrollDist){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft}if(vScrollDist){vScrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(vScrollDist<viewportH){scrollTo(scrollTop+offset)}else{var oldOffset=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows()}}}if(hScrollDist||vScrollDist){if(h_render){clearTimeout(h_render)}if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20){if(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW){render()}else{h_render=setTimeout(render,50)}trigger(self.onViewportChanged,{})}}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=vScrollDir>=0?postProcessFromRow++:postProcessToRow--;var cacheEntry=rowsCache[row];if(!cacheEntry||row>=getDataLength()){continue}if(!postProcessedRows[row]){postProcessedRows[row]={}}ensureCellNodesInRowsCache(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){continue}columnIdx=columnIdx|0;var m=columns[columnIdx];if(m.asyncPostRender&&!postProcessedRows[row][columnIdx]){var node=cacheEntry.cellNodesByColumnIdx[columnIdx];if(node){m.asyncPostRender(node,postProcessFromRow,getDataItem(row),m)}postProcessedRows[row][columnIdx]=true}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function updateCellCssStylesOnRenderedRows(addedHash,removedHash){var node,columnId,addedRowHash,removedRowHash;for(var row in rowsCache){removedRowHash=removedHash&&removedHash[row];addedRowHash=addedHash&&addedHash[row];if(removedRowHash){for(columnId in removedRowHash){if(!addedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).removeClass(removedRowHash[columnId])}}}}if(addedRowHash){for(columnId in addedRowHash){if(!removedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(addedRowHash[columnId])}}}}}}function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists."}cellCssClasses[key]=hash;
updateCellCssStylesOnRenderedRows(hash,null);trigger(self.onCellCssStylesChanged,{key:key,hash:hash})}function removeCellCssStyles(key){if(!cellCssClasses[key]){return}updateCellCssStylesOnRenderedRows(null,cellCssClasses[key]);delete cellCssClasses[key];trigger(self.onCellCssStylesChanged,{key:key,hash:null})}function setCellCssStyles(key,hash){var prevHash=cellCssClasses[key];cellCssClasses[key]=hash;updateCellCssStylesOnRenderedRows(hash,prevHash);trigger(self.onCellCssStylesChanged,{key:key,hash:hash})}function getCellCssStyles(key){return cellCssClasses[key]}function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times){return}setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1)})},speed)}toggleCellClass(4)}}function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false}var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval}return false}function handleDrag(e,dd){return trigger(self.onDrag,dd,e)}function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return}cancelEditAndSetFocus()}else if(e.which==37){navigateLeft()}else if(e.which==39){navigateRight()}else if(e.which==38){navigateUp()}else if(e.which==40){navigateDown()}else if(e.which==9){navigateNext()}else if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown()}else{commitEditAndSetFocus()}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable()}}}}else{return}}else if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev()}else{return}}e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0}catch(error){}}function handleClick(e){if(!currentEditor){if(e.target!=document.activeElement){setFocus()}}var cell=getCellFromEvent(e);if(!cell||currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell){return}trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if((activeCell!=cell.cell||activeRow!=cell.row)&&canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell),cell.row===getDataLength()||options.autoEdit)}}}function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return}if(activeCellNode===$cell[0]&&currentEditor!==null){return}trigger(self.onContextMenu,{},e)}function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell){return}trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return}if(options.editable){gotoCell(cell.row,cell.cell,true)}}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},e)}function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&$header.data("column");trigger(self.onHeaderContextMenu,{column:column},e)}function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&$header.data("column");if(column){trigger(self.onHeaderClick,{column:column},e)}}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(row,cell){return!(row<0||row>=getDataLength()||cell<0||cell>=columns.length)}function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++}if(cell<0){cell=0}return{row:row,cell:cell-1}}function getCellFromNode(cellNode){var cls=/l\d+/.exec(cellNode.className);if(!cls){throw"getCellFromNode: cannot get cell - "+cellNode.className}return parseInt(cls[0].substr(1,cls[0].length-1),10)}function getRowFromNode(rowNode){for(var row in rowsCache){if(rowsCache[row].rowNode===rowNode){return row|0}}return null}function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length){return null}var row=getRowFromNode($cell[0].parentNode);var cell=getCellFromNode($cell[0]);if(row==null||cell==null){return null}else{return{row:row,cell:cell}}}function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null}var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width}var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2}}function resetActiveCell(){setActiveCellInternal(null,false)}function setFocus(){$focusSink[0].focus()}function scrollCellIntoView(row,cell){var colspan=getColspan(row,cell);var left=columnPosLeft[cell],right=columnPosRight[cell+(colspan>1?colspan-1:0)],scrollRight=scrollLeft+viewportW;if(left<scrollLeft){$viewport.scrollLeft(left);handleScroll();render()}else if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth));handleScroll();render()}}function scrollActiveCellIntoView(){if(activeRow!=null&&activeCell!=null){scrollCellIntoView(activeRow,activeCell)}}function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active")}var activeCellChanged=activeCellNode!==newCell;activeCellNode=newCell;if(activeCellNode!=null){activeRow=getRowFromNode(activeCellNode.parentNode);activeCell=activePosX=getCellFromNode(activeCellNode);$(activeCellNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay)}else{makeActiveCellEditable()}}}else{activeRow=activeCell=null}if(activeCellChanged){trigger(self.onActiveCellChanged,getActiveCell())}}function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty()}else if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges()}}}function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false}if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false}if(!getEditor(row,cell)){return false}return true}function makeActiveCellNormal(){if(!currentEditor){return}trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){var d=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(d){var column=columns[activeCell];var formatter=getFormatter(activeRow,column);activeCellNode.innerHTML=formatter(activeRow,activeCell,getDataItemValueForColumn(d,column),column,getDataItem(activeRow));invalidatePostProcessingResults(activeRow)}}if($.browser.msie){clearTextSelection()}getEditorLock().deactivate(editController)}function makeActiveCellEditable(editor){if(!activeCellNode){return}if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false"}clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return}var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return}getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML=""}currentEditor=new(editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(item){currentEditor.loadValue(item)}serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange()}}function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown()}}}function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus()}}function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight}if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth}box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent}box.bottom=box.top+box.height;box.right=box.left+box.width}return box}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode){return}trigger(self.onActiveCellPositionChanged,{});if(currentEditor){var cellBox=getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide()}else{currentEditor.show()}}if(currentEditor.position){currentEditor.position(cellBox)}}}function getCellEditor(){return currentEditor}function getActiveCell(){if(!activeCellNode){return null}else{return{row:activeRow,cell:activeCell}}}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render()}else if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render()}}function scrollRowToTop(row){scrollTo(row*options.rowHeight);render()}function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1}var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=columnData&&columnData.colspan;if(colspan==="*"){colspan=columns.length-cell}else{colspan=colspan||1}return colspan}function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell}cell+=getColspan(row,cell)}return null}function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell}cell+=getColspan(row,cell)}return lastFocusableCell}function gotoRight(row,cell,posX){if(cell>=columns.length){return null}do{cell+=getColspan(row,cell)}while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{row:row,cell:cell,posX:cell}}return null}function gotoLeft(row,cell,posX){if(cell<=0){return null}var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null}var prev={row:row,cell:firstFocusableCell,posX:firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null}if(pos.cell>=cell){return prev}prev=pos}}function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLength()+(options.enableAddRow?1:0)){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null}prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell)}if(canCellBeActive(row,prevCell)){return{row:row,cell:prevCell,posX:posX}}}}function gotoNext(row,cell,posX){var pos=gotoRight(row,cell,posX);if(pos){return pos}var firstFocusableCell=null;while(++row<getDataLength()+(options.enableAddRow?1:0)){firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell!==null){return{row:row,cell:firstFocusableCell,posX:firstFocusableCell}}}return null}function gotoPrev(row,cell,posX){var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break}if(--row<0){return null}cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==null){pos={row:row,cell:lastSelectableCell,posX:lastSelectableCell}}}return pos}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(){navigate("down")}function navigateUp(){navigate("up")}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(dir){if(!activeCellNode||!options.enableCellNavigation){return}if(!getEditorLock().commitCurrentEdit()){return}setFocus();var stepFunctions={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=pos.row==getDataLength();scrollRowIntoView(pos.row,!isAddNewRow);scrollCellIntoView(pos.row,pos.cell);setActiveCellInternal(getCellNode(pos.row,pos.cell),isAddNewRow||options.autoEdit);activePosX=pos.posX}else{setActiveCellInternal(getCellNode(activeRow,activeCell),activeRow==getDataLength()||options.autoEdit)}}function getCellNode(row,cell){if(rowsCache[row]){ensureCellNodesInRowsCache(row);return rowsCache[row].cellNodesByColumnIdx[cell]}return null}function setActiveCell(row,cell){if(!initialized){return}if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return}if(!options.enableCellNavigation){return}scrollRowIntoView(row,false);scrollCellIntoView(row,cell);setActiveCellInternal(getCellNode(row,cell),false)}function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLength()+(options.enableAddRow?1:0)||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable}var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable}if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable}if(typeof columns[cell].focusable==="boolean"){return columns[cell].focusable}return true}function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false}var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable}var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable}if(typeof columns[cell].selectable==="boolean"){return columns[cell].selectable}return true}function gotoCell(row,cell,forceEdit){if(!initialized){return}if(!canCellBeActive(row,cell)){return}if(!getEditorLock().commitCurrentEdit()){return}scrollRowIntoView(row,false);scrollCellIntoView(row,cell);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||row===getDataLength()||options.autoEdit);if(!currentEditor){setFocus()}}function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row)},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row)}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand)}else{editCommand.execute();makeActiveCellNormal()}trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item})}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column})}return!getEditorLock().isActive()}else{$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true).effect("highlight",{color:"red"},300);trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false}}makeActiveCellNormal()}return true}function cancelCurrentEdit(){makeActiveCellNormal();return true}function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell))}return ranges}function getSelectedRows(){if(!selectionModel){throw"Selection model is not set"}return selectedRows}function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set"}selectionModel.setSelectedRanges(rowsToRanges(rows))}this.debug=function(){var s="";s+="\n"+"counter_rows_rendered:  "+counter_rows_rendered;s+="\n"+"counter_rows_removed:  "+counter_rows_removed;s+="\n"+"renderedRows:  "+renderedRows;s+="\n"+"numVisibleRows:  "+numVisibleRows;s+="\n"+"maxSupportedCssHeight:  "+maxSupportedCssHeight;s+="\n"+"n(umber of pages):  "+n;s+="\n"+"(current) page:  "+page;s+="\n"+"page height (ph):  "+ph;s+="\n"+"vScrollDir:  "+vScrollDir;alert(s)};this.eval=function(expr){return eval(expr)};$.extend(this,{slickGridVersion:"2.0",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderRendered:new Slick.Event,onBeforeHeaderDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController});init()}}(jQuery);define("libs/jquery/slickgrid/slick.grid",function(){});!function($){$.extend(true,window,{Slick:{Data:{DataView:DataView,Aggregators:{Avg:AvgAggregator,Min:MinAggregator,Max:MaxAggregator,Sum:SumAggregator}}}});function DataView(options){var self=this;var defaults={groupItemMetadataProvider:null,inlineFilters:false};var idProperty="id";var items=[];var rows=[];var idxById={};var rowsById=null;var filter=null;var updated=null;var suspend=false;var sortAsc=true;var fastSortField;var sortComparer;var refreshHints={};var prevRefreshHints={};var filterArgs;var filteredItems=[];var compiledFilter;var compiledFilterWithCaching;var filterCache=[];var groupingGetter;var groupingGetterIsAFn;var groupingFormatter;var groupingComparer;var groups=[];var collapsedGroups={};var aggregators;var aggregateCollapsed=false;var compiledAccumulators;var pagesize=0;var pagenum=0;var totalRows=0;var onRowCountChanged=new Slick.Event;var onRowsChanged=new Slick.Event;var onPagingInfoChanged=new Slick.Event;options=$.extend(true,{},defaults,options);function beginUpdate(){suspend=true}function endUpdate(){suspend=false;refresh()}function setRefreshHints(hints){refreshHints=hints}function setFilterArgs(args){filterArgs=args}function updateIdxById(startingIndex){startingIndex=startingIndex||0;var id;for(var i=startingIndex,l=items.length;i<l;i++){id=items[i][idProperty];if(id===undefined){throw"Each data element must implement a unique 'id' property"}idxById[id]=i}}function ensureIdUniqueness(){var id;for(var i=0,l=items.length;i<l;i++){id=items[i][idProperty];if(id===undefined||idxById[id]!==i){throw"Each data element must implement a unique 'id' property"}}}function getItems(){return items}function setItems(data,objectIdProperty){if(objectIdProperty!==undefined){idProperty=objectIdProperty}items=filteredItems=data;idxById={};updateIdxById();ensureIdUniqueness();refresh()}function setPagingOptions(args){if(args.pageSize!=undefined){pagesize=args.pageSize;pagenum=pagesize?Math.min(pagenum,Math.max(0,Math.ceil(totalRows/pagesize)-1)):0}if(args.pageNum!=undefined){pagenum=Math.min(args.pageNum,Math.max(0,Math.ceil(totalRows/pagesize)-1))}onPagingInfoChanged.notify(getPagingInfo(),null,self);refresh()}function getPagingInfo(){var totalPages=pagesize?Math.max(1,Math.ceil(totalRows/pagesize)):1;return{pageSize:pagesize,pageNum:pagenum,totalRows:totalRows,totalPages:totalPages}}function sort(comparer,ascending){sortAsc=ascending;sortComparer=comparer;fastSortField=null;if(ascending===false){items.reverse()}items.sort(comparer);if(ascending===false){items.reverse()}idxById={};updateIdxById();refresh()}function fastSort(field,ascending){sortAsc=ascending;fastSortField=field;sortComparer=null;var oldToString=Object.prototype.toString;Object.prototype.toString=typeof field=="function"?field:function(){return this[field]};if(ascending===false){items.reverse()}items.sort();Object.prototype.toString=oldToString;if(ascending===false){items.reverse()}idxById={};updateIdxById();refresh()}function reSort(){if(sortComparer){sort(sortComparer,sortAsc)}else if(fastSortField){fastSort(fastSortField,sortAsc)}}function setFilter(filterFn){filter=filterFn;if(options.inlineFilters){compiledFilter=compileFilter();compiledFilterWithCaching=compileFilterWithCaching()}refresh()}function groupBy(valueGetter,valueFormatter,sortComparer){if(!options.groupItemMetadataProvider){options.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider}groupingGetter=valueGetter;groupingGetterIsAFn=typeof groupingGetter==="function";groupingFormatter=valueFormatter;groupingComparer=sortComparer;collapsedGroups={};groups=[];refresh()}function setAggregators(groupAggregators,includeCollapsed){aggregators=groupAggregators;aggregateCollapsed=includeCollapsed!==undefined?includeCollapsed:aggregateCollapsed;compiledAccumulators=[];var idx=aggregators.length;while(idx--){compiledAccumulators[idx]=compileAccumulatorLoop(aggregators[idx])}refresh()}function getItemByIdx(i){return items[i]}function getIdxById(id){return idxById[id]}function ensureRowsByIdCache(){if(!rowsById){rowsById={};for(var i=0,l=rows.length;i<l;i++){rowsById[rows[i][idProperty]]=i}}}function getRowById(id){ensureRowsByIdCache();return rowsById[id]}function getItemById(id){return items[idxById[id]]}function mapIdsToRows(idArray){var rows=[];ensureRowsByIdCache();for(var i=0;i<idArray.length;i++){var row=rowsById[idArray[i]];if(row!=null){rows[rows.length]=row}}return rows}function mapRowsToIds(rowArray){var ids=[];for(var i=0;i<rowArray.length;i++){if(rowArray[i]<rows.length){ids[ids.length]=rows[rowArray[i]][idProperty]}}return ids}function updateItem(id,item){if(idxById[id]===undefined||id!==item[idProperty]){throw"Invalid or non-matching id"}items[idxById[id]]=item;if(!updated){updated={}}updated[id]=true;refresh()}function insertItem(insertBefore,item){items.splice(insertBefore,0,item);updateIdxById(insertBefore);refresh()}function addItem(item){items.push(item);updateIdxById(items.length-1);refresh()}function deleteItem(id){var idx=idxById[id];if(idx===undefined){throw"Invalid id"}delete idxById[id];items.splice(idx,1);updateIdxById(idx);refresh()}function getLength(){return rows.length}function getItem(i){return rows[i]}function getItemMetadata(i){var item=rows[i];if(item===undefined){return null}if(item.__group){return options.groupItemMetadataProvider.getGroupRowMetadata(item)}if(item.__groupTotals){return options.groupItemMetadataProvider.getTotalsRowMetadata(item)}return null}function collapseGroup(groupingValue){collapsedGroups[groupingValue]=true;refresh()}function expandGroup(groupingValue){delete collapsedGroups[groupingValue];refresh()}function getGroups(){return groups}function extractGroups(rows){var group;var val;var groups=[];var groupsByVal=[];var r;for(var i=0,l=rows.length;i<l;i++){r=rows[i];val=groupingGetterIsAFn?groupingGetter(r):r[groupingGetter];val=val||0;group=groupsByVal[val];if(!group){group=new Slick.Group;group.count=0;group.value=val;group.rows=[];groups[groups.length]=group;groupsByVal[val]=group}group.rows[group.count++]=r}return groups}function calculateGroupTotals(group){if(group.collapsed&&!aggregateCollapsed){return}var totals=new Slick.GroupTotals;var agg,idx=aggregators.length;while(idx--){agg=aggregators[idx];agg.init();compiledAccumulators[idx].call(agg,group.rows);agg.storeResult(totals)}totals.group=group;group.totals=totals}function calculateTotals(groups){var idx=groups.length;while(idx--){calculateGroupTotals(groups[idx])}}function finalizeGroups(groups){var idx=groups.length,g;while(idx--){g=groups[idx];g.collapsed=g.value in collapsedGroups;g.title=groupingFormatter?groupingFormatter(g):g.value}}function flattenGroupedRows(groups){var groupedRows=[],gl=0,g;for(var i=0,l=groups.length;i<l;i++){g=groups[i];groupedRows[gl++]=g;if(!g.collapsed){for(var j=0,jj=g.rows.length;j<jj;j++){groupedRows[gl++]=g.rows[j]}}if(g.totals&&(!g.collapsed||aggregateCollapsed)){groupedRows[gl++]=g.totals}}return groupedRows}function getFunctionInfo(fn){var fnRegex=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/;var matches=fn.toString().match(fnRegex);return{params:matches[1].split(","),body:matches[2]}}function compileAccumulatorLoop(aggregator){var accumulatorInfo=getFunctionInfo(aggregator.accumulate);var fn=new Function("_items","for (var "+accumulatorInfo.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+accumulatorInfo.params[0]+" = _items[_i]; "+accumulatorInfo.body+"}");fn.displayName=fn.name="compiledAccumulatorLoop";return fn}function compileFilter(){var filterInfo=getFunctionInfo(filter);var filterBody=filterInfo.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }");var tpl=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");tpl=tpl.replace(/\$filter\$/gi,filterBody);tpl=tpl.replace(/\$item\$/gi,filterInfo.params[0]);tpl=tpl.replace(/\$args\$/gi,filterInfo.params[1]);var fn=new Function("_items,_args",tpl);fn.displayName=fn.name="compiledFilter";return fn}function compileFilterWithCaching(){var filterInfo=getFunctionInfo(filter);var filterBody=filterInfo.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }");var tpl=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");tpl=tpl.replace(/\$filter\$/gi,filterBody);tpl=tpl.replace(/\$item\$/gi,filterInfo.params[0]);tpl=tpl.replace(/\$args\$/gi,filterInfo.params[1]);var fn=new Function("_items,_args,_cache",tpl);fn.displayName=fn.name="compiledFilterWithCaching";return fn}function uncompiledFilter(items,args){var retval=[],idx=0;for(var i=0,ii=items.length;i<ii;i++){if(filter(items[i],args)){retval[idx++]=items[i]}}return retval}function uncompiledFilterWithCaching(items,args,cache){var retval=[],idx=0,item;for(var i=0,ii=items.length;i<ii;i++){item=items[i];if(cache[i]){retval[idx++]=item}else if(filter(item,args)){retval[idx++]=item;cache[i]=true}}return retval}function getFilteredAndPagedItems(items){if(filter){var batchFilter=options.inlineFilters?compiledFilter:uncompiledFilter;var batchFilterWithCaching=options.inlineFilters?compiledFilterWithCaching:uncompiledFilterWithCaching;if(refreshHints.isFilterNarrowing){filteredItems=batchFilter(filteredItems,filterArgs)}else if(refreshHints.isFilterExpanding){filteredItems=batchFilterWithCaching(items,filterArgs,filterCache)}else if(!refreshHints.isFilterUnchanged){filteredItems=batchFilter(items,filterArgs)}}else{filteredItems=pagesize?items:items.concat()}var paged;if(pagesize){if(filteredItems.length<pagenum*pagesize){pagenum=Math.floor(filteredItems.length/pagesize)}paged=filteredItems.slice(pagesize*pagenum,pagesize*pagenum+pagesize)
}else{paged=filteredItems}return{totalRows:filteredItems.length,rows:paged}}function getRowDiffs(rows,newRows){var item,r,eitherIsNonData,diff=[];var from=0,to=newRows.length;if(refreshHints&&refreshHints.ignoreDiffsBefore){from=Math.max(0,Math.min(newRows.length,refreshHints.ignoreDiffsBefore))}if(refreshHints&&refreshHints.ignoreDiffsAfter){to=Math.min(newRows.length,Math.max(0,refreshHints.ignoreDiffsAfter))}for(var i=from,rl=rows.length;i<to;i++){if(i>=rl){diff[diff.length]=i}else{item=newRows[i];r=rows[i];if(groupingGetter&&(eitherIsNonData=item.__nonDataRow||r.__nonDataRow)&&item.__group!==r.__group||item.__updated||item.__group&&!item.equals(r)||aggregators&&eitherIsNonData&&(item.__groupTotals||r.__groupTotals)||item[idProperty]!=r[idProperty]||updated&&updated[item[idProperty]]){diff[diff.length]=i}}}return diff}function recalc(_items){rowsById=null;if(refreshHints.isFilterNarrowing!=prevRefreshHints.isFilterNarrowing||refreshHints.isFilterExpanding!=prevRefreshHints.isFilterExpanding){filterCache=[]}var filteredItems=getFilteredAndPagedItems(_items);totalRows=filteredItems.totalRows;var newRows=filteredItems.rows;groups=[];if(groupingGetter!=null){groups=extractGroups(newRows);if(groups.length){finalizeGroups(groups);if(aggregators){calculateTotals(groups)}groups.sort(groupingComparer);newRows=flattenGroupedRows(groups)}}var diff=getRowDiffs(rows,newRows);rows=newRows;return diff}function refresh(){if(suspend){return}var countBefore=rows.length;var totalRowsBefore=totalRows;var diff=recalc(items,filter);if(pagesize&&totalRows<pagenum*pagesize){pagenum=Math.max(0,Math.ceil(totalRows/pagesize)-1);diff=recalc(items,filter)}updated=null;prevRefreshHints=refreshHints;refreshHints={};if(totalRowsBefore!=totalRows){onPagingInfoChanged.notify(getPagingInfo(),null,self)}if(countBefore!=rows.length){onRowCountChanged.notify({previous:countBefore,current:rows.length},null,self)}if(diff.length>0){onRowsChanged.notify({rows:diff},null,self)}}function syncGridSelection(grid,preserveHidden){var self=this;var selectedRowIds=self.mapRowsToIds(grid.getSelectedRows());var inHandler;grid.onSelectedRowsChanged.subscribe(function(e,args){if(inHandler){return}selectedRowIds=self.mapRowsToIds(grid.getSelectedRows())});this.onRowsChanged.subscribe(function(e,args){if(selectedRowIds.length>0){inHandler=true;var selectedRows=self.mapIdsToRows(selectedRowIds);if(!preserveHidden){selectedRowIds=self.mapRowsToIds(selectedRows)}grid.setSelectedRows(selectedRows);inHandler=false}})}function syncGridCellCssStyles(grid,key){var hashById;var inHandler;storeCellCssStyles(grid.getCellCssStyles(key));function storeCellCssStyles(hash){hashById={};for(var row in hash){var id=rows[row][idProperty];hashById[id]=hash[row]}}grid.onCellCssStylesChanged.subscribe(function(e,args){if(inHandler){return}if(key!=args.key){return}if(args.hash){storeCellCssStyles(args.hash)}});this.onRowsChanged.subscribe(function(e,args){if(hashById){inHandler=true;ensureRowsByIdCache();var newHash={};for(var id in hashById){var row=rowsById[id];if(row!=undefined){newHash[row]=hashById[id]}}grid.setCellCssStyles(key,newHash);inHandler=false}})}return{beginUpdate:beginUpdate,endUpdate:endUpdate,setPagingOptions:setPagingOptions,getPagingInfo:getPagingInfo,getItems:getItems,setItems:setItems,setFilter:setFilter,sort:sort,fastSort:fastSort,reSort:reSort,groupBy:groupBy,setAggregators:setAggregators,collapseGroup:collapseGroup,expandGroup:expandGroup,getGroups:getGroups,getIdxById:getIdxById,getRowById:getRowById,getItemById:getItemById,getItemByIdx:getItemByIdx,mapRowsToIds:mapRowsToIds,mapIdsToRows:mapIdsToRows,setRefreshHints:setRefreshHints,setFilterArgs:setFilterArgs,refresh:refresh,updateItem:updateItem,insertItem:insertItem,addItem:addItem,deleteItem:deleteItem,syncGridSelection:syncGridSelection,syncGridCellCssStyles:syncGridCellCssStyles,getLength:getLength,getItem:getItem,getItemMetadata:getItemMetadata,onRowCountChanged:onRowCountChanged,onRowsChanged:onRowsChanged,onPagingInfoChanged:onPagingInfoChanged}}function AvgAggregator(field){this.field_=field;this.init=function(){this.count_=0;this.nonNullCount_=0;this.sum_=0};this.accumulate=function(item){var val=item[this.field_];this.count_++;if(val!=null&&val!=""&&val!=NaN){this.nonNullCount_++;this.sum_+=parseFloat(val)}};this.storeResult=function(groupTotals){if(!groupTotals.avg){groupTotals.avg={}}if(this.nonNullCount_!=0){groupTotals.avg[this.field_]=this.sum_/this.nonNullCount_}}}function MinAggregator(field){this.field_=field;this.init=function(){this.min_=null};this.accumulate=function(item){var val=item[this.field_];if(val!=null&&val!=""&&val!=NaN){if(this.min_==null||val<this.min_){this.min_=val}}};this.storeResult=function(groupTotals){if(!groupTotals.min){groupTotals.min={}}groupTotals.min[this.field_]=this.min_}}function MaxAggregator(field){this.field_=field;this.init=function(){this.max_=null};this.accumulate=function(item){var val=item[this.field_];if(val!=null&&val!=""&&val!=NaN){if(this.max_==null||val>this.max_){this.max_=val}}};this.storeResult=function(groupTotals){if(!groupTotals.max){groupTotals.max={}}groupTotals.max[this.field_]=this.max_}}function SumAggregator(field){this.field_=field;this.init=function(){this.sum_=null};this.accumulate=function(item){var val=item[this.field_];if(val!=null&&val!=""&&val!=NaN){this.sum_+=parseFloat(val)}};this.storeResult=function(groupTotals){if(!groupTotals.sum){groupTotals.sum={}}groupTotals.sum[this.field_]=this.sum_}}}(jQuery);define("libs/jquery/slickgrid/slick.dataview",function(){});!function($){function SlickGridPager(dataView,grid,$container){var $status;function init(){dataView.onPagingInfoChanged.subscribe(function(e,pagingInfo){updatePager(pagingInfo)});constructPagerUI();updatePager(dataView.getPagingInfo())}function getNavState(){var cannotLeaveEditMode=!Slick.GlobalEditorLock.commitCurrentEdit();var pagingInfo=dataView.getPagingInfo();var lastPage=pagingInfo.totalPages-1;return{canGotoFirst:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum>0,canGotoLast:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum!=lastPage,canGotoPrev:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum>0,canGotoNext:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum<lastPage,pagingInfo:pagingInfo}}function setPageSize(n){dataView.setRefreshHints({isFilterUnchanged:true});dataView.setPagingOptions({pageSize:n})}function gotoFirst(){if(getNavState().canGotoFirst){dataView.setPagingOptions({pageNum:0})}}function gotoLast(){var state=getNavState();if(state.canGotoLast){dataView.setPagingOptions({pageNum:state.pagingInfo.totalPages-1})}}function gotoPrev(){var state=getNavState();if(state.canGotoPrev){dataView.setPagingOptions({pageNum:state.pagingInfo.pageNum-1})}}function gotoNext(){var state=getNavState();if(state.canGotoNext){dataView.setPagingOptions({pageNum:state.pagingInfo.pageNum+1})}}function constructPagerUI(){$container.empty();var $nav=$("<span class='slick-pager-nav' />").appendTo($container);var $settings=$("<span class='slick-pager-settings' />").appendTo($container);$status=$("<span class='slick-pager-status' />").appendTo($container);$settings.append("<span class='slick-pager-settings-expanded' style='display:none'>Show: <a data=0>All</a><a data='-1'>Auto</a><a data=25>25</a><a data=50>50</a><a data=100>100</a></span>");$settings.find("a[data]").click(function(e){var pagesize=$(e.target).attr("data");if(pagesize!=undefined){if(pagesize==-1){var vp=grid.getViewport();setPageSize(vp.bottom-vp.top)}else{setPageSize(parseInt(pagesize))}}});var icon_prefix="<span class='ui-state-default ui-corner-all ui-icon-container'><span class='ui-icon ";var icon_suffix="' /></span>";$(icon_prefix+"ui-icon-lightbulb"+icon_suffix).click(function(){$(".slick-pager-settings-expanded").toggle()}).appendTo($settings);$(icon_prefix+"ui-icon-seek-first"+icon_suffix).click(gotoFirst).appendTo($nav);$(icon_prefix+"ui-icon-seek-prev"+icon_suffix).click(gotoPrev).appendTo($nav);$(icon_prefix+"ui-icon-seek-next"+icon_suffix).click(gotoNext).appendTo($nav);$(icon_prefix+"ui-icon-seek-end"+icon_suffix).click(gotoLast).appendTo($nav);$container.find(".ui-icon-container").hover(function(){$(this).toggleClass("ui-state-hover")});$container.children().wrapAll("<div class='slick-pager' />")}function updatePager(pagingInfo){var state=getNavState();$container.find(".slick-pager-nav span").removeClass("ui-state-disabled");if(!state.canGotoFirst){$container.find(".ui-icon-seek-first").addClass("ui-state-disabled")}if(!state.canGotoLast){$container.find(".ui-icon-seek-end").addClass("ui-state-disabled")}if(!state.canGotoNext){$container.find(".ui-icon-seek-next").addClass("ui-state-disabled")}if(!state.canGotoPrev){$container.find(".ui-icon-seek-prev").addClass("ui-state-disabled")}if(pagingInfo.pageSize==0){$status.text("Showing all "+pagingInfo.totalRows+" rows")}else{$status.text("Showing page "+(pagingInfo.pageNum+1)+" of "+pagingInfo.totalPages)}}init()}$.extend(true,window,{Slick:{Controls:{Pager:SlickGridPager}}})}(jQuery);define("libs/jquery/slickgrid/slick.pager",function(){});!function($){function SlickColumnPicker(columns,grid,options){var $menu;var columnCheckboxes;var defaults={fadeSpeed:250};function init(){grid.onHeaderContextMenu.subscribe(handleHeaderContextMenu);options=$.extend({},defaults,options);$menu=$("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:20;' />").appendTo(document.body);$menu.bind("mouseleave",function(e){$(this).fadeOut(options.fadeSpeed)});$menu.bind("click",updateColumn)}function handleHeaderContextMenu(e,args){e.preventDefault();$menu.empty();columnCheckboxes=[];var $li,$input;for(var i=0;i<columns.length;i++){$li=$("<li />").appendTo($menu);$input=$("<input type='checkbox' />").data("column-id",columns[i].id);columnCheckboxes.push($input);if(grid.getColumnIndex(columns[i].id)!=null){$input.attr("checked","checked")}$("<label />").text(columns[i].name).prepend($input).appendTo($li)}$("<hr/>").appendTo($menu);$li=$("<li />").appendTo($menu);$input=$("<input type='checkbox' />").data("option","autoresize");$("<label />").text("Force fit columns").prepend($input).appendTo($li);if(grid.getOptions().forceFitColumns){$input.attr("checked","checked")}$li=$("<li />").appendTo($menu);$input=$("<input type='checkbox' />").data("option","syncresize");$("<label />").text("Synchronous resize").prepend($input).appendTo($li);if(grid.getOptions().syncColumnCellResize){$input.attr("checked","checked")}$menu.css("top",e.pageY-10).css("left",e.pageX-10).fadeIn(options.fadeSpeed)}function updateColumn(e){if($(e.target).data("option")=="autoresize"){if(e.target.checked){grid.setOptions({forceFitColumns:true});grid.autosizeColumns()}else{grid.setOptions({forceFitColumns:false})}return}if($(e.target).data("option")=="syncresize"){if(e.target.checked){grid.setOptions({syncColumnCellResize:true})}else{grid.setOptions({syncColumnCellResize:false})}return}if($(e.target).is(":checkbox")){var visibleColumns=[];$.each(columnCheckboxes,function(i,e){if($(this).is(":checked")){visibleColumns.push(columns[i])}});if(!visibleColumns.length){$(e.target).attr("checked","checked");return}grid.setColumns(visibleColumns)}}init()}$.extend(true,window,{Slick:{Controls:{ColumnPicker:SlickColumnPicker}}})}(jQuery);define("libs/jquery/slickgrid/slick.columnpicker",function(){});define("app/util/output-table",["app/util/jsonmodel","libs/jquery/slickgrid/jquery.event.drag-2.0.min","libs/jquery/ui/jquery.ui.sortable","libs/jquery/slickgrid/slick.core","libs/jquery/slickgrid/slick.grid","libs/jquery/slickgrid/slick.dataview","libs/jquery/slickgrid/slick.pager","libs/jquery/slickgrid/slick.columnpicker"],function(jsonmodel){return function(){var PAGE_SIZE=20,elPanel=$('<div class="ui-widget"><div class="pg-table" style="height:100%;width:100%"></div></div>'),elOutput=elPanel.find(".pg-table"),dataView=new Slick.Data.DataView,grid,gridOptions={enableCellNavigation:false,enableColumnReorder:true,autoHeight:false,forceFitColumns:true,multiColumnSort:true},wrapper;dataView.setPagingOptions({pageSize:PAGE_SIZE});dataView.onRowCountChanged.subscribe(function(e,args){if(!grid)return;try{grid.updateRowCount()}catch(_){}grid.render()});dataView.onRowsChanged.subscribe(function(e,args){if(!grid)return;grid.invalidateRows(args.rows);grid.render()});function transformData(model,data){var result=[];if(model.length!=1||!model[0].pgvalue){for(var i=0;i<data.length;i++){var o=$.extend({},data[i],{"#id":"#"+i});result.push(o)}}else{for(var i=0;i<data.length;i++){result.push({value:null===data[i]?"[null]":data[i],"#id":"#"+i})}}return result}function updateDataView(data,options){dataView.setItems([],"#id");if(options&&options.table.sort)sortData(data,options.table.sort);dataView.beginUpdate();dataView.setItems(data,"#id");if(options&&options.table.pager&&("undefined"!==typeof options.table.pager.size||"undefined"!==typeof options.table.pager.pageNum)){var pager={};if(options.table.pager.size)pager.pageSize=options.table.pager.size;if(options.table.pager.page)pager.pageNum=options.table.pager.page;dataView.setPagingOptions(pager)}dataView.endUpdate()}function reducedResize(){clearInterval(this.killReducedResize);this.killReducedResize=setTimeout(function(){if(grid)grid.resizeCanvas()},20)}function sortData(data,cols){data.sort(function(dataRow1,dataRow2){for(var i=0,l=cols.length;i<l;i++){var field=cols[i].field;var sign=cols[i].asc?1:-1;var value1=dataRow1[field],value2=dataRow2[field];var result=(value1==value2?0:value1>value2?1:-1)*sign;if(result!=0){return result}}return 0})}var changePagerHandler,options;return wrapper={type:"table",name:"Table",panel:function(){return elPanel},toolbar:function(){return $("<div></div>")},update:function(data,o){options=o;if("undefined"===typeof options.table){options.table={pager:{}}}if(changePagerHandler)dataView.onPagingInfoChanged.unsubscribe(changePagerHandler);try{if(grid)grid.destroy()}catch(e){}var model=!data||data.length==0?[{id:"empty",name:"No Records Match Your Query",field:"empty"}]:jsonmodel.create(data);data=transformData(model,data);grid=new Slick.Grid(elOutput,dataView,model,gridOptions);changePagerHandler=function(e,args){options.table.pager={size:args.pageSize,page:args.pageNum};$(wrapper).trigger("optionsChanged",options)};if(options.table.sort&&grid){grid.setSortColumns(options.table.sort.map(function(col){return{columnId:col.field,sortAsc:col.asc}}))}grid.onSort.subscribe(function(e,args){options.table.sort=args.sortCols.map(function(def){return{asc:def.sortAsc,field:def.sortCol.field}});$(wrapper).trigger("optionsChanged",options);updateDataView(data,options)});new Slick.Controls.Pager(dataView,grid,this.toolbar);updateDataView(data,options);dataView.onPagingInfoChanged.subscribe(changePagerHandler);reducedResize()},preferredDownloadFormat:function(){return"csv"},resize:reducedResize,paginationOptions:function(){var pager=options&&options.table&&options.table.pager&&options.table.pager||{page:0,size:PAGE_SIZE};var sort=options&&options.table&&options.table.sort||null;return{skip:pager.page*pager.size,limit:pager.size,sort:sort}}}}});define("rtext!templates/panel.options.chart-output.html",[],function(){return'<div class="pg-description"></div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">X Axis:</span><select class="pg-x"></select></label>\n</div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">Y Axis:</span><select class="pg-y"></select></label>\n</div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">Segment On:</span><select class="pg-segment"></select></label>\n</div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">Max. Samples:</span><input type="number" step="1" min="1" class="pg-sample"></label>\n</div>\n<div class="pg-chart-logo">\n    <a href="http://reportgrid.com/" target="_blank"><img src="http://api.reportgrid.com/css/images/reportgrid-clear.png" title="Powered by ReportGrid" height="29" width="194"></a>\n</div>'});!function(){var Pa,Ya,lb,Sa,pa,Da,La,$a,Gc,Db,Hc,Y,wa,pd,Ta,Ic,Jc,ha,Kc,Lc,Mc,Nc,Oc,Pc,mb,Qc,Rc,Qb,Ea,Fa,ub,qd,Rb,Qd,vb,Ga,nb,Sc,wb,Sb,Eb,ob,ab,xb,pc,qc,Fb,Tc,Uc,pb,Ja,fa,K,n,l,U,ta,ac,rd,X,Aa,ka,sd,td,xa,T,ud,Tb,bc,F,Ua,Ba,Gb,Rd,cc,rc,vd,wd,sc,Hb,dc,xd,yd,zd,Vc,Ad,Ib,Bd,ga,Wc,Xc,Yc,Zc,$c,ad,bd,qb,cd,tc,dd,ed,uc,vc,fd,gd,wc,xc,bb,g,ua,rb,Ma,Ub,ec,va,yc,fc,gc,hc,zc,hd,id,Jb,cb,Cd,Vb,db,eb,m,H,V,s,W,f,Z,p,aa,Kb,R,yb,r,Ha,fb,Lb,Na,gb,w,Ia,Dd,L,Sd,Ac,sb,Mb,D,jd,ic,da,Oa,Va,E,tb,y,B,ea,kd,qa,ya,Bc,Ed;function A(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d}function Qa(a){return a instanceof Array?function(){return u.iter(a)}:"function"==typeof a.iterator?v(a,a.iterator):a.iterator}function v(a,b){var c=function(){return c.method.apply(c.scope,arguments)};c.scope=a;c.method=b;return c}var i={},q=function(){return B.__string_rec(this,"")},S=function(){};i.Arrays=S;S.__name__=["Arrays"];S.addIf=function(a,b,c){null!=b?b&&a.push(c):null!=c&&a.push(c);return a};S.min=function(a,b){if(0==a.length)return null;if(null==b)for(var c=a[0],d=0,e=ca.comparef(c),h=1,o=a.length;h<o;){var f=h++;0<e(c,a[f])&&(c=a[d=f])}else{c=b(a[0]);d=0;h=1;for(o=a.length;h<o;)if(f=h++,c>(e=b(a[f])))c=e,d=f}return a[d]};S.floatMax=function(a,b){if(0==a.length)return Math.NaN;for(var c=b(a[0]),d,e=1,h=a.length;e<h;)if(d=e++,c<(d=b(a[d])))c=d;return c};S.flatten=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;b=b.concat(d)}return b};S.order=function(a,b){a.sort(null==b?ca.compare:b);return a};S.exists=function(a,b,c){if(null!=c)for(var d=0;d<a.length;){var e=a[d];++d;if(c(e))return!0}else for(d=0;d<a.length;)if(e=a[d],++d,e==b)return!0;return!1};S.format=function(a,b,c,d){c=m.FormatParams.params(b,c,"J");b=c.shift();switch(b){case"J":if(0==a.length)return null==c[1]?"[]":c[1];var b=null==c[2]?", ":c[2],e=null==c[3]?null:""==c[3]?null:t.parseInt(c[3]);if(null!=e&&e<a.length){var h=null==c[4]?" ...":c[4];return I.map(u.iter(a.slice().splice(0,e)),function(a){return ca.format(a,c[0],null,null,d)}).join(b)+h}return I.map(u.iter(a),function(a){return ca.format(a,c[0],null,null,d)}).join(b);case"C":return P.format(a.length,"I",[],d);default:throw"Unsupported array format: "+b}};S.indexOf=function(a,b){return a.indexOf(b)};S.string=function(a){return"["+I.map(u.iter(a),function(a){return ca.string(a)}).join(", ")+"]"};S.last=function(a){return a[a.length-1]};S.firstf=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;if(b(d))return d}return null};S.nearest=function(a,b,c){for(var d=[],e=0,h=a.length;e<h;){var o=e++;d.push({i:o,v:Math.abs(c(a[o])-b)})}d.sort(function(a,b){return G.compare(a.v,b.v)});return a[d[0].i]};S.compare=function(a,b){var c;if(0!=(c=a.length-b.length))return c;for(var d=0,e=a.length;d<e;)if(c=d++,0!=(c=ca.compare(a[c],b[c])))return c;return 0};S.rotate=function(a){if(0==a.length)return[];for(var b=[],c=0,d=a[0].length;c<d;){var e=c++;b[e]=[]}c=0;for(d=a.length;c<d;)for(var h=c++,o=0,f=a[0].length;o<f;)e=o++,b[e][h]=a[h][e];return b};var Wa=function(){};i.Bools=Wa;Wa.__name__=["Bools"];Wa.format=function(a,b,c,d){return Wa.formatf(b,c,d)(a)};Wa.formatf=function(a,b){var b=m.FormatParams.params(a,b,"B"),c=b.shift();switch(c){case"B":return function(a){return a?"true":"false"};case"N":return function(a){return a?"1":"0"};case"R":if(2!=b.length)throw"bool format R requires 2 parameters";return function(a){return a?b[0]:b[1]};default:throw"Unsupported bool format: "+c}};Wa.canParse=function(a){a=a.toLowerCase();return"true"==a||"false"==a};Wa.parse=function(a){return"true"==a.toLowerCase()};Wa.compare=function(a,b){return a==b?0:a?-1:1};var zb=function(a,b){this.length=a;this.b=b};i.Bytes=zb;zb.__name__=["Bytes"];zb.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new zb(a,b)};zb.ofString=function(a){for(var b=[],c=0,d=a.length;c<d;){var e=c++,e=u.cca(a,e);127>=e?b.push(e):(2047>=e?b.push(192|e>>6):(65535>=e?b.push(224|e>>12):(b.push(240|e>>18),b.push(128|e>>12&63)),b.push(128|e>>6&63)),b.push(128|e&63))}return new zb(b.length,b)};zb.prototype={toString:function(){return this.readString(0,this.length)},readString:function(a,b){if(0>a||0>b||a+b>this.length)throw new qa.OutsideBoundsException;for(var c="",d=this.b,e=String.fromCharCode,h=a,o=a+b;h<o;){var f=d[h++];if(128>f){if(0==f)break;c+=e(f)}else if(224>f)c+=e((f&63)<<6|d[h++]&127);else if(240>f)var g=d[h++],c=c+e((f&31)<<12|(g&127)<<6|d[h++]&127);else var g=d[h++],k=d[h++],c=c+e((f&15)<<18|(g&127)<<12|k<<6&127|d[h++]&127)}return c},sub:function(a,b){null==b&&(b=this.length-a);a+b>this.length&&(b=this.length-a);if(0>a||0>b)throw new qa.OutsideBoundsException;return new zb(b,this.b.slice(a,a+b))},b:null,length:null,__class__:zb};var ld=function(){this.b=[]};i.BytesBuffer=ld;ld.__name__=["BytesBuffer"];ld.prototype={getBytes:function(){var a=new zb(this.b.length,this.b);this.b=null;return a},add:function(a){for(var b=a.b,c=0,a=a.length;c<a;){var d=c++;this.b.push(b[d])}},b:null,__class__:ld};var jc=function(){};i.BytesUtil=jc;jc.__name__=["BytesUtil"];jc.cleanHexFormat=function(a){a=C.replace(a,":","");a=a.split("|").join("");a=new M("([\\s]*)","g").replace(a,"");C.startsWith(a,"0x")&&(a=u.substr(a,2,null));1==(a.length&1)&&(a="0"+a);return a.toLowerCase()};jc.hexDump=function(a,b){return jc.toHex(a,b)};jc.toHex=function(a,b){null==b&&(b=" ");for(var c=new Ab,d=a.length,e=!0,h=0;h<d;){var o=h++;e?e=!1:c.b+=t.string(b);c.b+=t.string(C.hex(a.b[o],2).toLowerCase())}return C.rtrim(c.b)};var Ud=function(){};i.DateTools=Ud;Ud.__name__=["DateTools"];Ud.getMonthDays=function(a){var b=a.getMonth(),a=a.getFullYear();return 1!=b?Ud.DAYS_OF_MONTH[b]:0==a%4&&0!=a%100||0==a%400?29:28};var M=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};i.EReg=M;M.__name__=["EReg"];M.prototype={customReplace:function(a,b){for(var c=new Ab;this.match(a);){c.b+=t.string(this.matchedLeft());c.b+=t.string(b(this));a=this.matchedRight()}c.b+=t.string(a);return c.b},replace:function(a,b){return a.replace(this.r,b)},matchedRight:function(){if(null==this.r.m)throw"No string matched";if(null==this.r.r){var a=this.r.m.index+this.r.m[0].length;return this.r.s.substr(a,this.r.s.length-a)}return this.r.r},matchedLeft:function(){if(null==this.r.m)throw"No string matched";return null==this.r.l?this.r.s.substr(0,this.r.m.index):this.r.l},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){this.r.m=this.r.exec(a);this.r.s=a;this.r.l=RegExp.leftContext;this.r.r=RegExp.rightContext;return null!=this.r.m},r:null,__class__:M};var ja=function(){};i.Dates=ja;ja.__name__=["Dates"];ja.format=function(a,b,c,d){return ja.formatf(b,c,d)(a)};ja.formatf=function(a,b,c){b=m.FormatParams.params(a,b,"D");a=b.shift();switch(a){case"D":return function(a){return m.FormatDate.date(a,c)};case"DS":return function(a){return m.FormatDate.dateShort(a,c)};case"DST":return function(a){return m.FormatDate.dateShort(a,c)+" "+m.FormatDate.time(a,c)};case"DSTS":return function(a){return m.FormatDate.dateShort(a,c)+" "+m.FormatDate.timeShort(a,c)};case"DTS":return function(a){return m.FormatDate.date(a,c)+" "+m.FormatDate.timeShort(a,c)};case"Y":return function(a){return m.FormatDate.year(a,c)};case"YM":return function(a){return m.FormatDate.yearMonth(a,c)};case"M":return function(a){return m.FormatDate.month(a,c)};case"MN":return function(a){return m.FormatDate.monthName(a,c)};case"MS":return function(a){return m.FormatDate.monthNameShort(a,c)};case"MD":return function(a){return m.FormatDate.monthDay(a,c)};case"WD":return function(a){return m.FormatDate.weekDay(a,c)};case"WDN":return function(a){return m.FormatDate.weekDayName(a,c)};case"WDS":return function(a){return m.FormatDate.weekDayNameShort(a,c)};case"R":return function(a){return m.FormatDate.dateRfc(a,c)};case"DT":return function(a){return m.FormatDate.dateTime(a,c)};case"U":return function(a){return m.FormatDate.universal(a,c)};case"S":return function(a){return m.FormatDate.sortable(a,c)};case"T":return function(a){return m.FormatDate.time(a,c)};case"TS":return function(a){return m.FormatDate.timeShort(a,c)};case"C":var d=b[0];return null==d?function(a){return m.FormatDate.date(a,c)}:function(a){return m.FormatDate.format(d,a,c,null!=b[1]?"true"==b[1]:!0)};default:throw new H.Error("Unsupported date format: {0}",null,a,{fileName:"Dates.hx",lineNumber:71,className:"Dates",methodName:"formatf"})}};ja.interpolate=function(a,b,c,d){return ja.interpolatef(b,c,d)(a)};ja.interpolatef=function(a,b,c){var d=G.interpolatef(a.getTime(),b.getTime(),c);return function(a){var b=new Date;b.setTime(d(a));return b}};ja.snap=function(a,b,c){null==c&&(c=0);if(0>c)switch(b){case"second":return 1e3*Math.floor(a/1e3);case"minute":return 6e4*Math.floor(a/6e4);case"hour":return 36e5*Math.floor(a/36e5);case"day":return b=function(){var b=new Date;b.setTime(a);return b}(this),new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0).getTime();case"week":return 6048e5*Math.floor(a/6048e5);case"month":return b=function(){var b=new Date;b.setTime(a);return b}(this),new Date(b.getFullYear(),b.getMonth(),1,0,0,0).getTime();case"year":return b=function(){var b=new Date;b.setTime(a);return b}(this),new Date(b.getFullYear(),0,1,0,0,0).getTime();default:return 0}else if(0<c)switch(b){case"second":return 1e3*Math.ceil(a/1e3);case"minute":return 6e4*Math.ceil(a/6e4);case"hour":return 36e5*Math.ceil(a/36e5);case"day":return b=function(){var b=new Date;b.setTime(a);return b}(this),new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,0,0,0).getTime();case"week":return 6048e5*Math.ceil(a/6048e5);case"month":return b=function(){var b=new Date;b.setTime(a);return b}(this),new Date(b.getFullYear(),b.getMonth()+1,1,0,0,0).getTime();case"year":return b=function(){var b=new Date;b.setTime(a);return b}(this),new Date(b.getFullYear()+1,0,1,0,0,0).getTime();default:return 0}else switch(b){case"second":return 1e3*Math.round(a/1e3);case"minute":return 6e4*Math.round(a/6e4);case"hour":return 36e5*Math.round(a/36e5);case"day":return b=function(){var b=new Date;b.setTime(a);return b}(this),c=12<=b.getHours()?1:0,new Date(b.getFullYear(),b.getMonth(),b.getDate()+c,0,0,0).getTime();case"week":return 6048e5*Math.round(a/6048e5);case"month":return b=function(){var b=new Date;b.setTime(a);return b}(this),c=b.getDate()>Math.round(Ud.getMonthDays(b)/2)?1:0,new Date(b.getFullYear(),b.getMonth()+c,1,0,0,0).getTime();case"year":return b=function(){var b=new Date;b.setTime(a);return b}(this),c=a>new Date(b.getFullYear(),6,2,0,0,0).getTime()?1:0,new Date(b.getFullYear()+c,0,1,0,0,0).getTime();default:return 0}};ja.snapToWeekDay=function(a,b){var c=new Date;c.setTime(a);var c=c.getDay(),d=0;switch(b.toLowerCase()){case"sunday":d=0;break;case"monday":d=1;break;case"tuesday":d=2;break;case"wednesday":d=3;break;case"thursday":d=4;break;case"friday":d=5;break;case"saturday":d=6;break;default:throw new H.Error("unknown week day '{0}'",null,b,{fileName:"Dates.hx",lineNumber:186,className:"Dates",methodName:"snapToWeekDay"})}return a-864e5*((c-d)%7)};ja.canParse=function(a){return ja._reparse.match(a)};ja.parse=function(a){var a=a.split("."),b=u.strDate(C.replace(a[0],"T"," "));if(1<a.length){var c=new Date;c.setTime(b.getTime()+t.parseInt(a[1]));b=c}return b};ja.compare=function(a,b){return G.compare(a.getTime(),b.getTime())};var ca=function(){};i.Dynamics=ca;ca.__name__=["Dynamics"];ca.format=function(a,b,c,d,e){return ca.formatf(b,c,d,e)(a)};ca.formatf=function(a,b,c,d){null==c&&(c="null");return function(e){var h=z["typeof"](e);switch(h[1]){case 0:return c;case 1:return P.format(e,a,b,d);case 2:return G.format(e,a,b,d);case 3:return Wa.format(e,a,b,d);case 6:return h=h[2],h==String?J.formatOne(e,a,b,d):h==Array?S.format(e,a,b,d):h==Date?ja.format(e,a,b,d):ra.format(e,a,b,d);case 4:return ra.format(e,a,b,d);case 5:return"function()";default:throw new H.Error("Unsupported type format: {0}",null,z["typeof"](e),{fileName:"Dynamics.hx",lineNumber:44,className:"Dynamics",methodName:"formatf"})}}};ca.string=function(a){var b=z["typeof"](a);switch(b[1]){case 0:return"null";case 1:return P.format(a);case 2:return G.format(a);case 3:return Wa.format(a);case 4:for(var b=ra.keys(a),c=[],d=0;d<b.length;){var e=b[d];++d;c.push(e+" : "+ca.string(j.field(a,e)))}return"{"+c.join(", ")+"}";case 6:switch(z.getClassName(b[2])){case"Array":return S.string(a);case"String":return 0>a.indexOf('"')?'"'+a+'"':0>a.indexOf("'")?"'"+a+"'":'"'+C.replace(a,'"','\\"')+'"';case"Date":return ja.format(a);default:return t.string(a)}case 7:return Fd.string(a);case 8:return"<unknown>";case 5:return"<function>"}};ca.compare=function(a,b){if(null==a&&null==b)return 0;if(null==a)return-1;if(null==b)return 1;var c=z["typeof"](a);switch(c[1]){case 1:case 2:return G.compare(a,b);case 3:return Wa.compare(a,b);case 4:return ra.compare(a,b);case 6:switch(z.getClassName(c[2])){case"Array":return S.compare(a,b);case"String":return J.compare(a,b);case"Date":return ja.compare(a,b);default:return J.compare(t.string(a),t.string(b))}case 7:return Fd.compare(a,b);default:return 0}};ca.comparef=function(a){a=z["typeof"](a);switch(a[1]){case 1:case 2:return G.compare;case 3:return Wa.compare;case 4:return ra.compare;case 6:switch(z.getClassName(a[2])){case"Array":return S.compare;case"String":return J.compare;case"Date":return ja.compare;default:return function(a,c){return J.compare(t.string(a),t.string(c))}}case 7:return Fd.compare;default:return ca.compare}};ca.clone=function(a,b){null==b&&(b=!1);var c=z["typeof"](a);switch(c[1]){case 0:return null;case 1:case 2:case 3:case 7:case 8:case 5:return a;case 4:var d={};ra.copyTo(a,d);return d;case 6:switch(c=c[2],z.getClassName(c)){case"Array":d=[];for(c=0;c<a.length;){var e=a[c];++c;d.push(ca.clone(e))}return d;case"String":case"Date":return a;default:if(b){d=z.createEmptyInstance(c);c=0;for(e=j.fields(a);c<e.length;){var h=e[c];++c;d[h]=ca.clone(j.field(a,h))}return d}return a}}};ca.same=function(a,b){var c=hb.typeName(a),d=hb.typeName(b);if(c!=d)return!1;c=z["typeof"](a);switch(c[1]){case 2:return G.equals(a,b);case 0:case 1:case 3:return a==b;case 5:return j.compareMethods(a,b);case 6:c=z.getClassName(c[2]);d=z.getClassName(z.getClass(b));if(c!=d||B.__instanceof(a,String)&&a!=b)return!1;if(B.__instanceof(a,Array)){var d=a,e=b;if(d.length!=e.length)return!1;for(var h=0,c=d.length;h<c;){var o=h++;if(!ca.same(d[o],e[o]))return!1}return!0}if(B.__instanceof(a,Date))return a.getTime()==b.getTime();if(B.__instanceof(a,Ed)||B.__instanceof(a,Ed)){d=I.array(a.keys());c=I.array(b.keys());if(d.length!=c.length)return!1;for(c=0;c<d.length;)if(h=d[c],++c,!b.exists(h)||!ca.same(a.get(h),b.get(h)))return!1;return!0}c=!1;if((c=I.isIterator(a))||Vd.isIterable(a)){d=c?I.array(a):I.array(Qa(a)());e=c?I.array(b):I.array(Qa(b)());if(d.length!=e.length)return!1;h=0;for(c=d.length;h<c;)if(o=h++,!ca.same(d[o],e[o]))return!1;return!0}o=z.getInstanceFields(z.getClass(a));for(c=0;c<o.length;)if(h=o[c],++c,d=j.field(a,h),!j.isFunction(d)&&(e=j.field(b,h),!ca.same(d,e)))return!1;return!0;case 7:c=z.getEnumName(c[2]);d=z.getEnum(b);d=z.getEnumName(d);if(c!=d||a[1]!=b[1])return!1;d=a.slice(2);e=b.slice(2);h=0;for(c=d.length;h<c;)if(o=h++,!ca.same(d[o],e[o]))return!1;return!0;case 4:for(var o=j.fields(a),f=j.fields(b),c=0;c<o.length;){h=o[c];++c;u.remove(f,h);if(!j.hasField(b,h))return!1;d=j.field(a,h);if(!j.isFunction(d)&&(e=j.field(b,h),!ca.same(d,e)))return!1}if(0<f.length)return!1;if((c=I.isIterator(a))||Vd.isIterable(a)){if(c&&!I.isIterator(b)||!c&&!Vd.isIterable(b))return!1;d=c?I.array(a):I.array(Qa(a)());e=c?I.array(b):I.array(Qa(b)());if(d.length!=e.length)return!1;h=0;for(c=d.length;h<c;)if(o=h++,!ca.same(d[o],e[o]))return!1}return!0;case 8:throw"Unable to compare two unknown types"}throw new H.Error("Unable to compare values: {0} and {1}",[a,b],null,{fileName:"Dynamics.hx",lineNumber:368,className:"Dynamics",methodName:"same"})
};var Fd=function(){};i.Enums=Fd;Fd.__name__=["Enums"];Fd.string=function(a){for(var b=z.enumConstructor(a),c=[],d=0,a=z.enumParameters(a);d<a.length;){var e=a[d];++d;c.push(ca.string(e))}return b+(0==c.length?"":"("+c.join(", ")+")")};Fd.compare=function(a,b){var c;return 0!=(c=z.enumIndex(a)-z.enumIndex(b))?c:S.compare(z.enumParameters(a),z.enumParameters(b))};var G=function(){};i.Floats=G;G.__name__=["Floats"];G.normalize=function(a){return 0>a?0:1<a?1:a};G.range=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=1);null==b&&(b=a,a=0);if((b-a)/c==Math.POSITIVE_INFINITY)throw new H.Error("infinite range",null,null,{fileName:"Floats.hx",lineNumber:50,className:"Floats",methodName:"range"});var e=[],h=-1;if(d)if(0>c)for(;(d=a+c*++h)>=b;)e.push(d);else for(;(d=a+c*++h)<=b;)e.push(d);else if(0>c)for(;(d=a+c*++h)>b;)e.push(d);else for(;(d=a+c*++h)<b;)e.push(d);return e};G.min=function(a,b){return a<b?a:b};G.max=function(a,b){return a>b?a:b};G.circularWrap=function(a,b){a%=b;0>a&&(a+=b);return a};G.interpolate=function(a,b,c,d){null==c&&(c=1);null==b&&(b=0);if(null==d)d=V.Equations.linear;return b+d(a)*(c-b)};G.interpolatef=function(a,b,c){null==b&&(b=1);null==a&&(a=0);if(null==c)c=V.Equations.linear;var d=b-a;return function(b){return a+c(b)*d}};G.format=function(a,b,c,d){return G.formatf(b,c,d)(a)};G.formatf=function(a,b,c){var b=m.FormatParams.params(a,b,"D"),a=b.shift(),d=0<b.length?t.parseInt(b[0]):null;switch(a){case"D":return function(a){return m.FormatNumber.decimal(a,d,c)};case"I":return function(a){return m.FormatNumber["int"](a,c)};case"C":var e=1<b.length?b[1]:null;return function(a){return m.FormatNumber.currency(a,e,d,c)};case"P":return function(a){return m.FormatNumber.percent(a,d,c)};case"M":return function(a){return m.FormatNumber.permille(a,d,c)};default:throw new H.Error("Unsupported number format: {0}",null,a,{fileName:"Floats.hx",lineNumber:152,className:"Floats",methodName:"formatf"})}};G.canParse=function(a,b){null==b&&(b=!1);return b?G._reparseStrict.match(a):G._reparse.match(a)};G.parse=function(a){"+"==u.substr(a,0,1)&&(a=u.substr(a,1,null));return t.parseFloat(a)};G.compare=function(a,b){return a<b?-1:a>b?1:0};G.equals=function(a,b,c){null==c&&(c=1e-5);return Math.isNaN(a)?Math.isNaN(b):Math.isNaN(b)?!1:!Math.isFinite(a)&&!Math.isFinite(b)?0<a==0<b:Math.abs(b-a)<c};G.uninterpolatef=function(a,b){b=1/(b-a);return function(c){return(c-a)*b}};var u=function(){};i.HxOverrides=u;u.__name__=["HxOverrides"];u.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),h=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>h?"0"+h:""+h)};u.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw"Invalid date format : "+a}};u.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};u.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";if(null==c)c=a.length;0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};u.remove=function(a,b){for(var c=0,d=a.length;c<d;){if(a[c]==b)return a.splice(c,1),!0;c++}return!1};u.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var ce=function(a,b){this.min=a;this.max=b};i.IntIterator=ce;ce.__name__=["IntIterator"];ce.prototype={max:null,min:null,__class__:ce};var P=function(){};i.Ints=P;P.__name__=["Ints"];P.range=function(a,b,c){null==c&&(c=1);null==b&&(b=a,a=0);if((b-a)/c==Math.POSITIVE_INFINITY)throw new H.Error("infinite range",null,null,{fileName:"Ints.hx",lineNumber:19,className:"Ints",methodName:"range"});var d=[],e=-1,h;if(0>c)for(;(h=a+c*++e)>b;)d.push(h);else for(;(h=a+c*++e)<b;)d.push(h);return d};P.abs=function(a){return 0>a?-a:a};P.min=function(a,b){return a<b?a:b};P.max=function(a,b){return a>b?a:b};P.clamp=function(a,b,c){return a<b?b:a>c?c:a};P.interpolate=function(a,b,c,d){null==c&&(c=100);null==b&&(b=0);if(null==d)d=V.Equations.linear;return Math.round(b+d(a)*(c-b))};P.interpolatef=function(a,b,c){null==b&&(b=1);null==a&&(a=0);if(null==c)c=V.Equations.linear;var d=b-a;return function(b){return Math.round(a+c(b)*d)}};P.format=function(a,b,c,d){return P.formatf(b,c,d)(a)};P.formatf=function(a,b,c){return G.formatf(null,m.FormatParams.params(a,b,"I"),c)};P.canParse=function(a){return P._reparse.match(a)};P.parse=function(a){"+"==u.substr(a,0,1)&&(a=u.substr(a,1,null));return t.parseInt(a)};var Vd=function(){};i.Iterables=Vd;Vd.__name__=["Iterables"];Vd.isIterable=function(a){var b=j.isObject(a)&&null==z.getClass(a)?j.fields(a):z.getInstanceFields(z.getClass(a));return!Wd.has(b,"iterator")?!1:j.isFunction(j.field(a,"iterator"))};var I=function(){};i.Iterators=I;I.__name__=["Iterators"];I.count=function(a){for(var b=0;a.hasNext();)a.next(),b++;return b};I.array=function(a){for(var b=[];a.hasNext();){var c=a.next();b.push(c)}return b};I.map=function(a,b){for(var c=[],d=0;a.hasNext();){var e=a.next();c.push(b(e,d++))}return c};I.each=function(a,b){for(var c=0;a.hasNext();){var d=a.next();b(d,c++)}};I.filter=function(a,b){for(var c=[];a.hasNext();){var d=a.next();b(d)&&c.push(d)}return c};I.reduce=function(a,b,c){for(var d=0;a.hasNext();)var e=a.next(),c=b(c,e,d++);return c};I.firstf=function(a,b){for(;a.hasNext();){var c=a.next();if(b(c))return c}return null};I.isIterator=function(a){var b=j.isObject(a)&&null==z.getClass(a)?j.fields(a):z.getInstanceFields(z.getClass(a));return!Wd.has(b,"next")||!Wd.has(b,"hasNext")?!1:j.isFunction(j.field(a,"next"))&&j.isFunction(j.field(a,"hasNext"))};var Wd=function(){};i.Lambda=Wd;Wd.__name__=["Lambda"];Wd.has=function(a,b,c){if(null==c)for(c=Qa(a)();c.hasNext();){if(a=c.next(),a==b)return!0}else for(var d=Qa(a)();d.hasNext();)if(a=d.next(),c(a,b))return!0;return!1};var de=function(){};i.List=de;de.__name__=["List"];de.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},h:null,__class__:de};Ed=void 0;Ed=function(){};i["_Map.MapImpl"]=Ed;Ed.__name__=["_Map","MapImpl"];var ra=function(){};i.Objects=ra;ra.__name__=["Objects"];ra.keys=function(a){return j.fields(a)};ra.entries=function(a){for(var b=[],c=0,d=j.fields(a);c<d.length;){var e=d[c];++c;b.push({key:e,value:j.field(a,e)})}return b};ra.copyTo=function(a,b){for(var c=0,d=j.fields(a);c<d.length;){var e=d[c];++c;var h=ca.clone(j.field(a,e)),o=j.field(b,e);j.isObject(h)&&null==z.getClass(h)&&j.isObject(o)&&null==z.getClass(o)?ra.copyTo(h,o):b[e]=h}return b};ra.clone=function(a){return ra.copyTo(a,{})};ra.compare=function(a,b){var c,d;if(0!=(c=S.compare(d=j.fields(a),j.fields(b))))return c;for(var e=0;e<d.length;)if(c=d[e],++e,0!=(c=ca.compare(j.field(a,c),j.field(b,c))))return c;return 0};ra.format=function(a,b,c,d){return ra.formatf(b,c,d)(a)};ra.formatf=function(a,b,c){b=m.FormatParams.params(a,b,"R");a=b.shift();switch(a){case"O":return function(a){return t.string(a)};case"R":return function(a){for(var b=[],h=0,o=j.fields(a);h<o.length;){var f=o[h];++h;b.push(f+":"+ca.format(j.field(a,f),null,null,null,c))}return"{"+b.join(",")+"}"};default:throw new H.Error("Unsupported number format: {0}",null,a,{fileName:"Objects.hx",lineNumber:242,className:"Objects",methodName:"formatf"})}};var j=function(){};i.Reflect=j;j.__name__=["Reflect"];j.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};j.field=function(a,b){var c=null;try{c=a[b]}catch(d){}return c};j.setField=function(a,b,c){a[b]=c};j.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&c.call(a,d)&&b.push(d)}return b};j.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};j.compareMethods=function(a,b){return a==b?!0:!j.isFunction(a)||!j.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};j.isObject=function(a){if(null==a)return!1;var b=typeof a;return"string"==b||"object"==b&&!a.__enum__||"function"==b&&(a.__name__||a.__ename__)};j.deleteField=function(a,b){if(!j.hasField(a,b))return!1;delete a[b];return!0};j.makeVarArgs=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a(b)}};var t=function(){};i.Std=t;t.__name__=["Std"];t.string=function(a){return B.__string_rec(a,"")};t["int"]=function(a){return a|0};t.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==u.cca(a,1)||88==u.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};t.parseFloat=function(a){return parseFloat(a)};var Ab=function(){this.b=""};i.StringBuf=Ab;Ab.__name__=["StringBuf"];Ab.prototype={toString:function(){return this.b},addSub:function(a,b,c){this.b+=null==c?u.substr(a,b,null):u.substr(a,b,c)},addChar:function(a){this.b+=String.fromCharCode(a)},add:function(a){this.b+=t.string(a)},b:null,__class__:Ab};var C=function(){};i.StringTools=C;C.__name__=["StringTools"];C.urlEncode=function(a){return encodeURIComponent(a)};C.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};C.startsWith=function(a,b){return a.length>=b.length&&u.substr(a,0,b.length)==b};C.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c&&u.substr(a,d-c,c)==b};C.isSpace=function(a,b){var c=u.cca(a,b);return 9<=c&&13>=c||32==c};C.ltrim=function(a){for(var b=a.length,c=0;c<b&&C.isSpace(a,c);)c++;return 0<c?u.substr(a,c,b-c):a};C.rtrim=function(a){for(var b=a.length,c=0;c<b&&C.isSpace(a,b-c-1);)c++;return 0<c?u.substr(a,0,b-c):a};C.trim=function(a){return C.ltrim(C.rtrim(a))};C.rpad=function(a,b,c){for(var d=a.length,e=b.length;d<c;)c-d<e?(a+=u.substr(b,0,c-d),d=c):(a+=b,d+=e);return a};C.lpad=function(a,b,c){var d="",e=a.length;if(e>=c)return a;for(var h=b.length;e<c;)c-e<h?(d+=u.substr(b,0,c-e),e=c):(d+=b,e+=h);return d+a};C.replace=function(a,b,c){return a.split(b).join(c)};C.hex=function(a,b){var c="";do c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4;while(0<a);if(null!=b)for(;c.length<b;)c="0"+c;return c};C.stripWhite=function(a){for(var b=a.length,c=0,d=new Ab;c<b;)C.isSpace(a,c)||(d.b+=t.string(a.charAt(c))),c++;return d.b};var J=function(){};i.Strings=J;J.__name__=["Strings"];J.format=function(a,b,c,d){null==c&&(c="null");return null==b||0==b.length?a:J.formatf(a,c,d)(b)};J.formatf=function(a,b,c){null==b&&(b="null");for(var d=[];;){if(!J._reFormat.match(a)){d.push(function(){return function(){return a}}());break}var e=t.parseInt(J._reFormat.matched(1)),h=J._reFormat.matched(2);""==h&&(h=null);for(var o=null,f=[],g=3;20>g;){o=g++;o=J._reFormat.matched(o);if(null==o||""==o)break;f.push(m.FormatParams.cleanQuotes(o))}g=[J._reFormat.matchedLeft()];d.push(function(a){return function(){return a[0]}}(g));h=[ca.formatf(h,f,b,c)];d.push(function(){return function(a,b){return function(){return function(c){return a(b,c)}}()}}()(function(a){return function(b,c){return a[0](c[b])}}(h),e));a=J._reFormat.matchedRight()}return function(a){null==a&&(a=[]);return d.map(function(b){return b(a)}).join("")}};J.formatOne=function(a,b,c,d){return J.formatOnef(b,c,d)(a)};J.formatOnef=function(a,b){var b=m.FormatParams.params(a,b,"S"),c=b.shift();switch(c){case"S":return function(a){return a};case"T":return c=1>b.length?20:t.parseInt(b[0]),J.ellipsisf(c,2>b.length?"...":b[1]);case"PR":var d=1>b.length?10:t.parseInt(b[0]),e=2>b.length?" ":b[1];return function(a){return C.rpad(a,e,d)};case"PL":var h=1>b.length?10:t.parseInt(b[0]),o=2>b.length?" ":b[1];return function(a){return C.lpad(a,o,h)};default:throw"Unsupported string format: "+c}};J.rtrim=function(a,b){for(var c=a.length;0<c;){var d=u.substr(a,c-1,1);if(0>b.indexOf(d))break;c--}return u.substr(a,0,c)};J.ltrim=function(a,b){for(var c=0;c<a.length;){var d=u.substr(a,c,1);if(0>b.indexOf(d))break;c++}return u.substr(a,c,null)};J.collapse=function(a){return J._reCollapse.replace(C.trim(a)," ")};J.ucfirst=function(a){return null==a?null:a.charAt(0).toUpperCase()+u.substr(a,1,null)};J.lcfirst=function(a){return null==a?null:a.charAt(0).toLowerCase()+u.substr(a,1,null)};J.empty=function(a){return null==a||""==a};J.ucwords=function(a){return J.__ucwordsPattern.customReplace(null==a?null:a.charAt(0).toUpperCase()+u.substr(a,1,null),J.__upperMatch)};J.__upperMatch=function(a){return a.matched(0).toUpperCase()};J.humanize=function(a){return C.replace(J.underscore(a),"_"," ")};J.underscore=function(a){a=new M("::","g").replace(a,"/");a=new M("([A-Z]+)([A-Z][a-z])","g").replace(a,"$1_$2");a=new M("([a-z\\d])([A-Z])","g").replace(a,"$1_$2");a=new M("-","g").replace(a,"_");return a.toLowerCase()};J.dasherize=function(a){return C.replace(a,"_","-")};J.interpolatef=function(a,b,c){var d=function(a,b,c){for(;J._reInterpolateNumber.match(a);)a=J._reInterpolateNumber.matchedLeft(),J.empty(a)||(b.push(a),c.push(null)),b.push(null),c.push(t.parseFloat(J._reInterpolateNumber.matched(0))),a=J._reInterpolateNumber.matchedRight();J.empty(a)||(b.push(a),c.push(null))},e=function(a){var a=""+a,b=a.indexOf(".");return 0>b?0:a.length-b-1},h=[],o=[],f=[],g=[];d(a,h,o);d(b,f,g);for(var k=[],a=0,b=P.min(h.length,f.length);a<b&&!(h[a]!=f[a]);){if(null==h[a])if(o[a]==g[a])k.push(function(a){return function(){return a[0]}}([""+o[a]]));else{var d=[G.interpolatef(o[a],g[a],c)],x=[Math.pow(10,P.max(e(o[a]),e(g[a])))];k.push(function(a,b){return function(c){return""+Math.round(b[0](c)*a[0])/a[0]}}(x,d))}else k.push(function(a){return function(){return a[0]}}([h[a]]));a++}for(var N="";a<f.length;)N=null!=f[a]?N+f[a]:N+g[a],a++;""!=N&&k.push(function(){return N});return function(a){return I.map(u.iter(k),function(b){return b(a)}).join("")}};J.ellipsis=function(a,b,c){null==c&&(c="...");null==b&&(b=20);return a.length>b?u.substr(a,0,P.max(c.length,b-c.length))+c:a};J.ellipsisf=function(a,b){null==b&&(b="...");null==a&&(a=20);return function(c){return c.length>a?u.substr(c,0,P.max(b.length,a-b.length))+b:c}};J.compare=function(a,b){return a<b?-1:a>b?1:0};var ba={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(","),TNull:["TNull",0]};ba.TNull.toString=q;ba.TNull.__enum__=ba;ba.TInt=["TInt",1];ba.TInt.toString=q;ba.TInt.__enum__=ba;ba.TFloat=["TFloat",2];ba.TFloat.toString=q;ba.TFloat.__enum__=ba;ba.TBool=["TBool",3];ba.TBool.toString=q;ba.TBool.__enum__=ba;ba.TObject=["TObject",4];ba.TObject.toString=q;ba.TObject.__enum__=ba;ba.TFunction=["TFunction",5];ba.TFunction.toString=q;ba.TFunction.__enum__=ba;ba.TClass=function(a){a=["TClass",6,a];a.__enum__=ba;a.toString=q;return a};ba.TEnum=function(a){a=["TEnum",7,a];a.__enum__=ba;a.toString=q;return a};ba.TUnknown=["TUnknown",8];ba.TUnknown.toString=q;ba.TUnknown.__enum__=ba;var z=function(){};i.Type=z;z.__name__=["Type"];z.getClass=function(a){return null==a?null:a.__class__};z.getEnum=function(a){return null==a?null:a.__enum__};z.getClassName=function(a){return a.__name__.join(".")};z.getEnumName=function(a){return a.__ename__.join(".")};z.resolveClass=function(a){a=i[a];return null==a||!a.__name__?null:a};z.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments"}};z.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};z.createEnum=function(a,b,c){var d=j.field(a,b);if(null==d)throw"No such constructor "+b;if(j.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d};z.getInstanceFields=function(a){var b=[],c;for(c in a.prototype)b.push(c);u.remove(b,"__class__");u.remove(b,"__properties__");return b};z["typeof"]=function(a){switch(typeof a){case"boolean":return ba.TBool;case"string":return ba.TClass(String);case"number":return Math.ceil(a)==a%2147483648?ba.TInt:ba.TFloat;case"object":if(null==a)return ba.TNull;var b=a.__enum__;if(null!=b)return ba.TEnum(b);a=a.__class__;return null!=a?ba.TClass(a):ba.TObject;case"function":return a.__name__||a.__ename__?ba.TObject:ba.TFunction;case"undefined":return ba.TNull;default:return ba.TUnknown}};z.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;c<d;){var e=c++;if(!z.enumEq(a[e],b[e]))return!1}var h=a.__enum__;if(h!=b.__enum__||null==h)return!1}catch(o){return!1}return!0};z.enumConstructor=function(a){return a[0]};z.enumParameters=function(a){return a.slice(2)};z.enumIndex=function(a){return a[1]};var hb=function(){};i.Types=hb;hb.__name__=["Types"];hb.typeName=function(a){var b,a=z["typeof"](a);switch(a[1]){case 0:b="null";break;case 1:b="Int";break;case 2:b="Float";break;case 3:b="Bool";break;case 5:b="function";break;case 6:b=z.getClassName(a[2]);break;case 7:b=z.getEnumName(a[2]);break;case 4:b="Object";break;case 8:b="Unknown"}return b};hb.isAnonymous=function(a){return j.isObject(a)&&null==z.getClass(a)};hb.as=function(a,b){return B.__instanceof(a,b)?a:null};hb.isPrimitive=function(a){var b,a=z["typeof"](a);switch(a[1]){case 0:case 1:case 2:case 3:b=!0;break;case 5:case 7:case 4:case 8:b=!1;break;case 6:b="String"==z.getClassName(a[2])}return b};qa=void 0;ya=void 0;Bc=void 0;ya={IBlockCipher:function(){}};i["chx.crypt.IBlockCipher"]=ya.IBlockCipher;ya.IBlockCipher.__name__=["chx","crypt","IBlockCipher"];ya.IPad=function(){};i["chx.crypt.IPad"]=ya.IPad;ya.IPad.__name__=["chx","crypt","IPad"];ya.IPad.prototype={unpad:null,__class__:ya.IPad};ya.PadPkcs1Type1=function(a){this.blockSize=a;this.setPadCount(8);this.typeByte=1;this.set_padByte(255)};i["chx.crypt.PadPkcs1Type1"]=ya.PadPkcs1Type1;ya.PadPkcs1Type1.__name__=["chx","crypt","PadPkcs1Type1"];ya.PadPkcs1Type1.__interfaces__=[ya.IPad];ya.PadPkcs1Type1.prototype={set_padByte:function(a){this.padByte=a&255;return a},setPadCount:function(a){if(a+3>=this.blockSize)throw"Internal padding size exceeds crypt block size";this.padCount=a;this.textSize=this.blockSize-3-this.padCount;return a},unpad:function(a){for(var b=0,c=new ld;b<a.length;){for(;b<a.length&&0==a.b[b];)++b;if(0>a.length-b-3-this.padCount)throw"Unexpected short message";if(a.b[b]!=this.typeByte)throw"Expected marker "+this.typeByte+" at position "+b+" ["+jc.hexDump(a)+"]";if(++b>=a.length)break;for(;b<a.length&&0!=a.b[b];)++b;b++;for(var d=0;b<a.length&&d++<this.textSize;)c.b.push(a.b[b++])}return c.getBytes()},typeByte:null,padCount:null,padByte:null,textSize:null,blockSize:null,__class__:ya.PadPkcs1Type1,__properties__:{set_padByte:"set_padByte"}};ya.RSAEncrypt=function(a,b){this.init();null!=a&&this.setPublic(a,b)};i["chx.crypt.RSAEncrypt"]=ya.RSAEncrypt;ya.RSAEncrypt.__name__=["chx","crypt","RSAEncrypt"];ya.RSAEncrypt.__interfaces__=[ya.IBlockCipher];ya.RSAEncrypt.prototype={get_blockSize:function(){return null==this.n?0:this.n.bitLength()+7>>3},doPublic:function(a){return a.modPowInt(this.e,this.n)},doBufferDecrypt:function(a,b,c){for(var d=this.get_blockSize(),e=d-11,h=0,o=new ld;h<a.length;){h+d>a.length&&(d=a.length-h);var f=w.ofBytes(a.sub(h,d),!0),f=b(f);if(null==f)return null;f=c.unpad(f.toBytesUnsigned());if(f.length>e)throw"block text length error";o.add(f);h+=d}return o.getBytes()},verify:function(a){return this.doBufferDecrypt(a,v(this,this.doPublic),new ya.PadPkcs1Type1(this.get_blockSize()))},setPublic:function(a,b){this.init();if(null==a||0==a.length)throw new qa.NullPointerException("nHex not set: "+a);if(null==b||0==b.length)throw new qa.NullPointerException("eHex not set: "+b);var c=jc.cleanHexFormat(a);this.n=w.ofString(c,16);if(null==this.n)throw 2;c=t.parseInt("0x"+jc.cleanHexFormat(b));if(null==c||0==c)throw 3;this.e=c},init:function(){this.n=null;this.e=0},e:null,n:null,__class__:ya.RSAEncrypt};Bc={Base64:function(){}};i["chx.formats.Base64"]=Bc.Base64;Bc.Base64.__name__=["chx","formats","Base64"];Bc.Base64.decode=function(a){a=C.stripWhite(a);a=C.replace(a,"=","");if(null==Bc.Base64.enc)Bc.Base64.enc=new Dd(zb.ofString("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"));var b;try{b=Bc.Base64.enc.decodeBytes(zb.ofString(a))}catch(c){b=null}return b};qa={Exception:function(a,b){this.message=a;this.cause=b}};i["chx.lang.Exception"]=qa.Exception;qa.Exception.__name__=["chx","lang","Exception"];qa.Exception.prototype={toString:function(){return z.getClassName(z.getClass(this))+"("+(null==this.message?"":this.message+")")},cause:null,message:null,__class__:qa.Exception};qa.NullPointerException=function(a,b){qa.Exception.call(this,a,b)};i["chx.lang.NullPointerException"]=qa.NullPointerException;qa.NullPointerException.__name__=["chx","lang","NullPointerException"];qa.NullPointerException.__super__=qa.Exception;qa.NullPointerException.prototype=A(qa.Exception.prototype,{__class__:qa.NullPointerException});qa.OutsideBoundsException=function(a,b){qa.Exception.call(this,a,b)};i["chx.lang.OutsideBoundsException"]=qa.OutsideBoundsException;qa.OutsideBoundsException.__name__=["chx","lang","OutsideBoundsException"];qa.OutsideBoundsException.__super__=qa.Exception;qa.OutsideBoundsException.prototype=A(qa.Exception.prototype,{__class__:qa.OutsideBoundsException});var Ka,Bb,Wb,Gd,ib,Hd,kc,Id,ia,Jd,lc,Kd,Xb,Cc,Ld,Md,sa,za,na,Xa,la,ma,O,Nb,mc,Nd,Yb,Od,Dc,Ob,ee,nc,Xd,jb,Pd,oc,md,Yd,nd,Ec,oa,Ca;Ka=function(a){this.selection=a};i["dhx.Access"]=Ka;Ka.__name__=["dhx","Access"];Ka.prototype={selection:null,__class__:Ka};Bb=function(a,b){Ka.call(this,b);this.name=a;this.qname=Wb.qualify(a)};i["dhx.AccessAttribute"]=Bb;Bb.__name__=["dhx","AccessAttribute"];Bb.__super__=Ka;Bb.prototype=A(Ka.prototype,{"float":function(a){var b=""+a;if(null==this.qname){var c=this.name;this.selection.eachNode(function(a){a.setAttribute(c,b)})}else{var d=this.qname;this.selection.eachNode(function(a){a.setAttributeNS(d.space,d.local,b)})}return this.selection},string:function(a){if(null==this.qname){var b=this.name;this.selection.eachNode(function(c){c.setAttribute(b,a)})}else{var c=this.qname;this.selection.eachNode(function(b){b.setAttributeNS(c.space,c.local,a)})}return this.selection},getFloat:function(){var a=this.get();return Bb.refloat.match(a)?t.parseFloat(Bb.refloat.matched(1)):Math.NaN},get:function(){var a=this.name,b=this.qname;return this.selection.firstNode(function(c){return null==b?c.getAttribute(a):c.getAttributeNS(b.space,b.local)})},qname:null,name:null,__class__:Bb});Gd=function(a,b){Bb.call(this,a,b)};i["dhx.AccessDataAttribute"]=Gd;Gd.__name__=["dhx","AccessDataAttribute"];Gd.__super__=Bb;Gd.prototype=A(Bb.prototype,{floatf:function(a){if(null==this.qname){var b=this.name;this.selection.eachNode(function(c,e){var h=a(j.field(c,"__dhx_data__"),e);null==h?c.removeAttribute(b):c.setAttribute(b,""+h)})}else{var c=this.qname;this.selection.eachNode(function(b,e){var h=a(j.field(b,"__dhx_data__"),e);null==h?b.removeAttributeNS(c.space,c.local):b.setAttributeNS(c.space,c.local,""+h)})}return this.selection},stringf:function(a){if(null==this.qname){var b=this.name;this.selection.eachNode(function(c,e){var h=a(j.field(c,"__dhx_data__"),e);null==h?c.removeAttribute(b):c.setAttribute(b,h)})}else{var c=this.qname;this.selection.eachNode(function(b,e){var h=a(j.field(b,"__dhx_data__"),e);null==h?b.removeAttributeNS(c.space,c.local):b.setAttributeNS(c.space,c.local,h)})}return this.selection},__class__:Gd});ib=function(a){Ka.call(this,a)};i["dhx.AccessClassed"]=ib;ib.__name__=["dhx","AccessClassed"];ib.escapeERegChars=function(a){return ib._escapePattern.customReplace(a,function(a){return"\\"+a.matched(0)})};ib.__super__=Ka;ib.prototype=A(Ka.prototype,{_add:function(a,b){var c=b.classList;if(null!=c)c.add(a);else{var c=b.className,d=null!=c.baseVal,e=d?c.baseVal:c;if(!new M("(^|\\s+)"+ib.escapeERegChars(a)+"(\\s+|$)","g").match(e))e=J.collapse(e+" "+a),d?c.baseVal=e:b.className=e}},add:function(a){this.selection.eachNode(function(a,c){return function(d,e){return a(c,d,e)}}(v(this,this._add),a));return this.selection},_remove:function(a,b){var c=b.classList;if(null!=c)c.remove(a);else{var c=b.className,d=null!=c.baseVal,e=d?c.baseVal:c,h=new M("(^|\\s+)"+ib.escapeERegChars(a)+"(\\s+|$)","g"),e=J.collapse(h.replace(e," "));d?c.baseVal=e:b.className=e}},remove:function(a){this.selection.eachNode(function(a,c){return function(d,e){return a(c,d,e)}}(v(this,this._remove),a));return this.selection},__class__:ib});Hd=function(a){ib.call(this,a)};i["dhx.AccessDataClassed"]=Hd;Hd.__name__=["dhx","AccessDataClassed"];Hd.__super__=ib;Hd.prototype=A(ib.prototype,{__class__:Hd});kc=function(a){Ka.call(this,a)};i["dhx.AccessHtml"]=kc;kc.__name__=["dhx","AccessHtml"];kc.__super__=Ka;kc.prototype=A(Ka.prototype,{string:function(a){this.selection.eachNode(function(b){b.innerHTML=a});return this.selection},get:function(){return this.selection.firstNode(function(a){return a.innerHTML})},__class__:kc});Id=function(a){kc.call(this,a)};i["dhx.AccessDataHtml"]=Id;Id.__name__=["dhx","AccessDataHtml"];Id.__super__=kc;Id.prototype=A(kc.prototype,{stringf:function(a){this.selection.eachNode(function(b,c){var d=a(j.field(b,"__dhx_data__"),c);null==d&&(d="");b.innerHTML=d});return this.selection},__class__:Id});ia=function(a,b){Ka.call(this,b);this.name=a};i["dhx.AccessStyle"]=ia;ia.__name__=["dhx","AccessStyle"];ia._getPropertyName=function(a){if("float"==a||"cssFloat"==a||"styleFloat"==a)return null==ea.document.body.cssFloat?"styleFloat":"cssFloat";0<=a.indexOf("-")&&(a=J.ucwords(a));return a};ia.getComputedStyleValue=function(a,b){ia.getComputedStyleValue="getComputedStyle"in window?function(a,b){return ea.window.getComputedStyle(a,null).getPropertyValue(b)}:function(a,b){var e=a.currentStyle;null==j.field(e,b)&&(b=ia._getPropertyName(b));return null==j.field(e,b)?"":j.field(e,b)};return ia.getComputedStyleValue(a,b)};ia.setStyleProperty=function(a,b,c,d){ia.setStyleProperty="setProperty"in a.style?function(a,b,c,d){a.style.setProperty(b,""+c,null==d?"":d)}:function(a,b,c,d){a=a.style;null==j.field(a,b)&&(b=ia._getPropertyName(b));null!=d&&""!=d?a.cssText+=";"+J.dasherize(b)+":"+c+"!important;":a[b]=c};ia.setStyleProperty(a,b,c,d)};ia.removeStyleProperty=function(a){ia.removeStyleProperty="removeProperty"in a.style?function(a,c){a.style.removeProperty(c)}:function(a,c){var d=a.style;null==j.field(d,c)&&(c=ia._getPropertyName(c));j.deleteField(d,c)}};ia.__super__=Ka;ia.prototype=A(Ka.prototype,{color:function(a,b){var c=this,d=a.toRgbString();this.selection.eachNode(function(a){ia.setStyleProperty(a,c.name,d,b)});return this.selection},"float":function(a,b){var c=this;this.selection.eachNode(function(d){ia.setStyleProperty(d,c.name,a,b)});return this.selection},string:function(a,b){var c=this;this.selection.eachNode(function(d){ia.setStyleProperty(d,c.name,a,b)});return this.selection},getFloat:function(){var a=this.get();return ia.refloat.match(a)?t.parseFloat(ia.refloat.matched(1)):Math.NaN},get:function(){var a=this;return this.selection.firstNode(function(b){return ia.getComputedStyleValue(b,a.name)})},name:null,__class__:ia});Jd=function(a,b){ia.call(this,a,b)};i["dhx.AccessDataStyle"]=Jd;Jd.__name__=["dhx","AccessDataStyle"];Jd.__super__=ia;Jd.prototype=A(ia.prototype,{stringf:function(a,b){var c=this;this.selection.eachNode(function(d,e){var h=a(j.field(d,"__dhx_data__"),e);null==h?ia.removeStyleProperty(d,c.name):ia.setStyleProperty(d,c.name,h,b)});return this.selection},__class__:Jd});lc=function(a){Ka.call(this,a)};i["dhx.AccessText"]=lc;lc.__name__=["dhx","AccessText"];lc.__super__=Ka;lc.prototype=A(Ka.prototype,{clear:function(){this.selection.eachNode(function(a){a.textContent=""});return this.selection},string:function(a){this.clear();this.selection.eachNode(function(b){b.textContent=a});return this.selection},__class__:lc});Kd=function(a){lc.call(this,a)};i["dhx.AccessDataText"]=Kd;Kd.__name__=["dhx","AccessDataText"];Kd.__super__=lc;Kd.prototype=A(lc.prototype,{stringf:function(a){this.clear();this.selection.eachNode(function(b,c){var d=a(j.field(b,"__dhx_data__"),c);if(null!=d)b.textContent=d});return this.selection},__class__:Kd});Xb=function(a,b){this.transition=a;this.tweens=b};i["dhx.AccessTween"]=Xb;Xb.__name__=["dhx","AccessTween"];Xb.prototype={transitionFloatTween:function(a){return function(b,c,d){return G.interpolatef(d,a)}},transitionStringTweenf:function(a){return function(b,c,d){return J.interpolatef(d,a(b,c))}},transitionStringTween:function(a){return function(b,c,d){return J.interpolatef(d,a)}},tweens:null,transition:null,__class__:Xb};Cc=function(a,b,c){Xb.call(this,b,c);this.name=a;this.qname=Wb.qualify(a)};i["dhx.AccessTweenAttribute"]=Cc;Cc.__name__=["dhx","AccessTweenAttribute"];Cc.__super__=Xb;Cc.prototype=A(Xb.prototype,{floatTweenNodef:function(a){var b=this.name,c;this.tweens.set("attr."+b,null==this.qname?function(c,e){var h=a(c,e,t.parseFloat(c.getAttribute(b)));return function(a){c.setAttribute(b,""+h(a))}}:function(c,e){var h=a(c,e,t.parseFloat(c.getAttributeNS(b.space,b.local)));return function(a){c.setAttributeNS(b.space,b.local,""+h(a))}});return this.transition},"float":function(a){return this.floatTweenNodef(this.transitionFloatTween(a))},stringTweenNodef:function(a){var b=this.name,c;this.tweens.set("attr."+b,null==this.qname?function(c,e){var h=a(c,e,c.getAttribute(b));return function(a){c.setAttribute(b,h(a))}}:function(c,e){var h=a(c,e,c.getAttributeNS(b.space,b.local));return function(a){c.setAttributeNS(b.space,b.local,h(a))}});return this.transition},string:function(a){return this.stringTweenNodef(this.transitionStringTween(a))},qname:null,name:null,__class__:Cc});Ld=function(a,b,c){Cc.call(this,a,b,c)};i["dhx.AccessDataTweenAttribute"]=Ld;Ld.__name__=["dhx","AccessDataTweenAttribute"];Ld.__super__=Cc;Ld.prototype=A(Cc.prototype,{stringf:function(a){return this.stringTweenNodef(this.transitionStringTweenf(function(b,c){return a(j.field(b,"__dhx_data__"),c)}))},__class__:Ld});Md=function(a,b,c){Xb.call(this,b,c);this.name=a};i["dhx.AccessTweenStyle"]=Md;Md.__name__=["dhx","AccessTweenStyle"];Md.__super__=Xb;Md.prototype=A(Xb.prototype,{floatTweenNodef:function(a,b){var c=this.name;this.tweens.set("style."+c,function(d,e){var h=a(d,e,t.parseFloat(ia.getComputedStyleValue(d,c)));return function(a){ia.setStyleProperty(d,c,""+h(a),b)}});return this.transition},"float":function(a,b){return this.floatTweenNodef(this.transitionFloatTween(a),b)},name:null,__class__:Md});sa={__ename__:["dhx","HostType"],__constructs__:"UnknownServer,NodeJs,IE,Firefox,Safari,Chrome,Opera,Unknown".split(","),UnknownServer:["UnknownServer",0]};sa.UnknownServer.toString=q;sa.UnknownServer.__enum__=sa;sa.NodeJs=["NodeJs",1];sa.NodeJs.toString=q;sa.NodeJs.__enum__=sa;sa.IE=function(a){a=["IE",2,a];a.__enum__=sa;a.toString=q;return a};sa.Firefox=function(a){a=["Firefox",3,a];a.__enum__=sa;a.toString=q;return a};sa.Safari=function(a){a=["Safari",4,a];a.__enum__=sa;a.toString=q;return a};sa.Chrome=function(a){a=["Chrome",5,a];a.__enum__=sa;a.toString=q;return a};sa.Opera=function(a){a=["Opera",6,a];a.__enum__=sa;a.toString=q;return a};sa.Unknown=function(a){a=["Unknown",7,a];a.__enum__=sa;a.toString=q;return a};za={__ename__:["dhx","EnvironmentType"],__constructs__:["Mobile","Desktop","Server","UnknownEnvironment"],Mobile:["Mobile",0]};za.Mobile.toString=q;za.Mobile.__enum__=za;za.Desktop=["Desktop",1];za.Desktop.toString=q;za.Desktop.__enum__=za;za.Server=["Server",2];za.Server.toString=q;za.Server.__enum__=za;za.UnknownEnvironment=["UnknownEnvironment",3];za.UnknownEnvironment.toString=q;za.UnknownEnvironment.__enum__=za;na={__ename__:["dhx","OSType"],__constructs__:"Windows,IOs,Android,Mac,Linux,UnknownOs".split(",")};na.Windows=function(a){a=["Windows",0,a];
a.__enum__=na;a.toString=q;return a};na.IOs=["IOs",1];na.IOs.toString=q;na.IOs.__enum__=na;na.Android=["Android",2];na.Android.toString=q;na.Android.__enum__=na;na.Mac=["Mac",3];na.Mac.toString=q;na.Mac.__enum__=na;na.Linux=["Linux",4];na.Linux.toString=q;na.Linux.__enum__=na;na.UnknownOs=["UnknownOs",5];na.UnknownOs.toString=q;na.UnknownOs.__enum__=na;Xa=function(){};i["dhx.ClientHost"]=Xa;Xa.__name__=["dhx","ClientHost"];Xa.isIE=function(){var a;switch(Xa.host[1]){case 2:a=!0;break;default:a=!1}return a};Xa.userAgent=function(){return""+navigator.userAgent};Xa.hasNavigator=function(){return"undefined"!==typeof navigator};B=void 0;ea=void 0;kd=void 0;ea=function(){};i["js.Browser"]=ea;ea.__name__=["js","Browser"];ea.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw"Unable to create XMLHttpRequest object."};la=function(a){this.nodes=a};i["dhx.Group"]=la;la.__name__=["dhx","Group"];la.merge=function(a,b){if(b.length!=a.length)throw"Group length not equal";for(var c=0,d=b.length;c<d;){var e=c++,h=a[e],e=b[e];if(h.parentNode!=e.parentNode)throw"parentNodes not the same!";if(h.nodes.length!=e.nodes.length)throw"node length mismatch!";for(var o=0,f=e.nodes.length;o<f;){var g=o++;null==e.nodes[g]&&(e.nodes[g]=h.nodes[g])}}return b};la.prototype={each:function(a){for(var b=0,c=this.nodes.length;b<c;){var d=b++;if(null!=this.nodes[d])a(la.current=this.nodes[d],d)}},nodes:null,parentNode:null,__class__:la};ma=function(a){this.groups=a};i["dhx.BaseSelection"]=ma;ma.__name__=["dhx","BaseSelection"];ma.listenerEnterLeave=function(a,b,c){var d=O.event.relatedTarget;null==d||ma.isChild(b,d)||a(b,c)};ma.isChild=function(a,b){if(b==a)return!1;for(;null!=b;)if(b=b.parentNode,b==a)return!0;return!1};ma.addEvent=function(a,b,c,d){if(null!=v(a,a.addEventListener))ma.addEvent=function(a,b,c,d){a.addEventListener(b,c,d)};else if(null!=a.attachEvent)ma.addEvent=function(a,b,c){a.attachEvent(b,c)};ma.addEvent(a,b,c,d)};ma.removeEvent=function(a,b,c,d){if(null!=v(a,a.removeEventListener))ma.removeEvent=function(a,b,c){a.removeEventListener(b,j.field(a,"__dhx_on__"+c),!1)};else if(null!=a.attachEvent)ma.removeEvent=function(a,b,c){a.detachEvent(b,j.field(a,"__dhx_on__"+c))};ma.removeEvent(a,b,c,d)};ma.bindJoin=function(a,b,c,d,e,h){var o=b.nodes.length,f=c.length,g=[],k=[],x=[],N,i,l=new L.StringMap,m=[],p;i=c.length;for(var n=0;n<o;){var q=n++;N=b.nodes[q];p=a(j.field(N,"__dhx_data__"),q);l.exists(p)?k[i++]=N:l.set(p,N);m.push(p)}for(n=0;n<f;)q=n++,N=l.get(p=a(i=c[q],q)),null!=N?(N.__dhx_data__=i,g[q]=N,x[q]=k[q]=null):(N={__dhx_data__:i},x[q]=N,g[q]=k[q]=null),l.remove(p);for(n=0;n<o;)q=n++,l.exists(m[q])&&(k[q]=b.nodes[q]);a=new la(x);a.parentNode=b.parentNode;e.push(a);e=new la(g);e.parentNode=b.parentNode;d.push(e);d=new la(k);d.parentNode=b.parentNode;h.push(d)};ma.bind=function(a,b,c,d,e){var h=a.nodes.length,o=a.nodes.length,f=[],g=[],k=[],x,N;if(h>b.length)h=b.length;if(o<b.length)o=b.length;for(var i=0;i<h;){var j=i++;x=a.nodes[j];N=b[j];null!=x?(x.__dhx_data__=N,f[j]=x,k[j]=g[j]=null):(k[j]={__dhx_data__:N},f[j]=g[j]=null)}for(i=b.length;h<i;)j=h++,x={__dhx_data__:b[j]},k[j]=x,f[j]=g[j]=null;for(i=b.length;i<o;)j=i++,g[j]=a.nodes[j],k[j]=f[j]=null;b=new la(k);b.parentNode=a.parentNode;d.push(b);d=new la(f);d.parentNode=a.parentNode;c.push(d);c=new la(g);c.parentNode=a.parentNode;e.push(c)};ma.prototype={_selectAll:function(a){for(var b=[],c,d=0,e=this.groups;d<e.length;){c=e[d];++d;for(var h=u.iter(c.nodes);h.hasNext();){var o=h.next();if(null!=o)b.push(c=new la(a(o))),c.parentNode=o}}return this.createSelection(b)},_select:function(a){for(var b=[],c,d,e=0,h=this.groups;e<h.length;){d=h[e];++e;b.push(c=new la([]));c.parentNode=d.parentNode;for(var o=u.iter(d.nodes);o.hasNext();){var f=o.next();if(null!=f){if(c.parentNode=f,c.nodes.push(d=a(f)),null!=d)d.__dhx_data__=j.field(f,"__dhx_data__")}else c.nodes.push(null)}}return this.createSelection(b)},createSelection:function(){throw"abstract method"},onNode:function(a,b,c){null==c&&(c=!1);var d=a.indexOf("."),e=0>d?a:u.substr(a,0,d);if(("mouseenter"==e||"mouseleave"==e)&&!Xa.isIE())b=function(a,b){return function(c,d){return a(b,c,d)}}(ma.listenerEnterLeave,b),e="mouseenter"==e?"mouseover":"mouseout";return this.eachNode(function(d,o){var f=function(a){var c=O.event;O.event=a;try{b(d,o)}catch(e){}O.event=c};null!=j.field(d,"__dhx_on__"+a)&&(ma.removeEvent(d,e,a,c),j.deleteField(d,"__dhx_on__"+a));null!=b&&(d["__dhx_on__"+a]=f,ma.addEvent(d,e,f,c))})},mapNode:function(a){for(var b=[],c=0,d=this.groups;c<d.length;){var e=d[c];++c;for(var h=-1,e=u.iter(e.nodes);e.hasNext();){var o=e.next();null!=o&&b.push(a(o,++h))}}return b},filterNode:function(a){for(var b=[],c,d=0,e=this.groups;d<e.length;){var h=e[d];++d;var o=new la(c=[]);o.parentNode=h.parentNode;b.push(o);o=-1;for(h=u.iter(h.nodes);h.hasNext();){var f=h.next();null!=f&&a(f,++o)&&c.push(f)}}return this.createSelection(b)},empty:function(){return null==this.firstNode(function(a){return a})},node:function(){return this.firstNode(function(a){return a})},firstNode:function(a){for(var b=0,c=this.groups;b<c.length;){var d=c[b];++b;for(d=u.iter(d.nodes);d.hasNext();){var e=d.next();if(null!=e)return a(e)}}return null},insert:function(a,b,c){var d=Wb.qualify(a),e;return this._select(null==d?function(d){var e=ea.document.createElement(a);d.insertBefore(e,null!=b?b:O.select(c).node());return e}:function(a){var e=(void 0).Browser.document.createElementNS(d.space,d.local);a.insertBefore(e,null!=b?b:O.select(c).node());return e})},eachNode:function(a){for(var b=0,c=this.groups;b<c.length;){var d=c[b];++b;d.each(a)}return this},remove:function(){return this.eachNode(function(a){var b=a.parentNode;null!=b&&b.removeChild(a)})},append:function(a){var b=Wb.qualify(a),c;return this._select(null==b?function(b){var c=ea.document.createElement(a);b.appendChild(c);return c}:function(a){var c=ea.document.createElementNS(b.space,b.local);a.appendChild(c);return c})},selectAll:function(a){return this._selectAll(function(b){return O.selectionEngine.selectAll(a,b)})},select:function(a){return this._select(function(b){return O.selectionEngine.select(a,b)})},groups:null,parentNode:null,__class__:ma};Nb=function(a){ma.call(this,a)};i["dhx.UnboundSelection"]=Nb;Nb.__name__=["dhx","UnboundSelection"];Nb.__super__=ma;Nb.prototype=A(ma.prototype,{data:function(a,b){var c=[],d=[],e=[];if(null==b)for(var h=0,o=this.groups;h<o.length;){var f=o[h];++h;ma.bind(f,a,c,d,e)}else{h=0;for(o=this.groups;h<o.length;)f=o[h],++h,ma.bindJoin(b,f,a,c,d,e)}return new mc(c,d,e)},transition:function(){return new Nd(this)},style:function(a){return new ia(a,this)},classed:function(){return new ib(this)},attr:function(a){return new Bb(a,this)},text:function(){return new lc(this)},html:function(){return new kc(this)},__class__:Nb});Yb=function(a){Nb.call(this,a)};i["dhx.Selection"]=Yb;Yb.__name__=["dhx","Selection"];Yb.create=function(a){return new Yb(a)};Yb.__super__=Nb;Yb.prototype=A(Nb.prototype,{createSelection:function(a){return new Yb(a)},__class__:Yb});Od=function(){};i["dhx.ISelectorEngine"]=Od;Od.__name__=["dhx","ISelectorEngine"];Od.prototype={selectAll:null,select:null,__class__:Od};Dc=function(){};i["dhx.NativeSelectorEngine"]=Dc;Dc.__name__=["dhx","NativeSelectorEngine"];Dc.__interfaces__=[Od];Dc.supported=function(){return"undefined"!=typeof document.querySelector};Dc.prototype={selectAll:function(a,b,c){if(null!=b)a=b.querySelectorAll(a);else{if(null==c)c=ea.document;a=c.querySelectorAll(a)}for(var b=[],c=0,d=a.length;c<d;){var e=c++;b.push(a[e])}return b},select:function(a,b,c){if(null!=b)return b.querySelector(a);if(null==c)c=ea.document;return c.querySelector(a)},__class__:Dc};Ob=function(){};i["dhx.SizzleEngine"]=Ob;Ob.__name__=["dhx","SizzleEngine"];Ob.__interfaces__=[Od];Ob.supported=function(){return null!=Ob.getSizzle()};Ob.getSizzle=function(){return"undefined"!=typeof Sizzle&&Sizzle||"undefined"!=typeof jQuery&&jQuery.find||"undefined"!=typeof $&&$.find};Ob.prototype={selectAll:function(a,b,c){return ee.uniqueSort(ee.select(a,b||c))},select:function(a,b,c){return ee.select(a,b||c)[0]},__class__:Ob};O=function(){};i["dhx.Dom"]=O;O.__name__=["dhx","Dom"];O.select=function(a){return O.doc.select(a)};O.selectAll=function(a){return O.doc.selectAll(a)};O.selectNode=function(a){return Yb.create([new la([a])])};O.selectNodeData=function(a){return nc.create([new la([a])])};Wb=function(){};i["dhx.Namespace"]=Wb;Wb.__name__=["dhx","Namespace"];Wb.qualify=function(a){var b=a.indexOf(":");if(0>b)return null;var c=Wb.prefix.get(u.substr(a,0,b));if(null==c)throw"unable to find a namespace for "+c;return new Xd(c,u.substr(a,b+1,null))};Xd=function(a,b){this.space=a;this.local=b};i["dhx.NSQualifier"]=Xd;Xd.__name__=["dhx","NSQualifier"];Xd.prototype={local:null,space:null,__class__:Xd};jb=function(a){ma.call(this,a)};i["dhx.BoundSelection"]=jb;jb.__name__=["dhx","BoundSelection"];jb.__super__=ma;jb.prototype=A(ma.prototype,{on:function(a,b,c){null==c&&(c=!1);return this.onNode(a,null==b?null:function(a,c){b(j.field(a,"__dhx_data__"),c)},c)},filter:function(a){return this.filterNode(function(b,c){return a(j.field(b,"__dhx_data__"),c)})},each:function(a){return this.eachNode(function(b,c){a(j.field(b,"__dhx_data__"),c)})},dataf:function(a,b){if(null==b)for(var c=[],d=[],e=[],h=0,o=0,f=this.groups;o<f.length;){var g=f[o];++o;ma.bind(g,a(j.field(g.parentNode,"__dhx_data__"),h++),c,d,e)}else{c=[];d=[];e=[];o=h=0;for(f=this.groups;o<f.length;)g=f[o],++o,ma.bindJoin(b,g,a(j.field(g.parentNode,"__dhx_data__"),h++),c,d,e)}return new mc(c,d,e)},transition:function(){return new Pd(this)},style:function(a){return new Jd(a,this)},classed:function(){return new Hd(this)},attr:function(a){return new Gd(a,this)},text:function(){return new Kd(this)},html:function(){return new Id(this)},__class__:jb});oc=function(a,b){jb.call(this,a);this._choice=b};i["dhx.UpdateSelection"]=oc;oc.__name__=["dhx","UpdateSelection"];oc.__super__=jb;oc.prototype=A(jb.prototype,{exit:function(){return this._choice.exit()},update:function(){return this},createSelection:function(a){return new oc(a,this._choice)},_choice:null,__class__:oc});mc=function(a,b,c){this._update=a;this._enter=b;this._exit=c;oc.call(this,this._update,this)};i["dhx.DataChoice"]=mc;mc.__name__=["dhx","DataChoice"];mc.merge=function(a,b){la.merge(a,b._update)};mc.__super__=oc;mc.prototype=A(oc.prototype,{exit:function(){return new md(this._exit,this)},enter:function(){return new Yd(this._enter,this)},_exit:null,_enter:null,_update:null,__class__:mc});nc=function(a){jb.call(this,a)};i["dhx.ResumeSelection"]=nc;nc.__name__=["dhx","ResumeSelection"];nc.create=function(a){return new nc(a)};nc.__super__=jb;nc.prototype=A(jb.prototype,{createSelection:function(a){return new nc(a)},__class__:nc});Yd=function(a,b){this.groups=a;this._choice=b};i["dhx.PreEnterSelection"]=Yd;Yd.__name__=["dhx","PreEnterSelection"];Yd.prototype={_select:function(a){for(var b=[],c,d,e=0,h=this.groups;e<h.length;){var o=h[e];++e;b.push(c=new la([]));c.parentNode=o.parentNode;for(var f=u.iter(o.nodes);f.hasNext();){var g=f.next();null!=g?(c.nodes.push(d=a(o.parentNode)),d.__dhx_data__=j.field(g,"__dhx_data__")):c.nodes.push(null)}}mc.merge(b,this._choice);return this.createSelection(b)},createSelection:function(a){return new nd(a,this._choice)},append:function(a){var b=Wb.qualify(a),c;return this._select(null==b?function(b){var c=ea.document.createElement(a);b.appendChild(c);return c}:function(a){var c=ea.document.createElementNS(b.space,b.local);a.appendChild(c);return c})},_choice:null,groups:null,__class__:Yd};nd=function(a,b){jb.call(this,a);this._choice=b};i["dhx.EnterSelection"]=nd;nd.__name__=["dhx","EnterSelection"];nd.__super__=jb;nd.prototype=A(jb.prototype,{update:function(){return this._choice.update()},createSelection:function(a){return new nd(a,this._choice)},_choice:null,__class__:nd});md=function(a,b){Nb.call(this,a);this._choice=b};i["dhx.ExitSelection"]=md;md.__name__=["dhx","ExitSelection"];md.__super__=Nb;md.prototype=A(Nb.prototype,{update:function(){return this._choice.update()},createSelection:function(a){return new md(a,this._choice)},_choice:null,__class__:md});Ec=function(){};i["dhx.Svg"]=Ec;Ec.__name__=["dhx","Svg"];Ec.mouse=function(a){var b=(null!=a.ownerSVGElement?a.ownerSVGElement:a).createSVGPoint();if(Ec._usepage&&(ea.window.scrollX||ea.window.scrollY)){var c=O.selectNode(ea.document.body).append("svg:svg").style("position").string("absolute").style("top")["float"](0).style("left")["float"](0),d=c.node().getScreenCTM();Ec._usepage=!(d.f||d.e);c.remove()}Ec._usepage?(b.x=O.event.pageX,b.y=O.event.pageY):(b.x=O.event.clientX,b.y=O.event.clientY);b=b.matrixTransform(a.getScreenCTM().inverse());return[b.x,b.y]};oa=function(){};i["dhx.Timer"]=oa;oa.__name__=["dhx","Timer"];oa.timer=function(a,b){null==b&&(b=0);var c=(new Date).getTime(),d=!1,e=oa.queue;if(Math.isFinite(b)){for(;null!=e;){if(j.compareMethods(a,e.f)){e.then=c;e.delay=b;d=!0;break}e=e.next}if(!d)oa.queue={f:a,then:c,delay:b,next:oa.queue,flush:!1};if(0==oa.interval)oa.timeout=clearTimeout(oa.timeout),oa.interval=1,window.requestAnimationFrame(oa._step)}};oa.step=function(){for(var a,b=(new Date).getTime(),c=oa.queue;null!=c;){a=b-c.then;if(a>c.delay)c.flush=c.f(a);c=c.next}a=oa._flush()-b;if(24<a){if(Math.isFinite(a))clearTimeout(oa.timeout),oa.timeout=setTimeout(oa._step,a);oa.interval=0}else oa.interval=1,window.requestAnimationFrame(oa._step)};oa._flush=function(){var d;for(var a=null,b=oa.queue,c=Math.POSITIVE_INFINITY;null!=b;)b.flush?(d=null!=a?a.next=b.next:oa.queue=b.next,b=d):(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c};Ca=function(a){this.selection=a;var b=this._transitionId=0<Ca._inheritid?Ca._inheritid:++Ca._id;this._tweens=new L.StringMap;this._interpolators=[];this._remove=!1;this._stage=[];this._delay=[];this._duration=[];this._ease=Ca.DEFAULT_EASE;this._step=v(this,this.step);a.eachNode(function(a){j.hasField(a,"__dhx_transition__")?j.field(a,"__dhx_transition__").owner=b:a.__dhx_transition__={owner:b}});this.delay(null,0);this.duration(null,250)};i["dhx.BaseTransition"]=Ca;Ca.__name__=["dhx","BaseTransition"];Ca.CUBIC_EQUATION=function(a){return Math.pow(a,3)};Ca.DEFAULT_EASE=function(a){return.5*(.5>a?Ca.CUBIC_EQUATION(2*a):2-Ca.CUBIC_EQUATION(2-2*a))};Ca.prototype={_this:function(){return this},remove:function(a){null==a&&(a=!0);this._remove=a;return this._this()},ease:function(a){this._ease=a;return this._this()},duration:function(a,b){null==b&&(b=0);var c=-1,d=this;null!=a?(this._durationMax=0,this.selection.eachNode(function(b,h){var o=d._duration[++c]=a(b,h);if(o>d._durationMax)d._durationMax=o})):(this._durationMax=b,this.selection.eachNode(function(){d._duration[++c]=d._durationMax}));return this._this()},delay:function(a,b){null==b&&(b=0);var c=Math.POSITIVE_INFINITY,d=-1,e=this;null!=a?this.selection.eachNode(function(b,o){var f=e._delay[++d]=a(b,o);f<c&&(c=f)}):(c=b,this.selection.eachNode(function(){e._delay[++d]=c}));oa.timer(this._step,c);return this._this()},endNode:function(a){this._end=a;return this._this()},step:function(a){var b=!0,c=-1,d=this;this.selection.eachNode(function(e,h){if(2!=d._stage[++c]){var o=(a-d._delay[c])/d._duration[c],f=j.field(e,"__dhx_transition__"),g,k=d._interpolators[c];if(1>o){if(b=!1,0>o)return}else o=1;if(null!=d._stage[c]){if(null==f||f.active!=d._transitionId){d._stage[c]=2;return}}else{if(null==f||f.active>d._transitionId){d._stage[c]=2;return}d._stage[c]=1;null!=d._start&&d._start(e,h);k=d._interpolators[c]=new L.StringMap;f.active=d._transitionId;for(g=d._tweens.keys();g.hasNext();){var x=g.next(),i=d._tweens.get(x);k.set(x,i(e,h))}}g=d._ease(o);for(i=d._tweens.keys();i.hasNext();)x=i.next(),k.get(x)(g);if(1==o&&(d._stage[c]=2,f.active==d._transitionId))o=f.owner,o==d._transitionId&&(j.deleteField(e,"__dhx_transition__"),d._remove&&e.parentNode.removeChild(e)),Ca._inheritid=d._transitionId,null!=d._end&&d._end(e,h),Ca._inheritid=0,f.owner=o}});return b},selection:null,_end:null,_start:null,_step:null,_ease:null,_durationMax:null,_duration:null,_delay:null,_stage:null,_remove:null,_interpolators:null,_tweens:null,_transitionId:null,__class__:Ca};Nd=function(a){Ca.call(this,a)};i["dhx.UnboundTransition"]=Nd;Nd.__name__=["dhx","UnboundTransition"];Nd.__super__=Ca;Nd.prototype=A(Ca.prototype,{style:function(a){return new Md(a,this,this._tweens)},__class__:Nd});Pd=function(a){Ca.call(this,a)};i["dhx.BoundTransition"]=Pd;Pd.__name__=["dhx","BoundTransition"];Pd.__super__=Ca;Pd.prototype=A(Ca.prototype,{attr:function(a){return new Ld(a,this,this._tweens)},__class__:Pd});var Ra,Za,Zd,$d;db={__ename__:["erazor","_Parser","ParseContext"],__constructs__:["literal","code"]};eb=void 0;db.literal=["literal",0];db.literal.toString=q;db.literal.__enum__=db;db.code=["code",1];db.code.toString=q;db.code.__enum__=db;eb={__ename__:["erazor","_Parser","ParseResult"],__constructs__:["keepGoing","doneIncludeCurrent","doneSkipCurrent"],keepGoing:["keepGoing",0]};eb.keepGoing.toString=q;eb.keepGoing.__enum__=eb;eb.doneIncludeCurrent=["doneIncludeCurrent",1];eb.doneIncludeCurrent.toString=q;eb.doneIncludeCurrent.__enum__=eb;eb.doneSkipCurrent=["doneSkipCurrent",2];eb.doneSkipCurrent.toString=q;eb.doneSkipCurrent.__enum__=eb;Ra=function(){this.condMatch=new M("^@(?:if|for|while)\\b","");this.inConditionalMatch=new M("^(?:\\}[\\s\r\n]*else if\\b|\\}[\\s\r\n]*else[\\s\r\n]*{)","");this.variableChar=new M("^[_\\w\\.]$","")};i["erazor.Parser"]=Ra;Ra.__name__=["erazor","Parser"];Ra.prototype={parse:function(a){this.pos=0;var b=[];this.bracketStack=[];for(this.conditionalStack=0;""!=a;){this.context=this.parseContext(a);var c=this.parseBlock(a);null!=c.block&&b.push(c.block);a=u.substr(a,c.length,null);this.pos+=c.length}if(0!=this.bracketStack.length)throw new Vb(Ra.bracketMismatch,this.pos);return b},escapeLiteral:function(a){return C.replace(a,Ra.at+Ra.at,Ra.at)},parseLiteral:function(a){for(var b=a.length,c=-1;++c<b;){var d=a.charAt(c);if(d==Ra.at){if(b>c+1&&a.charAt(c+1)!=Ra.at)return{block:Za.literal(this.escapeLiteral(u.substr(a,0,c))),length:c,start:this.pos};++c}else if("}"==d)if(0<this.bracketStack.length)switch(this.bracketStack[this.bracketStack.length-1][1]){case 1:return{block:Za.literal(this.escapeLiteral(u.substr(a,0,c))),length:c,start:this.pos};case 0:this.bracketStack.pop()}else throw new Vb(Ra.bracketMismatch,this.pos);else"{"==d&&this.bracketStack.push(db.literal)}return{block:Za.literal(this.escapeLiteral(a)),length:b,start:this.pos}},parseString:function(a,b,c){for(var d=!1,e=!1,h=-1;++h<a.length;){var o=a.charAt(h);if(!e&&!d){switch(b(o)[1]){case 1:return u.substr(a,0,h+1);case 2:return u.substr(a,0,h)}'"'==o?e=!0:"'"==o&&(d=!0)}else e&&'"'==o&&"\\"!=a.charAt(h-1)?e=!1:d&&"'"==o&&"\\"!=a.charAt(h-1)&&(d=!1)}if(c)throw new Vb("Failed to find a closing delimiter: ",this.pos,u.substr(a,0,100));return a},parseCodeBlock:function(a){if(0<this.bracketStack.length&&"}"==this.peek(a)){if(this.inConditionalMatch.match(a))return a=this.parseScriptPart(a,"","{"),{block:Za.codeBlock(a),length:a.length,start:this.pos};var b;switch(this.bracketStack.pop()[1]){case 1:b=0>--this.conditionalStack;break;default:b=!0}if(b)throw new Vb(Ra.bracketMismatch,this.pos);return{block:Za.codeBlock("}"),length:1,start:this.pos}}if(this.condMatch.match(a))return this.bracketStack.push(db.code),++this.conditionalStack,this.parseConditional(a);if("@"==this.peek(a)&&this.isIdentifier(this.peek(a,1)))return this.parseVariable(a);b=this.peek(a,1);var a=this.parseScriptPart(u.substr(a,1,null),b,"{"==b?"}":")"),c=C.trim(u.substr(a,1,a.length-2));return"{"==b?{block:Za.codeBlock(c),length:a.length+1,start:this.pos}:{block:Za.printBlock(c),length:a.length+1,start:this.pos}},parseVariable:function(a){var b="",c=null,c=null,a=u.substr(a,1,null);do{c=this.acceptIdentifier(a);a=u.substr(a,c.length,null);b+=c;for(c=this.peek(a);"("==c||"["==c;)c=this.acceptBracket(a,c),a=u.substr(a,c.length,null),b+=c,c=this.peek(a);if("."==c&&this.isIdentifier(this.peek(a,1)))a=u.substr(a,1,null),b+=".";else break}while(null!=c);return{block:Za.printBlock(b),length:b.length+1,start:this.pos}},peek:function(a,b){null==b&&(b=0);return a.length>b?a.charAt(b):null},parseConditional:function(a){a=this.parseScriptPart(a,"","{");return{block:Za.codeBlock(u.substr(a,1,null)),length:a.length,start:this.pos}},parseBlock:function(a){return this.context==db.code?this.parseCodeBlock(a):this.parseLiteral(a)},acceptBracket:function(a,b){return this.parseScriptPart(a,b,"("==b?")":"]")},acceptIdentifier:function(a){var b=!0,c=this;return this.accept(a,function(a){a=c.isIdentifier(a,b);b=!1;return a},!1)},isIdentifier:function(a,b){null==b&&(b=!0);return b?"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"==a:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||"_"==a},accept:function(a,b,c){return this.parseString(a,function(a){return b(a)?eb.keepGoing:eb.doneSkipCurrent},c)},parseContext:function(a){if(this.peek(a)==Ra.at&&this.peek(a,1)!=Ra.at)return db.code;if(0<this.conditionalStack&&"}"==this.peek(a))switch(this.bracketStack[this.bracketStack.length-1][1]){case 1:return db.code}return db.literal},parseScriptPart:function(a,b,c){for(var d=!1,e=!1,h=""==b?1:0,o=-1;++o<a.length;){var f=a.charAt(o);if(!e&&!d)if(f==b)++h;else if(f==c){--h;if(0==h)return u.substr(a,0,o+1);if(0>h)throw new Vb("Unbalanced braces for block: ",this.pos,u.substr(a,0,100))}else'"'==f?e=!0:"'"==f&&(d=!0);else e&&'"'==f&&"\\"!=a.charAt(o-1)?e=!1:d&&"'"==f&&"\\"!=a.charAt(o-1)&&(d=!1)}throw new Vb("Failed to find a closing delimiter for the script block: ",this.pos,u.substr(a,0,100))},pos:null,conditionalStack:null,bracketStack:null,context:null,variableChar:null,inConditionalMatch:null,condMatch:null,__class__:Ra};Zd=function(a){this.context=a};i["erazor.ScriptBuilder"]=Zd;Zd.__name__=["erazor","ScriptBuilder"];Zd.prototype={blockToString:function(a){switch(a[1]){case 0:return this.context+".add('"+C.replace(a[2],"'","\\'")+"');\n";case 1:return a[2]+"\n";case 2:return this.context+".add("+a[2]+");\n"}},build:function(a){for(var b=new Ab,c=0;c<a.length;){var d=a[c];++c;b.b+=t.string(this.blockToString(d))}return b.b},context:null,__class__:Zd};Za={__ename__:["erazor","TBlock"],__constructs__:["literal","codeBlock","printBlock"]};Za.literal=function(a){a=["literal",0,a];a.__enum__=Za;a.toString=q;return a};Za.codeBlock=function(a){a=["codeBlock",1,a];a.__enum__=Za;a.toString=q;return a};Za.printBlock=function(a){a=["printBlock",2,a];a.__enum__=Za;a.toString=q;return a};$d=function(a){this.template=a};i["erazor.Template"]=$d;$d.__name__=["erazor","Template"];$d.prototype={setInterpreterVars:function(a,b){if(B.__instanceof(b,L.StringMap))for(var c=b.keys();c.hasNext();){var d=c.next(),e=b.get(d);a.variables.set(d,e)}else for(var c=0,h=j.fields(b);c<h.length;)d=h[c],++c,e=j.field(b,d),a.variables.set(d,e)},execute:function(a){var b=new Ab,c=(new Ra).parse(this.template),c=new Zd("__b__").build(c),c=(new jd).parseString(c),d=new Cd;this.variables=new L.StringMap;var e=[];this.setInterpreterVars(d,a);d.variables.set("__b__",b);d.variables.set("__string_buf__",function(a){e.push(a);return new Ab});d.variables.set("__restore_buf__",function(){return e.pop()});d.execute(c);return b.b},variables:null,template:null,__class__:$d};Vb=function(a,b,c){this.msg=a;this.pos=b;this.excerpt=c};i["erazor.error.ParserError"]=Vb;Vb.__name__=["erazor","error","ParserError"];Vb.prototype={toString:function(){var a=this.excerpt;if(null!=a){var b=a.indexOf("\n");-1!=b&&(a=u.substr(a,0,b))}return this.msg+" @ "+this.pos+(null!=a?' ( "'+a+'" )':"")},excerpt:null,pos:null,msg:null,__class__:Vb};jd=void 0;ic=void 0;da=void 0;Oa=void 0;Va=void 0;E=void 0;tb=void 0;y=void 0;ic=function(){this.locals=new L.StringMap;this.declared=[];this.variables=new L.StringMap;this.variables.set("null",null);this.variables.set("true",!0);this.variables.set("false",!1);this.variables.set("trace",function(a){Sd.trace(t.string(a),{fileName:"hscript",lineNumber:0})});this.initOps()};i["hscript.Interp"]=ic;ic.__name__=["hscript","Interp"];ic.prototype={cnew:function(a,b){return z.createInstance(z.resolveClass(a),b)},call:function(a,b,c){return b.apply(a,c)},set:function(a,b,c){if(null==a)throw da.EInvalidAccess(b);return a[b]=c},get:function(a,b){if(null==a)throw da.EInvalidAccess(b);return j.field(a,b)},forLoop:function(a,b,c){var d=this.declared.length;this.declared.push({n:a,old:this.locals.get(a)});b=this.makeIterator(this.expr(b));try{for(;b.hasNext();){this.locals.set(a,{r:b.next()});try{this.expr(c)}catch(e){if(B.__instanceof(e,Oa.Stop))switch(e[1]){case 0:throw"__break__";case 2:throw e}else throw e}}}catch(h){if("__break__"!=h)throw h}this.restore(d)},makeIterator:function(a){try{a=Qa(a)()}catch(b){}if(null==a.hasNext||null==a.next)throw da.EInvalidIterator(a);return a},whileLoop:function(a,b){var c=this.declared.length;try{for(;!0==this.expr(a);)try{this.expr(b)}catch(d){if(B.__instanceof(d,Oa.Stop))switch(d[1]){case 0:throw"__break__";case 2:throw d}else throw d}}catch(e){if("__break__"!=e)throw e}this.restore(c)},expr:function(a){switch(a[1]){case 0:a=a[2];switch(a[1]){case 0:return a[2];case 1:return a[2];case 2:return a[2]}break;case 1:var a=a[2],b=this.locals.get(a);if(null!=b)return b.r;b=this.variables.get(a);if(null==b&&!this.variables.exists(a))throw da.EUnknownVariable(a);return b;case 2:b=a[4];a=a[2];this.declared.push({n:a,old:this.locals.get(a)});this.locals.set(a,{r:null==b?null:this.expr(b)});break;case 3:return this.expr(a[2]);case 4:for(var c=a[2],d=this.declared.length,b=null,a=0;a<c.length;)b=c[a],++a,b=this.expr(b);this.restore(d);return b;case 5:return d=a[3],a=a[2],this.get(this.expr(a),d);case 6:b=a[4];d=a[3];a=a[2];c=this.binops.get(a);if(null==c)throw da.EInvalidOp(a);return c(d,b);case 7:switch(b=a[4],d=a[3],a=a[2],a){case"!":return!0!=this.expr(b);case"-":return-this.expr(b);case"++":return this.increment(b,d,1);case"--":return this.increment(b,d,-1);case"~":return~this.expr(b);default:throw da.EInvalidOp(a)}case 8:d=a[3];c=a[2];b=[];for(a=0;a<d.length;){var e=d[a];++a;b.push(this.expr(e))}a=c;switch(a[1]){case 5:d=a[3];a=a[2];a=this.expr(a);if(null==a)throw da.EInvalidAccess(d);return this.call(a,j.field(a,d),b);default:return this.call(null,this.expr(c),b)}case 9:return b=a[4],d=a[3],!0==this.expr(a[2])?this.expr(d):null==b?null:this.expr(b);case 10:this.whileLoop(a[2],a[3]);break;case 11:this.forLoop(a[2],a[3],a[4]);break;case 12:throw Oa.Stop.SBreak;case 13:throw Oa.Stop.SContinue;case 15:throw a=a[2],Oa.Stop.SReturn(null==a?null:this.expr(a));case 14:var b=a[4],h=a[3],o=a[2],f=this.duplicate(this.locals),g=this,a=j.makeVarArgs(function(a){if(a.length!=o.length)throw"Invalid number of parameters";var b=g.locals;g.locals=g.duplicate(f);for(var c=0,d=o.length;c<d;){var e=c++;g.locals.set(o[e].name,{r:a[e]})}a=null;try{a=g.exprReturn(h)}catch(k){throw g.locals=b,k}g.locals=b;return a});null!=b&&this.variables.set(b,a);return a;case 17:c=a[2];d=[];for(a=0;a<c.length;)b=c[a],++a,d.push(this.expr(b));return d;case 16:return b=a[3],this.expr(a[2])[this.expr(b)];case 18:c=a[3];e=a[2];d=[];for(a=0;a<c.length;)b=c[a],++a,d.push(this.expr(b));return this.cnew(e,d);case 19:throw this.expr(a[2]);case 20:c=a[5];e=a[3];a=a[2];d=this.declared.length;try{return b=this.expr(a),this.restore(d),b}catch(k){if(B.__instanceof(k,Oa.Stop))throw k;a=k;this.restore(d);this.declared.push({n:e,old:this.locals.get(e)});this.locals.set(e,{r:a});b=this.expr(c);this.restore(d);return b}case 21:d=a[2];c={};for(a=0;a<d.length;)b=d[a],++a,this.set(c,b.name,this.expr(b.e));return c;case 22:return b=a[4],d=a[3],!0==this.expr(a[2])?this.expr(d):this.expr(b)}return null},restore:function(a){for(;this.declared.length>a;){var b=this.declared.pop();this.locals.set(b.n,b.old)}},duplicate:function(a){for(var b=new L.StringMap,c=a.keys();c.hasNext();){var d=c.next();b.set(d,a.get(d))}return b},exprReturn:function(a){try{return this.expr(a)}catch(b){if(B.__instanceof(b,Oa.Stop))switch(b[1]){case 0:throw"Invalid break";case 1:throw"Invalid continue";case 2:return b[2]}else throw b}return null},execute:function(a){this.locals=new L.StringMap;return this.exprReturn(a)},increment:function(a,b,c){switch(a[1]){case 1:var d=a[2],e=this.locals.get(d),a=null==e?this.variables.get(d):e.r;b?(a+=c,null==e?this.variables.set(d,a):e.r=a):null==e?this.variables.set(d,a+c):e.r=a+c;return a;case 5:return d=a[3],e=this.expr(a[2]),a=this.get(e,d),b?(a+=c,this.set(e,d,a)):this.set(e,d,a+c),a;case 16:return e=a[3],d=this.expr(a[2]),e=this.expr(e),a=d[e],b?(a+=c,d[e]=a):d[e]=a+c,a;default:throw da.EInvalidOp(0<c?"++":"--")}},evalAssignOp:function(a,b,c,d){switch(c[1]){case 1:var a=c[2],e=this.locals.get(a),b=b(this.expr(c),this.expr(d));null==e?this.variables.set(a,b):e.r=b;break;case 5:a=c[3];c=this.expr(c[2]);b=b(this.get(c,a),this.expr(d));b=this.set(c,a,b);break;case 16:a=c[3];c=this.expr(c[2]);a=this.expr(a);b=b(c[a],this.expr(d));c[a]=b;break;default:throw da.EInvalidOp(a)}return b},assignOp:function(a,b){var c=this;this.binops.set(a,function(d,e){return c.evalAssignOp(a,b,d,e)})},assign:function(a,b){var c=this.expr(b);switch(a[1]){case 1:var d=a[2],e=this.locals.get(d);null==e?this.variables.set(d,c):e.r=c;break;case 5:d=a[3];c=this.set(this.expr(a[2]),d,c);break;case 16:d=a[3];this.expr(a[2])[this.expr(d)]=c;break;default:throw da.EInvalidOp("=")}return c},initOps:function(){var a=this;this.binops=new L.StringMap;this.binops.set("+",function(b,c){return a.expr(b)+a.expr(c)});this.binops.set("-",function(b,c){return a.expr(b)-a.expr(c)});this.binops.set("*",function(b,c){return a.expr(b)*a.expr(c)});this.binops.set("/",function(b,c){return a.expr(b)/a.expr(c)});this.binops.set("%",function(b,c){return a.expr(b)%a.expr(c)});this.binops.set("&",function(b,c){return a.expr(b)&a.expr(c)});this.binops.set("|",function(b,c){return a.expr(b)|a.expr(c)});this.binops.set("^",function(b,c){return a.expr(b)^a.expr(c)});this.binops.set("<<",function(b,c){return a.expr(b)<<a.expr(c)});this.binops.set(">>",function(b,c){return a.expr(b)>>a.expr(c)});this.binops.set(">>>",function(b,c){return a.expr(b)>>>a.expr(c)});this.binops.set("==",function(b,c){return a.expr(b)==a.expr(c)});this.binops.set("!=",function(b,c){return a.expr(b)!=a.expr(c)});this.binops.set(">=",function(b,c){return a.expr(b)>=a.expr(c)});this.binops.set("<=",function(b,c){return a.expr(b)<=a.expr(c)});this.binops.set(">",function(b,c){return a.expr(b)>a.expr(c)});this.binops.set("<",function(b,c){return a.expr(b)<a.expr(c)});this.binops.set("||",function(b,c){return!0==a.expr(b)||!0==a.expr(c)});this.binops.set("&&",function(b,c){return!0==a.expr(b)&&!0==a.expr(c)});this.binops.set("=",v(this,this.assign));this.binops.set("...",function(b,c){return new ce(a.expr(b),a.expr(c))});this.assignOp("+=",function(a,c){return a+c});this.assignOp("-=",function(a,c){return a-c});this.assignOp("*=",function(a,c){return a*c});this.assignOp("/=",function(a,c){return a/c});this.assignOp("%=",function(a,c){return a%c});this.assignOp("&=",function(a,c){return a&c});this.assignOp("|=",function(a,c){return a|c});this.assignOp("^=",function(a,c){return a^c});this.assignOp("<<=",function(a,c){return a<<c});this.assignOp(">>=",function(a,c){return a>>c});this.assignOp(">>>=",function(a,c){return a>>>c})},declared:null,binops:null,locals:null,variables:null,__class__:ic};Cd=function(){ic.call(this)};i["erazor.hscript.EnhancedInterp"]=Cd;Cd.__name__=["erazor","hscript","EnhancedInterp"];Cd.__super__=ic;Cd.prototype=A(ic.prototype,{call:function(a,b,c){c=c.concat([null,null,null,null,null]);return b.apply(a,c)},get:function(a,b){if(null==a)throw da.EInvalidAccess(b);return j.field(a,b)},__class__:Cd});Dd=void 0;L=void 0;Sd=void 0;Ac=void 0;sb=void 0;Mb=void 0;D=void 0;Dd=function(a){for(var b=a.length,c=1;b>1<<c;)c++;if(8<c||b!=1<<c)throw"BaseCode : base length must be a power of two.";this.base=a;this.nbits=c};i["haxe.BaseCode"]=Dd;
Dd.__name__=["haxe","BaseCode"];Dd.prototype={decodeBytes:function(a){var b=this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,e=zb.alloc(d),h=0,o=0,f=0,g=0;g<d;){for(;8>o;){var o=o+b,h=h<<b,k=c[a.b[f++]];if(-1==k)throw"BaseCode : invalid encoded char";h|=k}o-=8;e.b[g++]=h>>o&255}return e},initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}for(var d=0,b=this.base.length;d<b;)c=d++,a[this.base.b[c]]=c;this.tbl=a},tbl:null,nbits:null,base:null,__class__:Dd};Ac=function(a){this.url=a;this.headers=new L.StringMap;this.params=new L.StringMap;this.async=!0};i["haxe.Http"]=Ac;Ac.__name__=["haxe","Http"];Ac.prototype={onStatus:function(){},onError:function(){},onData:function(){},request:function(a){var b=this;b.responseData=null;var c=ea.createXMLHttpRequest(),d=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.onData(b.responseData=c.responseText);else if(null==a)b.onError("Failed to connect or resolve host");else switch(a){case 12029:b.onError("Failed to connect to host");break;case 12007:b.onError("Unknown host");break;default:b.responseData=c.responseText,b.onError("Http Error #"+c.status)}}};if(this.async)c.onreadystatechange=d;var e=this.postData;if(null!=e)a=!0;else for(var h=this.params.keys();h.hasNext();)var o=h.next(),e=null==e?"":e+"&",e=e+(C.urlEncode(o)+"="+C.urlEncode(this.params.get(o)));try{if(a)c.open("POST",this.url,this.async);else if(null!=e){var f=1>=this.url.split("?").length;c.open("GET",this.url+(f?"?":"&")+e,this.async);e=null}else c.open("GET",this.url,this.async)}catch(g){this.onError(g.toString());return}null==this.headers.get("Content-Type")&&a&&null==this.postData&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=this.headers.keys();a.hasNext();)h=a.next(),c.setRequestHeader(h,this.headers.get(h));c.send(e);this.async||d(null)},setParameter:function(a,b){this.params.set(a,b);return this},setHeader:function(a,b){this.headers.set(a,b);return this},params:null,headers:null,postData:null,async:null,responseData:null,url:null,__class__:Ac};Sd=function(){};i["haxe.Log"]=Sd;Sd.__name__=["haxe","Log"];Sd.trace=function(a,b){B.__trace(a,b)};sb=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};i["haxe.Timer"]=sb;sb.__name__=["haxe","Timer"];sb.delay=function(a,b){var c=new sb(b);c.run=function(){c.stop();a()};return c};sb.prototype={run:function(){},stop:function(){if(null!=this.id)clearInterval(this.id),this.id=null},id:null,__class__:sb};Mb={Md5:function(){}};i["haxe.crypto.Md5"]=Mb.Md5;Mb.Md5.__name__=["haxe","crypto","Md5"];Mb.Md5.encode=function(a){var b=new Mb.Md5,a=b.doEncode(Mb.Md5.str2blks(a));return b.hex(a)};Mb.Md5.str2blks=function(a){for(var b=(a.length+8>>6)+1,c=[],d=16*b,e=0;e<d;){var h=e++;c[h]=0}for(h=0;h<a.length;)c[h>>2]|=u.cca(a,h)<<8*((8*a.length+h)%4),h++;c[h>>2]|=128<<8*((8*a.length+h)%4);a=8*a.length;b=16*b-2;c[b]=a&255;c[b]|=(a>>>8&255)<<8;c[b]|=(a>>>16&255)<<16;c[b]|=(a>>>24&255)<<24;return c};Mb.Md5.prototype={doEncode:function(a){for(var b=1732584193,c=-271733879,d=-1732584194,e=271733878,h=0;h<a.length;)var o=b,f=c,g=d,k=e,b=this.ff(b,c,d,e,a[h],7,-680876936),e=this.ff(e,b,c,d,a[h+1],12,-389564586),d=this.ff(d,e,b,c,a[h+2],17,606105819),c=this.ff(c,d,e,b,a[h+3],22,-1044525330),b=this.ff(b,c,d,e,a[h+4],7,-176418897),e=this.ff(e,b,c,d,a[h+5],12,1200080426),d=this.ff(d,e,b,c,a[h+6],17,-1473231341),c=this.ff(c,d,e,b,a[h+7],22,-45705983),b=this.ff(b,c,d,e,a[h+8],7,1770035416),e=this.ff(e,b,c,d,a[h+9],12,-1958414417),d=this.ff(d,e,b,c,a[h+10],17,-42063),c=this.ff(c,d,e,b,a[h+11],22,-1990404162),b=this.ff(b,c,d,e,a[h+12],7,1804603682),e=this.ff(e,b,c,d,a[h+13],12,-40341101),d=this.ff(d,e,b,c,a[h+14],17,-1502002290),c=this.ff(c,d,e,b,a[h+15],22,1236535329),b=this.gg(b,c,d,e,a[h+1],5,-165796510),e=this.gg(e,b,c,d,a[h+6],9,-1069501632),d=this.gg(d,e,b,c,a[h+11],14,643717713),c=this.gg(c,d,e,b,a[h],20,-373897302),b=this.gg(b,c,d,e,a[h+5],5,-701558691),e=this.gg(e,b,c,d,a[h+10],9,38016083),d=this.gg(d,e,b,c,a[h+15],14,-660478335),c=this.gg(c,d,e,b,a[h+4],20,-405537848),b=this.gg(b,c,d,e,a[h+9],5,568446438),e=this.gg(e,b,c,d,a[h+14],9,-1019803690),d=this.gg(d,e,b,c,a[h+3],14,-187363961),c=this.gg(c,d,e,b,a[h+8],20,1163531501),b=this.gg(b,c,d,e,a[h+13],5,-1444681467),e=this.gg(e,b,c,d,a[h+2],9,-51403784),d=this.gg(d,e,b,c,a[h+7],14,1735328473),c=this.gg(c,d,e,b,a[h+12],20,-1926607734),b=this.hh(b,c,d,e,a[h+5],4,-378558),e=this.hh(e,b,c,d,a[h+8],11,-2022574463),d=this.hh(d,e,b,c,a[h+11],16,1839030562),c=this.hh(c,d,e,b,a[h+14],23,-35309556),b=this.hh(b,c,d,e,a[h+1],4,-1530992060),e=this.hh(e,b,c,d,a[h+4],11,1272893353),d=this.hh(d,e,b,c,a[h+7],16,-155497632),c=this.hh(c,d,e,b,a[h+10],23,-1094730640),b=this.hh(b,c,d,e,a[h+13],4,681279174),e=this.hh(e,b,c,d,a[h],11,-358537222),d=this.hh(d,e,b,c,a[h+3],16,-722521979),c=this.hh(c,d,e,b,a[h+6],23,76029189),b=this.hh(b,c,d,e,a[h+9],4,-640364487),e=this.hh(e,b,c,d,a[h+12],11,-421815835),d=this.hh(d,e,b,c,a[h+15],16,530742520),c=this.hh(c,d,e,b,a[h+2],23,-995338651),b=this.ii(b,c,d,e,a[h],6,-198630844),e=this.ii(e,b,c,d,a[h+7],10,1126891415),d=this.ii(d,e,b,c,a[h+14],15,-1416354905),c=this.ii(c,d,e,b,a[h+5],21,-57434055),b=this.ii(b,c,d,e,a[h+12],6,1700485571),e=this.ii(e,b,c,d,a[h+3],10,-1894986606),d=this.ii(d,e,b,c,a[h+10],15,-1051523),c=this.ii(c,d,e,b,a[h+1],21,-2054922799),b=this.ii(b,c,d,e,a[h+8],6,1873313359),e=this.ii(e,b,c,d,a[h+15],10,-30611744),d=this.ii(d,e,b,c,a[h+6],15,-1560198380),c=this.ii(c,d,e,b,a[h+13],21,1309151649),b=this.ii(b,c,d,e,a[h+4],6,-145523070),e=this.ii(e,b,c,d,a[h+11],10,-1120210379),d=this.ii(d,e,b,c,a[h+2],15,718787259),c=this.ii(c,d,e,b,a[h+9],21,-343485551),b=this.addme(b,o),c=this.addme(c,f),d=this.addme(d,g),e=this.addme(e,k),h=h+16;return[b,c,d,e]},ii:function(a,b,c,d,e,h,o){return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,e,h,o)},hh:function(a,b,c,d,e,h,o){return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,e,h,o)},gg:function(a,b,c,d,e,h,o){return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,e,h,o)},ff:function(a,b,c,d,e,h,o){return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,e,h,o)},cmn:function(a,b,c,d,e,h){return this.addme(this.rol(this.addme(this.addme(b,a),this.addme(d,h)),e),c)},rol:function(a,b){return a<<b|a>>>32-b},hex:function(a){for(var b="",c=0;c<a.length;){var d=a[c];++c;for(var e=0;4>e;)var h=e++,b=b+("0123456789abcdef".charAt(d>>8*h+4&15)+"0123456789abcdef".charAt(d>>8*h&15))}return b},addme:function(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535},bitAND:function(a,b){return(a>>>1&b>>>1)<<1|a&1&b&1},bitXOR:function(a,b){return(a>>>1^b>>>1)<<1|a&1^b&1},bitOR:function(a,b){return(a>>>1|b>>>1)<<1|a&1|b&1},__class__:Mb.Md5};L={FastCell:function(a,b){this.elt=a;this.next=b}};i["haxe.ds.FastCell"]=L.FastCell;L.FastCell.__name__=["haxe","ds","FastCell"];L.FastCell.prototype={next:null,elt:null,__class__:L.FastCell};L.GenericStack=function(){};i["haxe.ds.GenericStack"]=L.GenericStack;L.GenericStack.__name__=["haxe","ds","GenericStack"];L.GenericStack.prototype={pop:function(){var a=this.head;if(null==a)return null;this.head=a.next;return a.elt},add:function(a){this.head=new L.FastCell(a,this.head)},head:null,__class__:L.GenericStack};L.IntMap=function(){this.h={}};i["haxe.ds.IntMap"]=L.IntMap;L.IntMap.__name__=["haxe","ds","IntMap"];L.IntMap.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return u.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},h:null,__class__:L.IntMap};L.StringMap=function(){this.h={}};i["haxe.ds.StringMap"]=L.StringMap;L.StringMap.__name__=["haxe","ds","StringMap"];L.StringMap.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return u.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},h:null,__class__:L.StringMap};D={Bytes:function(a,b){this.length=a;this.b=b}};i["haxe.io.Bytes"]=D.Bytes;D.Bytes.__name__=["haxe","io","Bytes"];D.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new D.Bytes(a,b)};D.Bytes.ofString=function(a){for(var b=[],c=0,d=a.length;c<d;){var e=c++,e=u.cca(a,e);127>=e?b.push(e):(2047>=e?b.push(192|e>>6):(65535>=e?b.push(224|e>>12):(b.push(240|e>>18),b.push(128|e>>12&63)),b.push(128|e>>6&63)),b.push(128|e&63))}return new D.Bytes(b.length,b)};D.Bytes.prototype={toString:function(){return this.readString(0,this.length)},readString:function(a,b){if(0>a||0>b||a+b>this.length)throw D.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,h=a,o=a+b;h<o;){var f=d[h++];if(128>f){if(0==f)break;c+=e(f)}else if(224>f)c+=e((f&63)<<6|d[h++]&127);else if(240>f)var g=d[h++],c=c+e((f&31)<<12|(g&127)<<6|d[h++]&127);else var g=d[h++],k=d[h++],c=c+e((f&15)<<18|(g&127)<<12|k<<6&127|d[h++]&127)}return c},b:null,length:null,__class__:D.Bytes};D.BytesBuffer=function(){this.b=[]};i["haxe.io.BytesBuffer"]=D.BytesBuffer;D.BytesBuffer.__name__=["haxe","io","BytesBuffer"];D.BytesBuffer.prototype={getBytes:function(){var a=new D.Bytes(this.b.length,this.b);this.b=null;return a},b:null,__class__:D.BytesBuffer};D.Input=function(){};i["haxe.io.Input"]=D.Input;D.Input.__name__=["haxe","io","Input"];D.Input.prototype={readString:function(a){var b=D.Bytes.alloc(a);this.readFullBytes(b,0,a);return b.toString()},readFullBytes:function(a,b,c){for(;0<c;)var d=this.readBytes(a,b,c),b=b+d,c=c-d},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw D.Error.OutsideBounds;for(;0<d;)e[b]=this.readByte(),b++,d--;return c},readByte:function(){throw"Not implemented"},__class__:D.Input};D.BytesInput=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw D.Error.OutsideBounds;this.b=a.b;this.pos=b;this.len=c};i["haxe.io.BytesInput"]=D.BytesInput;D.BytesInput.__name__=["haxe","io","BytesInput"];D.BytesInput.__super__=D.Input;D.BytesInput.prototype=A(D.Input.prototype,{readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw D.Error.OutsideBounds;if(0==this.len&&0<c)throw new D.Eof;if(this.len<c)c=this.len;for(var d=this.b,a=a.b,e=0;e<c;){var h=e++;a[b+h]=d[this.pos+h]}this.pos+=c;this.len-=c;return c},readByte:function(){if(0==this.len)throw new D.Eof;this.len--;return this.b[this.pos++]},len:null,pos:null,b:null,__class__:D.BytesInput});D.Output=function(){};i["haxe.io.Output"]=D.Output;D.Output.__name__=["haxe","io","Output"];D.BytesOutput=function(){this.b=new D.BytesBuffer};i["haxe.io.BytesOutput"]=D.BytesOutput;D.BytesOutput.__name__=["haxe","io","BytesOutput"];D.BytesOutput.__super__=D.Output;D.BytesOutput.prototype=A(D.Output.prototype,{getBytes:function(){return this.b.getBytes()},writeByte:function(a){this.b.b.push(a)},b:null,__class__:D.BytesOutput});D.Eof=function(){};i["haxe.io.Eof"]=D.Eof;D.Eof.__name__=["haxe","io","Eof"];D.Eof.prototype={toString:function(){return"Eof"},__class__:D.Eof};D.Error={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};D.Error.Blocked=["Blocked",0];D.Error.Blocked.toString=q;D.Error.Blocked.__enum__=D.Error;D.Error.Overflow=["Overflow",1];D.Error.Overflow.toString=q;D.Error.Overflow.__enum__=D.Error;D.Error.OutsideBounds=["OutsideBounds",2];D.Error.OutsideBounds.toString=q;D.Error.OutsideBounds.__enum__=D.Error;D.Error.Custom=function(a){a=["Custom",3,a];a.__enum__=D.Error;a.toString=q;return a};D.StringInput=function(a){D.BytesInput.call(this,D.Bytes.ofString(a))};i["haxe.io.StringInput"]=D.StringInput;D.StringInput.__name__=["haxe","io","StringInput"];D.StringInput.__super__=D.BytesInput;D.StringInput.prototype=A(D.BytesInput.prototype,{__class__:D.StringInput});Va={__ename__:["hscript","Const"],__constructs__:["CInt","CFloat","CString"]};Va.CInt=function(a){a=["CInt",0,a];a.__enum__=Va;a.toString=q;return a};Va.CFloat=function(a){a=["CFloat",1,a];a.__enum__=Va;a.toString=q;return a};Va.CString=function(a){a=["CString",2,a];a.__enum__=Va;a.toString=q;return a};E={__ename__:["hscript","Expr"],__constructs__:"EConst,EIdent,EVar,EParent,EBlock,EField,EBinop,EUnop,ECall,EIf,EWhile,EFor,EBreak,EContinue,EFunction,EReturn,EArray,EArrayDecl,ENew,EThrow,ETry,EObject,ETernary".split(",")};E.EConst=function(a){a=["EConst",0,a];a.__enum__=E;a.toString=q;return a};E.EIdent=function(a){a=["EIdent",1,a];a.__enum__=E;a.toString=q;return a};E.EVar=function(a,b,c){a=["EVar",2,a,b,c];a.__enum__=E;a.toString=q;return a};E.EParent=function(a){a=["EParent",3,a];a.__enum__=E;a.toString=q;return a};E.EBlock=function(a){a=["EBlock",4,a];a.__enum__=E;a.toString=q;return a};E.EField=function(a,b){var c=["EField",5,a,b];c.__enum__=E;c.toString=q;return c};E.EBinop=function(a,b,c){a=["EBinop",6,a,b,c];a.__enum__=E;a.toString=q;return a};E.EUnop=function(a,b,c){a=["EUnop",7,a,b,c];a.__enum__=E;a.toString=q;return a};E.ECall=function(a,b){var c=["ECall",8,a,b];c.__enum__=E;c.toString=q;return c};E.EIf=function(a,b,c){a=["EIf",9,a,b,c];a.__enum__=E;a.toString=q;return a};E.EWhile=function(a,b){var c=["EWhile",10,a,b];c.__enum__=E;c.toString=q;return c};E.EFor=function(a,b,c){a=["EFor",11,a,b,c];a.__enum__=E;a.toString=q;return a};E.EBreak=["EBreak",12];E.EBreak.toString=q;E.EBreak.__enum__=E;E.EContinue=["EContinue",13];E.EContinue.toString=q;E.EContinue.__enum__=E;E.EFunction=function(a,b,c,d){a=["EFunction",14,a,b,c,d];a.__enum__=E;a.toString=q;return a};E.EReturn=function(a){a=["EReturn",15,a];a.__enum__=E;a.toString=q;return a};E.EArray=function(a,b){var c=["EArray",16,a,b];c.__enum__=E;c.toString=q;return c};E.EArrayDecl=function(a){a=["EArrayDecl",17,a];a.__enum__=E;a.toString=q;return a};E.ENew=function(a,b){var c=["ENew",18,a,b];c.__enum__=E;c.toString=q;return c};E.EThrow=function(a){a=["EThrow",19,a];a.__enum__=E;a.toString=q;return a};E.ETry=function(a,b,c,d){a=["ETry",20,a,b,c,d];a.__enum__=E;a.toString=q;return a};E.EObject=function(a){a=["EObject",21,a];a.__enum__=E;a.toString=q;return a};E.ETernary=function(a,b,c){a=["ETernary",22,a,b,c];a.__enum__=E;a.toString=q;return a};tb={__ename__:["hscript","CType"],__constructs__:["CTPath","CTFun","CTAnon","CTParent"]};tb.CTPath=function(a,b){var c=["CTPath",0,a,b];c.__enum__=tb;c.toString=q;return c};tb.CTFun=function(a,b){var c=["CTFun",1,a,b];c.__enum__=tb;c.toString=q;return c};tb.CTAnon=function(a){a=["CTAnon",2,a];a.__enum__=tb;a.toString=q;return a};tb.CTParent=function(a){a=["CTParent",3,a];a.__enum__=tb;a.toString=q;return a};da={__ename__:["hscript","Error"],__constructs__:"EInvalidChar,EUnexpected,EUnterminatedString,EUnterminatedComment,EUnknownVariable,EInvalidIterator,EInvalidOp,EInvalidAccess".split(",")};da.EInvalidChar=function(a){a=["EInvalidChar",0,a];a.__enum__=da;a.toString=q;return a};da.EUnexpected=function(a){a=["EUnexpected",1,a];a.__enum__=da;a.toString=q;return a};da.EUnterminatedString=["EUnterminatedString",2];da.EUnterminatedString.toString=q;da.EUnterminatedString.__enum__=da;da.EUnterminatedComment=["EUnterminatedComment",3];da.EUnterminatedComment.toString=q;da.EUnterminatedComment.__enum__=da;da.EUnknownVariable=function(a){a=["EUnknownVariable",4,a];a.__enum__=da;a.toString=q;return a};da.EInvalidIterator=function(a){a=["EInvalidIterator",5,a];a.__enum__=da;a.toString=q;return a};da.EInvalidOp=function(a){a=["EInvalidOp",6,a];a.__enum__=da;a.toString=q;return a};da.EInvalidAccess=function(a){a=["EInvalidAccess",7,a];a.__enum__=da;a.toString=q;return a};Oa={Stop:{__ename__:["hscript","_Interp","Stop"],__constructs__:["SBreak","SContinue","SReturn"]}};Oa.Stop.SBreak=["SBreak",0];Oa.Stop.SBreak.toString=q;Oa.Stop.SBreak.__enum__=Oa.Stop;Oa.Stop.SContinue=["SContinue",1];Oa.Stop.SContinue.toString=q;Oa.Stop.SContinue.__enum__=Oa.Stop;Oa.Stop.SReturn=function(a){a=["SReturn",2,a];a.__enum__=Oa.Stop;a.toString=q;return a};y={__ename__:["hscript","Token"],__constructs__:"TEof,TConst,TId,TOp,TPOpen,TPClose,TBrOpen,TBrClose,TDot,TComma,TSemicolon,TBkOpen,TBkClose,TQuestion,TDoubleDot".split(","),TEof:["TEof",0]};y.TEof.toString=q;y.TEof.__enum__=y;y.TConst=function(a){a=["TConst",1,a];a.__enum__=y;a.toString=q;return a};y.TId=function(a){a=["TId",2,a];a.__enum__=y;a.toString=q;return a};y.TOp=function(a){a=["TOp",3,a];a.__enum__=y;a.toString=q;return a};y.TPOpen=["TPOpen",4];y.TPOpen.toString=q;y.TPOpen.__enum__=y;y.TPClose=["TPClose",5];y.TPClose.toString=q;y.TPClose.__enum__=y;y.TBrOpen=["TBrOpen",6];y.TBrOpen.toString=q;y.TBrOpen.__enum__=y;y.TBrClose=["TBrClose",7];y.TBrClose.toString=q;y.TBrClose.__enum__=y;y.TDot=["TDot",8];y.TDot.toString=q;y.TDot.__enum__=y;y.TComma=["TComma",9];y.TComma.toString=q;y.TComma.__enum__=y;y.TSemicolon=["TSemicolon",10];y.TSemicolon.toString=q;y.TSemicolon.__enum__=y;y.TBkOpen=["TBkOpen",11];y.TBkOpen.toString=q;y.TBkOpen.__enum__=y;y.TBkClose=["TBkClose",12];y.TBkClose.toString=q;y.TBkClose.__enum__=y;y.TQuestion=["TQuestion",13];y.TQuestion.toString=q;y.TQuestion.__enum__=y;y.TDoubleDot=["TDoubleDot",14];y.TDoubleDot.toString=q;y.TDoubleDot.__enum__=y;jd=function(){this.line=1;this.opChars="+*/-=!><&|^%~";this.identChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";var a=[["%"],["*","/"],["+","-"],["<<",">>",">>>"],["|","&","^"],"==,!=,>,<,>=,<=".split(","),["..."],["&&"],["||"],"=,+=,-=,*=,/=,%=,<<=,>>=,>>>=,|=,&=,^=".split(",")];this.opPriority=new L.StringMap;this.opRightAssoc=new L.StringMap;for(var b=0,c=a.length;b<c;)for(var d=b++,e=0,h=a[d];e<h.length;){var o=h[e];++e;this.opPriority.set(o,d);9==d&&this.opRightAssoc.set(o,!0)}this.unops=new L.StringMap;c=0;for(b=["!","++","--","-","~"];c<b.length;)o=b[c],++c,this.unops.set(o,"++"==o||"--"==o)};i["hscript.Parser"]=jd;jd.__name__=["hscript","Parser"];jd.prototype={tokenString:function(a){var b;switch(a[1]){case 0:b="<eof>";break;case 1:b=this.constString(a[2]);break;case 2:b=a[2];break;case 3:b=a[2];break;case 4:b="(";break;case 5:b=")";break;case 6:b="{";break;case 7:b="}";break;case 8:b=".";break;case 9:b=",";break;case 10:b=";";break;case 11:b="[";break;case 12:b="]";break;case 13:b="?";break;case 14:b=":"}return b},constString:function(a){var b;switch(a[1]){case 0:b=t.string(a[2]);break;case 1:b=t.string(a[2]);break;case 2:b=a[2]}return b},tokenComment:function(a,b){var c=u.cca(a,1),d=this.input;if(47==c){try{for(;10!=b&&13!=b;)b=d.readByte();this["char"]=b}catch(e){}return this.token()}if(42==c){c=this.line;try{for(;;){for(;42!=b;)10==b&&this.line++,b=d.readByte();b=d.readByte();if(47==b)break}}catch(h){throw this.line=c,da.EUnterminatedComment}return this.token()}this["char"]=b;return y.TOp(a)},token:function(){if(null!=this.tokens.head)return this.tokens.pop();var a;0>this["char"]?a=this.readChar():(a=this["char"],this["char"]=-1);for(;;){switch(a){case 0:return y.TEof;case 32:case 9:case 13:break;case 10:this.line++;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var b=1*(a-48),c=0;;)switch(a=this.readChar(),c*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=10*b+(a-48);break;case 46:if(0<c){if(10==c&&46==this.readChar())return this.tokens.add(y.TOp("...")),a=b|0,y.TConst(a==b?Va.CInt(a):Va.CFloat(b));this.invalidChar(a)}c=1;break;case 120:(0<b||0<c)&&this.invalidChar(a);for(var d=0;;)switch(a=this.readChar(),a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:d=(d<<4)+a-48;break;case 65:case 66:case 67:case 68:case 69:case 70:d=(d<<4)+(a-55);break;case 97:case 98:case 99:case 100:case 101:case 102:d=(d<<4)+(a-87);break;default:return this["char"]=a,y.TConst(Va.CInt(d))}break;default:return this["char"]=a,a=b|0,y.TConst(0<c?Va.CFloat(10*b/c):a==b?Va.CInt(a):Va.CFloat(b))}break;case 59:return y.TSemicolon;case 40:return y.TPOpen;case 41:return y.TPClose;case 44:return y.TComma;case 46:a=this.readChar();switch(a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=a-48;for(c=1;;)switch(a=this.readChar(),c*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=10*b+(a-48);break;default:return this["char"]=a,y.TConst(Va.CFloat(b/c))}break;case 46:return a=this.readChar(),46!=a&&this.invalidChar(a),y.TOp("...");default:return this["char"]=a,y.TDot}break;case 123:return y.TBrOpen;case 125:return y.TBrClose;case 91:return y.TBkOpen;case 93:return y.TBkClose;case 39:return y.TConst(Va.CString(this.readString(39)));case 34:return y.TConst(Va.CString(this.readString(34)));case 63:return y.TQuestion;case 58:return y.TDoubleDot;default:if(this.ops[a])for(b=String.fromCharCode(a);;){a=this.readChar();if(!this.ops[a]){if(47==u.cca(b,0))return this.tokenComment(b,a);this["char"]=a;return y.TOp(b)}b+=String.fromCharCode(a)}if(this.idents[a])for(b=String.fromCharCode(a);;){a=this.readChar();if(!this.idents[a])return this["char"]=a,y.TId(b);b+=String.fromCharCode(a)}this.invalidChar(a)}a=this.readChar()}return null},readString:function(a){for(var b=0,c=new D.BytesOutput,d=!1,e=this.line,h=this.input;;){try{b=h.readByte()}catch(o){throw this.line=e,da.EUnterminatedString}if(d)switch(d=!1,b){case 110:c.writeByte(10);break;case 114:c.writeByte(13);break;case 116:c.writeByte(9);break;case 39:case 34:case 92:c.writeByte(b);break;case 47:this.allowJSON?c.writeByte(b):this.invalidChar(b);break;case 117:if(!this.allowJSON)throw this.invalidChar(b);var f=null;try{f=h.readString(4)}catch(g){throw this.line=e,da.EUnterminatedString}for(var k=0,x=0;4>x;){var i=x++,k=k<<4,i=u.cca(f,i);switch(i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:k+=i-48;break;case 65:case 66:case 67:case 68:case 69:case 70:k+=i-55;break;case 97:case 98:case 99:case 100:case 101:case 102:k+=i-87;break;default:this.invalidChar(i)}}127>=k?c.writeByte(k):(2047>=k?c.writeByte(192|k>>6):(c.writeByte(224|k>>12),c.writeByte(128|k>>6&63)),c.writeByte(128|k&63));break;default:this.invalidChar(b)}else if(92==b)d=!0;else if(b==a)break;else 10==b&&this.line++,c.writeByte(b)}return c.getBytes().toString()},readChar:function(){var a;try{a=this.input.readByte()}catch(b){a=0}return a},parseExprList:function(a){var b=[],c=this.token();if(c==a)return b;this.tokens.add(c);try{for(;;)switch(b.push(this.parseExpr()),c=this.token(),c[1]){case 9:break;default:if(c==a)throw"__break__";this.unexpected(c)}}catch(d){if("__break__"!=d)throw d}return b},parseTypeNext:function(a){var b=this.token(),c=b;switch(c[1]){case 3:if("->"!=c[2])return this.tokens.add(b),a;break;default:return this.tokens.add(b),a}c=b=this.parseType();switch(c[1]){case 1:return c[2].unshift(a),b;default:return tb.CTFun([a],b)}},parseType:function(){var a=this.token(),b=a;switch(b[1]){case 2:for(var c=b[2],c=[c];;){a=this.token();if(a!=y.TDot)break;b=a=this.token();switch(b[1]){case 2:c.push(b[2]);break;default:this.unexpected(a)}}var d=null,b=a;switch(b[1]){case 3:if("<"==b[2]){d=[];try{for(;;){d.push(this.parseType());b=a=this.token();switch(b[1]){case 9:continue;case 3:if(">"==b[2])throw"__break__"}this.unexpected(a)}}catch(e){if("__break__"!=e)throw e}}break;default:this.tokens.add(a)}return this.parseTypeNext(tb.CTPath(c,d));case 4:return a=this.parseType(),this.ensure(y.TPClose),this.parseTypeNext(tb.CTParent(a));case 6:d=[];try{for(;;)switch(b=a=this.token(),b[1]){case 7:throw"__break__";case 2:c=b[2];this.ensure(y.TDoubleDot);d.push({name:c,t:this.parseType()});a=this.token();switch(a[1]){case 9:break;case 7:throw"__break__";default:this.unexpected(a)}break;default:this.unexpected(a)}}catch(h){if("__break__"!=h)throw h}return this.parseTypeNext(tb.CTAnon(d));default:return this.unexpected(a)}},parseExprNext:function(a){var b=this.token(),c=b;switch(c[1]){case 3:c=c[2];if(this.unops.get(c)){var d;if(!(d=this.isBlock(a)))switch(a[1]){case 3:d=!0;break;default:d=!1}return d?(this.tokens.add(b),a):this.parseExprNext(E.EUnop(c,!1,a))}return this.makeBinop(c,a,this.parseExpr());case 8:b=this.token();d=null;c=b;switch(c[1]){case 2:d=c[2];break;default:this.unexpected(b)}return this.parseExprNext(E.EField(a,d));case 4:return this.parseExprNext(E.ECall(a,this.parseExprList(y.TPClose)));case 11:return b=this.parseExpr(),this.ensure(y.TBkClose),this.parseExprNext(E.EArray(a,b));case 13:return b=this.parseExpr(),this.ensure(y.TDoubleDot),c=this.parseExpr(),E.ETernary(a,b,c);default:return this.tokens.add(b),a}},parseStructure:function(a){return function(b){switch(a){case"if":b=function(a){var b=a.parseExpr(),e=a.parseExpr(),h=null,o=!1,f=a.token();f==y.TSemicolon&&(o=!0,f=a.token());z.enumEq(f,y.TId("else"))?h=a.parseExpr():(a.tokens.add(f),o&&a.tokens.add(y.TSemicolon));return E.EIf(b,e,h)}(b);break;case"var":b=function(a){var b=a.token(),e=null,h=b;switch(h[1]){case 2:e=h[2];break;default:a.unexpected(b)}b=a.token();h=null;b==y.TDoubleDot&&a.allowTypes&&(h=a.parseType(),b=a.token());var o=null;z.enumEq(b,y.TOp("="))?o=a.parseExpr():a.tokens.add(b);return E.EVar(e,h,o)}(b);break;case"while":b=function(a){var b=a.parseExpr(),a=a.parseExpr();return E.EWhile(b,a)}(b);break;case"for":b=function(a){a.ensure(y.TPOpen);var b=a.token(),e=null,h=b;switch(h[1]){case 2:e=h[2];break;default:a.unexpected(b)}b=a.token();z.enumEq(b,y.TId("in"))||a.unexpected(b);b=a.parseExpr();a.ensure(y.TPClose);a=a.parseExpr();return E.EFor(e,b,a)}(b);break;case"break":b=E.EBreak;break;case"continue":b=E.EContinue;break;case"else":b=b.unexpected(y.TId(a));break;case"function":b=function(a){var b=a.token(),e=null,h=b;switch(h[1]){case 2:e=b=h[2];break;default:a.tokens.add(b)}a.ensure(y.TPOpen);var o=[],b=a.token();if(b!=y.TPClose)for(var f=!0;f;){var g=null,h=b;switch(h[1]){case 2:g=b=h[2];break;default:a.unexpected(b)}b=a.token();h=null;b==y.TDoubleDot&&a.allowTypes&&(h=a.parseType(),b=a.token());o.push({name:g,t:h});switch(b[1]){case 9:b=a.token();break;case 5:f=!1;break;default:a.unexpected(b)}}f=null;a.allowTypes&&(b=a.token(),b!=y.TDoubleDot?a.tokens.add(b):f=a.parseType());a=a.parseExpr();return E.EFunction(o,a,e,f)}(b);break;case"return":b=function(a){var b=a.token();a.tokens.add(b);a=b==y.TSemicolon?null:a.parseExpr();return E.EReturn(a)}(b);break;case"new":b=function(a){var b=[],e=a.token(),h=e;switch(h[1]){case 2:e=h[2];b.push(e);break;default:a.unexpected(e)}for(var o=!0;o;)switch(e=a.token(),e[1]){case 8:h=e=a.token();switch(h[1]){case 2:e=h[2];b.push(e);break;default:a.unexpected(e)}break;case 4:o=!1;break;default:a.unexpected(e)}a=a.parseExprList(y.TPClose);return E.ENew(b.join("."),a)}(b);break;case"throw":b=function(a){a=a.parseExpr();return E.EThrow(a)}(b);break;case"try":b=function(a){var b=a.parseExpr(),e=a.token();z.enumEq(e,y.TId("catch"))||a.unexpected(e);a.ensure(y.TPOpen);var e=a.token(),h;h=e;switch(h[1]){case 2:e=h[2];break;default:e=a.unexpected(e)}h=e;a.ensure(y.TDoubleDot);var o=null;a.allowTypes?o=a.parseType():(e=a.token(),z.enumEq(e,y.TId("Dynamic"))||a.unexpected(e));a.ensure(y.TPClose);a=a.parseExpr();return E.ETry(b,h,o,a)}(b);break;default:b=null}return b}(this)},makeBinop:function(a,b,c){switch(c[1]){case 6:var d=c[4],e=c[3],h=c[2],a=this.opPriority.get(a)<=this.opPriority.get(h)&&!this.opRightAssoc.exists(a)?E.EBinop(h,this.makeBinop(a,b,e),d):E.EBinop(a,b,c);break;case 22:d=c[4];e=c[3];h=c[2];a=this.opRightAssoc.exists(a)?E.EBinop(a,b,c):E.ETernary(this.makeBinop(a,b,h),e,d);break;default:a=E.EBinop(a,b,c)}return a},makeUnop:function(a,b){var c;switch(b[1]){case 6:c=b[4];c=E.EBinop(b[2],this.makeUnop(a,b[3]),c);break;case 22:c=b[4];var d=b[3];c=E.ETernary(this.makeUnop(a,b[2]),d,c);break;default:c=E.EUnop(a,!0,b)}return c},parseExpr:function(){var a=this.token(),b=a;switch(b[1]){case 2:return a=b[2],b=this.parseStructure(a),null==b&&(b=E.EIdent(a)),this.parseExprNext(b);case 1:return b=b[2],this.parseExprNext(E.EConst(b));case 4:return b=this.parseExpr(),this.ensure(y.TPClose),this.parseExprNext(E.EParent(b));case 6:b=a=this.token();switch(b[1]){case 7:return this.parseExprNext(E.EObject([]));case 2:b=this.token();this.tokens.add(b);this.tokens.add(a);switch(b[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;case 1:b=b[2];if(this.allowJSON)switch(b[1]){case 2:b=this.token();this.tokens.add(b);this.tokens.add(a);switch(b[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;default:this.tokens.add(a)}else this.tokens.add(a);break;default:this.tokens.add(a)}for(b=[];;){b.push(this.parseFullExpr());a=this.token();if(a==y.TBrClose)break;this.tokens.add(a)}return E.EBlock(b);case 3:return b=b[2],this.unops.exists(b)?this.makeUnop(b,this.parseExpr()):this.unexpected(a);case 11:b=[];for(a=this.token();a!=y.TBkClose;)this.tokens.add(a),b.push(this.parseExpr()),a=this.token(),a==y.TComma&&(a=this.token());return this.parseExprNext(E.EArrayDecl(b));default:return this.unexpected(a)}},parseObject:function(){var a=[];try{for(;;){var b=this.token(),c=null,d=b;switch(d[1]){case 2:c=d[2];break;case 1:var e=d[2];this.allowJSON||this.unexpected(b);d=e;switch(d[1]){case 2:c=d[2];break;default:this.unexpected(b)}break;case 7:throw"__break__";default:this.unexpected(b)}this.ensure(y.TDoubleDot);a.push({name:c,e:this.parseExpr()});b=this.token();switch(b[1]){case 7:throw"__break__";case 9:break;default:this.unexpected(b)}}}catch(h){if("__break__"!=h)throw h}return this.parseExprNext(E.EObject(a))},parseFullExpr:function(){var a=this.parseExpr(),b=this.token();b!=y.TSemicolon&&b!=y.TEof&&(this.isBlock(a)?this.tokens.add(b):this.unexpected(b));return a},isBlock:function(a){switch(a[1]){case 4:case 21:a=!0;break;case 14:a=this.isBlock(a[3]);break;case 2:a=a[4];a=null!=a&&this.isBlock(a);break;case 9:var b=a[4],a=a[3],a=null!=b?this.isBlock(b):this.isBlock(a);break;case 6:a=this.isBlock(a[4]);break;case 7:b=a[4];a=!a[3]&&this.isBlock(b);break;case 10:a=this.isBlock(a[3]);break;case 11:a=this.isBlock(a[4]);break;case 15:a=a[2];a=null!=a&&this.isBlock(a);break;default:a=!1}return a},ensure:function(a){var b=this.token();b!=a&&this.unexpected(b)},unexpected:function(a){throw da.EUnexpected(this.tokenString(a))},parse:function(a){this.tokens=new L.GenericStack;this["char"]=-1;this.input=a;this.ops=[];this.idents=[];for(var a=0,b=this.opChars.length;a<b;){var c=a++;this.ops[u.cca(this.opChars,c)]=!0}a=0;for(b=this.identChars.length;a<b;)c=a++,this.idents[u.cca(this.identChars,c)]=!0;for(a=[];;){b=this.token();if(b==y.TEof)break;this.tokens.add(b);a.push(this.parseFullExpr())}return 1==a.length?a[0]:E.EBlock(a)},parseString:function(a){this.line=1;return this.parse(new D.StringInput(a))},invalidChar:function(a){throw da.EInvalidChar(a)},tokens:null,idents:null,ops:null,"char":null,input:null,allowTypes:null,allowJSON:null,unops:null,opRightAssoc:null,opPriority:null,identChars:null,opChars:null,line:null,__class__:jd};var Fc,Zb;Fc=function(){this.handlers=[]};i["hxevents.Dispatcher"]=Fc;Fc.__name__=["hxevents","Dispatcher"];Fc.prototype={_stop:null,dispatch:function(a){for(var b=this.handlers.slice(),c=0;c<b.length;){var d=b[c];++c;if(!0==this._stop){this._stop=!1;break}d(a)}},remove:function(a){for(var b=0,c=this.handlers.length;b<c;){var d=b++;if(j.compareMethods(this.handlers[d],a))return this.handlers.splice(d,1)[0]}return null},addOnce:function(a){var b=this,c=null,c=function(d){b.remove(c);a(d)};this.add(c);return c},add:function(a){this.handlers.push(a);return a},handlers:null,__class__:Fc};Zb=function(){this.handlers=[]};i["hxevents.Notifier"]=Zb;Zb.__name__=["hxevents","Notifier"];Zb.prototype={_stop:null,dispatch:function(){for(var a=this.handlers.slice(),b=0;b<a.length;){var c=a[b];++b;if(!0==this._stop){this._stop=!1;break}c()
}},remove:function(a){for(var b=0,c=this.handlers.length;b<c;){var d=b++;if(j.compareMethods(this.handlers[d],a))return this.handlers.splice(d,1)[0]}return null},addOnce:function(a){var b=this,c=null,c=function(){b.remove(c);a()};this.add(c);return c},add:function(a){this.handlers.push(a);return a},handlers:null,__class__:Zb};B=function(){};i["js.Boot"]=B;B.__name__=["js","Boot"];B.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};B.__trace=function(a,b){var c=null!=b?b.fileName+":"+b.lineNumber+": ":"",c=c+B.__string_rec(a,""),d;"undefined"!=typeof document&&null!=(d=document.getElementById("haxe:trace"))?d.innerHTML+=B.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};B.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"	",d=2,e=a.length;d<e;)var h=d++,c=2!=h?c+(","+B.__string_rec(a[h],b)):c+B.__string_rec(a[h],b);return c+")"}d=a.length;c="[";b+="	";for(e=0;e<d;)h=e++,c+=(0<h?",":"")+B.__string_rec(a[h],b);return c+"]"}try{e=a.toString}catch(o){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;e=null;c="{\n";b+="	";d=null!=a.hasOwnProperty;for(e in a)if(!d||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+B.__string_rec(a[e],b));b=b.substring(1);return c+("\n"+b+"}");case"function":return"<function>";case"string":return a;default:return""+a}};B.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var h=d++,h=c[h];if(h==b||B.__interfLoop(h,b))return!0}return B.__interfLoop(a.__super__,b)};B.__instanceof=function(a,b){try{if(a instanceof b)return b==Array?null==a.__enum__:!0;if(B.__interfLoop(a.__class__,b))return!0}catch(c){if(null==b)return!1}switch(b){case le:return Math.ceil(a%2147483648)===a;case ae:return"number"==typeof a;case ie:return!0===a||!1===a;case String:return"string"==typeof a;case pe:return!0;default:return null==a?!1:b==qe&&null!=a.__name__||b==re&&null!=a.__ename__?!0:a.__enum__==b}};B.__cast=function(a,b){if(B.__instanceof(a,b))return a;throw"Cannot cast "+t.string(a)+" to "+t.string(b)};kd=function(){};i["js.Scroll"]=kd;kd.__name__=["js","Scroll"];kd.getTop=function(){var a=window.pageYOffset;if("number"==typeof a||document.body&&(a=document.body.scrollTop))return a;return document.documentElement.scrollTop};kd.getLeft=function(){var a=window.pageXOffset;if("number"==typeof a||document.body&&(a=document.body.scrollLeft))return a;return document.documentElement.scrollLeft};w=void 0;Ia=void 0;w=function(){(null==w.BI_RC||0==w.BI_RC.length)&&w.initBiRc();if(0==w.BI_RM.length)throw"BI_RM not initialized";this.chunks=[];switch(w.defaultAm){case 1:this.am=v(this,this.am1);break;case 2:this.am=v(this,this.am2);break;case 3:this.am=v(this,this.am3);break;default:throw"am error"}};i["math.BigInteger"]=w;w.__name__=["math","BigInteger"];w.initBiRc=function(){w.BI_RC=[];for(var a=u.cca("0",0),b=0;10>b;){var c=b++;w.BI_RC[a]=c;a++}a=u.cca("a",0);for(b=10;37>b;)c=b++,w.BI_RC[a]=c,a++;a=u.cca("A",0);for(b=10;37>b;)c=b++,w.BI_RC[a]=c,a++};w.get_ZERO=function(){return w.nbv(0)};w.get_ONE=function(){return w.nbv(1)};w.nbv=function(a){var b=w.nbi();b.fromInt(a);return b};w.nbi=function(){return new w};w.ofString=function(a,b){var c=w.nbi(),d=function(a,b){c.fromInt(0);for(var d=Math.floor(.6931471805599453*w.DB/Math.log(b)),e=Math.pow(b,d)|0,h=!1,o=0,f=0,g=0,Td=a.length;g<Td;){var i=g++,j=w.intAt(a,i);0>j?"-"==a.charAt(i)&&0==c.sign&&(h=!0):(f=b*f+j,++o>=d&&(c.dMultiply(e),c.dAddOffset(f,0),f=o=0))}0<o&&(c.dMultiply(Math.pow(b,o)|0),c.dAddOffset(f,0));h&&w.get_ZERO().subTo(c,c);return c};if(16==b)d=4;else{if(10==b)return d(a,b);if(256==b)d=8;else if(8==b)d=3;else if(2==b)d=1;else if(32==b)d=5;else if(4==b)d=2;else return d(a,b)}c.t=0;c.sign=0;for(var e=a.length,h=!1,o=0;0<=--e;){var f=8==d?u.cca(a,e)&255:w.intAt(a,e);0>f?"-"==a.charAt(e)&&(h=!0):(h=!1,0==o?(c.chunks[c.t]=f,c.t++):o+d>w.DB?(c.chunks[c.t-1]|=(f&(1<<w.DB-o)-1)<<o,c.chunks[c.t]=f>>w.DB-o,c.t++):c.chunks[c.t-1]|=f<<o,o+=d,o>=w.DB&&(o-=w.DB))}if(8==d&&0!=(u.cca(a,0)&128))c.sign=-1,0<o&&(c.chunks[c.t-1]|=(1<<w.DB-o)-1<<o);c.clamp();h&&w.get_ZERO().subTo(c,c);return c};w.ofBytes=function(a,b,c,d){null==c&&(c=0);null==d&&(d=a.length-c);if(0==d)return w.get_ZERO();var e=w.nbi();e.sign=0;e.t=0;for(var h=c+d,o=0;--h>=c;){var f=h<d?a.b[h]&255:0;0==o?(e.chunks[e.t]=f,e.t++):o+8>w.DB?(e.chunks[e.t-1]|=(f&(1<<w.DB-o)-1)<<o,e.chunks[e.t]=f>>w.DB-o,e.t++):e.chunks[e.t-1]|=f<<o;o+=8;o>=w.DB&&(o-=w.DB)}if(!b&&0!=(a.b[0]&128))e.sign=-1,0<o&&(e.chunks[e.t-1]|=(1<<w.DB-o)-1<<o);e.clamp();return e};w.nbits=function(a){var b=1,c;if(0!=(c=a>>>16))a=c,b+=16;if(0!=(c=a>>8))a=c,b+=8;if(0!=(c=a>>4))a=c,b+=4;if(0!=(c=a>>2))a=c,b+=2;0!=a>>1&&(b+=1);return b};w.intAt=function(a,b){var c=w.BI_RC[u.cca(a,b)];return null==c?-1:c};w.prototype={am3:function(a,b,c,d,e,h){for(var o=b&16383,b=b>>14;0<=--h;){var f=this.chunks[a]&16383,g=this.chunks[a]>>14;a++;var k=b*f+g*o,f=o*f+((k&16383)<<14)+c.chunks[d]+e,e=(f>>28)+(k>>14)+b*g;c.chunks[d]=f&268435455;d++}return e},am2:function(a,b,c,d,e,h){for(var o=b&32767,b=b>>15;0<=--h;){var f=this.chunks[a]&32767,g=this.chunks[a]>>15;a++;var k=b*f+g*o,f=o*f+((k&32767)<<15)+c.chunks[d]+(e&1073741823),e=(f>>>30)+(k>>>15)+b*g+(e>>>30);c.chunks[d]=f&1073741823;d++}return e},am1:function(a,b,c,d,e,h){for(;0<=--h;){var o=b*this.chunks[a]+c.chunks[d]+e;a++;e=Math.floor(o/67108864);c.chunks[d]=o&67108863;d++}return e},rShiftTo:function(a,b){b.sign=this.sign;var c=Math.floor(a/w.DB);if(c>=this.t)b.t=0;else{var d=a%w.DB,e=w.DB-d,h=(1<<d)-1;b.chunks[0]=this.chunks[c]>>d;for(var o=c+1,f=this.t;o<f;){var g=o++;b.chunks[g-c-1]|=(this.chunks[g]&h)<<e;b.chunks[g-c]=this.chunks[g]>>d}0<d&&(b.chunks[this.t-c-1]|=(this.sign&h)<<e);b.t=this.t-c;b.clamp()}},lShiftTo:function(a,b){for(var c=a%w.DB,d=w.DB-c,e=(1<<d)-1,h=Math.floor(a/w.DB),o=this.sign<<c&w.DM,f=this.t-1;0<=f;)b.chunks[f+h+1]=this.chunks[f]>>d|o,o=(this.chunks[f]&e)<<c,f--;for(f=h-1;0<=f;)b.chunks[f]=0,f--;b.chunks[h]=o;b.t=this.t+h+1;b.sign=this.sign;b.clamp()},exp:function(a,b){if(2147483647<a||1>a)return w.get_ONE();var c=w.nbi(),d=w.nbi(),e=b.convert(this),h=w.nbits(a)-1;for(e.copyTo(c);0<=--h;)if(b.sqrTo(c,d),0<(a&1<<h))b.mulTo(d,e,c);else var o=c,c=d,d=o;return b.revert(c)},dMultiply:function(a){this.chunks[this.t]=this.am(0,a-1,this,0,0,this.t);this.t++;this.clamp()},invDigit:function(){if(1>this.t)return 0;var a=this.chunks[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%w.DV)%w.DV;return 0<b?w.DV-b:-b},drShiftTo:function(a,b){if(null!=b){for(var c=a;c<this.t;)b.chunks[c-a]=this.chunks[c],c++;b.t=Math.max(this.t-a,0)|0;b.sign=this.sign}},dlShiftTo:function(a,b){if(null!=b){for(var c=this.t-1;0<=c;)b.chunks[c+a]=this.chunks[c],c--;for(c=a-1;0<=c;)b.chunks[c]=0,c--;b.t=this.t+a;b.sign=this.sign}},dAddOffset:function(a,b){for(;this.t<=b;)this.chunks[this.t]=0,this.t++;for(this.chunks[b]+=a;this.chunks[b]>=w.DV;)this.chunks[b]-=w.DV,++b>=this.t&&(this.chunks[this.t]=0,this.t++),++this.chunks[b]},padTo:function(a){for(;this.t<a;)this.chunks[this.t]=0,this.t++},clamp:function(){for(var a=this.sign&w.DM;0<this.t&&this.chunks[this.t-1]==a;)--this.t},subTo:function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t)|0;c<e;)d+=this.chunks[c]-a.chunks[c],b.chunks[c]=d&w.DM,c++,d>>=w.DB;if(a.t<this.t){for(d-=a.sign;c<this.t;)d+=this.chunks[c],b.chunks[c]=d&w.DM,c++,d>>=w.DB;d+=this.sign}else{for(d+=this.sign;c<a.t;)d-=a.chunks[c],b.chunks[c]=d&w.DM,c++,d>>=w.DB;d-=a.sign}b.sign=0>d?-1:0;-1>d?(b.chunks[c]=w.DV+d,c++):0<d&&(b.chunks[c]=d,c++);b.t=c;b.clamp()},squareTo:function(a){if(a==this)throw"can not squareTo self";for(var b=this.abs(),c=a.t=2*b.t;0<=--c;)a.chunks[c]=0;for(c=0;c<b.t-1;){var d=b.am(c,b.chunks[c],a,2*c,0,1);if((a.chunks[c+b.t]+=b.am(c+1,2*b.chunks[c],a,2*c+1,d,b.t-c-1))>=w.DV)a.chunks[c+b.t]-=w.DV,a.chunks[c+b.t+1]=1;c++}0<a.t&&(b=b.am(c,b.chunks[c],a,2*c,0,1),a.chunks[a.t-1]+=b);a.sign=0;a.clamp()},multiplyTo:function(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;0<=--e;)b.chunks[e]=0;for(var e=0,h=d.t;e<h;){var o=e++;b.chunks[o+c.t]=c.am(0,d.chunks[o],b,o,0,c.t)}b.sign=0;b.clamp();this.sign!=a.sign&&w.get_ZERO().subTo(b,b)},divRemTo:function(a,b,c){var d=a.abs();if(!(0>=d.t)){var e=this.abs();if(e.t<d.t)null!=b&&b.fromInt(0),null!=c&&this.copyTo(c);else{null==c&&(c=w.nbi());var h=w.nbi(),o=this.sign,a=a.sign,f=w.DB-w.nbits(d.chunks[d.t-1]);0<f?(e.lShiftTo(f,c),d.lShiftTo(f,h)):(e.copyTo(c),d.copyTo(h));d=h.t;e=h.chunks[d-1];if(0!=e){var g=1*e*1*(1<<w.F1)+(1<d?1*(h.chunks[d-2]>>w.F2):0),k=w.FV/g,g=1*(1<<w.F1)/g,x=1*(1<<w.F2),i=c.t,fe=i-d,j=null==b?w.nbi():b;h.dlShiftTo(fe,j);0<=c.compare(j)&&(c.chunks[c.t]=1,c.t++,c.subTo(j,c));w.get_ONE().dlShiftTo(d,j);for(j.subTo(h,h);h.t<d;)h.chunks[h.t]=0,h.t++;for(;0<=--fe;){var l;l=c.chunks[--i]==e?w.DM:Math.floor(1*c.chunks[i]*k+(1*c.chunks[i-1]+x)*g);c.chunks[i]+=h.am(0,l,c,fe,0,d);if(c.chunks[i]<l){h.dlShiftTo(fe,j);for(c.subTo(j,c);c.chunks[i]<--l;)c.subTo(j,c)}}null!=b&&(c.drShiftTo(d,b),o!=a&&w.get_ZERO().subTo(b,b));c.t=d;c.clamp();0<f&&c.rShiftTo(f,c);0>o&&w.get_ZERO().subTo(c,c)}}}},copyTo:function(a){for(var b=0,c=this.chunks.length;b<c;){var d=b++;a.chunks[d]=this.chunks[d]}a.t=this.t;a.sign=this.sign},bitLength:function(){return 0>=this.t?0:w.DB*(this.t-1)+w.nbits(this.chunks[this.t-1]^this.sign&w.DM)},neg:function(){var a=w.nbi();w.get_ZERO().subTo(this,a);return a},modPowInt:function(a,b){if(null==b)throw"m is null";var c;c=256>a||b.isEven()?new Ia.Classic(b):new Ia.Montgomery(b);return this.exp(a,c)},mod:function(a){var b=w.nbi();this.abs().divRemTo(a,null,b);0>this.sign&&0<b.compare(w.get_ZERO())&&a.subTo(b,b);return b},isEven:function(){return 0==(0<this.t?this.chunks[0]&1:this.sign)},compare:function(a){var b=this.sign-a.sign;if(0!=b)return b;var c=this.t,b=c-a.t;if(0!=b)return b;for(;0<=--c;)if(b=this.chunks[c]-a.chunks[c],0!=b)return b;return 0},abs:function(){return 0>this.sign?this.neg():this},toBytesUnsigned:function(){var a=new ld,b=0,c=this.t,d=w.DB-c*w.DB%8,e=!1,h=0;if(0<c--){if(d<w.DB&&0<(b=this.chunks[c]>>d))e=!0,a.b.push(b),h++;for(;0<=c;)8>d?(b=(this.chunks[c]&(1<<d)-1)<<8-d,b|=this.chunks[--c]>>(d+=w.DB-8)):(b=this.chunks[c]>>(d-=8)&255,0>=d&&(d+=w.DB,--c)),0<b&&(e=!0),e&&(a.b.push(b),h++)}return a.getBytes()},fromInt:function(a){this.t=1;this.chunks[0]=0;this.sign=0>a?-1:0;0<a?this.chunks[0]=a:-1>a?this.chunks[0]=a+w.DV:this.t=0},am:null,chunks:null,sign:null,t:null,__class__:w};Ia={ModularReduction:function(){}};i["math.reduction.ModularReduction"]=Ia.ModularReduction;Ia.ModularReduction.__name__=["math","reduction","ModularReduction"];Ia.ModularReduction.prototype={sqrTo:null,mulTo:null,revert:null,convert:null,__class__:Ia.ModularReduction};Ia.Classic=function(a){this.m=a};i["math.reduction.Classic"]=Ia.Classic;Ia.Classic.__name__=["math","reduction","Classic"];Ia.Classic.__interfaces__=[Ia.ModularReduction];Ia.Classic.prototype={sqrTo:function(a,b){a.squareTo(b);this.reduce(b)},mulTo:function(a,b,c){a.multiplyTo(b,c);this.reduce(c)},reduce:function(a){a.divRemTo(this.m,null,a)},revert:function(a){return a},convert:function(a){return 0>a.sign||0<=a.compare(this.m)?a.mod(this.m):a},m:null,__class__:Ia.Classic};Ia.Montgomery=function(a){this.m=a;this.mp=this.m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<w.DB-15)-1;this.mt2=2*this.m.t};i["math.reduction.Montgomery"]=Ia.Montgomery;Ia.Montgomery.__name__=["math","reduction","Montgomery"];Ia.Montgomery.__interfaces__=[Ia.ModularReduction];Ia.Montgomery.prototype={sqrTo:function(a,b){a.squareTo(b);this.reduce(b)},mulTo:function(a,b,c){a.multiplyTo(b,c);this.reduce(c)},reduce:function(a){a.padTo(this.mt2);for(var b=0;b<this.m.t;){var c=a.chunks[b]&32767,d=c*this.mpl+((c*this.mph+(a.chunks[b]>>15)*this.mpl&this.um)<<15)&w.DM,c=b+this.m.t;for(a.chunks[c]+=this.m.am(0,d,a,b,0,this.m.t);a.chunks[c]>=w.DV;)a.chunks[c]-=w.DV,a.chunks.length<c+2&&(a.chunks[c+1]=0),a.chunks[++c]++;b++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compare(this.m)&&a.subTo(this.m,a)},revert:function(a){var b=w.nbi();a.copyTo(b);this.reduce(b);return b},convert:function(a){var b=w.nbi();a.abs().dlShiftTo(this.m.t,b);b.divRemTo(this.m,null,b);0>a.sign&&0<b.compare(w.get_ZERO())&&this.m.subTo(b,b);return b},um:null,mph:null,mpl:null,mp:null,mt2:null,m:null,__class__:Ia.Montgomery};var Cb;Cb=function(){};i["rg.RGConst"]=Cb;Cb.__name__=["rg","RGConst"];Pa=function(a){this.layouts=new L.StringMap;this.globalNotifier=a};Ya=void 0;lb=void 0;i["rg.app.charts.App"]=Pa;Pa.__name__=["rg","app","charts","App"];Pa.nextid=function(){return":RGVIZ-"+ ++Pa.lastid};Pa.supportsSvg=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect};Pa.prototype={getLayout:function(a,b,c,d){var e=this.layouts.get(a);if(null!=e)if(d)e.destroy();else return e;d=ga.feed(new Wc,b);b=(new dc).create(d,null==b.marginheight?0:b.marginheight,c);this.layouts.set(a,b);return b},visualization:function(a,b){var c=this;Pa.chartsCounter++;var d=a.node(),e=d.id;if(null==e)d.id=e=Pa.nextid();var d=ga.feed(new Xc,b),h=new Rd(ga.feed(new Yc,b).loader),o=(new xd).createVariables(d.variables),f=ga.feed(new Zc,d.options),g=ga.feed(new $c,d.options),k=!Pa.supportsSvg()||f.forcelegacy,x=null,i=o.filter(function(a){return B.__instanceof(a,cc)}),j=o.filter(function(a){return B.__instanceof(a,rc)});h.onLoad.addOnce(function(a){(new vd).process(a,i);(new wd).process(a,j)});if(!k){switch(ga.feed(new ad,d.options).kind[1]){case 1:e=this.getLayout(e,d.options,a,g.replace);x=(new yd).create(g.type,e,d.options);break;case 0:g.replace&&a.selectAll("*").remove(),x=(new zd).create(g.type,a,d.options)}x.setVariables(o,i,j);x.init();null!=f.ready&&x.addReady(f.ready);h.onLoad.addOnce(function(a){x.feedData(a)})}var l=0,m=ga.feed(new bd,b.options.download);if(k){var p=new Ba(a,m.legacyservice);h.onLoad.addOnce(function(a){b.datapoints=a;p.display(b);if(null!=f.ready)p.onReady(f.ready)})}if(!k&&(null!=m.position||null!=m.handler)){var n=new Gb(x.container,m.service);null!=m.handler?x.addReadyOnce(function(){m.handler(v(n,n.download))}):x.addReadyOnce(function(){new F.DownloaderMenu(v(n,n.download),m.position,m.formats,x.container);l=24})}k||(!b.options.a&&"file://"!=document.location.href.substr(0,7)&&x.addReadyOnce(function(){F.Logo.createLogo(x.container,l)}),x.addReadyOnce(function(){Pa.chartsLoaded++;Pa.chartsLoaded==Pa.chartsCounter&&c.globalNotifier.dispatch()}));null!=b.options.error&&x.addError(b.options.error);sb.delay(v(h,h.load),0);return x},globalNotifier:null,layouts:null,__class__:Pa};Ya=function(){};i["rg.app.charts.JSBridge"]=Ya;Ya.__name__=["rg","app","charts","JSBridge"];Ya.log=function(a){(window.console&&window.console.warn||alert)(a)};Ya.main=function(){var a="undefined"==typeof ReportGrid?window.ReportGrid={}:ReportGrid,b=new Zb,c=!1;b.addOnce(function(){c=!0});a.charts={ready:function(a){c?a():b.add(a)}};var d=new Pa(b);a.chart=function(a,b,c){c=Ya.chartopt(b,c);c.options.a=!1;lb.complete(c,function(c){try{d.visualization(Ya.select(a),c)}catch(e){Ya.log(t.string(e)),null!=b.error&&b.error(e)}})};a.barChart=function(b,c){return a.chart(b,c,"barchart")};a.funnelChart=function(b,c){return a.chart(b,c,"funnelchart")};a.geo=function(b,c){return a.chart(b,c,"geo")};a.heatGrid=function(b,c){return a.chart(b,c,"heatgrid")};a.leaderBoard=function(b,c){return a.chart(b,c,"leaderboard")};a.lineChart=function(b,c){return a.chart(b,c,"linechart")};a.pieChart=function(b,c){return a.chart(b,c,"piechart")};a.pivotTable=function(b,c){return a.chart(b,c,"pivottable")};a.sankey=function(b,c){return a.chart(b,c,"sankey")};a.scatterGraph=function(b,c){return a.chart(b,c,"scattergraph")};a.streamGraph=function(b,c){return a.chart(b,c,"streamgraph")};a.parseQueryParameters=ac.parseQueryParameters;a.findScript=rd.findScript;a.format=ca.format;a.compare=ca.compare;a.dump=ca.string;var e=K.SymbolCache.cache;a.symbol=function(a,b){return e.get(a,null==b?100:b)};a.date={range:function(a,b,c){B.__instanceof(a,String)&&(a=s.DateParser.parse(a));null==a&&(a=X.defaultRange(c)[0]);B.__instanceof(a,Date)&&(a=a.getTime());B.__instanceof(b,String)&&(b=s.DateParser.parse(b));null==b&&(b=X.defaultRange(c)[1]);B.__instanceof(b,Date)&&(b=b.getTime());return X.range(a,b,c)},formatPeriodicity:function(a,b){var c=B.__instanceof(a,Date)?a.getTime():B.__instanceof(a,ae)?a:s.DateParser.parse(a).getTime();return X.format(b,c)},parse:s.DateParser.parse,snap:ja.snap};a.humanize=function(a){return B.__instanceof(a,String)&&Aa.isTime(a)?Aa.periodicity(a):ka.humanize(a)};var h=new V.Random(666);a.math={setRandomSeed:function(a){h=new V.Random(a)},random:function(){return((h.seed=16807*h.seed%2147483647)&1073741823)/1073741823}};a.query=null!=a.query?a.query:Ya.createQuery();a.info=null!=a.info?a.info:{};a.info.charts={version:"1.5.32.9213"};a.getTooltip=function(){return F.Tooltip.get_instance()}};Ya.createQuery=function(){for(var a=pb.create(),b={},c=0,d=z.getInstanceFields(z.getClass(a));c<d.length;){var e=[d[c]];++c;"_"!=u.substr(e[0],0,1)&&j.isFunction(j.field(a,e[0]))&&(b[e[0]]=function(a){return function(){var b=pb.create();return j.field(b,a[0]).apply(b,arguments)}}(e))}return b};Ya.select=function(a){var b=B.__instanceof(a,String)?O.select(a):O.selectNode(a);if(b.empty())throw new H.Error("invalid container '{0}'",a,null,{fileName:"JSBridge.hx",lineNumber:194,className:"rg.app.charts.JSBridge",methodName:"select"});return b};Ya.opt=function(a){return null==a?{}:ra.clone(a)};Ya.chartopt=function(a,b){a=null==a?{}:ra.clone(a);a.options=Ya.opt(a.options);a.options.visualization=null!=b?b:a.options.visualization;return a};lb=function(){};i["rg.app.charts.MVPOptions"]=lb;lb.__name__=["rg","app","charts","MVPOptions"];lb.a1=function(a,b){var c=ReportGrid.authCode,d=!1;null==c&&(c=rd.findScript("reportgrid-charts.js"),c=ac.parseQueryParameters(c.src),c=j.field(c,"authCode"));if(null!=c){var c=new sd(c),e=[],h=ea.window.location.hostname;if(new M("^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$","").match(h))e.push(h);else{h=h.split(".");3==h.length&&"www"==h[0]&&h.shift();for(e.push(h.join("."));2<h.length;)h.shift();e.push("*."+h.join("."))}d=c.authorizeMany(e)}else d=F.Logo.pageIsBranded();lb.a1=function(a,b){a.options.a=d;b(a)};lb.a1(a,b)};lb.a2=function(a,b){var c=function(c){lb.a2=null==c?function(a,b){b(a)}:function(a,b){a.options.a=c;b(a)};lb.a2(a,b)},d=ReportGrid.token;a.options.a||null==d?c(null):d(function(a){c((0>=a.expires||a.expires>=(new Date).getTime())&&a.permissions.read)},function(){c(null)})};lb.complete=function(a,b){var c=new td(b);if(null==a.options)a.options={};var d=a.options;if(null!=d.download&&!hb.isAnonymous(d.download)){var e=d.download;j.deleteField(d,"download");if(!0==e)d.download={position:"auto"};else if(B.__instanceof(e,String))d.download={position:e};else throw new H.Error("invalid value for download '{0}'",[e],null,{fileName:"MVPOptions.hx",lineNumber:118,className:"rg.app.charts.MVPOptions",methodName:"complete"})}if(null!=d.map&&hb.isAnonymous(d.map))d.map=[d.map];c.addAction(lb.a1);c.addAction(lb.a2);c.addAction(function(a,b){var c=a.axes,d=!1;null==c&&(c=[]);a.axes=c=c.map(function(a){return B.__instanceof(a,String)?{type:a}:a});for(var e=0,f=c.length;e<f;){var g=e++,i=c[g].variable;null==i?c[g].variable=!d&&g==c.length-1?"dependent":"independent":"dependent"==i&&(d=!0)}for(f=0;f<c.length;)if(d=c[f],++f,"dependent"!=d.variable)switch(a.options.visualization){case"barchart":case"pivottable":if(null==d.scalemode)d.scalemode="fit"}b(a)});c.addAction(function(a,b){if(null==a.options.label)a.options.label={};switch(a.options.visualization){case"linechart":case"barchart":case"streamgraph":var c=a.axes[0].type;if(null==a.options.label.datapointover)a.options.label.datapointover=function(b,d){return(null!=a.options.segmenton?Aa.formatValue(a.options.segmenton,b)+", ":"")+Aa.formatValue(c,b)+": "+Aa.formatValue(d.type,b)};break;case"scattergraph":case"heatgrid":var d=a.axes[0].type;if(null==a.options.label.datapointover)a.options.label.datapointover=function(a,b){return Aa.formatValue(d,a)+": "+Aa.formatValue(b.type,a)};break;case"geo":var e=a.axes[0].type,f=a.options.map;if(null==f[f.length-1].label)f[f.length-1].label={};if(null==f[f.length-1].label.datapointover)f[f.length-1].label.datapointover=function(a,b){var c=Aa.formatValue(e,a);return null==c?null:c+": "+Aa.formatValue(b.type,a)};break;case"piechart":if(null==a.options.label.datapoint)a.options.label.datapoint=function(b,c){var d=j.field(b,c.type);return 1<a.axes.length?Aa.formatValue(a.axes[0].type,b):0!=c.tot?G.format(Math.round(1e3*d/c.tot)/10,"P:1"):ka.humanize(d)};if(null==a.options.label.datapointover)a.options.label.datapointover=function(b,c){var d=j.field(b,c.type);return ka.humanize(c.type)+": "+ka.humanize(d)+(1<a.axes.length&&0!=c.tot?" ("+G.format(Math.round(1e3*d/c.tot)/10,"P:1")+")":"")};break;case"funnelchart":if(null==a.options.label.datapointover)a.options.label.datapointover=function(b,c){var d=j.field(b,c.type);return ka.humanize(c.type)+": "+ka.humanize(d)+(1<a.axes.length&&0!=c.tot?" ("+G.format(Math.round(1e3*d/c.tot)/10,"P:1")+")":"")};break;case"sankey":var f=a.axes,g=f[f.length-1].type;if(null==a.options.label.datapointover)a.options.label.datapointover=function(a,b){var c=j.field(a,g);return ka.humanize(g)+": "+Aa.formatValue(g,a)+"\n"+(0!=b.tot?G.format(Math.round(1e3*c/b.tot)/10,"P:1"):ka.humanize(c))};if(null==a.options.label.node)a.options.label.node=function(a){return null!=a?a.id:""};if(null==a.options.label.datapoint)a.options.label.datapoint=function(a){return Aa.formatValue(g,a)+"\n"+ka.humanize(g)};if(null==a.options.label.edge)a.options.label.edge=function(a){return G.format(100*a.edgeweight/a.nodeweight,"D:0")+"%"};if(null==a.options.label.edgeover)a.options.label.edgeover=function(a){return G.format(a.edgeweight,"D:0")+"\n"+G.format(100*a.edgeweight/a.nodeweight,"D:0")+"%"}}b(a)});c.execute(a)};qd=function(){};Rb=void 0;Qd=void 0;vb=void 0;Ga=void 0;nb=void 0;Sc=void 0;wb=void 0;Sb=void 0;Eb=void 0;ob=void 0;ab=void 0;xb=void 0;pc=void 0;qc=void 0;Fb=void 0;Tc=void 0;Uc=void 0;i["rg.axis.IAxis"]=qd;qd.__name__=["rg","axis","IAxis"];qd.prototype={createStats:null,min:null,max:null,ticks:null,scale:null,__class__:qd};Rb=function(){};i["rg.axis.IAxisDiscrete"]=Rb;Rb.__name__=["rg","axis","IAxisDiscrete"];Rb.__interfaces__=[qd];Rb.prototype={range:null,scaleDistribution:null,__class__:Rb};Qd=function(){};i["rg.axis.IAxisOrdinal"]=Qd;Qd.__name__=["rg","axis","IAxisOrdinal"];Qd.__interfaces__=[Rb];vb=function(){this.set_scaleDistribution(Ga.ScaleFit)};i["rg.axis.AxisOrdinal"]=vb;vb.__name__=["rg","axis","AxisOrdinal"];vb.__interfaces__=[Qd];vb.prototype={createStats:function(a){return new nb(a)},max:function(){return S.last(this.values())},min:function(){return this.values()[0]},set_scaleDistribution:function(a){return this.scaleDistribution=a},values:function(){throw new H.AbstractMethod({fileName:"AxisOrdinal.hx",lineNumber:64,className:"rg.axis.AxisOrdinal",methodName:"values"})},scale:function(a,b,c){var d=this.values(),e=d.indexOf(a),h=d.indexOf(b),f=d.indexOf(c);if(0>e)throw new H.Error("the start bound '{0}' is not part of the values {1}",[a,d],null,{fileName:"AxisOrdinal.hx",lineNumber:54,className:"rg.axis.AxisOrdinal",methodName:"scale"});if(0>h)throw new H.Error("the end bound '{0}' is not part of the values {1}",[b,d],null,{fileName:"AxisOrdinal.hx",lineNumber:56,className:"rg.axis.AxisOrdinal",methodName:"scale"});if(0>f)throw new H.Error("the value '{0}' is not part of the values {1}",[c,d],null,{fileName:"AxisOrdinal.hx",lineNumber:58,className:"rg.axis.AxisOrdinal",methodName:"scale"});return Sc.distribute(this.scaleDistribution,f-e,h-e+1)},range:function(a,b){var c=this.values(),d=c.indexOf(a),e=c.indexOf(b);if(0>d)throw new H.Error("the start bound '{0}' is not part of the acceptable values {1}",[a,c],null,{fileName:"AxisOrdinal.hx",lineNumber:41,className:"rg.axis.AxisOrdinal",methodName:"range"});if(0>e)throw new H.Error("the end bound '{0}' is not part of the acceptable values {1}",[b,c],null,{fileName:"AxisOrdinal.hx",lineNumber:43,className:"rg.axis.AxisOrdinal",methodName:"range"});return c.slice(d,e+1)},ticks:function(a,b,c){if(0==c)return[];a=wb.fromArray(this.range(a,b),this.scaleDistribution);return Sb.bound(a,c)},scaleDistribution:null,__class__:vb,__properties__:{set_scaleDistribution:"set_scaleDistribution"}};Eb=function(a){vb.call(this);this._values=a};i["rg.axis.AxisOrdinalFixedValues"]=Eb;Eb.__name__=["rg","axis","AxisOrdinalFixedValues"];Eb.__super__=vb;Eb.prototype=A(vb.prototype,{values:function(){return this._values},_values:null,__class__:Eb});ob=function(a){Eb.call(this,ob.valuesByGroup(a));this.groupBy=a};i["rg.axis.AxisGroupByTime"]=ob;ob.__name__=["rg","axis","AxisGroupByTime"];ob.valuesByGroup=function(a){return P.range(ob.defaultMin(a),ob.defaultMax(a)+1)};ob.defaultMin=function(a){switch(a){case"minute":case"hour":case"week":case"month":return 0;case"day":return 1;default:throw new H.Error("invalid periodicity '{0}' for groupBy min",null,a,{fileName:"AxisGroupByTime.hx",lineNumber:34,className:"rg.axis.AxisGroupByTime",methodName:"defaultMin"})}};ob.defaultMax=function(a){switch(a){case"minute":return 59;case"hour":return 23;case"day":return 31;case"week":return 6;case"month":return 11;default:throw new H.Error("invalid periodicity '{0}' for groupBy max",null,a,{fileName:"AxisGroupByTime.hx",lineNumber:48,className:"rg.axis.AxisGroupByTime",methodName:"defaultMax"})}};ob.__super__=Eb;ob.prototype=A(Eb.prototype,{groupBy:null,__class__:ob});ab=function(){};i["rg.axis.AxisNumeric"]=ab;ab.__name__=["rg","axis","AxisNumeric"];ab.__interfaces__=[qd];ab._step=function(a,b){var c=Math.pow(10,Math.floor(Math.log(a/b)/2.302585092994046)),d=b/a*c;.15>=d?c*=10:.35>=d?c*=5:.75>=d&&(c*=2);return c};ab.niceMin=function(a,b){var c=Math.pow(10,Math.round(Math.log(a)/2.302585092994046)-1);return Math.floor(b/c)*c};ab.niceMax=function(a,b){var c=Math.pow(10,Math.round(Math.log(a)/2.302585092994046)-1);return Math.ceil(b/c)*c};ab.prototype={createStats:function(a){return new xb(a)},max:function(a,b){if(null!=b.max)return b.max;var c=ab.niceMax(a.max-a.min,a.max);return 0<c?c:0},min:function(a,b){if(null!=b.min)return b.min;var c=ab.niceMin(a.max-a.min,a.min);return 0>c?c:0},ticks:function(a,b,c){var d=b-a,e;if(0==a%1&&0==b%1&&10>d&&1<=d)e=G.range(a,b+1,1),d=null;else{var h=ab._step(d,5),d=ab._step(d,20),d=0==d?[0]:G.range(a,b,d,!0);e=0==h?[0]:G.range(a,b,h,!0)}return Sb.bound(null==d?e.map(function(c){return new pc(c,!0,(c-a)/(b-a))}):d.map(function(c){return new pc(c,u.remove(e,c),(c-a)/(b-a))}),c)},scale:function(a,b,c){return a==b?a:G.uninterpolatef(a,b)(c)},__class__:ab};qc=function(a){vb.call(this);this.variable=a};i["rg.axis.AxisOrdinalStats"]=qc;qc.__name__=["rg","axis","AxisOrdinalStats"];qc.__super__=vb;qc.prototype=A(vb.prototype,{values:function(){return this.variable.stats.values},variable:null,__class__:qc});Fb=function(a){this.periodicity=a;this.set_scaleDistribution(Ga.ScaleFill)};i["rg.axis.AxisTime"]=Fb;Fb.__name__=["rg","axis","AxisTime"];Fb.__interfaces__=[Rb];Fb.prototype={createStats:function(a){return new xb(a)},max:function(a){return a.max},min:function(a){return a.min},set_scaleDistribution:function(a){return this.scaleDistribution=a},scale:function(a,b,c){switch(this.scaleDistribution[1]){case 1:return(c-a)/(b-a);default:return a=this.range(a,b),Sc.distribute(this.scaleDistribution,a.indexOf(ja.snap(c,this.periodicity)),a.length)}},range:function(a,b){return X.range(a,b,this.periodicity)},ticks:function(a,b,c){var d=this,e=X.unitsBetween(a,b,this.periodicity),h=this.range(a,b),a=h.map(function(a){return new Tc(a,h,d.isMajor(e,a),d.periodicity,d.scaleDistribution)});return Sb.bound(a,c)},isMajor:function(a,b){switch(this.periodicity){case"day":if(31>=a)return!0;return 121>a?(function(){var a=new Date;a.setTime(b);return a}(this).getDate(),X.firstInSeries("month",b)||X.firstInSeries("week",b)):X.firstInSeries("month",b);case"week":return 31>a?!0:7>=function(){var a=new Date;a.setTime(b);return a}(this).getDate();default:var c=j.field(Fb.snapping,this.periodicity),d=X.units(b,this.periodicity);if(null==c)return!0;for(var e=0;e<c.length;){var h=c[e];++e;if(!(a>h.to))return 0==d%h.s}c=j.field(Fb.snapping,this.periodicity+"top");null==c&&(c=1);return 0==d%c}},scaleDistribution:null,periodicity:null,__class__:Fb,__properties__:{set_scaleDistribution:"set_scaleDistribution"}};Uc=function(){};i["rg.axis.ITickmark"]=Uc;Uc.__name__=["rg","axis","ITickmark"];Uc.prototype={label:null,value:null,major:null,delta:null,__class__:Uc};Ga={__ename__:["rg","axis","ScaleDistribution"],__constructs__:["ScaleFit","ScaleFill","ScaleBefore","ScaleAfter"],ScaleFit:["ScaleFit",0]};Ga.ScaleFit.toString=q;Ga.ScaleFit.__enum__=Ga;Ga.ScaleFill=["ScaleFill",1];Ga.ScaleFill.toString=q;Ga.ScaleFill.__enum__=Ga;Ga.ScaleBefore=["ScaleBefore",2];Ga.ScaleBefore.toString=q;Ga.ScaleBefore.__enum__=Ga;Ga.ScaleAfter=["ScaleAfter",3];Ga.ScaleAfter.toString=q;Ga.ScaleAfter.__enum__=Ga;Sc=function(){};i["rg.axis.ScaleDistributions"]=Sc;Sc.__name__=["rg","axis","ScaleDistributions"];Sc.distribute=function(a,b,c){switch(a[1]){case 0:return(b+.5)/c;case 1:return b/(c-1);case 2:return b/c;case 3:return(b+1)/c}};nb=function(a,b){this.type=a;this.sortf=b;this.reset()};i["rg.axis.Stats"]=nb;nb.__name__=["rg","axis","Stats"];nb.prototype={addMany:function(a){for(a=Qa(a)();a.hasNext();){var b=a.next();this.count++;S.exists(this.values,b)||this.values.push(b)}null!=this.sortf&&this.values.sort(this.sortf);this.min=this.values[0];this.max=S.last(this.values);return this},add:function(a){this.count++;if(S.exists(this.values,a))return this;this.values.push(a);null!=this.sortf&&this.values.sort(this.sortf);this.min=this.values[0];this.max=S.last(this.values);return this},reset:function(){this.max=this.min=null;this.count=0;this.values=[];return this},type:null,sortf:null,values:null,count:null,max:null,min:null,__class__:nb};xb=function(a,b){if(null==b)b=G.compare;nb.call(this,a,b)};i["rg.axis.StatsNumeric"]=xb;xb.__name__=["rg","axis","StatsNumeric"];xb.__super__=nb;xb.prototype=A(nb.prototype,{addMany:function(a){nb.prototype.addMany.call(this,a);for(a=Qa(a)();a.hasNext();)this.tot+=a.next();return this},add:function(a){nb.prototype.add.call(this,a);this.tot+=a;return this},reset:function(){nb.prototype.reset.call(this);this.tot=0;return this},tot:null,__class__:xb});pc=function(a,b,c){this.value=a;this.major=b;this.delta=c};i["rg.axis.Tickmark"]=pc;pc.__name__=["rg","axis","Tickmark"];pc.__interfaces__=[Uc];pc.prototype={get_label:function(){return ka.humanize(this.get_value())},get_value:function(){return this.value},get_major:function(){return this.major},get_delta:function(){return this.delta},label:null,value:null,major:null,delta:null,__class__:pc,__properties__:{get_delta:"get_delta",get_major:"get_major",get_value:"get_value",get_label:"get_label"}};wb=function(a,b,c,d){null==c&&(c=!0);this.pos=a;this.values=b;this.scaleDistribution=d;this.major=c};i["rg.axis.TickmarkOrdinal"]=wb;wb.__name__=["rg","axis","TickmarkOrdinal"];wb.__interfaces__=[Uc];wb.fromArray=function(a,b){return I.map(u.iter(a),function(c,d){return new wb(d,a,null,b)})};wb.prototype={get_label:function(){return ka.humanize(this.values[this.pos])},label:null,get_value:function(){return this.values[this.pos]},value:null,get_major:function(){return this.major},major:null,get_delta:function(){return Sc.distribute(this.scaleDistribution,this.pos,this.values.length)},delta:null,scaleDistribution:null,values:null,pos:null,__class__:wb,__properties__:{get_delta:"get_delta",get_major:"get_major",get_value:"get_value",get_label:"get_label"}};
Tc=function(a,b,c,d,e){wb.call(this,b.indexOf(a),b,c,e);this.periodicity=d};i["rg.axis.TickmarkTime"]=Tc;Tc.__name__=["rg","axis","TickmarkTime"];Tc.__super__=wb;Tc.prototype=A(wb.prototype,{get_label:function(){return X.smartFormat(this.periodicity,this.values[this.pos])},periodicity:null,__class__:Tc});Sb=function(){};i["rg.axis.Tickmarks"]=Sb;Sb.__name__=["rg","axis","Tickmarks"];Sb.bound=function(a,b){if(null==b||a.length<=(2>b?2:b))return a;var c=a.filter(function(a){return a.get_major()});if(c.length>b)return Sb.reduce(c,b);c=Sb.reduce(a.filter(function(a){return!a.get_major()}),b-c.length).concat(c);c.sort(function(a,b){return G.compare(a.get_delta(),b.get_delta())});return c};Sb.reduce=function(a,b){if(1==b)return[a[0]];if(2==b)return[a[a.length-1]];var c=a.length/b,d=[],e=0;do d.push(a[Math.round(c*e++)]);while(b>d.length);return d};Rd=function(a){if(null==a)throw new H.NullArgument("loader","invalid null argument '{0}' for method {1}.{2}()",{fileName:"DataLoader.hx",lineNumber:11,className:"rg.data.DataLoader",methodName:"new"});this.loader=a;this.onLoad=new Fc};cc=void 0;rc=void 0;vd=void 0;wd=void 0;sc=void 0;Hb=void 0;i["rg.data.DataLoader"]=Rd;Rd.__name__=["rg","data","DataLoader"];Rd.prototype={load:function(){var a=this;this.loader(function(b){a.onLoad.dispatch(b)})},onLoad:null,loader:null,__class__:Rd};wd=function(){};i["rg.data.DependentVariableProcessor"]=wd;wd.__name__=["rg","data","DependentVariableProcessor"];wd.prototype={process:function(a,b){for(var c=0;c<b.length;){var d=b[c];++c;var e=xa.values(a,d.type);if(0!=e.length){null==d.axis&&d.setAxis((new Vc).create(d.type,B.__instanceof(e[0],ae),d,null));d.stats.addMany(e);var h;if(null!=d.scaleDistribution&&null!=(h=hb.as(d.axis,Rb)))h.set_scaleDistribution(d.scaleDistribution),d.scaleDistribution=null}}},__class__:wd};vd=function(){};i["rg.data.IndependentVariableProcessor"]=vd;vd.__name__=["rg","data","IndependentVariableProcessor"];vd.prototype={process:function(a,b){for(var c=0;c<b.length;){var d=b[c];++c;d.stats.addMany(xa.values(a,d.type));var e;if(null!=d.scaleDistribution&&null!=(e=hb.as(d.axis,Rb)))e.set_scaleDistribution(d.scaleDistribution),d.scaleDistribution=null}},__class__:vd};sc=function(a,b,c,d){this.on=a;this.transform=b;this.scale=c;this.values=d};i["rg.data.Segmenter"]=sc;sc.__name__=["rg","data","Segmenter"];sc.prototype={segment:function(a){var b=this,c;if(null==this.on)c=[a];else if(0<this.values.length){c=[];for(var d=0,e=this.values;d<e.length;){var h=[e[d]];++d;c.push(a.filter(function(a){return function(c){return j.field(c,b.on)==a[0]}}(h)))}}else c=xa.partition(a,this.on);if(null!=this.scale){e=0;for(d=c.length;e<d;)a=e++,c[a]=this.scale(c[a])}if(null!=this.transform){c=S.rotate(c);e=0;for(d=c.length;e<d;)a=e++,c[a]=this.transform(c[a]);c=S.rotate(c)}return c},values:null,scale:null,transform:null,on:null,__class__:sc};Hb=function(a,b){this.type=a;this.scaleDistribution=b;this.meta={}};i["rg.data.Variable"]=Hb;Hb.__name__=["rg","data","Variable"];Hb.prototype={get_maxf:function(){if(null==this.maxf){if(null==this.axis)throw new H.Error("axis is null in '{0}' variable (required by max)",[this.type],null,{fileName:"Variable.hx",lineNumber:61,className:"rg.data.Variable",methodName:"get_maxf"});this.set_maxf((Q=this.axis,v(Q,Q.max)))}return this.maxf},get_minf:function(){if(null==this.minf){if(null==this.axis)throw new H.Error("axis is null in '{0}' variable (required by min)",[this.type],null,{fileName:"Variable.hx",lineNumber:50,className:"rg.data.Variable",methodName:"get_minf"});this.set_minf((Q=this.axis,v(Q,Q.min)))}return this.minf},set_maxf:function(a){return this.maxf=a},set_minf:function(a){return this.minf=a},max:function(){return this.get_maxf()(this.stats,this.meta)},min:function(){return this.get_minf()(this.stats,this.meta)},setAxis:function(a){this.axis=a;this.stats=null!=a?a.createStats(this.type):null},maxf:null,minf:null,meta:null,stats:null,axis:null,scaleDistribution:null,type:null,__class__:Hb,__properties__:{set_minf:"set_minf",get_minf:"get_minf",set_maxf:"set_maxf",get_maxf:"get_maxf"}};rc=function(a,b){Hb.call(this,a,b)};i["rg.data.VariableDependent"]=rc;rc.__name__=["rg","data","VariableDependent"];rc.__super__=Hb;rc.prototype=A(Hb.prototype,{__class__:rc});cc=function(a,b){Hb.call(this,a,b)};i["rg.data.VariableIndependent"]=cc;cc.__name__=["rg","data","VariableIndependent"];cc.__super__=Hb;cc.prototype=A(Hb.prototype,{__class__:cc});Vc=function(){};dc=void 0;xd=void 0;yd=void 0;zd=void 0;Ad=void 0;Ib=void 0;Bd=void 0;i["rg.factory.FactoryAxis"]=Vc;Vc.__name__=["rg","factory","FactoryAxis"];Vc.prototype={createDiscrete:function(a,b,c,d){return 0<=a.indexOf("time:")?null!=d?new ob(u.substr(a,a.indexOf("time:")+5,null)):new Fb(u.substr(a,a.indexOf("time:")+5,null)):null!=c&&0<c.length?new Eb(c):new qc(b)},create:function(a,b,c,d){return null!=d&&0<d.length?new Eb(d):!0==b?new ab:!1==b?new qc(c):null},__class__:Vc};Ad=function(){};i["rg.factory.FactoryGeoProjection"]=Ad;Ad.__name__=["rg","factory","FactoryGeoProjection"];Ad.prototype={create:function(a){switch(a.projection.toLowerCase()){case"mercator":var b=new W.Mercator;null!=a.scale&&b.set_scale(a.scale);null!=a.translate?b.set_translate(a.translate):b.set_translate([0,0]);return b;case"albers":return b=new W.Albers,null!=a.scale&&b.set_scale(a.scale),null!=a.translate?b.set_translate(a.translate):b.set_translate([0,0]),null!=a.origin&&b.set_origin(a.origin),null!=a.parallels&&b.set_parallels(a.parallels),b;case"albersusa":return b=new W.AlbersUsa,null!=a.scale&&b.set_scale(a.scale),null!=a.translate?b.set_translate(a.translate):b.set_translate([0,0]),b;case"azimuthal":return b=new W.Azimuthal,null!=a.scale&&b.set_scale(a.scale),null!=a.translate?b.set_translate(a.translate):b.set_translate([0,0]),null!=a.mode&&b.set_mode(a.mode),null!=a.origin&&b.set_origin(a.origin),b;default:throw new H.Error("the projection '{0}' does not exist or is not implemented",[a.projection],null,{fileName:"FactoryGeoProjection.hx",lineNumber:68,className:"rg.factory.FactoryGeoProjection",methodName:"create"})}},__class__:Ad};zd=function(){};i["rg.factory.FactoryHtmlVisualization"]=zd;zd.__name__=["rg","factory","FactoryHtmlVisualization"];zd.prototype={create:function(a,b,c){switch(a){case"pivottable":return a=new Ic(b),a.info=ga.feed(new qb,c),a;case"leaderboard":return a=new Jc(b),a.info=ga.feed(new cd,c),a;default:throw new H.Error("unsupported visualization '{0}'",null,a,{fileName:"FactoryHtmlVisualization.hx",lineNumber:35,className:"rg.factory.FactoryHtmlVisualization",methodName:"create"})}},__class__:zd};dc=function(){};i["rg.factory.FactoryLayout"]=dc;dc.__name__=["rg","factory","FactoryLayout"];dc.size=function(a,b,c){var d,e=null==b.width?10<(d=a.node().clientWidth)?d:400:b.width,a=(null==b.height?10<(d=a.node().clientHeight)?d:300:b.height)-c;return{width:e,height:a}};dc.prototype={create:function(a,b,c){var b=dc.size(c,a,b),d=a.layout;null==d&&(d=ha.layoutDefault.get(a.type));if(null==d)throw new H.Error("unable to find a suitable layout for '{0}'",null,a.type,{fileName:"FactoryLayout.hx",lineNumber:28,className:"rg.factory.FactoryLayout",methodName:"create"});c=ha.instantiateLayout(d,b.width,b.height,c);c.feedOptions(a);return c},__class__:dc};yd=function(){};i["rg.factory.FactorySvgVisualization"]=yd;yd.__name__=["rg","factory","FactorySvgVisualization"];yd.prototype={create:function(a,b,c){switch(a){case"barchart":return a=new Kc(b),a.info=a.infoBar=ga.feed(new tc,c),a;case"funnelchart":return a=new Lc(b),a.info=ga.feed(new dd,c),a;case"geo":return a=new Mc(b),a.info=ga.feed(new ed,c),a;case"heatgrid":return a=new Nc(b),a.info=a.infoHeatGrid=ga.feed(new uc,c),a;case"linechart":return a=new Oc(b),a.info=a.infoLine=ga.feed(new vc,c),a;case"piechart":return a=new Pc(b),a.info=ga.feed(new fd,c),a;case"sankey":return a=new mb(b),a.info=ga.feed(new gd,c),a;case"scattergraph":return a=new Qc(b),a.info=a.infoScatter=ga.feed(new wc,c),a;case"streamgraph":return a=new Rc(b),a.info=a.infoStream=ga.feed(new xc,c),a;default:throw new H.Error("unsupported visualization type '{0}'",null,a,{fileName:"FactorySvgVisualization.hx",lineNumber:76,className:"rg.factory.FactorySvgVisualization",methodName:"create"})}},__class__:yd};xd=function(){this.independentFactory=new Ib;this.dependentFactory=new Bd};i["rg.factory.FactoryVariable"]=xd;xd.__name__=["rg","factory","FactoryVariable"];xd.prototype={createVariables:function(a){var b=this;return a.map(function(a){switch(a.variableType[1]){case 1:return b.independentFactory.create(a);case 2:return b.dependentFactory.create(a,null);case 0:return b.dependentFactory.create(a,null)}})},dependentFactory:null,independentFactory:null,__class__:xd};Bd=function(){};i["rg.factory.FactoryVariableDependent"]=Bd;Bd.__name__=["rg","factory","FactoryVariableDependent"];Bd.prototype={create:function(a,b){if(null==a.type)throw new H.Error("cannot create an axis if type is not specified",null,null,{fileName:"FactoryVariableDependent.hx",lineNumber:18,className:"rg.factory.FactoryVariableDependent",methodName:"create"});var c=new Vc,d=new rc(a.type,a.scaleDistribution),c=c.create(a.type,b,d,a.values);d.setAxis(c);d.set_minf(Ib.convertBound(c,a.min));d.set_maxf(Ib.convertBound(c,a.max));return d},__class__:Bd};Ib=function(){};i["rg.factory.FactoryVariableIndependent"]=Ib;Ib.__name__=["rg","factory","FactoryVariableIndependent"];Ib.convertBound=function(a,b){if(null==b||j.isFunction(b))return b;if(B.__instanceof(a,Fb)){B.__instanceof(b,Date)&&(b=B.__cast(b,Date).getTime());if(B.__instanceof(b,ae))return function(){return b};if(B.__instanceof(b,String))return function(){return s.DateParser.parse(b).getTime()};throw new H.Error("invalid value '{0}' for time bound",[b],null,{fileName:"FactoryVariableIndependent.hx",lineNumber:46,className:"rg.factory.FactoryVariableIndependent",methodName:"convertBound"})}return function(){return b}};Ib.prototype={create:function(a){if(null==a.type)return null;var b=new Vc,c=new cc(a.type,a.scaleDistribution),b=b.createDiscrete(a.type,c,a.values,a.groupBy);c.setAxis(b);c.set_minf(Ib.convertBound(b,a.min));c.set_maxf(Ib.convertBound(b,a.max));return c},__class__:Ib};Hc=function(){this.x=this.y=this.width=this.height=0};Y=void 0;wa=void 0;pd=void 0;Ta=void 0;i["rg.frame.Frame"]=Hc;Hc.__name__=["rg","frame","Frame"];Hc.prototype={set_layout:function(a,b,c,d){if(!(this.x==a&&this.y==b&&this.width==c&&this.height==d))this.x=a,this.y=b,this.width=c,this.height=d,this.change()},change:function(){},height:null,width:null,y:null,x:null,__class__:Hc};Y={__ename__:["rg","frame","FrameLayout"],__constructs__:["Fill","FillPercent","FillRatio","Fixed","Floating"]};Y.Fill=function(a,b,c,d){a=["Fill",0,a,b,c,d];a.__enum__=Y;a.toString=q;return a};Y.FillPercent=function(a,b,c,d,e){a=["FillPercent",1,a,b,c,d,e];a.__enum__=Y;a.toString=q;return a};Y.FillRatio=function(a,b,c){a=["FillRatio",2,a,b,c];a.__enum__=Y;a.toString=q;return a};Y.Fixed=function(a,b,c){a=["Fixed",3,a,b,c];a.__enum__=Y;a.toString=q;return a};Y.Floating=function(a,b,c,d){a=["Floating",4,a,b,c,d];a.__enum__=Y;a.toString=q;return a};wa={__ename__:["rg","frame","Orientation"],__constructs__:["Vertical","Horizontal"],Vertical:["Vertical",0]};wa.Vertical.toString=q;wa.Vertical.__enum__=wa;wa.Horizontal=["Horizontal",1];wa.Horizontal.toString=q;wa.Horizontal.__enum__=wa;pd=function(a,b,c){this.orientation=null==c?wa.Vertical:c;this.children=[];this.width=a;this.height=b};i["rg.frame.Stack"]=pd;pd.__name__=["rg","frame","Stack"];pd.prototype={setSize:function(a,b){if(this.width==a&&this.height==b)return this;this.width=a;this.height=b;this.reflow();return this},get_length:function(){return this.children.length},reflow:function(){for(var a=function(a){var b;switch(a.orientation[1]){case 0:b=a.height;break;case 1:b=a.width}return b}(this),b=function(a){var b;switch(a.orientation[1]){case 0:b=a.width;break;case 1:b=a.height}return b}(this),c=0,d=[],e=[],h=0,f=0,g=0,i=this.children;g<i.length;){var k=i[g];++g;k=k.disposition;switch(k[1]){case 0:var x=k[5],N=k[4],j=k[3],k=k[2];null==N&&(N=0);null==x&&(x=a);c+=N+k+j;f+=e[h]=x-N;d.push(N+k+j);break;case 1:var x=k[6],N=k[5],j=k[3],l=k[2],k=Math.round(k[4]*a);null!=N&&k<N&&(k=N);null!=x&&k>x&&(k=x);c+=k+l+j;d.push(k+l+j);break;case 2:N=k[4];x=k[3];j=k[2];null==N&&(N=1);k=Math.round(b*N);c+=k+j+x;d.push(k+j+x);break;case 3:N=k[4];x=k[3];k=k[2];c+=N+k+x;d.push(N+k+x);break;case 4:d.push(0)}h++}a-=c;if(0<a){g=h=0;for(i=this.children;g<i.length;){k=i[g];++g;switch(k.disposition[1]){case 0:k=Math.round(e[h]/f*a),d[h]+=k}h++}}e=h=0;switch(this.orientation[1]){case 0:i=0;for(f=this.children;i<f.length;){k=f[i];++i;b=k;k=k.disposition;switch(k[1]){case 4:g=k[5];x=k[4];N=k[3];k=k[2];b.set_layout(k,N,x,g);break;case 3:case 0:case 1:case 2:x=k[3],k=k[2],b.set_layout(0,e+k,this.width,d[h]-x-k)}e+=d[h++]}break;case 1:i=0;for(f=this.children;i<f.length;){k=f[i];++i;b=k;k=k.disposition;switch(k[1]){case 4:g=k[5];x=k[4];N=k[3];k=k[2];b.set_layout(k,N,x,g);break;case 3:case 0:case 1:case 2:x=k[3],k=k[2],b.set_layout(e+k,0,d[h]-x-k,this.height)}e+=d[h++]}}0>a&&this.moreSpaceRequired(c)},removeChild:function(a){if(!u.remove(this.children,a))return!1;a.set_parent(null);this.reflow();return!0},addItems:function(a){for(var b=!1,a=Qa(a)();a.hasNext();){var c=a.next();null!=c&&(b=!0,this.children.push(c),c.set_parent(this))}b&&this.reflow();return this},addItem:function(a){if(null==a)return this;this.children.push(a);a.set_parent(this);this.reflow();return this},insertItem:function(a,b){if(null==b)return this;if(a>=this.children.length)return this.addItem(b);0>a&&(a=0);this.children.splice(a,0,b);b.set_parent(this);this.reflow();return this},moreSpaceRequired:function(){},orientation:null,height:null,width:null,children:null,__class__:pd};Ta=function(a){Hc.call(this);this.set_disposition(a)};i["rg.frame.StackItem"]=Ta;Ta.__name__=["rg","frame","StackItem"];Ta.__super__=Hc;Ta.prototype=A(Hc.prototype,{set_disposition:function(a){this.disposition=a;null!=this.parent&&this.parent.reflow();return a},set_parent:function(a){null!=this.parent&&this.parent.removeChild(this);return this.parent=a},parent:null,disposition:null,__class__:Ta,__properties__:{set_disposition:"set_disposition"}});Ua={};F=void 0;Ua.Leadeboard=function(a){this.ready=new Zb;this.container=a;this.animated=!0;this.animationDuration=1500;this.animationEase=V.Equations.elasticf();this.animationDelay=150;this._created=0;this.displayGradient=!0;this.colorScale=this.useMax=!1};i["rg.html.chart.Leadeboard"]=Ua.Leadeboard;Ua.Leadeboard.__name__=["rg","html","chart","Leadeboard"];Ua.Leadeboard.prototype={id:function(a){return xa.id(a,[this.variableDependent.type])},lTitle:function(a){return this.labelDataPointOver(a,this.stats)},lDataPoint:function(a){return this.labelDataPoint(a,this.stats)},lValue:function(a){return this.labelValue(a,this.stats)},lRank:function(a,b){return this.labelRank(a,b,this.stats)},fadeIn:function(a,b){var c=this;O.selectNodeData(a).transition().ease(this.animationEase).duration(null,this.animationDuration).delay(null,this.animationDelay*(b-this._created)).attr("opacity")["float"](1).endNode(function(){c._created++})},onClick:function(a){this.click(a)},data:function(a){null!=this.sortDataPoint&&a.sort(this.sortDataPoint);if(null!=this.variableDependent.stats){this.stats=B.__cast(this.variableDependent.stats,xb);var a=this.list.selectAll("li").data(a,v(this,this.id)),b=a.enter().append("li");b.attr("title").stringf(v(this,this.lTitle));b.append("div").attr("class").stringf(function(a,b){return 0==b%2?"rg_background fill-0":"rg_background"});var c=b.append("div").attr("class").string("rg_labels");if(null!=v(this,this.labelRank)){var d=c.append("div").text().stringf(v(this,this.lRank));this.colorScale?d.attr("class").stringf(function(a,b){return"rg_rank fill fill-"+b}):d.attr("class").string("rg_rank")}null!=v(this,this.labelDataPoint)&&c.append("span").attr("class").string("rg_description color-0").text().stringf(v(this,this.lDataPoint));null!=v(this,this.labelValue)&&c.append("span").attr("class").string("rg_value color-2").text().stringf(v(this,this.lValue));b.append("div").attr("class").string("clear");this.displayBar&&(c=b.append("div").attr("class").string("rg_barpadding").append("div").attr("class").string("rg_barcontainer"),c.append("div").attr("class").string("rg_barback fill-0"),c.append("div").attr("class").string("rg_bar fill-0").style("width").stringf(v(this,this.backgroundSize)),b.append("div").attr("class").string("clear"));if(null!=this.click)b.on("click.user",v(this,this.onClick));if(this.animated)b.style("opacity")["float"](0).eachNode(v(this,this.fadeIn));else b.style("opacity")["float"](1);this.animated?a.exit().transition().ease(this.animationEase).duration(null,this.animationDuration).style("opacity")["float"](0).remove():a.exit().remove();this.ready.dispatch()}},backgroundSize:function(a){return 100*j.field(a,this.variableDependent.type)/(this.useMax?this.stats.max:this.stats.tot)+"%"},setVariables:function(a,b){this.variableDependent=b[0];this.variableIndependent=a[0]},init:function(){var a=this.container.append("div").attr("class").string("leaderboard");this.list=a.append("ul");a.append("div").attr("class").string("clear")},labelValue:function(a,b){return Aa.formatValue(b.type,a)},labelRank:function(a,b){return""+(b+1)},labelDataPointOver:function(a,b){return G.format(100*j.field(a,b.type)/(this.useMax?b.max:b.tot),"P:1")},labelDataPoint:function(a){return Aa.humanize(j.field(a,this.variableIndependent.type))},stats:null,_created:null,list:null,container:null,displayBar:null,ready:null,colorScale:null,useMax:null,displayGradient:null,sortDataPoint:null,click:null,animationEase:null,animationDelay:null,animationDuration:null,animated:null,variableDependent:null,variableIndependent:null,__class__:Ua.Leadeboard};m=void 0;H=void 0;V=void 0;s=void 0;W=void 0;f=void 0;Z=void 0;p=void 0;aa=void 0;Kb=void 0;R=void 0;yb=void 0;r=void 0;Ha=void 0;fb=void 0;Lb=void 0;Na=void 0;gb=void 0;f={Rgb:function(a,b,c){this.red=P.clamp(a,0,255);this.green=P.clamp(b,0,255);this.blue=P.clamp(c,0,255)}};i["thx.color.Rgb"]=f.Rgb;f.Rgb.__name__=["thx","color","Rgb"];f.Rgb.fromInt=function(a){return new f.Rgb(a>>16&255,a>>8&255,a&255)};f.Rgb.interpolatef=function(a,b,c){var d=P.interpolatef(a.red,b.red,c),e=P.interpolatef(a.green,b.green,c),h=P.interpolatef(a.blue,b.blue,c);return function(a){return new f.Rgb(d(a),e(a),h(a))}};f.Rgb.contrastBW=function(a){var b=f.Grey.toGrey(a),a=f.Hsl.toHsl(a);return.5>b.grey?new f.Hsl(a.hue,a.saturation,1):new f.Hsl(a.hue,a.saturation,0)};f.Rgb.interpolateStepsf=function(a,b){if(0>=a.length)throw new H.Error("invalid number of steps",null,null,{fileName:"Rgb.hx",lineNumber:164,className:"thx.color.Rgb",methodName:"interpolateStepsf"});if(1==a.length)return function(){return a[0]};if(2==a.length)return f.Rgb.interpolatef(a[0],a[1],b);for(var c=a.length-1,d=1/c,e=[],h=0;h<c;){var o=h++;e[o]=f.Rgb.interpolatef(a[o],a[o+1])}return function(a){0>a?a=0:1<a&&(a=1);var b=1==a?c-1:Math.floor(a/d);return e[b](c*(a-b*d))}};f.Rgb.prototype={toRgbString:function(){return"rgb("+this.red+","+this.green+","+this.blue+")"},hex:function(a){null==a&&(a="");return a+C.hex(this.red,2)+C.hex(this.green,2)+C.hex(this.blue,2)},red:null,green:null,blue:null,__class__:f.Rgb};f.Hsl=function(a,b,c){this.hue=a=G.circularWrap(a,360);this.saturation=b=G.normalize(b);this.lightness=c=G.normalize(c);f.Rgb.call(this,P.interpolate(f.Hsl._c(a+120,b,c),0,255,null),P.interpolate(f.Hsl._c(a,b,c),0,255,null),P.interpolate(f.Hsl._c(a-120,b,c),0,255,null))};i["thx.color.Hsl"]=f.Hsl;f.Hsl.__name__=["thx","color","Hsl"];f.Hsl._c=function(a,b,c){b=.5>=c?c*(1+b):c+b-c*b;c=2*c-b;a=G.circularWrap(a,360);return 60>a?c+(b-c)*a/60:180>a?b:240>a?c+(b-c)*(240-a)/60:c};f.Hsl.toHsl=function(a){var b=a.red/255,c=a.green/255,d=a.blue/255,e=G.min(b<c?b:c,d),h=G.max(b>c?b:c,d),o=h-e,a=(h+e)/2;0==o?e=b=0:(e=.5>a?o/(h+e):o/(2-h-e),b=60*(b==h?(c-d)/o+(c<d?6:0):c==h?(d-b)/o+2:(b-c)/o+4));return new f.Hsl(b,e,a)};f.Hsl.darker=function(a,b,c){return new f.Hsl(a.hue,a.saturation,G.interpolate(b,a.lightness,0,c))};f.Hsl.lighter=function(a,b,c){return new f.Hsl(a.hue,a.saturation,G.interpolate(b,a.lightness,1,c))};f.Hsl.interpolatef=function(a,b,c){return function(d){return new f.Hsl(G.interpolate(d,a.hue,b.hue,c),G.interpolate(d,a.saturation,b.saturation,c),G.interpolate(d,a.lightness,b.lightness,c))}};f.Hsl.__super__=f.Rgb;f.Hsl.prototype=A(f.Rgb.prototype,{lightness:null,saturation:null,hue:null,__class__:f.Hsl});V={Equations:function(){}};i["thx.math.Equations"]=V.Equations;V.Equations.__name__=["thx","math","Equations"];V.Equations.linear=function(a){return a};V.Equations.polynomial=function(a,b){return Math.pow(a,b)};V.Equations.cubic=function(a){return V.Equations.polynomial(a,3)};V.Equations.elasticf=function(a,b){var c;null==b&&(b=.45);null==a?(a=1,c=b/4):c=b/(2*Math.PI)/Math.asin(1/a);return function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Math.PI/b)}};Ua.PivotTable=function(a){this.ready=new Zb;this.container=a;this.displayHeatMap=this.displayRowTotal=this.displayColumnTotal=!0;this.colorStart=Ua.PivotTable.defaultColorStart;this.colorEnd=Ua.PivotTable.defaultColorEnd;this.incolumns=1};i["rg.html.chart.PivotTable"]=Ua.PivotTable;Ua.PivotTable.__name__=["rg","html","chart","PivotTable"];Ua.PivotTable.prototype={range:function(a){return a.axis.range(a.min(),a.max())},transformData:function(a){for(var b=[],c=[],d=[],e=[],h=new xb(null),f,g=0,i=P.min(1,this.columnVariables.length);g<i;){var k=g++;f=this.columnVariables[k];b.push(f.type);for(var k=0,x=this.range(f);k<x.length;){var N=x[k];++k;d.push({values:[N],stats:null,type:f.type})}}g=1;for(i=this.columnVariables.length;g<i;){k=g++;f=this.columnVariables[k];b.push(f.type);for(var l=d.slice(),d=[],k=0;k<l.length;){var m=l[k];++k;for(var x=0,p=this.range(f);x<p.length;){N=p[x];++x;var n=ra.clone(m);n.values.push(N);d.push(n)}}}for(var q,g=0,i=d.length;g<i;){k=g++;x=[d[k]];f=new xb(null);x[0].stats=f;k=0;for(x=a.filter(function(a){return function(c){for(var d=0,e=b.length;d<e;){var h=d++;q=b[h];if(0<=q.indexOf("time:")&&ja.snap(j.field(c,q),u.substr(q,q.indexOf("time:")+5,null))==a[0].values[h]||j.field(c,q)==a[0].values[h])return!0}return!1}}(x));k<x.length;)l=x[k],++k,m=j.field(l,this.cellVariable.type),null!=m&&(f.add(m),h.add(m))}g=0;for(i=P.min(1,this.rowVariables.length);g<i;){k=g++;f=this.rowVariables[k];c.push(f.type);k=0;for(x=this.range(f);k<x.length;)N=x[k],++k,e.push({values:[N],stats:null,cells:null})}g=1;for(i=this.rowVariables.length;g<i;){k=g++;f=this.rowVariables[k];c.push(f.type);l=e.slice();e=[];for(k=0;k<l.length;){m=l[k];++k;x=0;for(p=this.range(f);x<p.length;)N=p[x],++x,n=ra.clone(m),n.values.push(N),e.push(n)}}for(var s,g=0,i=e.length;g<i;){k=g++;f=[e[k]];f[0].stats=new xb(null);f[0].cells=[];N=a.filter(function(a){return function(b){for(var d=0,e=c.length;d<e;){var h=d++;s=c[h];if(0<=s.indexOf("time:")&&ja.snap(j.field(b,s),u.substr(s,s.indexOf("time:")+5,null))!=a[0].values[h]||j.field(b,s)!=a[0].values[h])return!1}return!0}}(f));x=0;for(k=d.length;x<k;)l=x++,l=[d[l]],0<=l[0].type.indexOf("time:")?(m=[Aa.periodicity(l[0].type)],l=S.firstf(N,function(a,c){return function(d){for(var e=0,h=c[0].values.length;e<h;){var f=e++;if(ja.snap(j.field(d,b[f]),a[0])!=c[0].values[f])return!1}return!0}}(m,l))):l=S.firstf(N,function(a){return function(c){for(var d=0,e=a[0].values.length;d<e;){var h=d++;if(j.field(c,b[h])!=a[0].values[h])return!1}return!0}}(l)),m=j.field(l,this.cellVariable.type),null==m?f[0].cells.push({}):(f[0].cells.push(l),f[0].stats.add(m))}return{column_headers:b,row_headers:c,columns:d,rows:e,stats:h}},setVariables:function(a,b){this.cellVariable=b[0];this.columnVariables=[];for(var c=0,d=this.incolumns;c<d;){var e=c++;this.columnVariables.push(a[e])}this.rowVariables=[];c=this.incolumns;for(d=a.length;c<d;)e=c++,this.rowVariables.push(a[e])},init:function(){},prependSpacer:function(a,b){if(0!=a){var c=b.append("th").attr("class").string("spacer");if(1<a)c.attr("colspan")["float"](a)}},buildValue:function(a,b,c,d){d=d.append("th").text().string(this.labelAxisValue(a,b));if(1<c)d.attr("colspan")["float"](c);c=["column value"];null!=this.valueclass&&(a=this.valueclass(a,b),null!=a&&c.push(a));d.attr("class").string(c.join(" "))},formatDataPointOver:function(a){return this.labelDataPointOver(a,this.stats)},formatDataPoint:function(a){return this.labelDataPoint(a,this.stats)},formatTotalOver:function(a){return this.labelTotalOver(a,this.stats)},formatTotal:function(a){return this.labelTotal(a,this.stats)},onClick:function(a){this.click(a)},data:function(a){var a=this.transformData(a),b=this.container.append("table").classed().add("pivot-table"),c=b.append("thead"),d=0<a.rows.length?a.rows[0].values.length:0,e=f.Rgb.interpolatef(this.colorStart,this.colorEnd);this.stats=a.stats;if(0<a.columns.length)for(var h=0,o=a.column_headers.length;h<o;){var g=h++,i=c.append("tr");this.prependSpacer(d,i);var i=i.append("th").text().string(this.labelAxis(a.column_headers[g])),k=["col-header"];if(null!=this.headerclass){var x=this.headerclass(a.column_headers[g]);null!=x&&k.push(x)}i.attr("class").string(k.join(" "));if(1<a.columns.length)i.attr("colspan")["float"](a.columns.length);var k=1,N=a.columns[0].values[g],i=c.append("tr");if(g==a.column_headers.length-1)for(var l=0,m=a.row_headers;l<m.length;){var p=m[l];++l;var n=i.append("th").text().string(this.labelAxis(p)),q=["row-header"];null!=this.headerclass&&(x=this.headerclass(p),null!=x&&q.push(x));n.attr("class").string(q.join(" "))}else this.prependSpacer(d,i);m=1;for(l=a.columns.length;m<l;)n=m++,n=a.columns[n].values[g],N==n?k++:(this.buildValue(N,a.column_headers[g],k,i),k=1,N=n);null!=N&&this.buildValue(N,a.column_headers[g],k,i)}if(0==a.column_headers.length){i=c.append("tr");o=0;for(h=a.row_headers;o<h.length;)p=h[o],++o,i.append("th").attr("class").string("row header").text().string(this.labelAxis(p))}c=b.append("tbody");N=[];o=0;for(h=a.rows;o<h.length;){p=h[o];++o;i=c.append("tr");q=p.values.length;for(l=0;l<q;){var g=l++,x=p.values[g],s=x==N[g];if(!s){N[g]=x;for(m=g+1;m<q;)n=m++,N[n]=null}n=i.append("th").text().string(s?"":this.labelAxisValue(x,a.row_headers[g]));k=["row value"];s&&k.push("empty");null!=this.valueclass&&(g=this.valueclass(x,a.row_headers[g]),null!=g&&k.push(g));n.attr("class").string(k.join(" "))}l=0;for(m=p.cells;l<m.length;){g=m[l];++l;n=i.append("td").text().string(this.formatDataPoint(g)).attr("title").string(this.formatDataPointOver(g));if(null!=this.click)n.onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(v(this,this.onClick),g));if(this.displayHeatMap&&!Math.isNaN(x=j.field(g,this.cellVariable.type)/a.stats.max))k=e(x),n.style("color").color(f.Rgb.contrastBW(k)).style("background-color").color(k);k=[];null!=this.cellclass&&(g=this.cellclass(g,p.stats),null!=g&&k.push(g));n.attr("class").string(k.join(" "))}this.displayRowTotal&&1<a.columns.length&&(n=i.append("th").text().string(this.formatTotal(p.stats.tot)),l=this.formatTotalOver(p.stats.tot),null!=l&&n.attr("title").string(l),k=["row total"],null!=this.totalclass&&(g=this.totalclass(p.stats.tot,p.values),null!=g&&k.push(g)),n.attr("class").string(k.join(" ")))}h=b.append("tfoot");if(this.displayColumnTotal&&1<a.rows.length){i=h.append("tr");this.prependSpacer(d,i);o=0;for(h=a.columns;o<h.length;)d=h[o],++o,l=this.formatTotalOver(d.stats.tot),n=i.append("th").text().string(this.formatTotal(d.stats.tot)),null!=l&&n.attr("title").string(l),k=["column total"],null!=this.totalclass&&(g=this.totalclass(d.stats.tot,d.values),null!=g&&k.push(g)),n.attr("class").string(k.join(" "));this.displayRowTotal&&1<a.columns.length&&(n=i.append("th").text().string(this.formatTotal(a.stats.tot)).attr("title").string(this.formatTotalOver(a.stats.tot)),k=["table total"],null!=this.totalclass&&(g=this.totalclass(a.stats.tot,[]),null!=g&&k.push(g)),n.attr("class").string(k.join(" ")))}this.ready.dispatch()},labelTotalOver:function(a,b){return m.FormatNumber.percent(100*a/b.tot,1)},labelTotal:function(a){return m.FormatNumber["int"](a)},labelAxisValue:function(a,b){if(0<=b.indexOf("time:")){var c=u.substr(b,b.indexOf("time:")+5,null);return X.format(c,a)}return ka.humanize(a)},labelAxis:function(a){return ka.humanize(a)},labelDataPointOver:function(a,b){var c=j.field(a,this.cellVariable.type);return Math.isNaN(c)?"0":m.FormatNumber.percent(100*c/b.tot,1)},labelDataPoint:function(a){a=j.field(a,this.cellVariable.type);return Math.isNaN(a)?"0":m.FormatNumber["int"](a)},stats:null,container:null,totalclass:null,headerclass:null,valueclass:null,cellclass:null,click:null,incolumns:null,cellVariable:null,rowVariables:null,columnVariables:null,ready:null,colorEnd:null,colorStart:null,displayHeatMap:null,displayRowTotal:null,displayColumnTotal:null,__class__:Ua.PivotTable};F={};F.DownloaderMenu=function(a,b,c,d){this.handler=a;this.formats=null==c?F.DownloaderMenu.DEFAULT_FORMATS:c;this.title=F.DownloaderMenu.DEFAULT_TITLE;this.build(b,d)};i["rg.html.widget.DownloaderMenu"]=F.DownloaderMenu;F.DownloaderMenu.__name__=["rg","html","widget","DownloaderMenu"];F.DownloaderMenu.prototype={click:function(a){var b=this;this.menu.classed().add("downloading");this.handler(a,this.backgroundColor,function(){b.menu.classed().remove("downloading");return!0},function(a){b.menu.classed().remove("downloading");ea.window.alert("ERROR: "+a)})},createMenu:function(a){this.menu=a.append("div").attr("class").string("rg menu");a=this.menu.append("div").attr("class").string("options");a.append("div").attr("class").string("title").html().string(this.title);a.append("ul").selectAll("li").data(this.formats).enter().append("li").on("click.download",v(this,this.click)).html().stringf(function(a){return a})},build:function(a,b){this.createMenu(b);var c=this.menu.node();switch(a[1]){case 6:b.node().parentNode.insertBefore(c,b.node().nextSibling);break;case 5:b.node().parentNode.insertBefore(c,b.node());break;case 3:this.menu.classed().add("bottom").classed().add("left");break;case 4:this.menu.classed().add("bottom").classed().add("right");break;case 0:O.select(a[2]).node().appendChild(c);break;case 1:this.menu.classed().add("top").classed().add("left");break;case 2:this.menu.classed().add("top").classed().add("right")}},menu:null,backgroundColor:null,title:null,formats:null,handler:null,__class__:F.DownloaderMenu};F.DownloaderPosition={__ename__:["rg","html","widget","DownloaderPosition"],__constructs__:"ElementSelector,TopLeft,TopRight,BottomLeft,BottomRight,Before,After".split(",")};F.DownloaderPosition.ElementSelector=function(a){a=["ElementSelector",0,a];a.__enum__=F.DownloaderPosition;a.toString=q;return a};F.DownloaderPosition.TopLeft=["TopLeft",1];F.DownloaderPosition.TopLeft.toString=q;F.DownloaderPosition.TopLeft.__enum__=F.DownloaderPosition;F.DownloaderPosition.TopRight=["TopRight",2];F.DownloaderPosition.TopRight.toString=q;F.DownloaderPosition.TopRight.__enum__=F.DownloaderPosition;F.DownloaderPosition.BottomLeft=["BottomLeft",3];F.DownloaderPosition.BottomLeft.toString=q;F.DownloaderPosition.BottomLeft.__enum__=F.DownloaderPosition;F.DownloaderPosition.BottomRight=["BottomRight",4];F.DownloaderPosition.BottomRight.toString=q;F.DownloaderPosition.BottomRight.__enum__=F.DownloaderPosition;F.DownloaderPosition.Before=["Before",5];F.DownloaderPosition.Before.toString=q;F.DownloaderPosition.Before.__enum__=F.DownloaderPosition;F.DownloaderPosition.After=["After",6];F.DownloaderPosition.After.toString=q;F.DownloaderPosition.After.__enum__=F.DownloaderPosition;F.DownloaderPositions=function(){};i["rg.html.widget.DownloaderPositions"]=F.DownloaderPositions;F.DownloaderPositions.__name__=["rg","html","widget","DownloaderPositions"];F.DownloaderPositions.parse=function(a){switch(a.toLowerCase()){case"topleft":return F.DownloaderPosition.TopLeft;case"topright":case"auto":return F.DownloaderPosition.TopRight;case"bottomleft":return F.DownloaderPosition.BottomLeft;case"bottomright":return F.DownloaderPosition.BottomRight;
case"before":return F.DownloaderPosition.Before;case"after":return F.DownloaderPosition.After;default:return F.DownloaderPosition.ElementSelector(a)}};F.Logo=function(a,b){this.mapvalues=new L.StringMap;this.padRight=b;this.id=++F.Logo._id;this.container=a;this.create();new sb(5e3).run=v(this,this.live)};i["rg.html.widget.Logo"]=F.Logo;F.Logo.__name__=["rg","html","widget","Logo"];F.Logo.pageIsBranded=function(){for(var a=0,b=F.Logo.getLogos();a<b.length;){var c=b[a];++a;if(!O.select('img[src="'+c+'"]').empty())return!0}return!1};F.Logo.createLogo=function(a,b){var c=a.attr("id").get(),d=F.Logo.registry.get(c);null==d?F.Logo.registry.set(c,d=new F.Logo(a,b)):d.live();return d};F.Logo.getLogo=function(){return F.Logo.getLogos()[0]};F.Logo.getLogos=function(){return"http://api.reportgrid.com/css/images/reportgrid-clear.png,http://api.reportgrid.com/css/images/reportgrid-cleart.png,http://api.reportgrid.com/css/images/reportgrid-dark.png,http://api.reportgrid.com/css/images/reportgrid-darkt.png,https://api.reportgrid.com/css/images/reportgrid-clear.png,https://api.reportgrid.com/css/images/reportgrid-cleart.png,https://api.reportgrid.com/css/images/reportgrid-dark.png,https://api.reportgrid.com/css/images/reportgrid-darkt.png".split(",")};F.Logo.position=function(a){for(var b={x:a.offsetLeft||0,y:a.offsetTop||0};null!=(a=a.offsetParent);)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b};F.Logo.prototype={updateImage:function(){this.setAttr(this.image,"src",F.Logo.getLogo());this.setAttr(this.image,"title","Powered by ReportGrid");this.setAttr(this.image,"height","29");this.setAttr(this.image,"width","194");this.setStyle(this.image,"opacity","1");this.setStyle(this.image,"border","none");this.setStyle(this.image,"height","29px");this.setStyle(this.image,"width","194px")},updateAnchor:function(){var a=ea.document.body;O.select("body :last-child").node()!=this.anchor.node()&&a.appendChild(this.anchor.node());var a=F.Logo.position(this.frame.node()),b=this.frame.style("width").getFloat();this.setAttr(this.anchor,"title","Powered by ReportGrid");this.setAttr(this.anchor,"href","http://www.reportgrid.com/charts/");this.setStyle(this.anchor,"z-index","2147483647");this.setStyle(this.anchor,"display","block");this.setStyle(this.anchor,"opacity","1");this.setStyle(this.anchor,"position","absolute");this.setStyle(this.anchor,"height","29px");this.setStyle(this.anchor,"width","194px");this.setStyle(this.anchor,"top",a.y+"px");this.setStyle(this.anchor,"left",a.x-194+b-this.padRight+"px")},setAttr:function(a,b,c){var d="attr:"+b+":"+c,e;null!=(e=this.mapvalues.get(d))&&e!=a.attr(b).get()?a.attr(b).string(e):null==e&&(a.attr(b).string(c),this.mapvalues.set(d,a.attr(b).get()))},setStyle:function(a,b,c){var d="style:"+b+":"+c,e;null!=(e=this.mapvalues.get(d))&&e!=a.style(b).get()?a.style(b).string(e,"important"):null==e&&(a.style(b).string(c,"important"),this.mapvalues.set(d,a.style(b).get()))},updateFrame:function(){this.setStyle(this.frame,"display","block");this.setStyle(this.frame,"opacity","1");this.setStyle(this.frame,"width","100%");this.setStyle(this.frame,"height","29px");this.setStyle(this.frame,"position","relative")},createImage:function(){this.image=this.anchor.append("img");this.updateImage()},createAnchor:function(){this.anchor=O.select("body").append("a").attr("class").string("reportgridbrandanchor"+this.id).attr("target").string("_blank");this.updateAnchor()},createFrame:function(){this.chartContainer=this.container.select("*");this.frame=this.container.insert("div",this.chartContainer.node()).attr("class").string("reportgridbrandcontainer");this.updateFrame()},create:function(){this.createFrame();this.createAnchor();this.createImage()},live:function(){this.container.select("div.reportgridbrandcontainer").empty()?this.createFrame():this.updateFrame();O.select("body").select("a.reportgridbrandanchor"+this.id).empty()?this.createAnchor():this.updateAnchor();this.anchor.select("img").empty()?this.createImage():this.updateImage()},padRight:null,mapvalues:null,id:null,image:null,anchor:null,frame:null,container:null,chartContainer:null,__class__:F.Logo};F.Tooltip=function(a){this.visible=!1;a=null==a?ea.document.body:a;this.tooltip=O.selectNode(a).append("div").style("display").string("none").style("position").string("absolute").style("opacity")["float"](0).style("left").string("0px").style("top").string("0px").attr("class").string("rg tooltip").style("z-index").string("1000000");this._anchor=this.tooltip.append("div").style("display").string("block").style("position").string("absolute");this.setAnchorClass("");this.container=this.tooltip.append("div").style("position").string("relative").attr("class").string("rg_container");this.background=this.container.append("div").style("display").string("block").style("position").string("static").append("div").style("z-index").string("-1").attr("class").string("rg_background").style("position").string("absolute").style("left").string("0").style("right").string("0").style("top").string("0").style("bottom").string("0");this.content=this.container.append("div").attr("class").string("rg_content");this.content.onNode("DOMSubtreeModified",v(this,this.resize));this.anchortype="bottomright";this.anchordistance=0};i["rg.html.widget.Tooltip"]=F.Tooltip;F.Tooltip.__name__=["rg","html","widget","Tooltip"];F.Tooltip.__properties__={get_instance:"get_instance"};F.Tooltip.get_instance=function(){if(null==F.Tooltip.instance)F.Tooltip.instance=new F.Tooltip,ReportGrid.tooltip=F.Tooltip.instance;return F.Tooltip.instance};F.Tooltip.prototype={reanchor:function(){if(this.visible){var a=this.container.style("width").getFloat(),b=this.container.style("height").getFloat(),c=this.anchortype;switch(c){case"top":case"bottom":case"center":this.container.style("left").string(-a/2+"px");break;case"left":case"topleft":case"bottomleft":this.container.style("left").string(this.anchordistance+"px");break;case"right":case"topright":case"bottomright":this.container.style("left").string(-this.anchordistance-a+"px");break;default:throw new H.Error("invalid anchor point: "+this.anchortype,null,null,{fileName:"Tooltip.hx",lineNumber:157,className:"rg.html.widget.Tooltip",methodName:"reanchor"})}switch(c){case"top":case"topleft":case"topright":this.container.style("top").string(this.anchordistance+"px");break;case"left":case"center":case"right":this.container.style("top").string(-b/2+"px");break;case"bottom":case"bottomleft":case"bottomright":this.container.style("top").string(-this.anchordistance-b+"px")}}},resize:function(){this.reanchor()},setAnchorColor:function(a){this._anchor.style("background-color").string(a)},setAnchorClass:function(a){this._anchor.attr("class").string("rg_anchor "+a)},anchor:function(a,b){null==b&&(b=0);if(!(this.anchortype==a&&this.anchordistance==b))this.anchortype=a,this.anchordistance=b,this.reanchor()},moveAt:function(a,b){this.tooltip.style("left").string(a+"px").style("top").string(b+"px")},showAt:function(a,b){this.moveAt(a,b);this.show()},hide:function(){if(this.visible)this.visible=!1,this.tooltip.style("opacity")["float"](0).style("display").string("none")},show:function(){if(!this.visible)this.tooltip.style("display").string("block"),this.visible=!0,this.reanchor(),this.tooltip.style("opacity")["float"](1)},html:function(a){this.content.node().innerHTML=a;this.reanchor()},visible:null,anchordistance:null,anchortype:null,content:null,background:null,container:null,_anchor:null,tooltip:null,__class__:F.Tooltip};ga=function(){};Wc=void 0;Xc=void 0;Yc=void 0;Zc=void 0;$c=void 0;ad=void 0;bd=void 0;qb=void 0;cd=void 0;tc=void 0;dd=void 0;ed=void 0;uc=void 0;vc=void 0;fd=void 0;gd=void 0;wc=void 0;xc=void 0;bb=void 0;g=void 0;ua=void 0;rb=void 0;Ma=void 0;Ub=void 0;ec=void 0;va=void 0;yc=void 0;fc=void 0;gc=void 0;hc=void 0;zc=void 0;hd=void 0;id=void 0;Jb=void 0;cb=void 0;i["rg.info.Info"]=ga;ga.__name__=["rg","info","Info"];ga.feed=function(a,b){if(null==b)return a;var c=z.getClass(a),d=j.field(c,"filters");if(null==d)return a;for(var c=d.apply(c,[]),e,d=0;d<c.length;){var h=c[d];++d;if(j.hasField(b,h.name))switch(e=j.field(b,h.name),e=h.transformer.transform(e),e[1]){case 0:for(h=e[2].iterator();h.hasNext();)e=h.next(),a[e.name]=e.value;break;case 1:ga.warn(h.name,e[2])}}return a};ga.warn=function(a,b){ga.warner("the parameter "+a+" has not been applied because: "+t.string(b))};bb=function(){this.animated=!1;this.duration=1500;this.delay=150;this.ease=V.Equations.elasticf()};i["rg.info.InfoAnimation"]=bb;bb.__name__=["rg","info","InfoAnimation"];bb.filters=function(){return[g.FilterDescription.toBool("animated"),g.FilterDescription.toInt("duration"),g.FilterDescription.toInt("delay"),g.FilterDescription.toExpressionFunction("ease",["value"])]};bb.prototype={delay:null,ease:null,duration:null,animated:null,__class__:bb};ua=function(){this.animation=new bb;this.label=new rb;this.displayMinorTick=function(){return!0};this.displayMajorTick=function(){return!0};this.displayLabelTick=function(){return!0};this.displayAnchorLineTick=function(){return!1};this.displayMinorRule=function(){return!1};this.displayMajorRule=function(){return!1};this.displayAnchorLineRule=function(){return!1};this.labelOrientation=function(){return null};this.labelAnchor=function(){return null};this.labelAngle=function(){return null};this.lengthTickMinor=2;this.lengthTickMajor=5;this.paddingTickMajor=this.paddingTickMinor=1;this.paddingLabel=10};i["rg.info.InfoCartesianChart"]=ua;ua.__name__=["rg","info","InfoCartesianChart"];ua.filters=function(){return[g.FilterDescription.toInfo("animation",null,bb),g.FilterDescription.toFunction("click"),g.FilterDescription.toInfo("label",null,rb),g.FilterDescription.toExpressionFunctionOrBool("displaytickmarks",["type"],["displayMinorTick","displayMajorTick","displayLabelTick"]),g.FilterDescription.toExpressionFunctionOrBool("displaytickminor",["type"],["displayMinorTick"]),g.FilterDescription.toExpressionFunctionOrBool("displaytickmajor",["type"],["displayMajorTick"]),g.FilterDescription.toExpressionFunctionOrBool("displayticklabel",["type"],["displayLabelTick"]),g.FilterDescription.toExpressionFunctionOrBool("displayanchorlinetick",["type"],["displayAnchorLineTick"]),g.FilterDescription.toExpressionFunctionOrBool("displayrules",["type"],["displayMinorRule","displayMajorRule"]),g.FilterDescription.toExpressionFunctionOrBool("displayruleminor",["type"],["displayMinorRule"]),g.FilterDescription.toExpressionFunctionOrBool("displayrulemajor",["type"],["displayMajorRule"]),g.FilterDescription.toExpressionFunctionOrBool("displayanchorlinerule",["type"],["displayAnchorLineRule"]),g.FilterDescription.toFloat("lengthtick",["lengthTickMajor","lengthTickMinor"]),g.FilterDescription.toFloat("lengthtickminor",["lengthTickMinor"]),g.FilterDescription.toFloat("lengthtickmajor",["lengthTickMajor"]),g.FilterDescription.toFloat("paddingtick",["paddingTickMajor","paddingTickMinor"]),g.FilterDescription.toFloat("paddingtickminor",["paddingTickMinor"]),g.FilterDescription.toFloat("paddingtickmajor",["paddingTickMajor"]),g.FilterDescription.toFloat("paddingticklabel",["paddingLabel"]),g.FilterDescription.toExpressionFunctionOrString("labelorientation",["type"],["labelOrientation"]),g.FilterDescription.toExpressionFunctionOrString("labelanchor",["type"],["labelAnchor"]),g.FilterDescription.toExpressionFunctionOrFloat("labelangle",["type"],["labelAngle"]),g.FilterDescription.simplified("labelhorizontal",["labelAnchor"],function(a){return!1==a?function(){return"right"}:function(){return null}},g.ReturnMessageIfNot.isBool),g.FilterDescription.simplified("labelhorizontal",["labelAngle"],function(a){return!1==a?function(){return 0}:function(){return null}},g.ReturnMessageIfNot.isBool)]};ua.prototype={paddingLabel:null,paddingTickMajor:null,paddingTickMinor:null,lengthTickMajor:null,lengthTickMinor:null,labelAngle:null,labelAnchor:null,labelOrientation:null,displayAnchorLineRule:null,displayMajorRule:null,displayMinorRule:null,displayAnchorLineTick:null,displayLabelTick:null,displayMajorTick:null,displayMinorTick:null,label:null,click:null,animation:null,__class__:ua};tc=function(){ua.call(this);this.segment=new Ma;this.stacked=!0;this.effect=n.GradientEffect.Gradient(1.25);this.barPadding=12;this.barPaddingAxis=4;this.barPaddingDataPoint=2;this.horizontal=!1;this.startat=null};i["rg.info.InfoBarChart"]=tc;tc.__name__=["rg","info","InfoBarChart"];tc.filters=function(){return[g.FilterDescription.toBool("stacked"),g.FilterDescription.toBool("horizontal"),g.FilterDescription.simplified("effect",null,n.GradientEffects.parse,g.ReturnMessageChainer.or(g.ReturnMessageIfNot.isString,g.ReturnMessageChainer.make(n.GradientEffects.canParse,"invalid gradient effect: {0}"))),g.FilterDescription.toFloat("barpadding",["barPadding"]),g.FilterDescription.toFloat("barpaddingaxis",["barPaddingAxis"]),g.FilterDescription.toFloat("barpaddingdatapoint",["barPaddingDataPoint"]),g.FilterDescription.simplified("segmenton",["segment"],function(a){return ga.feed(new Ma,{on:a})},g.ReturnMessageIfNot.isString),g.FilterDescription.toInfo("segment",null,Ma),g.FilterDescription.toStr("startat")].concat(ua.filters())};tc.__super__=ua;tc.prototype=A(ua.prototype,{startat:null,segment:null,horizontal:null,barPadding:null,barPaddingAxis:null,barPaddingDataPoint:null,effect:null,stacked:null,__class__:tc});Yc=function(){};i["rg.info.InfoDataSource"]=Yc;Yc.__name__=["rg","info","InfoDataSource"];Yc.filters=function(){return[g.FilterDescription.toDataFunctionFromArray("data",["loader"]),g.FilterDescription.toDataFunctionFromArray("datapoints",["loader"]),g.FilterDescription.toLoaderFunction("load",["loader"])]};Yc.prototype={loader:null,__class__:Yc};ad=function(){};i["rg.info.InfoDomType"]=ad;ad.__name__=["rg","info","InfoDomType"];ad.filters=function(){return[g.FilterDescription.custom("visualization",["kind"],function(a){var b=null==a?null:(""+t.string(a)).toLowerCase();return S.exists(ha.visualizations,b)?g.TransformResult.Success(S.exists(ha.html,b)?Ub.Html:Ub.Svg):g.TransformResult.Failure(new Z.Message("'{0}' value is not a vailid visualization kind",[a]))})]};ad.prototype={kind:null,__class__:ad};Ub={__ename__:["rg","info","DomKind"],__constructs__:["Html","Svg"],Html:["Html",0]};Ub.Html.toString=q;Ub.Html.__enum__=Ub;Ub.Svg=["Svg",1];Ub.Svg.toString=q;Ub.Svg.__enum__=Ub;bd=function(){this.service=Cb.SERVICE_RENDERING_STATIC;this.legacyservice=Cb.LEGACY_RENDERING_STATIC;this.formats=["pdf","png","jpg","svg"]};i["rg.info.InfoDownload"]=bd;bd.__name__=["rg","info","InfoDownload"];bd.filters=function(){return[g.FilterDescription.toFunction("handler"),g.FilterDescription.toStr("service"),g.FilterDescription.toStr("legacyservice"),g.FilterDescription.toArray("formats"),g.FilterDescription.custom("position",null,function(a){return B.__instanceof(a,String)||a.nodeName?g.TransformResult.Success(F.DownloaderPositions.parse(a)):g.TransformResult.Failure(new Z.Message("invalid downloader position: {0}",a))})]};bd.prototype={formats:null,position:null,legacyservice:null,service:null,handler:null,__class__:bd};dd=function(){this.animation=new bb;this.label=new ec;this.padding=2.5;this.flatness=1;this.effect=n.GradientEffect.Gradient(1.25);this.arrowSize=30};i["rg.info.InfoFunnelChart"]=dd;dd.__name__=["rg","info","InfoFunnelChart"];dd.filters=function(){return[g.FilterDescription.toInfo("animation",null,bb),g.FilterDescription.toInfo("label",null,ec),g.FilterDescription.toExpressionFunction("sort",["a","b"],["sortDataPoint"]),g.FilterDescription.toFunction("click"),g.FilterDescription.toFloat("segmentpadding",["padding"]),g.FilterDescription.toFloat("flatness"),g.FilterDescription.custom("effect",null,function(a){return n.GradientEffects.canParse(a)?g.TransformResult.Success(n.GradientEffects.parse(a)):g.TransformResult.Failure(new Z.Message("'{0}' is not a valid effect",a))}),g.FilterDescription.toFloat("arrowsize",["arrowSize"])]};dd.prototype={arrowSize:null,effect:null,flatness:null,padding:null,click:null,sortDataPoint:null,label:null,animation:null,__class__:dd};Zc=function(){this.forcelegacy=!1};i["rg.info.InfoGeneral"]=Zc;Zc.__name__=["rg","info","InfoGeneral"];Zc.filters=function(){return[g.FilterDescription.toFunction("ready"),g.FilterDescription.toBool("forcelegacy")]};Zc.prototype={forcelegacy:null,ready:null,__class__:Zc};ed=function(){this.labelOutline=this.labelShadow=!1;this.label=new va;this.map=[ga.feed(new yc,{template:"world"})]};i["rg.info.InfoGeo"]=ed;ed.__name__=["rg","info","InfoGeo"];ed.filters=function(){return[g.FilterDescription.toInfoArray("map",null,yc),g.FilterDescription.toBool("labeloutline",["labelOutline"]),g.FilterDescription.toBool("labelshadow",["labelShadow"])]};ed.prototype={labelShadow:null,labelOutline:null,label:null,map:null,__class__:ed};uc=function(){ua.call(this);this.colorScaleMode=n.ColorScaleMode.FromCssInterpolation()};i["rg.info.InfoHeatGrid"]=uc;uc.__name__=["rg","info","InfoHeatGrid"];uc.filters=function(){return[g.FilterDescription.toBool("contour"),g.FilterDescription.simplified("color",["colorScaleMode"],n.ColorScaleModes.createFromDynamic,function(a){return n.ColorScaleModes.canParse(a)?null:"value must be a a string or a function returning a string expressing a valid color scale mode"})].concat(ua.filters())};uc.__super__=ua;uc.prototype=A(ua.prototype,{colorScaleMode:null,contour:null,__class__:uc});va=function(){this.datapointverticaloffset=5;this.datapointshadow=this.datapointoutline=!1};i["rg.info.InfoLabel"]=va;va.__name__=["rg","info","InfoLabel"];va.filters=function(){return[g.FilterDescription.toTemplateFunctionOrString("title",["axes","values","types"]),g.FilterDescription.toTemplateFunction("datapoint",[null,"stats"]),g.FilterDescription.toTemplateFunction("datapointover",[null,"stats"]),g.FilterDescription.toFloat("datapointverticaloffset"),g.FilterDescription.toBool("datapointoutline"),g.FilterDescription.toBool("datapointshadow")]};va.prototype={datapointshadow:null,datapointoutline:null,datapointverticaloffset:null,datapointover:null,datapoint:null,title:null,__class__:va};rb=function(){va.call(this)};i["rg.info.InfoLabelAxis"]=rb;rb.__name__=["rg","info","InfoLabelAxis"];rb.filters=function(){return[g.FilterDescription.toTemplateFunction("axis",["type"]),g.FilterDescription.toTemplateFunction("tickmark",["value","type"])].concat(va.filters())};rb.__super__=va;rb.prototype=A(va.prototype,{tickmark:null,axis:null,__class__:rb});ec=function(){va.call(this)};i["rg.info.InfoLabelFunnel"]=ec;ec.__name__=["rg","info","InfoLabelFunnel"];ec.filters=function(){return[g.FilterDescription.toTemplateFunction("arrow",[null,"stats"])].concat(va.filters())};ec.__super__=va;ec.prototype=A(va.prototype,{arrow:null,__class__:ec});fc=function(){va.call(this)};i["rg.info.InfoLabelLeaderboard"]=fc;fc.__name__=["rg","info","InfoLabelLeaderboard"];fc.filters=function(){return[g.FilterDescription.toTemplateFunctionOrNull("rank",[null,"index","stats"]),g.FilterDescription.toTemplateFunctionOrNull("value",[null,"stats"])].concat(va.filters())};fc.__super__=va;fc.prototype=A(va.prototype,{value:null,rank:null,__class__:fc});gc=function(){rb.call(this)};i["rg.info.InfoLabelPivotTable"]=gc;gc.__name__=["rg","info","InfoLabelPivotTable"];gc.filters=function(){return[g.FilterDescription.toTemplateFunction("total",["value","stats"]),g.FilterDescription.toTemplateFunction("totalover",["value","stats"]),g.FilterDescription.toTemplateFunction("axisvalue",["value","axis"])].concat(rb.filters())};gc.__super__=rb;gc.prototype=A(rb.prototype,{axisvalue:null,totalover:null,total:null,__class__:gc});hc=function(){va.call(this)};i["rg.info.InfoLabelSankey"]=hc;hc.__name__=["rg","info","InfoLabelSankey"];hc.filters=function(){return[g.FilterDescription.toTemplateFunction("edge",[null,"stats"]),g.FilterDescription.toTemplateFunction("edgeover",[null,"stats"]),g.FilterDescription.toTemplateFunction("node",[null,"stats"])].concat(va.filters())};hc.__super__=va;hc.prototype=A(va.prototype,{node:null,edgeover:null,edge:null,__class__:hc});Wc=function(){this.main="main";this.titleOnTop=!0;this.scalePattern=Sa.ScalesAlternating;this.padding=new zc};i["rg.info.InfoLayout"]=Wc;Wc.__name__=["rg","info","InfoLayout"];Wc.filters=function(){return[g.FilterDescription.custom("layout",null,function(a){var b=null==a?null:(""+t.string(a)).toLowerCase();return S.exists(ha.layouts,b)?g.TransformResult.Success(b):g.TransformResult.Failure(new Z.Message("value '{0}' is not a valid visualization layout",[a]))}),g.FilterDescription.toFloat("width"),g.FilterDescription.toFloat("height"),g.FilterDescription.custom("visualization",["type"],function(a){var b=null==a?null:(""+t.string(a)).toLowerCase();return S.exists(ha.svg,b)?g.TransformResult.Success(b):g.TransformResult.Failure(new Z.Message("value '{0}' is not a valid visualization type",[a]))}),g.FilterDescription.toStr("main"),g.FilterDescription.toBool("titleontop",["titleOnTop"]),g.FilterDescription.custom("yscaleposition",["scalePattern"],function(a){return!B.__instanceof(a,String)?g.TransformResult.Failure(new Z.Message("value '{0}' must be a string",[a])):g.TransformResult.Success(function(){var b;switch(a){case"alt":case"alternate":case"alternating":b=Sa.ScalesAlternating;break;case"right":b=Sa.ScalesAfter;break;default:b=Sa.ScalesBefore}return b}(this))}),g.FilterDescription.toInfo("padding",null,zc)]};Wc.prototype={padding:null,scalePattern:null,titleOnTop:null,main:null,type:null,height:null,width:null,layout:null,__class__:Wc};cd=function(){this.animation=new bb;this.label=new fc;this.usemax=!1;this.displaybar=!0;this.colorscale=!1};i["rg.info.InfoLeaderboard"]=cd;cd.__name__=["rg","info","InfoLeaderboard"];cd.filters=function(){return[g.FilterDescription.toInfo("animation",null,bb,function(a){a.ease=V.Equations.linear}),g.FilterDescription.toInfo("label",null,fc),g.FilterDescription.toFunction("click"),g.FilterDescription.toExpressionFunction("sort",["a","b"],["sortDataPoint"]),g.FilterDescription.toBool("displaybar"),g.FilterDescription.toBool("usemax"),g.FilterDescription.toBool("colorscale")]};cd.prototype={colorscale:null,displaybar:null,usemax:null,sortDataPoint:null,click:null,label:null,animation:null,__class__:cd};vc=function(){ua.call(this);this.segment=new Ma;this.effect=n.LineEffect.Gradient(-1.2,2);this.interpolation=p.LineInterpolator.Linear;this.displayarea=!1;this.sensibleradius=100};i["rg.info.InfoLineChart"]=vc;vc.__name__=["rg","info","InfoLineChart"];vc.filters=function(){return[g.FilterDescription.toExpressionFunctionOrString("symbol",[null,"stats"]),g.FilterDescription.toExpressionFunctionOrString("symbolstyle",[null,"stats"],["symbolStyle"]),g.FilterDescription.simplified("segmenton",["segment"],function(a){return ga.feed(new Ma,{on:a})},g.ReturnMessageIfNot.isString),g.FilterDescription.toInfo("segment",null,Ma),g.FilterDescription.toStr("y0property"),g.FilterDescription.toBool("displayarea"),g.FilterDescription.toInt("sensibleradius"),g.FilterDescription.toTry("effect",null,n.LineEffects.parse,"invalid effect string value '{0}'"),g.FilterDescription.toTry("interpolation",null,function(a){return p.LineInterpolators.parse(a)},"invalid line interpolation string value '{0}'")].concat(ua.filters())};vc.__super__=ua;vc.prototype=A(ua.prototype,{sensibleradius:null,segment:null,y0property:null,displayarea:null,symbolStyle:null,symbol:null,interpolation:null,effect:null,__class__:vc});yc=function(){this.property="location";this.type="geojson";this.colorScaleMode=n.ColorScaleMode.FromCssInterpolation();this.usejsonp=!0;this.radius=function(){return 10}};i["rg.info.InfoMap"]=yc;yc.__name__=["rg","info","InfoMap"];yc.filters=function(){return[new g.FilterDescription("template",new hd),g.FilterDescription.toStr("url"),g.FilterDescription.toStr("type"),g.FilterDescription.toFloat("scale"),g.FilterDescription.toStr("projection"),g.FilterDescription.toStr("classname"),g.FilterDescription.toArray("translate"),g.FilterDescription.toArray("origin"),g.FilterDescription.toArray("parallels"),g.FilterDescription.toTry("mode",null,function(a){return z.createEnum(W.ProjectionMode,J.ucfirst(a.toLowerCase()),[])},"value is not a valid projection mode '{0}'"),g.FilterDescription.toStrOrNull("property"),g.FilterDescription.toBool("usejsonp"),g.FilterDescription.toInfo("label",null,va),g.FilterDescription.toFunction("click"),g.FilterDescription.simplified("color",["colorScaleMode"],n.ColorScaleModes.createFromDynamic,g.ReturnMessageChainer.make(function(a){return B.__instanceof(a,String)||j.isFunction(a)},"invalid color mode value '{0}'")),g.FilterDescription.toExpressionFunctionOrFloat("radius",[null,"stats"]),new g.FilterDescription("mapping",new id)]};yc.prototype={mappingurl:null,mapping:null,usejsonp:null,colorScaleMode:null,radius:null,click:null,label:null,property:null,mode:null,parallels:null,origin:null,translate:null,classname:null,projection:null,scale:null,type:null,url:null,__class__:yc};g={ITransformer:function(){}};i["rg.info.filter.ITransformer"]=g.ITransformer;g.ITransformer.__name__=["rg","info","filter","ITransformer"];g.ITransformer.prototype={transform:null,__class__:g.ITransformer};id=function(){};i["rg.info.MapTransformer"]=id;id.__name__=["rg","info","MapTransformer"];id.__interfaces__=[g.ITransformer];id.prototype={transform:function(a){return B.__instanceof(a,String)?g.TransformResult.Success(new g.Pairs(["mappingurl"],[a])):j.isObject(a)&&null==z.getClass(a)?g.TransformResult.Success(new g.Pairs(["mapping"],[a])):g.TransformResult.Failure(new Z.Message("value should be url string or an object",[a]))},__class__:id};hd=function(){};i["rg.info.TemplateTransformer"]=hd;hd.__name__=["rg","info","TemplateTransformer"];hd.__interfaces__=[g.ITransformer];hd.prototype={transform:function(a){a=null==a?"":""+t.string(a);switch(a.toLowerCase()){case"world":case"world-countries":a=g.TransformResult.Success(new g.Pairs(["projection","url"],["mercator",Cb.BASE_URL_GEOJSON+"world-countries.json.js"]));break;case"usa-states":a=g.TransformResult.Success(new g.Pairs(["projection","url"],["albersusa",Cb.BASE_URL_GEOJSON+"usa-states.json.js"]));break;case"usa-state-centroids":a=g.TransformResult.Success(new g.Pairs(["projection","url"],["albersusa",Cb.BASE_URL_GEOJSON+"usa-state-centroids.json.js"]));break;case"usa-counties":a=g.TransformResult.Success(new g.Pairs(["projection","url"],["albersusa",Cb.BASE_URL_GEOJSON+"usa-counties.json.js"]));break;default:a=g.TransformResult.Failure(new Z.Message("{0} is not a valid map template",[a]))}return a},__class__:hd};zc=function(){};i["rg.info.InfoPadding"]=zc;zc.__name__=["rg","info","InfoPadding"];zc.filters=function(){return[g.FilterDescription.toInt("top"),g.FilterDescription.toInt("bottom"),g.FilterDescription.toInt("left"),g.FilterDescription.toInt("right")]};zc.prototype={right:null,left:null,bottom:null,top:null,__class__:zc};fd=function(){this.innerradius=0;this.labelradius=.45;this.labelorientation=l.LabelOrientation.Aligned;this.outerradius=.9;this.overradius=.95;this.tooltipradius=.5;this.animation=new bb;this.label=new va;this.effect=n.GradientEffect.Gradient(1.2);this.dontfliplabel=!0};i["rg.info.InfoPieChart"]=fd;fd.__name__=["rg","info","InfoPieChart"];fd.filters=function(){return[g.FilterDescription.toFloat("labelradius"),g.FilterDescription.toBool("dontfliplabel"),g.FilterDescription.toTry("labelorientation",null,l.LabelOrientations.parse,"invalid orientation value '{0}'"),g.FilterDescription.toFloat("innerradius"),g.FilterDescription.toFloat("outerradius"),g.FilterDescription.toFloat("overradius"),g.FilterDescription.toFloat("tooltipradius"),g.FilterDescription.toInfo("animation",null,bb),g.FilterDescription.toInfo("label",null,va),g.FilterDescription.toExpressionFunction("sort",["a","b"],["sortDataPoint"]),g.FilterDescription.toFunction("click"),g.FilterDescription.simplified("effect",null,n.GradientEffects.parse,g.ReturnMessageChainer.or(g.ReturnMessageIfNot.isString,g.ReturnMessageChainer.make(n.GradientEffects.canParse,"invalid gradient effect: {0}")))]};fd.prototype={click:null,dontfliplabel:null,sortDataPoint:null,effect:null,label:null,animation:null,tooltipradius:null,overradius:null,outerradius:null,innerradius:null,labelorientation:null,labelradius:null,__class__:fd};qb=function(){this.label=new gc;this.heatmapColorStart=qb.defaultStartColor;this.heatmapColorEnd=qb.defaultEndColor;this.displayRowTotal=this.displayColumnTotal=this.displayHeatmap=!0;this.columnAxes=1};i["rg.info.InfoPivotTable"]=qb;qb.__name__=["rg","info","InfoPivotTable"];qb.filters=function(){return[g.FilterDescription.toInt("columnaxes",["columnAxes"]),g.FilterDescription.toBool("displayheatmap",["displayHeatmap"]),g.FilterDescription.toBool("displaycolumntotal",["displayColumnTotal"]),g.FilterDescription.toBool("displayrowtotal",["displayRowTotal"]),g.FilterDescription.toTry("startcolor",["heatmapColorStart"],function(a){return f.Hsl.toHsl(T.parse(a,qb.defaultStartColor.hex("#")))},"value is not a parsable color '{0}'"),g.FilterDescription.toTry("endcolor",["heatmapColorEnd"],function(a){return f.Hsl.toHsl(T.parse(a,qb.defaultEndColor.hex("#")))},"value is not a parsable color '{0}'"),g.FilterDescription.toInfo("label",null,gc),g.FilterDescription.toFunction("click"),g.FilterDescription.toExpressionFunction("cellclass",[null,"stats"]),g.FilterDescription.toExpressionFunction("valueclass",["value","header"]),g.FilterDescription.toExpressionFunction("headerclass",["header"]),g.FilterDescription.toExpressionFunction("totalclass",["value","values"])]};qb.prototype={totalclass:null,headerclass:null,valueclass:null,cellclass:null,click:null,columnAxes:null,displayRowTotal:null,displayColumnTotal:null,displayHeatmap:null,heatmapColorEnd:null,heatmapColorStart:null,label:null,__class__:qb};gd=function(){this.label=new hc;this.stackbackedges=!0;this.thinbackedges=!1};i["rg.info.InfoSankey"]=gd;gd.__name__=["rg","info","InfoSankey"];gd.filters=function(){return[g.FilterDescription.toInfo("label",null,hc),g.FilterDescription.toFloat("layerwidth",["layerWidth"]),g.FilterDescription.toFloat("chunkwidth",["chunkWidth"]),g.FilterDescription.toFloat("nodespacing",["nodeSpacing"]),g.FilterDescription.toFloat("dummyspacing",["dummySpacing"]),g.FilterDescription.toFloat("extrawidth",["extraWidth"]),g.FilterDescription.toFloat("backedgespacing",["backEdgeSpacing"]),g.FilterDescription.toFloat("extraheight",["extraHeight"]),g.FilterDescription.toFloat("extraradius",["extraRadius"]),g.FilterDescription.toFloat("imagewidth",["imageWidth"]),g.FilterDescription.toFloat("imageheight",["imageHeight"]),g.FilterDescription.toFloat("imagespacing",["imageSpacing"]),g.FilterDescription.toFloat("labelnodespacing",["labelNodeSpacing"]),g.FilterDescription.toExpressionFunction("imagepath",[null],["imagePath"]),g.FilterDescription.toFunction("click",["click"]),g.FilterDescription.toFunction("clickedge",["clickEdge"]),g.FilterDescription.toObject("layoutmap"),g.FilterDescription.toStr("layoutmethod"),g.FilterDescription.toExpressionFunctionOrString("nodeclass",[null,"stats"]),g.FilterDescription.toExpressionFunctionOrString("edgeclass",[null,"stats"]),g.FilterDescription.toExpressionFunctionOrBool("displayentry",[null,"stats"]),g.FilterDescription.toExpressionFunctionOrBool("displayexit",[null,"stats"]),g.FilterDescription.toBool("stackbackedges"),g.FilterDescription.toBool("thinbackedges")]};gd.prototype={thinbackedges:null,stackbackedges:null,displayexit:null,displayentry:null,edgeclass:null,nodeclass:null,layoutmethod:null,clickEdge:null,click:null,layoutmap:null,imagePath:null,labelNodeSpacing:null,chunkWidth:null,imageSpacing:null,imageHeight:null,imageWidth:null,extraRadius:null,extraHeight:null,backEdgeSpacing:null,extraWidth:null,dummySpacing:null,nodeSpacing:null,layerWidth:null,label:null,__class__:gd};wc=function(){ua.call(this);this.segment=new Ma;this.symbol=function(){return K.SymbolCache.cache.get("circle",16)}};i["rg.info.InfoScatterGraph"]=wc;wc.__name__=["rg","info","InfoScatterGraph"];wc.filters=function(){return[g.FilterDescription.toExpressionFunctionOrString("symbol",[null,"stats"]),g.FilterDescription.toTemplateFunction("symbolstyle",[null,"stats"],["symbolStyle"]),g.FilterDescription.simplified("segmenton",["segment"],function(a){return ga.feed(new Ma,{on:a})
},g.ReturnMessageIfNot.isString),g.FilterDescription.toInfo("segment",null,Ma)].concat(ua.filters())};wc.__super__=ua;wc.prototype=A(ua.prototype,{segment:null,symbolStyle:null,symbol:null,__class__:wc});Ma=function(){this.values=[]};i["rg.info.InfoSegment"]=Ma;Ma.__name__=["rg","info","InfoSegment"];Ma.filters=function(){return[g.FilterDescription.toStr("on"),g.FilterDescription.toFunction("transform"),g.FilterDescription.toFunction("scale"),g.FilterDescription.toArray("values")]};Ma.prototype={values:null,scale:null,transform:null,on:null,__class__:Ma};xc=function(){ua.call(this);this.segment=new Ma;this.interpolation=p.LineInterpolator.Cardinal();this.effect=n.StreamEffect.GradientVertical(1.25)};i["rg.info.InfoStreamGraph"]=xc;xc.__name__=["rg","info","InfoStreamGraph"];xc.filters=function(){return[g.FilterDescription.toTry("interpolation",null,function(a){return p.LineInterpolators.parse(a)},"value is expected to be a valid interpolation string, it is '{0}'"),g.FilterDescription.toTry("effect",null,function(a){return n.StreamEffects.parse(a)},"value is expected to be a valid effect string, it is '{0}'"),g.FilterDescription.simplified("segmenton",["segment"],function(a){return ga.feed(new Ma,{on:a})},g.ReturnMessageIfNot.isString),g.FilterDescription.toInfo("segment",null,Ma)].concat(ua.filters())};xc.__super__=ua;xc.prototype=A(ua.prototype,{segment:null,effect:null,interpolation:null,__class__:xc});Jb=function(){this.variableType=cb.Unknown};i["rg.info.InfoVariable"]=Jb;Jb.__name__=["rg","info","InfoVariable"];Jb.filters=function(){return[g.FilterDescription.toStr("type"),g.FilterDescription.custom("view",["min"],function(a){return!B.__instanceof(a,Array)||!Jb.testViewValue(a[0])?g.TransformResult.Failure(new Z.Message("value is expected to be an array of two items but is '{0}'",[a])):g.TransformResult.Success(a[0])}),g.FilterDescription.custom("view",["max"],function(a){return!B.__instanceof(a,Array)||!Jb.testViewValue(a[1])?g.TransformResult.Failure(new Z.Message("value is expected to be an array of two items but is '{0}'",[a])):g.TransformResult.Success(a[1])}),g.FilterDescription.toArray("values"),g.FilterDescription.custom("values",["min"],function(a){return B.__instanceof(a,Array)?g.TransformResult.Success(a[0]):g.TransformResult.Failure(new Z.Message("values is expected to be an array"))}),g.FilterDescription.custom("values",["max"],function(a){return B.__instanceof(a,Array)?(a=B.__cast(a,Array),g.TransformResult.Success(a[a.length-1])):g.TransformResult.Failure(new Z.Message("values is expected to be an array"))}),g.FilterDescription.custom("groupby",["groupBy"],function(a){return!B.__instanceof(a,String)||!X.isValidGroupBy(a)?g.TransformResult.Failure(new Z.Message("value is expected to be a valid string periodicity but is '{0}'",[a])):g.TransformResult.Success(a)}),g.FilterDescription.custom("variable",["variableType"],function(a){var b=null==a?null:(""+t.string(a)).toLowerCase();return S.exists(["independent","dependent"],b)?g.TransformResult.Success(z.createEnum(cb,J.ucfirst(b.toLowerCase()),[])):g.TransformResult.Failure(new Z.Message("value is expected to be an 'independent' or 'dependent' but is '{0}'",[a]))}),g.FilterDescription.toTry("scalemode",["scaleDistribution"],function(a){return z.createEnum(Ga,"Scale"+J.ucfirst((""+t.string(a)).toLowerCase()),[])},"value is expected to be a valid scale distribution value but is '{0}'")]};Jb.testViewValue=function(a){return null==a||hb.isPrimitive(a)||B.__instanceof(a,Date)||j.isFunction(a)};Jb.__super__=ga;Jb.prototype=A(ga.prototype,{scaleDistribution:null,variableType:null,groupBy:null,values:null,max:null,min:null,type:null,__class__:Jb});cb={__ename__:["rg","info","VariableType"],__constructs__:["Unknown","Independent","Dependent"],Unknown:["Unknown",0]};cb.Unknown.toString=q;cb.Unknown.__enum__=cb;cb.Independent=["Independent",1];cb.Independent.toString=q;cb.Independent.__enum__=cb;cb.Dependent=["Dependent",2];cb.Dependent.toString=q;cb.Dependent.__enum__=cb;Xc=function(){};i["rg.info.InfoVisualizationOption"]=Xc;Xc.__name__=["rg","info","InfoVisualizationOption"];Xc.filters=function(){return[g.FilterDescription.toInfoArray("axes",["variables"],Jb),g.FilterDescription.toObject("options")]};Xc.prototype={options:null,variables:null,__class__:Xc};$c=function(){this.replace=!0};i["rg.info.InfoVisualizationType"]=$c;$c.__name__=["rg","info","InfoVisualizationType"];$c.filters=function(){return[g.FilterDescription.custom("visualization",["type"],function(a){var b=null==a?null:(""+t.string(a)).toLowerCase();return S.exists(ha.visualizations,b)?g.TransformResult.Success(b):g.TransformResult.Failure(new Z.Message("invalid visualization type '{0}'",a))}),g.FilterDescription.toBool("replace")]};$c.prototype={type:null,replace:null,__class__:$c};g.EmptyTransformer=function(a){this.mapto=a};i["rg.info.filter.EmptyTransformer"]=g.EmptyTransformer;g.EmptyTransformer.__name__=["rg","info","filter","EmptyTransformer"];g.EmptyTransformer.__interfaces__=[g.ITransformer];g.EmptyTransformer.prototype={transform:function(a){return g.TransformResult.Success(new g.Pairs([this.mapto],[a]))},mapto:null,__class__:g.EmptyTransformer};g.FilterDescription=function(a,b){this.name=a;this.transformer=null==b?new g.EmptyTransformer(a):b};i["rg.info.filter.FilterDescription"]=g.FilterDescription;g.FilterDescription.__name__=["rg","info","filter","FilterDescription"];g.FilterDescription.toBool=function(a,b){return g.FilterDescription.pair(a,b,g.TransformerBool.instance)};g.FilterDescription.toInt=function(a,b){return g.FilterDescription.pair(a,b,g.TransformerInt.instance)};g.FilterDescription.toFloat=function(a,b){return g.FilterDescription.pair(a,b,g.TransformerFloat.instance)};g.FilterDescription.toStr=function(a,b){return g.FilterDescription.pair(a,b,g.TransformerString.instance)};g.FilterDescription.toStrOrNull=function(a,b){return g.FilterDescription.custom(a,b,function(a){return null==a?g.TransformResult.Success(null):g.TransformerString.instance.transform(a)})};g.FilterDescription.toArray=function(a,b){return g.FilterDescription.custom(a,b,function(a){return B.__instanceof(a,Array)?g.TransformResult.Success(a):g.TransformResult.Failure(new Z.Message("expected array but was '{0}'",a))})};g.FilterDescription.toObject=function(a,b){return g.FilterDescription.pair(a,b,g.TransformerObject.instance)};g.FilterDescription.toFunction=function(a,b){return g.FilterDescription.pair(a,b,g.TransformerFunction.instance)};g.FilterDescription.toTemplateFunction=function(a,b,c){return g.FilterDescription.pair(a,c,new g.TransformerTemplateToFunction(b))};g.FilterDescription.toExpressionFunction=function(a,b,c){return g.FilterDescription.pair(a,c,new g.TransformerExpressionToFunction(b))};g.FilterDescription.toInfo=function(a,b,c,d){return g.FilterDescription.simplified(a,b,function(a){var b=z.createInstance(c,[]);null!=d&&d(b);return ga.feed(b,a)},g.ReturnMessageIfNot.isObject)};g.FilterDescription.toInfoArray=function(a,b,c){return g.FilterDescription.custom(a,b,function(a){if(!B.__instanceof(a,Array))if(j.isObject(a)&&null==z.getClass(a))a=[a];else return g.TransformResult.Failure(new Z.Message("value must be either an array of objects or an object but is {0}",[a]));return g.TransformResult.Success(I.map(u.iter(a),function(a){var b=z.createInstance(c,[]);return ga.feed(b,a)}))})};g.FilterDescription.toTry=function(a,b,c,d){return g.FilterDescription.custom(a,b,function(a){try{return g.TransformResult.Success(c(a))}catch(b){return g.TransformResult.Failure(new Z.Message(d,[a]))}})};g.FilterDescription.toDataFunctionFromArray=function(a,b){return g.FilterDescription.custom(a,b,g.TransformerChainer.onResult((Q=g.TransformerArray.instance,v(Q,Q.transform)),function(a){return g.TransformResult.Success(function(b){return b(a)})},function(){return g.TransformResult.Failure(new Z.Message("parameter must be an array of values"))}))};g.FilterDescription.toLoaderFunction=function(a,b){return g.FilterDescription.custom(a,b,g.TransformerChainer.onResult((Q=g.TransformerFunction.instance,v(Q,Q.transform)),function(a){return g.TransformResult.Success(a)},function(a){var b=j.field(a,"execute");return null!=b&&j.isFunction(b)?g.TransformResult.Success(function(e){b.apply(a,[e])}):g.TransformResult.Failure(new Z.Message("parameter must be an array of values"))}))};g.FilterDescription.toExpressionFunctionOrBool=function(a,b,c){return g.FilterDescription.custom(a,c,g.TransformerChainer.onResult((Q=new g.TransformerExpressionToFunction(b),v(Q,Q.transform)),function(a){return g.TransformResult.Success(a)},function(a){return g.TransformerChainer.onResult((Q=g.TransformerBool.instance,v(Q,Q.transform)),function(a){return g.TransformResult.Success(function(){return a})},function(){return g.TransformResult.Failure(new Z.Message("parameter should be a boolean value or a function returning a boolean value"))})(a)}))};g.FilterDescription.toExpressionFunctionOrFloat=function(a,b,c){return g.FilterDescription.custom(a,c,g.TransformerChainer.onResult((Q=new g.TransformerExpressionToFunction(b),v(Q,Q.transform)),function(a){return g.TransformResult.Success(a)},function(a){return g.TransformerChainer.onResult((Q=g.TransformerFloat.instance,v(Q,Q.transform)),function(a){return g.TransformResult.Success(function(){return a})},function(){return g.TransformResult.Failure(new Z.Message("parameter should be a float value or a function returning a float value"))})(a)}))};g.FilterDescription.toTemplateFunctionOrNull=function(a,b,c){return g.FilterDescription.custom(a,c,g.TransformerChainer.onResult((Q=new g.TransformerTemplateToFunction(b),v(Q,Q.transform)),function(a){return g.TransformResult.Success(a)},function(a){return null==a?g.TransformResult.Success(null):g.TransformResult.Failure(new Z.Message("parameter should be a function or null"))}))};g.FilterDescription.toExpressionFunctionOrString=function(a,b,c){return g.FilterDescription.custom(a,c,g.TransformerChainer.onResult((Q=new g.TransformerExpressionToFunction(b),v(Q,Q.transform)),function(a){return g.TransformResult.Success(a)},function(a){return g.TransformerChainer.onResult((Q=g.TransformerString.instance,v(Q,Q.transform)),function(a){return g.TransformResult.Success(function(){return a})},function(){return g.TransformResult.Failure(new Z.Message("parameter should be a string value or a function returning a string value"))})(a)}))};g.FilterDescription.toTemplateFunctionOrString=function(a,b,c){return g.FilterDescription.custom(a,c,g.TransformerChainer.onResult((Q=new g.TransformerTemplateToFunction(b),v(Q,Q.transform)),function(a){return g.TransformResult.Success(a)},function(a){return g.TransformerChainer.onResult((Q=g.TransformerString.instance,v(Q,Q.transform)),function(a){return g.TransformResult.Success(function(){return a})},function(){return g.TransformResult.Failure(new Z.Message("parameter should be a string value or a function returning a string value"))})(a)}))};g.FilterDescription.custom=function(a,b,c){return g.FilterDescription.pair(a,b,new g.CustomTransformer(c))};g.FilterDescription.simplified=function(a,b,c,d){return g.FilterDescription.pair(a,b,g.CustomTransformer.simplified(c,d))};g.FilterDescription.pair=function(a,b,c){null==b&&(b=[a]);return new g.FilterDescription(a,new g.PairTransformer(b,c))};g.FilterDescription.prototype={transformer:null,name:null,__class__:g.FilterDescription};g.CustomTransformer=function(a){this.transformer=a};i["rg.info.filter.CustomTransformer"]=g.CustomTransformer;g.CustomTransformer.__name__=["rg","info","filter","CustomTransformer"];g.CustomTransformer.__interfaces__=[g.ITransformer];g.CustomTransformer.simplified=function(a,b){return new g.CustomTransformer(function(c){var d=b(c);return null==d?g.TransformResult.Success(a(c)):g.TransformResult.Failure(new Z.Message(d,[c]))})};g.CustomTransformer.prototype={transform:function(a){return this.transformer(a)},transformer:null,__class__:g.CustomTransformer};g.TransformerChainer=function(){};i["rg.info.filter.TransformerChainer"]=g.TransformerChainer;g.TransformerChainer.__name__=["rg","info","filter","TransformerChainer"];g.TransformerChainer.onResult=function(a,b,c){return function(d){var e=a(d);switch(e[1]){case 0:return b(e[2],d);case 1:return c(d,e[2])}}};g.TransformerArray=function(){};i["rg.info.filter.TransformerArray"]=g.TransformerArray;g.TransformerArray.__name__=["rg","info","filter","TransformerArray"];g.TransformerArray.__interfaces__=[g.ITransformer];g.TransformerArray.prototype={transform:function(a){return B.__instanceof(a,Array)?g.TransformResult.Success(a):g.TransformResult.Failure(new Z.Message("value {0} is not an array",[a]))},__class__:g.TransformerArray};g.TransformerObject=function(){};i["rg.info.filter.TransformerObject"]=g.TransformerObject;g.TransformerObject.__name__=["rg","info","filter","TransformerObject"];g.TransformerObject.__interfaces__=[g.ITransformer];g.TransformerObject.prototype={transform:function(a){return j.isObject(a)&&null==z.getClass(a)?g.TransformResult.Success(a):g.TransformResult.Failure(new Z.Message("value {0} is not an object",[a]))},__class__:g.TransformerObject};g.TransformerString=function(){};i["rg.info.filter.TransformerString"]=g.TransformerString;g.TransformerString.__name__=["rg","info","filter","TransformerString"];g.TransformerString.__interfaces__=[g.ITransformer];g.TransformerString.prototype={transform:function(a){switch(z["typeof"](a)[1]){case 3:return g.TransformResult.Success(a?"true":"false");case 1:case 2:return g.TransformResult.Success(""+t.string(a));case 6:return g.TransformResult.Success(t.string(a));default:return g.TransformResult.Failure(new Z.Message("unable to tranform {0} into a string value",[a]))}},__class__:g.TransformerString};g.TransformerBool=function(){};i["rg.info.filter.TransformerBool"]=g.TransformerBool;g.TransformerBool.__name__=["rg","info","filter","TransformerBool"];g.TransformerBool.__interfaces__=[g.ITransformer];g.TransformerBool.prototype={transform:function(a){var b=z["typeof"](a);switch(b[1]){case 3:return g.TransformResult.Success(a);case 1:case 2:return g.TransformResult.Success(0!=a);case 6:return"String"==z.getClassName(b[2])?Wa.canParse(a)?g.TransformResult.Success(Wa.parse(a)):g.TransformResult.Failure(new Z.Message("unable to tranform the string '{0}'' into a boolean value",[a])):g.TransformResult.Failure(new Z.Message("unable to tranform the instance of {0} into a boolean value",[a]));default:return g.TransformResult.Failure(new Z.Message("unable to tranform {0} into a boolean value",[a]))}},__class__:g.TransformerBool};g.TransformerInt=function(){};i["rg.info.filter.TransformerInt"]=g.TransformerInt;g.TransformerInt.__name__=["rg","info","filter","TransformerInt"];g.TransformerInt.__interfaces__=[g.ITransformer];g.TransformerInt.prototype={transform:function(a){switch(z["typeof"](a)[1]){case 3:return g.TransformResult.Success(a?1:0);case 1:return g.TransformResult.Success(a);case 2:return g.TransformResult.Success(t["int"](a));default:return B.__instanceof(a,String)&&P.canParse(a)?g.TransformResult.Success(P.parse(a)):g.TransformResult.Failure(new Z.Message("unable to tranform {0} into an integer value",[a]))}},__class__:g.TransformerInt};g.TransformerFloat=function(){};i["rg.info.filter.TransformerFloat"]=g.TransformerFloat;g.TransformerFloat.__name__=["rg","info","filter","TransformerFloat"];g.TransformerFloat.__interfaces__=[g.ITransformer];g.TransformerFloat.prototype={transform:function(a){switch(z["typeof"](a)[1]){case 3:return g.TransformResult.Success(a?1:0);case 1:case 2:return g.TransformResult.Success(a);default:return B.__instanceof(a,String)&&G.canParse(a)?g.TransformResult.Success(G.parse(a)):g.TransformResult.Failure(new Z.Message("unable to tranform {0} into a float value",[a]))}},__class__:g.TransformerFloat};g.TransformerFunction=function(){};i["rg.info.filter.TransformerFunction"]=g.TransformerFunction;g.TransformerFunction.__name__=["rg","info","filter","TransformerFunction"];g.TransformerFunction.__interfaces__=[g.ITransformer];g.TransformerFunction.prototype={transform:function(a){return j.isFunction(a)?g.TransformResult.Success(a):g.TransformResult.Failure(new Z.Message("not a function"))},__class__:g.TransformerFunction};g.TransformerTemplateToFunction=function(a){this.argumentsMap=a};i["rg.info.filter.TransformerTemplateToFunction"]=g.TransformerTemplateToFunction;g.TransformerTemplateToFunction.__name__=["rg","info","filter","TransformerTemplateToFunction"];g.TransformerTemplateToFunction.__interfaces__=[g.ITransformer];g.TransformerTemplateToFunction.prototype={transform:function(a){var b=this;if(B.__instanceof(a,String)){var c=new $d(a);return g.TransformResult.Success(function(){return c.execute(g.TransformerExpressionToFunction.extractValues(b.argumentsMap,arguments))})}return j.isFunction(a)?g.TransformResult.Success(a):g.TransformResult.Failure(new Z.Message("not a function"))},argumentsMap:null,__class__:g.TransformerTemplateToFunction};g.TransformerExpressionToFunction=function(a){this.argumentsMap=a};i["rg.info.filter.TransformerExpressionToFunction"]=g.TransformerExpressionToFunction;g.TransformerExpressionToFunction.__name__=["rg","info","filter","TransformerExpressionToFunction"];g.TransformerExpressionToFunction.__interfaces__=[g.ITransformer];g.TransformerExpressionToFunction.extractValues=function(a,b){var c=a.length,d=new L.StringMap;d.set("ReportGrid",ReportGrid);d.set("format",ReportGrid.format);d.set("symbol",ReportGrid.symbol);d.set("humanize",ReportGrid.humanize);d.set("compare",ReportGrid.compare);d.set("Math",Math);d.set("null",null);d.set("true",!0);for(d.set("false",!1);0<=--c;){var e=a[c];if(null==e)for(var e=0,h=j.fields(b[c]);e<h.length;){var f=h[e];++e;var g=j.field(b[c],f);d.set(f,g)}else d.set(e,b[c])}return d};g.TransformerExpressionToFunction.prototype={transform:function(a){var b=this;if(B.__instanceof(a,String)&&g.TransformerExpressionToFunction.pattern.match(a)){var a=a.substr(a.indexOf("=")+1),c=(new jd).parseString(a);return g.TransformResult.Success(function(){g.TransformerExpressionToFunction.interp.variables=g.TransformerExpressionToFunction.extractValues(b.argumentsMap,arguments);return g.TransformerExpressionToFunction.interp.execute(c)})}return j.isFunction(a)?g.TransformResult.Success(a):g.TransformResult.Failure(new Z.Message("not a function"))},argumentsMap:null,__class__:g.TransformerExpressionToFunction};g.ReturnMessageIfNot=function(){};i["rg.info.filter.ReturnMessageIfNot"]=g.ReturnMessageIfNot;g.ReturnMessageIfNot.__name__=["rg","info","filter","ReturnMessageIfNot"];g.ReturnMessageIfNot.isBool=function(a){return B.__instanceof(a,ie)?null:"not a boolean"};g.ReturnMessageIfNot.isString=function(a){return B.__instanceof(a,String)?null:"not a string"};g.ReturnMessageIfNot.isObject=function(a){return j.isObject(a)&&null==z.getClass(a)?null:"not an object"};g.ReturnMessageChainer=function(){};i["rg.info.filter.ReturnMessageChainer"]=g.ReturnMessageChainer;g.ReturnMessageChainer.__name__=["rg","info","filter","ReturnMessageChainer"];g.ReturnMessageChainer.make=function(a,b){return function(c){return a(c)?null:b}};g.ReturnMessageChainer.or=function(a,b){return function(c){var d=a(c);return null==d?b(c):d}};g.PairTransformer=function(a,b){this.names=a;this.valueTransformer=b};i["rg.info.filter.PairTransformer"]=g.PairTransformer;g.PairTransformer.__name__=["rg","info","filter","PairTransformer"];g.PairTransformer.__interfaces__=[g.ITransformer];g.PairTransformer.prototype={transform:function(a){a=this.valueTransformer.transform(a);switch(a[1]){case 0:var b=a[2];return g.TransformResult.Success(new g.Pairs(this.names,this.names.map(function(){return b})));case 1:return g.TransformResult.Failure(a[2])}},valueTransformer:null,names:null,__class__:g.PairTransformer};g.Pairs=function(a,b){if(a.length!=b.length)throw new H.Error("names and values must have the same length",null,null,{fileName:"Pairs.hx",lineNumber:15,className:"rg.info.filter.Pairs",methodName:"new"});this.names=a;this.values=b};i["rg.info.filter.Pairs"]=g.Pairs;g.Pairs.__name__=["rg","info","filter","Pairs"];g.Pairs.prototype={iterator:function(){for(var a=[],b=0,c=this.names.length;b<c;){var d=b++;a.push({name:this.names[d],value:this.values[d]})}return u.iter(a)},values:null,names:null,__class__:g.Pairs};g.TransformResult={__ename__:["rg","info","filter","TransformResult"],__constructs__:["Success","Failure"]};g.TransformResult.Success=function(a){a=["Success",0,a];a.__enum__=g.TransformResult;a.toString=q;return a};g.TransformResult.Failure=function(a){a=["Failure",1,a];a.__enum__=g.TransformResult;a.toString=q;return a};Gb=function(a,b){this.container=a;this.serviceUrl=b;this.tokenId=ud.getTokenId()};Ba=void 0;i["rg.interactive.RGDownloader"]=Gb;Gb.__name__=["rg","interactive","RGDownloader"];Gb.appendArgument=function(a,b,c){var d=0<=a.indexOf("?")?"&":"?";return a+d+b+"="+C.urlEncode(c)};Gb.prototype={complete:function(a,b,c){c=aa.Json.decode(c);if(null!=c.error)null!=b&&b(c.error);else if(a(c))a=j.field(c.service,this.format),null!=this.tokenId&&(a=Gb.appendArgument(a,"tokenId",this.tokenId)),a=Gb.appendArgument(a,"forceDownload","true"),ea.window.location.href=a},config:function(){var a=this.container.select("svg"),b=a.attr("width").getFloat(),a=a.attr("height").getFloat(),b='"cache":"1d","duration":"1d","width":'+b+',"height":'+a+',"formats":["'+Gb.ALLOWED_FORMATS.join('","')+'"]';null!=this.tokenId&&(b+=',"params":{"tokenId":true}');return"{"+b+"}"},html:function(){var a=this.findCssSources(),b=this.container.attr("class").get(),c=this.extractSvg(this.container.html().get());return'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<title></title>\n'+(null==a?"":I.map(u.iter(a),function(a){return'<link href="'+a+'" rel="stylesheet" type="text/css" />'}).join("\n"))+'\n</head>\n<body>\n<div class="'+(null==b?"rg":b+" rg")+'">'+c+"</div>\n</body>\n</html>"},extractSvg:function(a){var b=new M("<svg",""),c=new M("</svg>","");b.match(a);a=b.matchedRight();c.match(a);return"<svg"+c.matchedLeft()+"</svg>"},findCssSources:function(){return O.selectAll("link").filterNode(function(a){return"stylesheet"==a.rel}).mapNode(function(a){return a.href})},download:function(a,b,c,d){if(!S.exists(Gb.ALLOWED_FORMATS,a))throw new H.Error("The download format '{0}' is not correct",[a],null,{fileName:"RGDownloader.hx",lineNumber:32,className:"rg.interactive.RGDownloader",methodName:"download"});this.format=a;a=new Ac(this.url(a));a.setHeader("Accept","application/json");a.onError=null!=d?d:function(){};a.onData=function(a,b,c){return function(d){return a(b,c,d)}}(v(this,this.complete),c,d);a.setParameter("html",this.html());a.setParameter("config",this.config());a.request(!0)},url:function(a){return C.replace(this.serviceUrl,"{ext}",a)},tokenId:null,format:null,container:null,serviceUrl:null,__class__:Gb};Ba=function(a,b){this.container=a;this.serviceUrl=b;this.tokenId=ud.getTokenId()};i["rg.interactive.RGLegacyRenderer"]=Ba;Ba.__name__=["rg","interactive","RGLegacyRenderer"];Ba.getIframeDoc=function(a){for(var b=null,c=[function(){if(a.contentDocument)b=a.contentDocument},function(){if(a.contentWindow&&a.contentWindow.document)b=a.contentWindow.document},function(){if(null!=ea.window.frames[a.name])b=ea.window.frames[a.name].document}],d=0;d<c.length;){var e=c[d];++d;try{e()}catch(h){}if(null!=b)return b}return null};Ba.isIE7orBelow=function(){return document.all&&!document.querySelector};Ba.removeFunctions=function(a){for(var b=0,c=j.fields(a);b<c.length;){var d=c[b];++b;var e=j.field(a,d);j.isFunction(e)?j.deleteField(a,d):j.isObject(a)&&null==z.getClass(a)&&Ba.removeFunctions(e)}};Ba.removeEmpties=function(a){for(var b=0,c=j.fields(a);b<c.length;){var d=c[b];++b;var e=j.field(a,d);j.isObject(e)&&null==z.getClass(e)?(Ba.removeEmpties(e),0==j.fields(e).length&&j.deleteField(a,d)):null==e&&j.deleteField(a,d)}};Ba.prototype={config:function(a){return"{"+('"cache":"1d","duration":"1d","width":'+a.width+',"height":'+a.height+',"formats":["'+Ba.FORMAT+'"]')+"}"},html:function(a,b,c){var b=aa.Json.encode(b),d=this.findJsSources(),e=this.findCssSources(),h=this.container.attr("class").get();return"<!DOCTYPE html>\n<html>\n<head>\n<title></title>\n"+(null==d?"":I.map(u.iter(d),function(a){return'<script src="'+a+'" type="text/javascript"></script>'}).join("\n"))+(null==e?"":I.map(u.iter(e),function(a){return'<link href="'+a+'" rel="stylesheet" type="text/css" />'}).join("\n"))+'\n<script type="text/javascript">\nfunction __RG__render()\n{\nReportGrid.chart("#'+a+'", '+b+');\n}\n</script>\n</head>\n<body onload="__RG__render()">\n<div id="'+a+'" class="'+(null==h?"rg":h+" rg")+'" style="margin:0;width:'+c.width+"px;height:"+c.height+'px;"></div>\n</body>\n</html>'},findCssSources:function(){return O.selectAll("link").filterNode(function(a){return"stylesheet"==a.rel}).mapNode(function(a){return a.href})},findJsSources:function(){var a=new M("reportgrid-[^.]+\\.js","");return O.selectAll("script").filterNode(function(b){return a.match(b.src)}).mapNode(function(a){return a.src})},normalizeParams:function(a){if(null==a.options)a.options={};var b=dc.size(this.container,a.options,0);a.options.width=b.width;a.options.height=b.height;Ba.removeFunctions(a.options);Ba.removeEmpties(a);j.deleteField(a,"load");j.deleteField(a.options,"download");a.options.forcelegacy=!1;return b},writeToIframe:function(a,b){var c=Ba.getIframeDoc(a);null!=c&&(c.open(),c.write('<html><head><title></title></head><body style="visibility:hidden;border:none" scroll="no">'+b+"</body></html>"),c.close())},createIframe:function(a,b){var c="rgiframe"+ ++Ba.nextframeid;return this.container.append("iframe").attr("name").string(c).attr("id").string(c).attr("frameBorder").string("0").attr("scrolling").string("no").attr("width").string(a+"").attr("height").string(b+"").attr("marginwidth").string("0").attr("marginheight").string("0").attr("hspace").string("0").attr("vspace").string("0").attr("style").string("width:100%; border:0; height:100%; overflow:hidden;").attr("src").string(Ba.isIE7orBelow()?'javascript:\'<script>window.onload=function(){document.body.scroll="no";document.body.style.overflow="hidden";document.write(\\\'<script>document.domain=\\\\"'+ea.document.domain+"\\\\\";<\\\\\\\\/script>\\');document.close();};<\\/script>'":"about:blank")},display:function(a){var b=this,c=this.normalizeParams(a),d=this.container.attr("id").get(),e=this.createIframe(c.width,c.height);null==d&&(d="rgchart");var h=this.url(),a=this.html(d,a,c),c=this.config(c),f='<form method="post" action="'+h+'" name="VIZ"><textarea name="html" style="width:40em;height:50%">'+a+'</textarea><textarea name="config" style="width:40em;height:50%">'+c+'</textarea><script type="text/javascript">\nsetTimeout(function() { document.VIZ.submit(); }, 200);\n</script>\n</form>';sb.delay(function(){b.writeToIframe(e.node(),f);null!=b.readyHandler&&b.readyHandler()},100);if(Ba.isIE7orBelow()){var g=e.node();g.attachEvent("onload",function(){var a=Ba.getIframeDoc(g);if(null!=a)a.body.scroll="no",a.body.style.overflow="hidden",a.body.frameBorder="0",a.body.style.border=0,a.body.style.margin=0,a.body.style.padding=0})}},onReady:function(a){this.readyHandler=a},readyHandler:null,url:function(){return C.replace(this.serviceUrl,"{ext}",Ba.FORMAT)},tokenId:null,container:null,serviceUrl:null,__class__:Ba};pa={__ename__:["rg","layout","Anchor"],__constructs__:["Top","Bottom","Left","Right"]};Sa=void 0;Da=void 0;La=void 0;$a=void 0;Gc=void 0;Db=void 0;pa.Top=["Top",0];pa.Top.toString=q;pa.Top.__enum__=pa;pa.Bottom=["Bottom",1];pa.Bottom.toString=q;pa.Bottom.__enum__=pa;pa.Left=["Left",2];pa.Left.toString=q;pa.Left.__enum__=pa;pa.Right=["Right",3];pa.Right.toString=q;pa.Right.__enum__=pa;Da=function(a,b,c){this.container=c;c.classed().add("rg");this.space=new U.Space(this.width=a,this.height=b,c.append("div"))};i["rg.layout.Layout"]=Da;Da.__name__=["rg","layout","Layout"];Da.prototype={adjustPadding:function(){},feedOptions:function(a){this.mainPanelName=a.main;this.paddings=a.padding},paddings:null,suggestPanelPadding:function(a,b,c){if(null!=a&&(a=hb.as(a.frame,Ta),null!=a)){var d=a.disposition;switch(d[1]){case 0:var e=d[3],h=d[2];a.set_disposition(Y.Fill(null==b?h:b,null==c?e:c,d[4],d[5]));break;case 1:e=d[3];h=d[2];a.set_disposition(Y.FillPercent(null==b?h:b,null==c?e:c,d[4],d[5],d[6]));break;case 2:e=d[3];h=d[2];a.set_disposition(Y.FillRatio(null==b?h:b,null==c?e:c,d[4]));break;case 3:e=d[3],h=d[2],a.set_disposition(Y.Fixed(null==b?h:b,null==c?e:c,d[4]))}}},suggestPanelSize:function(a,b){var c=hb.as(a.frame,Ta);if(null!=c){var d=c.disposition;switch(d[1]){case 3:c.set_disposition(Y.Fixed(d[2],d[3],b))}}},destroy:function(){this.container.selectAll("*").remove()},suggestSize:function(a,b){var c=this.getPanel(a);null!=c&&this.suggestPanelSize(c,b)},getPanel:function(){return null},getContext:function(){return null},container:null,space:null,height:null,width:null,mainPanelName:null,__class__:Da};La=function(a,b,c){Da.call(this,a,b,c);this.titleOnTop=!0;this.right=!1;this.alternating=!0;this.yitems=[]};i["rg.layout.LayoutCartesian"]=La;La.__name__=["rg","layout","LayoutCartesian"];La.__super__=Da;La.prototype=A(Da.prototype,{adjustPadding:function(){var a=null==this.title&&null==this.paddings.top?8:this.paddings.top,b=(null==this.xtickmarks||!this.titleOnTop&&null==this.title)&&null==this.paddings.bottom?8:this.paddings.bottom,c=null==this.leftcontainer&&null==this.paddings.left?20:this.paddings.left,d=null==this.rightcontainer&&null==this.paddings.right?20:this.paddings.right;if(null!=c||null!=d)this.suggestPanelPadding(this.getMain(),c,d),this.suggestPanelPadding(this.bottommiddlecontainer,c,d);(null!=a||null!=b)&&this.suggestPanelPadding(this.middlecontainer,a,b)},feedOptions:function(a){Da.prototype.feedOptions.call(this,a);this.titleOnTop=a.titleOnTop;switch(a.scalePattern[1]){case 0:this.alternating=this.right=!1;break;case 1:this.right=!0;this.alternating=!1;break;case 2:this.right=!1,this.alternating=!0}},getMain:function(){if(null==this.main)this.main=this.getMiddleContainer().createPanelAt(1,Y.Fill(0,0));return this.main},getXTickmarks:function(){if(null==this.xtickmarks){var a=this.getBottomMiddleContainer();this.xtickmarks=new $a(a.createPanelAt(0,Y.Fixed(0,0,0)),pa.Top)}return this.xtickmarks},getBottomMiddleContainer:function(){if(null==this.bottommiddlecontainer){var a=this.getBottomContainer();this.bottomleft=a.createPanel(Y.Fixed(0,0,0));this.bottommiddlecontainer=a.createContainer(Y.Fill(0,0),wa.Vertical);this.bottommiddlecontainer.g.classed().add("axis-x");this.bottomright=a.createPanel(Y.Fixed(0,0,0))}return this.bottommiddlecontainer},getBottomContainer:function(){if(null==this.bottomcontainer)this.bottomcontainer=this.getMainContainer().createContainerAt(1,Y.Fixed(0,0,0),wa.Horizontal);return this.bottomcontainer},getRightContainer:function(){if(null==this.rightcontainer)this.getMain(),this.rightcontainer=this.getMiddleContainer().createContainer(Y.Fixed(0,0,0),wa.Horizontal);return this.rightcontainer},getLeftContainer:function(){if(null==this.leftcontainer)this.leftcontainer=this.getMiddleContainer().createContainerAt(0,Y.Fixed(0,0,0),wa.Horizontal);return this.leftcontainer},getMiddleContainer:function(){if(null==this.middlecontainer)this.middlecontainer=this.getMainContainer().createContainerAt(0,Y.Fill(0,0),wa.Horizontal);return this.middlecontainer},getMainContainer:function(){if(null==this.maincontainer)this.maincontainer=this.space.createContainerAt(this.titleOnTop?1:0,Y.Fill(0,0),wa.Vertical);return this.maincontainer},getXTitle:function(){if(null==this.xtitle)this.xtitle=new $a(this.getBottomMiddleContainer().createPanel(Y.Fixed(0,0,0)),pa.Top);return this.xtitle},suggestLateralSize:function(a){for(var b=0,c=0,d=0,e=this.yitems;d<e.length;){var h=e[d];++d;c++;null!=h.container&&z.enumEq(h.anchor,a)&&(b+=h.container.frame.width)}switch(a[1]){case 3:this.suggestSize("left",b);
this.suggestSize("bottomleft",b);break;case 2:this.suggestSize("right",b),this.suggestSize("bottomright",b)}},suggestSize:function(a,b){if(this.isY(a)||this.isYTitle(a)){var c=this.getYItem(this.getYIndex(a));if(null!=c.container){var d=0;null!=c.context&&(this.isY(a)&&this.suggestPanelSize(c.context.panel,b),d+=c.context.panel.frame.width);null!=c.title&&(this.isYTitle(a)&&this.suggestPanelSize(c.title.panel,b),d+=c.title.panel.frame.width);this.suggestPanelSize(c.container,Math.round(d));this.suggestLateralSize(c.anchor)}}else switch(Da.prototype.suggestSize.call(this,a,b),a){case"x":case"xtitle":c=0,d=this.getPanel("x"),null!=d&&(c+=d.frame.height),d=this.getPanel("xtitle"),null!=d&&(c+=d.frame.height),Da.prototype.suggestSize.call(this,"xtickmarks",c)}},isYTitle:function(a){return La.REYTITLE.match(a)},isY:function(a){return La.REYAXIS.match(a)},getYIndex:function(a){return La.REYINDEX.match(a)?t.parseInt(La.REYINDEX.matched(1)):-1},getYTitle:function(a){var b=this.getYItem(a);if(null==b.title){switch(b.anchor[1]){case 2:a=this.getYContainer(a).createPanel(Y.Fixed(0,0,0));break;case 3:a=this.getYContainer(a).createPanelAt(0,Y.Fixed(0,0,0));break;default:a=null}b.title=new $a(a,b.anchor)}return b.title},getYContext:function(a){var b=this.getYItem(a);if(null==b.context){switch(b.anchor[1]){case 2:a=this.getYContainer(a).createPanelAt(0,Y.Fixed(0,0,0));break;case 3:a=this.getYContainer(a).createPanel(Y.Fixed(0,0,0));break;default:a=null}b.context=new $a(a,b.anchor)}return b.context},getYContainer:function(a){var b=this.getYItem(a);if(null==b.container)b.container=this.right||this.alternating&&0!=a%2?this.getRightContainer().createContainer(Y.Fixed(0,0,0),wa.Horizontal):this.getLeftContainer().createContainerAt(0,Y.Fixed(0,0,0),wa.Horizontal),b.container.g.classed().add("group-"+a);return b.container},getYItem:function(a){null==this.yitems[a]&&(this.yitems[a]={container:null,context:null,title:null,anchor:this.right||this.alternating&&0!=a%2?pa.Left:pa.Right});return this.yitems[a]},getPanel:function(a){switch(a){case"main":return this.getMain();case"xtickmarks":return this.getBottomContainer();case"left":return this.getLeftContainer();case"right":return this.getRightContainer();case"bottomleft":return this.bottomleft;case"bottomright":return this.bottomright;default:return a=this.getContext(a),null==a?null:a.panel}},getContext:function(a){if(this.isY(a))return this.getYContext(this.getYIndex(a));if(this.isYTitle(a))return this.getYTitle(this.getYIndex(a));switch(a){case"title":if(null==this.title)this.title=new $a(this.space.createPanelAt(this.titleOnTop?0:1,Y.Fixed(0,0,0)),this.titleOnTop?pa.Bottom:pa.Top);return this.title;case"x":return this.getXTickmarks();case"xtitle":return this.getXTitle();default:return null}},xtitle:null,yitems:null,alternating:null,right:null,title:null,xtickmarks:null,bottomright:null,bottomleft:null,middlecontainer:null,maincontainer:null,bottommiddlecontainer:null,bottomcontainer:null,rightcontainer:null,leftcontainer:null,titleOnTop:null,main:null,__class__:La});Gc=function(a,b,c){Da.call(this,a,b,c);this.titleOnTop=!0};i["rg.layout.LayoutSimple"]=Gc;Gc.__name__=["rg","layout","LayoutSimple"];Gc.__super__=Da;Gc.prototype=A(Da.prototype,{feedOptions:function(a){Da.prototype.feedOptions.call(this,a);this.titleOnTop=a.titleOnTop},getTitle:function(){if(null==this.title)this.title=new $a(this.space.createPanelAt(this.titleOnTop?0:1,Y.Fixed(0,0,20)),this.titleOnTop?pa.Bottom:pa.Top);return this.title},title:null,getPanel:function(a){switch(a){case"main":if(null==this.main)this.main=this.space.createPanelAt(this.titleOnTop?1:0,Y.Fill(0,0));return this.main;case"title":return this.getTitle().panel;default:return null}},getContext:function(a){switch(a){case"title":return null!=this.title?null:this.getTitle();default:return null}},titleOnTop:null,main:null,__class__:Gc});Db=function(a,b,c){Da.call(this,a,b,c);this.titleOnTop=!0};i["rg.layout.LayoutX"]=Db;Db.__name__=["rg","layout","LayoutX"];Db.__super__=Da;Db.prototype=A(Da.prototype,{adjustPadding:function(){var a=null==this.title&&null==this.paddings.top?8:this.paddings.top,b=(null==this.xtickmarks||!this.titleOnTop&&null==this.title)&&null==this.paddings.bottom?8:this.paddings.bottom,c=null==this.paddings.left?20:this.paddings.left,d=null==this.paddings.right?20:this.paddings.right;if(null!=c||null!=d)this.suggestPanelPadding(this.getMain(),c,d),this.suggestPanelPadding(this.bottommiddlecontainer,c,d);(null!=a||null!=b)&&this.suggestPanelPadding(this.middlecontainer,a,b)},feedOptions:function(a){Da.prototype.feedOptions.call(this,a);this.titleOnTop=a.titleOnTop},getMain:function(){if(null==this.main)this.main=this.getMiddleContainer().createPanelAt(1,Y.Fill(0,0));return this.main},getXTickmarks:function(){if(null==this.xtickmarks){var a=this.getBottomMiddleContainer();this.xtickmarks=new $a(a.createPanelAt(0,Y.Fixed(0,0,0)),pa.Top)}return this.xtickmarks},getBottomMiddleContainer:function(){if(null==this.bottommiddlecontainer)this.bottommiddlecontainer=this.getBottomContainer().createContainer(Y.Fill(0,0),wa.Vertical),this.bottommiddlecontainer.g.classed().add("axis-x");return this.bottommiddlecontainer},getBottomContainer:function(){if(null==this.bottomcontainer)this.bottomcontainer=this.getMainContainer().createContainerAt(1,Y.Fixed(0,0,0),wa.Horizontal);return this.bottomcontainer},getMiddleContainer:function(){if(null==this.middlecontainer)this.middlecontainer=this.getMainContainer().createContainerAt(0,Y.Fill(0,0),wa.Horizontal);return this.middlecontainer},getMainContainer:function(){if(null==this.maincontainer)this.maincontainer=this.space.createContainerAt(this.titleOnTop?1:0,Y.Fill(0,0),wa.Vertical);return this.maincontainer},getXTitle:function(){if(null==this.xtitle)this.xtitle=new $a(this.getBottomMiddleContainer().createPanel(Y.Fixed(0,0,0)),pa.Top);return this.xtitle},suggestSize:function(a,b){Da.prototype.suggestSize.call(this,a,b);switch(a){case"x":case"xtitle":var c=0,d=this.getPanel("x");null!=d&&(c+=d.frame.height);d=this.getPanel("xtitle");null!=d&&(c+=d.frame.height);Da.prototype.suggestSize.call(this,"xtickmarks",c)}},getPanel:function(a){switch(a){case"main":return this.getMain();case"xtickmarks":return this.getBottomContainer();default:return a=this.getContext(a),null==a?null:a.panel}},getContext:function(a){switch(a){case"title":if(null==this.title)this.title=new $a(this.space.createPanelAt(this.titleOnTop?0:1,Y.Fixed(0,0,0)),this.titleOnTop?pa.Bottom:pa.Top);return this.title;case"x":return this.getXTickmarks();case"xtitle":return this.getXTitle();default:return null}},xtitle:null,title:null,xtickmarks:null,middlecontainer:null,maincontainer:null,bottommiddlecontainer:null,bottomcontainer:null,titleOnTop:null,main:null,__class__:Db});$a=function(a,b){this.panel=a;this.anchor=b};i["rg.layout.PanelContext"]=$a;$a.__name__=["rg","layout","PanelContext"];$a.prototype={anchor:null,panel:null,__class__:$a};Sa={__ename__:["rg","layout","ScalePattern"],__constructs__:["ScalesBefore","ScalesAfter","ScalesAlternating"],ScalesBefore:["ScalesBefore",0]};Sa.ScalesBefore.toString=q;Sa.ScalesBefore.__enum__=Sa;Sa.ScalesAfter=["ScalesAfter",1];Sa.ScalesAfter.toString=q;Sa.ScalesAfter.__enum__=Sa;Sa.ScalesAlternating=["ScalesAlternating",2];Sa.ScalesAlternating.toString=q;Sa.ScalesAlternating.__enum__=Sa;Ja=function(a,b){this._async=a;this._first=b;this._store=new L.StringMap};pb=void 0;fa=void 0;i["rg.query.BaseQuery"]=Ja;Ja.__name__=["rg","query","BaseQuery"];Ja.asyncTransform=function(a){return function(b,c){for(var d=0,e=b.length;d<e;){var h=d++;b[h]=a(b[h])}c(b)}};Ja.stackAsyncTransform=function(a){return function(b,c){c(a(b))}};Ja.prototype={_this:function(a){return a},toString:function(){return z.getClassName(z.getClass(this)).split(".").pop()+(" [next: "+t.string(null!=this._next)+", async: "+t.string(null!=this._async)+"]")},_createQuery:function(a,b){return new Ja(a,b)},_query:function(a){return a},execute:function(a){this._first.execute(a)},stackClear:function(){return this.stackTransform(function(){return[]})},stackRetrieve:function(a){var b=this;null==a&&(a="");return this.stackTransform(function(c){return c.concat(b._first._store.get(a))})},stackSortValue:function(a,b){null==b&&(b=!0);var c=function(b){return b.reduce(function(b,c){return b+j.field(c,a)},0)};return this.stackSort(function(a,e){return(b?1:-1)*(c(a)-c(e))})},stackSort:function(a){return this.stackTransform(function(b){b.sort(a);return b})},stackStore:function(a){var b=this;null==a&&(a="");return this.stackTransform(function(c){b._first._store.set(a,c.slice());return c})},stackReverse:function(){return this.stackAsync(Ja.stackAsyncTransform(function(a){a.reverse();return a}))},stackRotate:function(a){var b=fa.rotate(a);return this.stackAsync(Ja.stackAsyncTransform(function(a){return b(a)}))},split:function(a){if(B.__instanceof(a,String))var b=a,a=function(a){return j.field(a,b)};return this.stackAsync(Ja.stackAsyncTransform(function(b){for(var d=[],e=0;e<b.length;){var h=b[e];++e;d=d.concat(fa.split(h,a))}return d}))},stackKeep:function(a){null==a&&(a=1);return this.stackAsync(Ja.stackAsyncTransform(function(b){return b.slice(0,a)}))},stackDiscard:function(a){null==a&&(a=1);return this.stackAsync(Ja.stackAsyncTransform(function(b){for(var c=0;c<a;)c++,b.pop();return b}))},stackMerge:function(){return this.stackAsync(Ja.stackAsyncTransform(function(a){return[S.flatten(a)]}))},fold:function(a,b){return this.transform(function(c){var d=[],e=j.isFunction(a)?a(c,d):a;c.forEach(function(a){e=b(e,a,d)});return d})},unique:function(a){if(null==a)a=ca.same;return this.transform(fa.uniquef(a))},reverse:function(){return this.transform(fa.reverse)},limit:function(a,b){null==b&&(b=a,a=0);return this.transform(fa.limit(a,b))},sortValues:function(a){for(var b=[],c=[],d=0,e=j.fields(a);d<e.length;){var h=e[d];++d;b.push(h);c.push(!1!=j.field(a,h))}return this.sort(function(a,d){for(var e,h=0,f=b.length;h<f;){var g=h++;e=b[g];e=(c[g]?1:-1)*ca.compare(j.field(a,e),j.field(d,e));if(0!=e)return e}return 0})},sortValue:function(a,b){var c={};c[a]=null==b?!0:b;return this.sortValues(c)},sort:function(a){return this.transform(fa.sort(a))},filterValue:function(a,b){return this.transform(fa.filterValue(a,b))},filterValues:function(a){return this.transform(fa.filterValues(a))},filter:function(a){return this.transform(fa.filter(a))},addIndex:function(a,b){null==a&&(a="index");null==b&&(b=0);return this.fold(function(){return b},function(b,d,e){d[a]=b;e.push(d);return++b})},mapValues:function(a){return this.transform(fa.mapFields(a))},mapValue:function(a,b){return this.transform(fa.mapField(a,b))},setValues:function(a){return this.transform(fa.setFields(a))},setValue:function(a,b){return this.transform(fa.setField(a,b))},asyncEach:function(a){return this.asyncAll(function(b,c){for(var d=b.length,e=0,h=[],f=function(a,b){h[a]=b;++e==d&&c(S.flatten(h))},g=0,i=b.length;g<i;){var k=g++;a(b[k],function(a,b){return function(c){return a(b,c)}}(f,k))}})},asyncAll:function(a){return this.stackAsync(function(b,c){for(var d=b.length,e=0,h=[],f=function(a,b){h[a]=b;++e==d&&c(h)},g=0,i=b.length;g<i;){var k=g++;a(b[k],function(a,b){return function(c){return a(b,c)}}(f,k))}})},stackAsync:function(a){return this._next=a=this._createQuery(a,this._first)},stackTransform:function(a){return this.stackAsync(Ja.stackAsyncTransform(a))},stackCross:function(){return this.stackTransform(fa.crossStack)},firstElement:function(){return this.transform(function(a){return a[0]})},explode:function(a){return this.transform(function(b){for(var c=[],d=0;d<b.length;){var e=b[d];++d;e=c.concat(a(e));B.__instanceof(e,Array)?c=c.concat(e):c.push(e)}return c})},transform:function(a){return this.stackAsync(Ja.asyncTransform(a))},toObject:function(a){return this.transform(fa.toObject(a))},renameFields:function(a){var b=j.fields(a).map(function(b){return{src:b,dst:j.field(a,b)}});return this.map(function(a){for(var d={},e=0;e<b.length;){var h=b[e];++e;j.setField(d,h.dst,j.field(a,h.src))}return d})},console:function(a){return this.stackTransform(function(b){var c=console;null!=c&&c.log((null==a?"":a+": ")+ca.string(b));return b})},auditItem:function(a){return this.transform(function(b){for(var c=0;c<b.length;){var d=b[c];++c;a(d)}return b})},audit:function(a){return this.transform(function(b){a(b);return b})},map:function(a){return this.transform(fa.map(a))},data:function(a){B.__instanceof(a,Array)||(a=[a]);return this.stackAsync(function(b,c){b.push(a);c(b)})},request:function(a,b){if(null==b)b={type:"application/json",useJsonp:!1};else{if(null==b.type)b.type="application/json";if(null==b.useJsonp)b.useJsonp=!1}var c=null;switch(b.type.toLowerCase()){case"json":switch(b.useJsonp){case!0:c=function(a){return a};break;case!1:c=function(a){return aa.Json.decode(a)}}break;case"application/json":switch(b.useJsonp){case!0:c=function(a){return a};break;case!1:c=function(a){return aa.Json.decode(a)}}break;case"csv":case"text/csv":c=function(a){return Kb.Csv.decode(a)};break;default:throw'invalid type format "'+b.type+'"'}var d=function(a,b){return function(d){a.push(c(d));b(a)}};return this.stackAsync(!0==b.useJsonp?function(b,c){Tb.get(a,d(b,c),function(){},{},{})}:function(b,c){var f=new Ac(a);f.async=!0;f.onData=d(b,c);f.request(!1)})},load:function(a){return this.stackAsync(function(b,c){a(function(a){b.push(a);c(b)})})},_store:null,_async:null,_next:null,_first:null,__class__:Ja};pb=function(){Ja.call(this,null,this)};i["rg.query.Query"]=pb;pb.__name__=["rg","query","Query"];pb.create=function(){var a=new pb,b=a._createQuery(function(a,b){b(a)},a);return a._next=b};pb.executeHandler=function(a,b){var c=a._next;!function(){var a=null;return a=function(e){null==c._next?b(S.flatten(e)):(c=c._next,c._async(e,a))}}(this)([])};pb.__super__=Ja;pb.prototype=A(Ja.prototype,{execute:function(a){pb.executeHandler(this,a)},__class__:pb});fa=function(){};i["rg.query.Transformers"]=fa;fa.__name__=["rg","query","Transformers"];fa.crossStack=function(a){if(1>=a.length)return a;for(var b=a.shift();0<a.length;){for(var c=a.shift(),d=[],e=0;e<b.length;){var h=b[e];++e;for(var f=0;f<c.length;){var g=c[f];++f;d.push(ra.copyTo(g,ra.copyTo(h,{})))}}b=d}return[b]};fa.split=function(a,b){var c=new L.StringMap,d=[];a.forEach(function(a){var h=""+b(a),f=c.get(h);if(null==f)f=d.length,c.set(h,f),d.push([]);d[f].push(a)});return d};fa.map=function(a){return function(b){return I.map(u.iter(b),a)}};fa.toObject=function(a){return function(b){return b.map(function(b){var d={};d[a]=b;return d})}};fa.filter=function(a){return function(b){return b.filter(a)}};fa.filterValues=function(a){var b=ra.entries(a);b.forEach(function(a){if(!j.isFunction(a.value)){var b=a.value;a.value=function(a){return a==b}}});var c=function(a){for(var c=0;c<b.length;){var h=b[c];++c;if(!h.value(j.field(a,h.key)))return!1}return!0};return function(a){return a.filter(c)}};fa.filterValue=function(a,b){if(!j.isFunction(b))var c=b,b=function(a){return a==c};var d=function(c){return!b(j.field(c,a))?!1:!0};return function(a){return a.filter(d)}};fa.setField=function(a,b){if(!j.isFunction(b))var c=b,b=function(){return c};return function(c){c.forEach(function(c){c[a]=b(c)});return c}};fa.mapField=function(a,b){if(!j.isFunction(b))var c=b,b=function(){return c};return function(c){c.forEach(function(c){c[a]=b(j.field(c,a))});return c}};fa.setFields=function(a){for(var b=j.fields(a),c=[],d=0;d<b.length;){var e=b[d];++d;e=j.field(a,e);j.isFunction(e)?c.push(e):c.push(function(a,b){return function(c){return a(b,c)}}(function(a){return a},e))}return function(a){a.forEach(function(a){for(var d=0,e=b.length;d<e;){var h=d++;a[b[h]]=c[h](a)}});return a}};fa.mapFields=function(a){for(var b=j.fields(a),c=[],d=0;d<b.length;){var e=b[d];++d;e=j.field(a,e);j.isFunction(e)?c.push(e):c.push(function(a,b){return function(c){return a(b,c)}}(function(a){return a},e))}return function(a){a.forEach(function(a){for(var d=0,e=b.length;d<e;){var h=d++;a[b[h]]=c[h](j.field(a,b[h]))}});return a}};fa.sort=function(a){return function(b){b.sort(null==a?ca.compare:a);return b}};fa.limit=function(a,b){return function(c){return a>=c.length?[]:c.slice(a,a+b>c.length?c.length:a+b)}};fa.reverse=function(a){a.reverse();return a};fa.uniquef=function(a){return function(b){for(var c=0,d;c<b.length-1;){var e=b[c];for(d=b.length-1;d>c;)a(e,b[d])&&b.splice(d,1),d--;c++}return b}};fa.rotate=function(a){if(B.__instanceof(a,String))var b=a,a=function(a,c){return j.field(a,b)==j.field(c,b)};var c=null==a?function(a,b,c,f){return c==f}:function(b,c){return a(b,c)};return function(a){for(var b=[],h=a[0],f=0,g=h.length;f<g;){for(var i=f++,k=h[i],x=[k],N=1,l=a.length;N<l;)for(var j=N++,j=a[j],m=0,n=j.length;m<n;){var p=m++,q=j[p];if(c(k,q,i,p)){x.push(q);break}}b.push(x)}return b}};U={};K=void 0;n=void 0;l=void 0;ta=void 0;U.Layer=function(a){this.frame=(this.panel=a).frame;a.addLayer(this);this.g=a.g.append("svg:g");this.g.attr("class").string("layer");this._resize()};i["rg.svg.panel.Layer"]=U.Layer;U.Layer.__name__=["rg","svg","panel","Layer"];U.Layer.prototype={resize:function(){},_resize:function(){this.width=this.frame.width;this.height=this.frame.height;this.resize()},addClass:function(a){var b=this;a.split(" ").forEach(function(a){b.g.classed().add(a)})},height:null,width:null,g:null,frame:null,panel:null,__class__:U.Layer};n={Chart:function(a){U.Layer.call(this,a);this.animated=!0;this.animationDuration=1500;this.animationEase=V.Equations.linear;this.ready=new Zb}};i["rg.svg.chart.Chart"]=n.Chart;n.Chart.__name__=["rg","svg","chart","Chart"];n.Chart.__super__=U.Layer;n.Chart.prototype=A(U.Layer.prototype,{moveTooltip:function(a,b,c){var d=U.Panels.absolutePos(this.panel);this.panelx=d.x;this.panely=d.y;this.tooltip.setAnchorColor(c);this.tooltip.showAt(this.panelx+a|0,this.panely+b|0)},init:function(){if(null!=this.labelDataPointOver)this.tooltip=F.Tooltip.get_instance();this.resize()},resize:function(){var a=U.Panels.absolutePos(this.panel);this.panelx=a.x;this.panely=a.y},tooltip:null,panely:null,panelx:null,ready:null,labelDataPointOver:null,labelDataPoint:null,click:null,animationEase:null,animationDuration:null,animated:null,__class__:n.Chart});n.CartesianChart=function(a){n.Chart.call(this,a);this.labelDataPointVerticalOffset=25;this.labelDataPointShadow=this.labelDataPointOutline=!1};i["rg.svg.chart.CartesianChart"]=n.CartesianChart;n.CartesianChart.__name__=["rg","svg","chart","CartesianChart"];n.CartesianChart.__super__=n.Chart;n.CartesianChart.prototype=A(n.Chart.prototype,{data:function(){throw new H.AbstractMethod({fileName:"CartesianChart.hx",lineNumber:43,className:"rg.svg.chart.CartesianChart",methodName:"data"})},setVariables:function(a){this.xVariable=a[0];this.yVariables=a.slice(1)},labelDataPointShadow:null,labelDataPointOutline:null,labelDataPointVerticalOffset:null,xVariable:null,yVariables:null,__class__:n.CartesianChart});n.BarChart=function(a){n.CartesianChart.call(this,a);this.addClass("bar-chart");this.defs=this.g.append("svg:defs");this.chart=this.g.append("svg:g");this.gradientLightness=2;this.displayGradient=!0;this.padding=10;this.paddingAxis=4;this.paddingDataPoint=2;this.horizontal=!1;this.segmentProperty=this.startat=null};i["rg.svg.chart.BarChart"]=n.BarChart;n.BarChart.__name__=["rg","svg","chart","BarChart"];n.BarChart.__super__=n.CartesianChart;n.BarChart.prototype=A(n.CartesianChart.prototype,{applyGradient:function(a){var b=O.selectNodeData(a);j.field(a,"__dhx_data__");var a=b.style("fill").get(),a=T.parse(a,"#ccc"),c="rg_bar_gradient_"+a.hex("");if(this.defs.select("#"+c).empty()){var d=T.applyLightness(f.Hsl.toHsl(a),this.gradientLightness).toRgbString(),e=this.defs.append("svg:linearGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string(c).attr("x1")["float"](0).attr("x2")["float"](0).attr("y1")["float"](1).attr("y2")["float"](0).attr("spreadMethod").string("pad");e.append("svg:stop").attr("offset")["float"](0).attr("stop-color").string(d).attr("stop-opacity")["float"](1);e.append("svg:stop").attr("offset")["float"](1).attr("stop-color").string(a.toRgbString()).attr("stop-opacity")["float"](1)}b.attr("style").string("fill:url(#"+c+")")},onmouseover:function(a,b){var c=this.labelDataPointOver(j.field(b,"__dhx_data__"),a);if(null==c)this.tooltip.hide();else{var d=O.selectNode(b),e=d.attr("x").getFloat(),h=d.attr("y").getFloat(),d=d.attr("width").getFloat();this.tooltip.html(c.split("\n").join("<br>"));this.moveTooltip(e+d/2,h,T.extractColor(b))}},onclick:function(a,b){this.click(b,a)},datav:function(a,b){for(var c=new L.StringMap,d=(this.width-this.padding*(a.length-1))/a.length,e=function(a,b){var d=c.get(a);null==d&&(d=b.append("svg:g").attr("class").string(a),c.set(a,d));return d},h=null!=this.labelDataPoint?this.g.append("svg:g").attr("class").string("datapoint-labels"):null,f=0,g=a.length;f<g;)for(var i=f++,i=a[i],k=(d-this.paddingAxis*(i.length-1))/i.length,x=0,N=i.length;x<N;)for(var l=x++,m=i[l],n=e("group-"+l,this.chart),p=this.xVariable.type,q=this.xVariable.axis,s=this.xVariable.min(),t=this.xVariable.max(),kb=this.yVariables[l].type,be=this.yVariables[l].axis,ge=this.yVariables[l].min(),r=this.yVariables[l].max(),u=Math.max(1,(k-this.paddingDataPoint*(m.length-1))/m.length),w=-d/2+l*(k+this.paddingAxis),l=this.yVariables[l].stats,y=function(a,b){return function(c,d){return a(b,c,d)}}(v(this,this.onmouseover),l),A=function(a,b){return function(c,d,e){return a(b,c,d,e)}}(v(this,this.onclick),l),B=0,z=0,F=m.length;z<F;){var E=z++,C=m[E],G=e("fill-"+(null==this.segmentProperty?E:S.indexOf(b,j.field(C,this.segmentProperty))),n),H=this.width*q.scale(s,t,j.field(C,p)),D=null==this.startat?B:be.scale(ge,r,j.field(C,this.startat))*this.height,I=be.scale(ge,r,j.field(C,kb))*this.height-(null==this.startat?0:D);if(!Math.isNaN(D)){0>I?(D+=I,I=-I):Math.isNaN(I)&&(I=0);var J=Math.max(this.stacked?k:u,1),M=this.stacked?H+w:H+w+E*(u+this.paddingDataPoint),O=this.height-I-D,G=G.append("svg:rect").attr("class").string("bar").attr("x")["float"](M).attr("width")["float"](J).attr("y")["float"](O).attr("height")["float"](I).onNode("mouseover",y).onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(A,C));G.node().__dhx_data__=C;T.storeColorForSelection(G);this.displayGradient&&G.eachNode(v(this,this.applyGradient));this.visuallyStacked()&&(B=D+I);null!=this.labelDataPoint&&K.PointLabel.label(h,this.labelDataPoint(C,l),(this.stacked?H+w:H+w+E*(u+this.paddingDataPoint))+J/2,this.height-I-D-this.labelDataPointVerticalOffset,this.labelDataPointShadow,this.labelDataPointOutline)}}this.ready.dispatch()},datah:function(a,b){for(var c=new L.StringMap,d=(this.height-this.padding*(a.length-1))/a.length,e=function(a,b){var d=c.get(a);null==d&&(d=b.append("svg:g").attr("class").string(a),c.set(a,d));return d},h=0,f=a.length;h<f;)for(var g=h++,g=a[g],i=(d-this.paddingAxis*(g.length-1))/g.length,k=0,x=g.length;k<x;)for(var l=k++,m=g[l],n=e("group-"+l,this.chart),p=this.xVariable.type,q=this.xVariable.axis,s=this.xVariable.min(),r=this.xVariable.max(),t=this.yVariables[l].type,kb=this.yVariables[l].axis,be=this.yVariables[l].min(),ge=this.yVariables[l].max(),u=Math.max(1,(i-this.paddingDataPoint*(m.length-1))/m.length),l=-d/2+l*(i+this.paddingAxis),he=this.xVariable.stats,w=function(a,b){return function(c,d){return a(b,c,d)}}(v(this,this.onmouseover),he),he=function(a,b){return function(c,d,e){return a(b,c,d,e)}}(v(this,this.onclick),he),y=0,A=0,B=m.length;A<B;){var z=A++,C=m[z],F=e("fill-"+(null==this.segmentProperty?z:S.indexOf(b,j.field(C,this.segmentProperty))),n),E=null==this.startat?y:q.scale(s,r,j.field(C,this.startat))*this.width,G=Math.max(this.height*kb.scale(be,ge,j.field(C,t)),1),D=q.scale(s,r,j.field(C,p))*this.width-(null==this.startat?0:E);if(!Math.isNaN(E))0>D?(E-=D,D=-D):Math.isNaN(D)&&(D=0),z=F.append("svg:rect").attr("class").string("bar").attr("x")["float"](E).attr("y")["float"](this.height-(this.stacked?G-l:G-l-z*(u+this.paddingDataPoint))).attr("height")["float"](this.stacked?i:u).attr("width")["float"](D).onNode("mouseover",w).onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(he,C)),z.node().__dhx_data__=C,T.storeColorForSelection(z),this.displayGradient&&z.eachNode(v(this,this.applyGradient)),this.visuallyStacked()&&(y=E+D)}this.ready.dispatch()},data:function(a){this.horizontal?this.datah(a.data,a.segments):this.datav(a.data,a.segments)},visuallyStacked:function(){return this.stacked&&null==this.startat},setVariables:function(a,b,c,d){this.horizontal?(this.xVariable=c[0],this.yVariables=b):(this.xVariable=b[0],this.yVariables=c);if(this.visuallyStacked()){for(a=0;a<c.length;)b=c[a],++a,b.meta.max=Math.NEGATIVE_INFINITY;for(var d=d.data,e=0,a=d.length;e<a;)for(var h=e++,f=0,g=d[h].length;f<g;){for(var i=f++,b=c[i],k=0,x=0,l=d[h][i].length;x<l;)var j=x++,k=k+xa.valueAlt(d[h][i][j],b.type,0);if(b.meta.max<k)b.meta.max=k}}},segmentProperty:null,startat:null,horizontal:null,paddingDataPoint:null,paddingAxis:null,padding:null,displayGradient:null,gradientLightness:null,defs:null,chart:null,stacked:null,__class__:n.BarChart});n.ColorScaleMode={__ename__:["rg","svg","chart","ColorScaleMode"],__constructs__:"FromCssInterpolation,FromCss,Interpolation,Sequence,Fixed,Fun".split(",")};n.ColorScaleMode.FromCssInterpolation=function(a){a=["FromCssInterpolation",0,a];a.__enum__=n.ColorScaleMode;a.toString=q;return a};n.ColorScaleMode.FromCss=function(a){a=["FromCss",1,a];a.__enum__=n.ColorScaleMode;a.toString=q;return a};n.ColorScaleMode.Interpolation=function(a){a=["Interpolation",2,a];a.__enum__=n.ColorScaleMode;a.toString=q;return a};n.ColorScaleMode.Sequence=function(a){a=["Sequence",3,a];a.__enum__=n.ColorScaleMode;a.toString=q;return a};n.ColorScaleMode.Fixed=function(a){a=["Fixed",4,a];a.__enum__=n.ColorScaleMode;a.toString=q;return a};n.ColorScaleMode.Fun=function(a){a=["Fun",5,a];a.__enum__=n.ColorScaleMode;a.toString=q;return a};n.ColorScaleModes=function(){};i["rg.svg.chart.ColorScaleModes"]=n.ColorScaleModes;n.ColorScaleModes.__name__=["rg","svg","chart","ColorScaleModes"];n.ColorScaleModes.canParse=function(a){try{return n.ColorScaleModes.createFromDynamic(a),!0}catch(b){return!1}};n.ColorScaleModes.createFromDynamic=function(a){if(j.isFunction(a))return n.ColorScaleMode.Fun(a);if(!B.__instanceof(a,String))throw new H.Error("invalid color mode '{0}'",[a],null,{fileName:"ColorScaleModes.hx",lineNumber:28,className:"rg.svg.chart.ColorScaleModes",methodName:"createFromDynamic"});a=B.__cast(a,String).split(":");switch(a[0].toLowerCase()){case"css":return n.ColorScaleMode.FromCss(null==a[1]?null:t.parseInt(a[1]));case"i":case"interpolated":return n.ColorScaleMode.Interpolation(a[1].split(",").map(function(a){return f.Colors.parse(a)}));case"s":case"sequence":return n.ColorScaleMode.Sequence(a[1].split(",").map(function(a){return f.Colors.parse(a)}));case"f":case"fixed":return n.ColorScaleMode.Fixed(f.Colors.parse(a[1]));default:return 0<=a[0].indexOf(",")?n.ColorScaleMode.Sequence(a[0].split(",").map(function(a){return f.Colors.parse(a)})):n.ColorScaleMode.Fixed(f.Colors.parse(a[0]))}};n.Coords=function(){};i["rg.svg.chart.Coords"]=n.Coords;n.Coords.__name__=["rg","svg","chart","Coords"];n.Coords.fromTransform=function(a){return n.Coords.retransform.match(a)?(a=n.Coords.retransform.matched(2),[t.parseFloat(n.Coords.retransform.matched(1)),null==a?0:t.parseFloat(a)]):[0,0]};n.FunnelChart=function(a){n.Chart.call(this,a);this.padding=2.5;this.flatness=1;this.arrowSize=30;this.gradientLightness=1;this.displayGradient=!0;this.labelArrow=v(this,this.defaultLabelArrow);this.labelDataPoint=v(this,this.defaultLabelDataPoint);this.labelDataPointOver=v(this,this.defaultLabelDataPointOver)};i["rg.svg.chart.FunnelChart"]=n.FunnelChart;n.FunnelChart.__name__=["rg","svg","chart","FunnelChart"];n.FunnelChart.__super__=n.Chart;n.FunnelChart.prototype=A(n.Chart.prototype,{externalGradient:function(a,b){var c=O.selectNode(a).select("path"),d=f.Hsl.toHsl(T.parse(c.style("fill").get(),"#cccccc")),e=this.next(b),h=this.dpvalue(this.dps[b]),o=Math.round(100*(e/h))/100,o="rg_funnel_ext_gradient_"+d.hex("#")+"-"+o,g=this.defs.append("svg:radialGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string(o).attr("cx").string("50%").attr("cy").string("0%").attr("r").string("110%"),i=d.hex("#");g.append("svg:stop").attr("offset").string("10%").attr("stop-color").string(i);d=T.applyLightness(d,1-(h<e?h/e:e/h),this.gradientLightness*(h>=e?1:-1)).hex("#");g.append("svg:stop").attr("offset").string("50%").attr("stop-color").string(d);g.append("svg:stop").attr("offset").string("90%").attr("stop-color").string(i);c.attr("style").string("fill:url(#"+o+")")},internalGradient:function(a){var b=T.parse(a.style("fill").get(),"#cccccc"),c=this.defs.append("svg:radialGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string("rg_funnel_int_gradient_0").attr("cx").string("50%").attr("fx").string("75%").attr("cy").string("20%").attr("r").string(Math.round(75)+"%");c.append("svg:stop").attr("offset").string("0%").attr("stop-color").string(T.applyLightness(f.Hsl.toHsl(b),this.gradientLightness).toRgbString());c.append("svg:stop").attr("offset").string("100%").attr("stop-color").string(T.applyLightness(f.Hsl.toHsl(b),-this.gradientLightness).toRgbString());a.attr("style").string("fill:url(#rg_funnel_int_gradient_0)")},init:function(){n.Chart.prototype.init.call(this);null!=this.tooltip&&this.tooltip.anchor("bottomright");this.defs=this.g.classed().add("funnel-chart").append("svg:defs")},mouseOver:function(a,b,c){null!=this.labelDataPointOver&&(a=this.labelDataPointOver(a,c),null==a?this.tooltip.hide():(this.tooltip.html(a.split("\n").join("<br>")),this.moveTooltip(this.width/2,this.topheight+.6*this.h+(this.h+this.padding)*b,T.extractColor(this.currentNode))))},redraw:function(){var a=this;if(!(null==this.dps||0==this.dps.length)){this.g.selectAll("g").remove();this.g.selectAll("radialGradient").remove();this.stats=this.variableDependent.stats;var b=this.scale(this.stats.max),c=function(c){return a.width/2-a.scale(c)/b*(a.width-2)/2},d=function(b){return a.width-c(b)},e=(new p.Diagonal).sourcef(function(b){return[c(a.dpvalue(b)),0]}).targetf(function(b,d){return[c(a.next(d)),a.h]}),h=(new p.Diagonal).sourcef(function(b,c){return[d(a.next(c)),a.h]}).targetf(function(b){return[d(a.dpvalue(b)),0]}),f=function(b,e,h){b=e?c(b)-d(b):d(b)-c(b);return" a 5 "+a.flatness+" 0 0 "+(e?0==h?1:0:h)+" "+b+" 0"},g=function(b){b=a.dpvalue(b);return" M "+c(b)+" 0 "+f(b,!1,0)+f(b,!0,1)},i=this.g.append("svg:g"),k=i.append("svg:path").attr("class").string("funnel-inside fill-0").attr("d").string(g(this.dps[0]));if(null!=this.click)i.onNode("click",function(){a.click(a.dps[0],a.stats)});this.displayGradient&&this.internalGradient(k);k.onNode("mouseover",function(b){a.currentNode=b;a.mouseOver(a.dps[0],0,a.stats)});T.storeColorForSelection(k);this.topheight=Math.ceil(k.node().getBBox().height/2)+1;k=this.dps.length-1;g=this.g.append("svg:path").attr("class").string("funnel-inside fill-"+k).attr("d").string(g(this.dps[k]));k=Math.ceil(g.node().getBBox().height/2)+1;g.remove();this.h=(this.height-this.topheight-k-(this.dps.length-1)*this.padding)/this.dps.length;i.attr("transform").string("translate(0,"+(1+this.topheight)+")");i=this.g.selectAll("g.section").data(this.dps).enter().append("svg:g").attr("class").string("section").attr("transform").stringf(function(b,c){return"translate(0,"+(a.topheight+c*(a.padding+a.h))+")"});g=i.append("svg:path").attr("class").stringf(function(a,b){return"funnel-outside fill-"+b}).attr("d").stringf(function(b,c){var d=h.diagonal(b,c).split("C");d.shift();d="C"+d.join("C");return e.diagonal(b,c)+f(a.next(c),!1,0)+d+f(a.dpvalue(b),!0,0)});if(null!=this.click)g.on("click",function(b){a.click(b,a.stats)});T.storeColorForSelection(g);g.onNode("mouseover",function(b,c){a.currentNode=b;a.mouseOver(j.field(b,"__dhx_data__"),c,a.stats)});this.displayGradient&&i.eachNode(v(this,this.externalGradient));i=this.g.selectAll("g.arrow").data(this.dps).enter().append("svg:g").attr("class").string("arrow").attr("transform").stringf(function(b,c){return"translate("+a.width/2+","+(a.topheight+a.h*c+a.arrowSize/2)+")"
});i.each(function(b){if(null!=a.labelArrow&&(b=a.labelArrow(b,a.stats),null!=b)){var c=O.selectNode(la.current);c.append("svg:path").attr("transform").string("scale(1.1,0.85)translate(1,1)").attr("class").string("shadow").style("fill").string("#000").attr("opacity")["float"](.25).attr("d").string(p.Symbol.arrowDownWide(a.arrowSize*a.arrowSize));c.append("svg:path").attr("transform").string("scale(1.1,0.8)").attr("d").string(p.Symbol.arrowDownWide(a.arrowSize*a.arrowSize));c=new l.Label(c,!0,!1,!0);c.set_anchor(l.GridAnchor.Bottom);c.set_text(b)}});i.each(function(b,c){if(null!=a.labelDataPoint){var d=a.labelDataPoint(b,a.stats);if(null!=d){var e=new l.Balloon(a.g);e.set_boundingBox({x:a.width/2+2*(a.arrowSize/3),y:0,width:a.width,height:a.height});e.set_preferredSide(3);e.set_text(d.split("\n"));e.moveTo(a.width/2,a.topheight+.6*a.h+(a.h+a.padding)*c,!1)}}});this.ready.dispatch()}},next:function(a){return this.dpvalue(this.dps[a+1<this.dps.length?a+1:a])},scale:function(a){return this.variableDependent.axis.scale(this.variableDependent.min(),this.variableDependent.max(),a)},currentNode:null,h:null,topheight:null,stats:null,dpvalue:function(a){return j.field(a,this.variableDependent.type)},resize:function(){n.Chart.prototype.resize.call(this);this.redraw()},data:function(a){this.dps=a;this.redraw()},setVariables:function(a,b){this.variableIndependent=a[0];this.variableDependent=b[0]},defaultLabelDataPointOver:function(a){return P.format(j.field(a,this.variableDependent.type))},defaultLabelDataPoint:function(a){return ka.humanize(j.field(a,this.variableIndependent.type)).split(" ").join("\n")},defaultLabelArrow:function(a,b){var c=j.field(a,this.variableDependent.type)/b.max;return m.FormatNumber.percent(100*c,0)},dps:null,defs:null,variableDependent:null,variableIndependent:null,labelArrow:null,arrowSize:null,gradientLightness:null,displayGradient:null,flatness:null,padding:null,__class__:n.FunnelChart});n.Geo=function(a){this.labelOutline=this.labelShadow=!1;n.Chart.call(this,a);this.mapcontainer=this.g.append("svg:g").attr("class").string("mapcontainer");this.queue=[];this.set_colorMode(n.ColorScaleMode.FromCss());this.resize()};i["rg.svg.chart.Geo"]=n.Geo;n.Geo.__name__=["rg","svg","chart","Geo"];n.Geo.__super__=n.Chart;n.Geo.prototype=A(n.Chart.prototype,{addMap:function(a,b){null!=b&&a.onReady.add(function(a,b,e){return function(){return a(b,e)}}(v(this,this.drawmap),a,b))},init:function(){n.Chart.prototype.init.call(this);F.Tooltip.get_instance().hide();if(null==this.tooltip)this.tooltip=F.Tooltip.get_instance();this.g.classed().add("geo")},set_colorMode:function(a){var b=this,c=this.colorMode=a;switch(c[1]){case 0:c=c[2];null==c&&(c=1);var d=K.RGCss.colorsInCss();d.length>c&&(d=d.slice(0,c));1==d.length&&d.push(f.Hsl.lighter(f.Hsl.toHsl(f.Colors.parse(d[0])),.9).hex("#"));d.reverse();this.set_colorMode(n.ColorScaleMode.Interpolation(d.map(function(a){return f.Colors.parse(a)})));break;case 1:var e=c[2];null==e&&(e=K.RGCss.numberOfColorsInCss());this.stylefeature=function(a,c){var d=b.variableDependent.axis.scale(b.variableDependent.min(),b.variableDependent.max(),j.field(c,b.variableDependent.type)),d=Math.floor(e*d);a.attr("class").string("fill-"+d);T.storeColorForSelection(a)};break;case 3:var h=I.map(u.iter(c[2]),function(a){return a.hex("#")});this.stylefeature=function(a,c){var d=b.variableDependent.axis.scale(b.variableDependent.min(),b.variableDependent.max(),j.field(c,b.variableDependent.type)),d=Math.floor(h.length*d);a.style("fill").string(h[d]);T.storeColorForSelection(a)};break;case 2:var o=f.Rgb.interpolateStepsf(c[2]);this.stylefeature=function(a,c){var d=b.variableDependent.axis.scale(b.variableDependent.min(),b.variableDependent.max(),j.field(c,b.variableDependent.type));a.style("fill").string(o(d).hex("#"));T.storeColorForSelection(a)};break;case 4:var g=c[2].hex("#");this.stylefeature=function(a){a.style("fill").string(g);T.storeColorForSelection(a)};break;case 5:var i=c[2];this.stylefeature=function(a,c){a.style("fill").string(i(c,b.variableDependent.stats));T.storeColorForSelection(a)}}return a},redraw:function(){for(;0<this.queue.length;)this.queue.shift()()},stylefeature:function(){},handlerClick:function(a,b){b(a,this.variableDependent.stats)},handlerDataPointOver:function(a,b,c){c=c(b,this.variableDependent.stats);null==c?this.tooltip.hide():(this.tooltip.html(c.split("\n").join("<br>")),b=j.field(b,"$centroid"),this.moveTooltip(b[0]+this.width/2,b[1]+this.height/2,T.extractColor(a)))},drawmap:function(a,b){if(null==this.dps||0==this.dps.length)this.queue.push(function(a,b,c){return function(){return a(b,c)}}(v(this,this.drawmap),a,b));else{this.set_colorMode(a.colorMode);for(var c=null,d=0,e=this.dps;d<e.length;){var h=e[d];++d;var f=j.field(h,b),f=a.map.get(f);if(null!=f){this.stylefeature(f.svg,ra.copyTo(h,f.dp));if(null!=a.radius&&"circle"==f.svg.node().nodeName)f.svg.attr("r")["float"](a.radius(f.dp,this.variableDependent.stats));if(null!=a.labelDataPoint&&null!=(c=a.labelDataPoint(f.dp,this.variableDependent.stats)))h=j.field(f.dp,"$centroid"),f=new l.Label(this.mapcontainer,!0,this.labelShadow,this.labelOutline),f.set_text(c),f.place(h[0],h[1],0)}}0==this.queue.length&&this.ready.dispatch()}},resize:function(){n.Chart.prototype.resize.call(this);null!=this.mapcontainer&&this.mapcontainer.attr("transform").string("translate("+this.width/2+","+this.height/2+")")},data:function(a){this.dps=a;this.redraw()},setVariables:function(a,b){this.variableDependent=b[0]},queue:null,dps:null,variableDependent:null,labelShadow:null,labelOutline:null,colorMode:null,mapcontainer:null,__class__:n.Geo,__properties__:{set_colorMode:"set_colorMode"}});n.GradientEffect={__ename__:["rg","svg","chart","GradientEffect"],__constructs__:["NoEffect","Gradient"]};n.GradientEffect.NoEffect=["NoEffect",0];n.GradientEffect.NoEffect.toString=q;n.GradientEffect.NoEffect.__enum__=n.GradientEffect;n.GradientEffect.Gradient=function(a){a=["Gradient",1,a];a.__enum__=n.GradientEffect;a.toString=q;return a};n.GradientEffects=function(){};i["rg.svg.chart.GradientEffects"]=n.GradientEffects;n.GradientEffects.__name__=["rg","svg","chart","GradientEffects"];n.GradientEffects.canParse=function(a){switch(a.toLowerCase().split(":")[0]){case"gradient":case"noeffect":case"none":case"flat":a=!0;break;default:a=!1}return a};n.GradientEffects.parse=function(a){var b=a.toLowerCase().split(":");switch(b.shift()){case"gradient":return a=.75,b=b.pop(),null!=b&&(a=t.parseFloat(b.split(",").shift())),n.GradientEffect.Gradient(a);default:return n.GradientEffect.NoEffect}};n.HeatGrid=function(a){n.CartesianChart.call(this,a);this.useContour=!1;this.set_colorMode(n.ColorScaleMode.FromCss())};i["rg.svg.chart.HeatGrid"]=n.HeatGrid;n.HeatGrid.__name__=["rg","svg","chart","HeatGrid"];n.HeatGrid.__super__=n.CartesianChart;n.HeatGrid.prototype=A(n.CartesianChart.prototype,{set_colorMode:function(a){var b=this,c=this.colorMode=a;switch(c[1]){case 0:c=c[2];null==c&&(c=1);var d=K.RGCss.colorsInCss();d.length>c&&(d=d.slice(0,c));1==d.length&&d.push(f.Hsl.lighter(f.Hsl.toHsl(f.Colors.parse(d[0])),.9).hex("#"));d.reverse();this.set_colorMode(n.ColorScaleMode.Interpolation(d.map(function(a){return f.Colors.parse(a)})));break;case 1:var e=c[2];null==e&&(e=K.RGCss.numberOfColorsInCss());this.stylefeature=function(a,c){var d=b.variableDependent.axis.scale(b.variableDependent.min(),b.variableDependent.max(),j.field(c,b.variableDependent.type)),d=Math.floor(e*d);a.attr("class").string("fill-"+d)};break;case 3:var h=I.map(u.iter(c[2]),function(a){return a.hex("#")});this.stylefeature=function(a,c){var d=b.variableDependent.axis.scale(b.variableDependent.min(),b.variableDependent.max(),j.field(c,b.variableDependent.type)),d=Math.floor(h.length*d);a.style("fill").string(h[d])};break;case 2:var o=f.Rgb.interpolateStepsf(c[2]);this.stylefeature=function(a,c){var d=b.variableDependent.axis.scale(b.variableDependent.min(),b.variableDependent.max(),j.field(c,b.variableDependent.type));a.style("fill").string(o(d).hex("#"))};break;case 4:var g=c[2].hex("#");this.stylefeature=function(a){a.style("fill").string(g)};break;case 5:var i=c[2];this.stylefeature=function(a,c){a.style("fill").string(i(c,b.variableDependent.stats))}}return a},stylefeature:function(){},range:function(a){var b=B.__instanceof(a,cc)?a:null;return null!=b?b.axis.range(b.min(),b.max()):a.axis.ticks(a.min(),a.max()).map(function(a){return a.get_value()})},onclick:function(a){null!=this.click&&this.click(a,this.stats)},onmouseover:function(a,b){if(null!=this.labelDataPointOver){var c=this.labelDataPointOver(a,this.stats);null==c?this.tooltip.hide():(this.tooltip.html(c.split("\n").join("<br>")),this.moveTooltip(this.x(a,b)+this.w/2,this.y(a,b)+this.h/2,T.extractColor(this.currentNode)))}},drawSquares:function(){var a=this,b=this.g.selectAll("rect").data(this.dps).enter().append("svg:rect").attr("x").floatf(v(this,this.x)).attr("y").floatf(v(this,this.y)).attr("width")["float"](this.w).attr("height")["float"](this.h).each(function(b){a.stylefeature(O.selectNode(la.current),b)}).on("click",v(this,this.onclick)).onNode("mouseover",function(b,c){a.currentNode=b;a.onmouseover(j.field(b,"__dhx_data__"),c)});if(null!=this.labelDataPoint){var c=this.g.append("svg:g").attr("class").string("datapoint-labels");this.g.selectAll("rect").data(this.dps).eachNode(function(b,e){var h=j.field(b,"__dhx_data__");K.PointLabel.label(c,a.labelDataPoint(h,a.stats),a.x(h,e)+a.w/2,a.y(h,e)-a.labelDataPointVerticalOffset+a.h/2,a.labelDataPointShadow,a.labelDataPointOutline)})}T.storeColorForSelection(b)},currentNode:null,drawContour:function(){},redraw:function(){if(!(null==this.dps||0==this.dps.length))this.stats=this.variableDependent.stats,this.xrange=this.range(this.xVariable),this.yrange=this.range(this.yVariables[0]),this.cols=this.xrange.length,this.rows=this.yrange.length,this.w=this.width/this.cols,this.h=this.height/this.rows,this.useContour?this.drawContour():this.drawSquares(),this.ready.dispatch()},y:function(a){return this.height-(1+S.indexOf(this.yrange,j.field(a,this.yVariables[0].type)))*this.h},x:function(a){return S.indexOf(this.xrange,j.field(a,this.xVariable.type))*this.w},stats:null,h:null,w:null,rows:null,cols:null,yrange:null,xrange:null,data:function(a){this.dps=a;this.redraw()},resize:function(){n.CartesianChart.prototype.resize.call(this);this.redraw()},init:function(){n.CartesianChart.prototype.init.call(this);this.g.classed().add("heat-grid")},setVariables:function(a,b,c){this.xVariable=b[0];this.yVariables=[b[1]];this.variableDependent=c[0]},variableDependent:null,dps:null,colorMode:null,useContour:null,__class__:n.HeatGrid,__properties__:{set_colorMode:"set_colorMode"}});n.LineChart=function(a){n.CartesianChart.call(this,a);this.addClass("line-chart");this.chart=this.g.append("svg:g");this.sensibleRadius=100};i["rg.svg.chart.LineChart"]=n.LineChart;n.LineChart.__name__=["rg","svg","chart","LineChart"];n.LineChart.__super__=n.CartesianChart;n.LineChart.prototype=A(n.CartesianChart.prototype,{onclick:function(a){var a=j.field(a,"__dhx_data__"),b=this.getStats(a);this.click(a,b)},onmouseover:function(a){var b=j.field(a,"__dhx_data__"),c=this.getStats(b),b=this.labelDataPointOver(b,c);null==b?this.tooltip.hide():(c=O.selectNode(a.parentNode),c=n.Coords.fromTransform(c.attr("transform").get()),this.tooltip.html(b.split("\n").join("<br>")),this.moveTooltip(c[0],c[1],T.extractColor(a)))},getStats:function(a){for(var b=0,c=this.stats;b<c.length;){var d=c[b];++b;if(null!=j.field(a,d.type))return d}return null},getTranslatePointf:function(a){var b=v(this,this.x),c=this.getY1(a);return function(a,e){return"translate("+b(a)+","+c(a,e)+")"}},data:function(a){var b=this;this.linePathShape=[];for(var c=0,d=this.yVariables.length;c<d;){var e=c++,h=[new p.Line(v(this,this.x),this.getY1(e))];null!=this.lineInterpolator&&h[0].interpolator(this.lineInterpolator);this.linePathShape[e]=function(a){return function(c,d){b.segment=d;return a[0].shape(c,d)}}(h)}c=this.chart.selectAll("g.group").data(a);c.enter().append("svg:g").attr("class").stringf(function(a,b){return"group group-"+b});c.exit().remove();this.stats=[];c=0;for(d=a.length;c<d;){e=[c++];this.segments=a[e[0]];h=this.chart.select("g.group-"+e[0]);this.stats[e[0]]=new nb(this.yVariables[e[0]].type);this.stats[e[0]].addMany(xa.values(S.flatten(this.segments),this.yVariables[e[0]].type));if(null!=this.y0property){var o=new p.Area(v(this,this.x),this.getY0(e[0]),this.getY1(e[0]));null!=this.lineInterpolator&&o.interpolator(this.lineInterpolator);h.selectAll("path.area").data(this.segments).enter().append("svg:path").attr("class").stringf(this.classff(e[0],"area area-"+e[0])).attr("d").stringf(v(o,o.shape))}var o=h.selectAll("path.main").data(this.segments),g=this.lineEffect;switch(g[1]){case 1:var i=[g[3]],g=[g[2]],k=[[]];o.enter().append("svg:path").attr("class").stringf(this.classsf(e[0],"line")).eachNode(function(a,b){return function(c,d){var e=f.Hsl.toHsl(T.parse(O.selectNode(c).style("stroke").get(),"#000000")),h=T.applyLightness(e,a[0]);b[0][d]=f.Hsl.interpolatef(h,e)}}(g,k)).remove();for(g=0;g<i[0];){var x=[g++];o.enter().append("svg:path").attr("class").string("line grad-"+(i[0]-x[0]-1)).style("stroke").stringf(function(a,b,c){return function(d,e){return c[0][e](b[0]/a[0]).hex("#")}}(i,x,k)).attr("d").stringf(this.linePathShape[e[0]])}break;case 2:for(var i=g[4],k=g[3],m=g[2],g=0;g<i;)x=g++,o.enter().append("svg:path").attr("transform").string("translate("+(1+x)*m+","+(1+x)*k+")").attr("class").stringf(this.classsf(e[0],"line shadow shadow-"+x)).attr("d").stringf(this.linePathShape[e[0]])}x=o.enter().append("svg:path").attr("class").stringf(this.classsf(e[0],"line")).attr("d").stringf(this.linePathShape[e[0]]);g=this;switch(g.lineEffect[1]){case 1:x.classed().add("gradient");break;case 2:x.classed().add("dropshadow");break;case 0:x.classed().add("noeffect")}o.update().attr("d").stringf(this.linePathShape[e[0]]);o.exit().remove();h=h.selectAll("g.symbols").data(this.segments);o=h.enter().append("svg:g").attr("class").stringf(this.classsf(e[0],"symbols")).selectAll("g.symbol").dataf(function(){return function(a){return a}}()).enter().append("svg:g").attr("transform").stringf(this.getTranslatePointf(e[0]));g=o.append("svg:circle").attr("r")["float"](6).attr("opacity")["float"](0).style("fill").string("#000000");null!=this.labelDataPointOver&&g.classed().add("rgdata");T.storeColorForSelection(g,"stroke");K.SVGSymbolBuilder.generate(o,this.stats[e[0]],this.symbol,this.symbolStyle);null!=this.labelDataPoint&&(g=[this.chart.append("svg:g").attr("class").string("datapoint-labels")],o.eachNode(function(a,c){return function(d,e){var h=j.field(d,"__dhx_data__");K.PointLabel.label(a[0],b.labelDataPoint(h,b.stats[c[0]]),b.x(h),b.getY1(c[0])(h,e)-b.labelDataPointVerticalOffset,b.labelDataPointShadow,b.labelDataPointOutline)}}(g,e)));h.update().selectAll("g.symbol").dataf(function(){return function(a){return a}}()).update().attr("transform").stringf(this.getTranslatePointf(e[0]));h.exit().remove()}l.Sensible.sensibleZone(this.g,this.panel,null==this.click?null:v(this,this.onclick),null==this.labelDataPointOver?null:v(this,this.onmouseover),this.sensibleRadius);this.ready.dispatch()},classff:function(a,b){return function(c,d){return b+" fill-"+(a+d)}},classsf:function(a,b){return function(c,d){return b+" stroke-"+(a+d)}},segments:null,getY0:function(a){var b=this,c=this.yVariables[a],d=function(a,b,c){return function(d){return a(b,c,d)}}((Q=c.axis,v(Q,Q.scale)),c.min(),c.max());return function(a){return b.height-d(xa.valueAlt(a,b.y0property,c.min()))*b.height}},getY1:function(a){var b=this,c=this.yVariables[a],d=function(a,b,c){return function(d){return a(b,c,d)}}((Q=c.axis,v(Q,Q.scale)),c.min(),c.max());if(null!=this.y0property){var e=d(c.min())*this.height;return function(h,f){return b.getY0(a)(h,f)-d(j.field(h,c.type))*b.height+e}}return function(a){a=j.field(a,c.type);a=d(a)*b.height;return b.height-a}},x:function(a){a=j.field(a,this.xVariable.type);return this.xVariable.axis.scale(this.xVariable.min(),this.xVariable.max(),a)*this.width},setVariables:function(a,b,c,d){n.CartesianChart.prototype.setVariables.call(this,a,b,c,d);if(null!=this.y0property&&""!=this.y0property){for(var e,a=0;a<c.length;)b=c[a],++a,b.meta.max=Math.NEGATIVE_INFINITY;for(var h=0,a=d.length;h<a;)for(var f=h++,b=c[f],g=0,i=d[f].length;g<i;)for(var k=g++,x=0,l=d[f][k].length;x<l;)if(e=x++,e=d[f][k][e],e=xa.valueAlt(e,b.type,0)+xa.valueAlt(e,this.y0property,0),b.meta.max<e)b.meta.max=e}},stats:null,segment:null,chart:null,linePathShape:null,sensibleRadius:null,y0property:null,lineEffect:null,lineInterpolator:null,symbolStyle:null,symbol:null,__class__:n.LineChart});n.LineEffect={__ename__:["rg","svg","chart","LineEffect"],__constructs__:["NoEffect","Gradient","DropShadow"]};n.LineEffect.NoEffect=["NoEffect",0];n.LineEffect.NoEffect.toString=q;n.LineEffect.NoEffect.__enum__=n.LineEffect;n.LineEffect.Gradient=function(a,b){var c=["Gradient",1,a,b];c.__enum__=n.LineEffect;c.toString=q;return c};n.LineEffect.DropShadow=function(a,b,c){a=["DropShadow",2,a,b,c];a.__enum__=n.LineEffect;a.toString=q;return a};n.LineEffects=function(){};i["rg.svg.chart.LineEffects"]=n.LineEffects;n.LineEffects.__name__=["rg","svg","chart","LineEffects"];n.LineEffects.parse=function(a){var b=a.toLowerCase().split(":");switch(b.shift()){case"dropshadow":var c=.5,d=.5,a=2,b=b.pop();null!=b&&(b=b.split(","),c=t.parseFloat(b[0]),d=1<b.length?t.parseFloat(b[1]):c,2<b.length&&(a=t.parseInt(b[2])));return n.LineEffect.DropShadow(c,d,a);case"gradient":return c=.75,a=2,b=b.pop(),null!=b&&(c=t.parseFloat(b.split(",").shift()),d=b.split(",").pop(),null!=d&&(a=t.parseInt(d))),n.LineEffect.Gradient(c,a);default:return n.LineEffect.NoEffect}};n.PieChart=function(a){n.Chart.call(this,a);this.addClass("pie-chart");this.g.append("svg:defs");this.pie=new R.layout.Pie;this.gradientLightness=.75;this.displayGradient=!0;this.innerRadius=this.animationDelay=0;this.outerRadius=.9;this.overRadius=.95;this.labelRadius=.45;this.tooltipRadius=.5;this.labels=new L.StringMap;this.labelOrientation=l.LabelOrientation.Orthogonal;this.labelDontFlip=!0};i["rg.svg.chart.PieChart"]=n.PieChart;n.PieChart.__name__=["rg","svg","chart","PieChart"];n.PieChart.__super__=n.Chart;n.PieChart.prototype=A(n.Chart.prototype,{pief:function(a){for(var b=this.variableDependent.type,c=this.pie.pie(a.map(function(a){return j.field(a,b)})),d=0,e=c.length;d<e;){var h=d++,f=this.makeid(a[h]);c[h].id=f;c[h].dp=a[h]}return c},arcShape:function(a){return function(b){return a.shape(b)}},makeid:function(a){a=ra.clone(a);j.deleteField(a,this.variableDependent.type);return Mb.Md5.encode(ca.string(a))},id:function(a){return a.id},backtonormal:function(a){O.selectNodeData(a).selectAll("path").transition().ease(this.animationEase).duration(null,this.animationDuration).attr("d").stringf(this.arcShape(this.arcNormal))},highlight:function(a){O.selectNodeData(a).selectAll("path").transition().ease(this.animationEase).duration(null,this.animationDuration).attr("d").stringf(this.arcShape(this.arcBig))},fadein:function(a){var b=O.selectNodeData(a),a=this.arcNormal.shape(j.field(a,"__dhx_data__"));b.selectAll("path.slice").transition().ease(this.animationEase).duration(null,this.animationDuration).delay(null,this.animationDelay).attr("d").string(a)},applyGradient:function(a){var b=O.selectNodeData(a),c=j.field(a,"__dhx_data__").id;if(this.g.select("defs").select("#rg_pie_gradient_"+c).empty()){var d=b.select("path.slice"),a=this.arcNormal.shape(j.field(a,"__dhx_data__")),a=b.append("svg:path").attr("d").string(a),e;try{e=a.node().getBBox()}catch(h){e={x:0,y:0,width:0,height:0}}a.remove();var d=T.parse(d.style("fill").get(),"#cccccc"),a=T.applyLightness(f.Hsl.toHsl(d),this.gradientLightness),o=e.width/e.height,g=100*-e.x/e.width/o,i=100*-e.y/e.height/o;e=100*(e.width>e.height?Math.min(1,this.radius*this.outerRadius/e.width):Math.max(1,this.radius*this.outerRadius/e.width));e=this.g.select("defs").append("svg:radialGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string("rg_pie_gradient_"+c).attr("cx").string(g*o+"%").attr("cy").string(i+"%").attr("gradientTransform").string("scale(1 "+o+")").attr("r").string(e+"%");e.append("svg:stop").attr("offset").string(100*this.innerRadius+"%").attr("stop-color").string(d.toRgbString()).attr("stop-opacity")["float"](1);e.append("svg:stop").attr("offset").string("100%").attr("stop-color").string(a.toRgbString()).attr("stop-opacity")["float"](1)}b.select("path.slice").attr("style").string("fill:url(#rg_pie_gradient_"+c+")")},appendLabel:function(a){var b=O.selectNode(a),b=new l.Label(b,this.labelDontFlip,!0,!0),a=j.field(a,"__dhx_data__"),c=this.radius*this.labelRadius,d=a.startAngle+(a.endAngle-a.startAngle)/2-Math.PI/2;b.set_orientation(this.labelOrientation);switch(this.labelOrientation[1]){case 0:b.set_anchor(l.GridAnchor.Center);break;case 1:b.set_anchor(l.GridAnchor.Left);break;case 2:b.set_anchor(l.GridAnchor.Top)}b.set_text(this.labelDataPoint(a.dp,this.stats));b.place(-2.5+Math.cos(d)*c,-2.5+Math.sin(d)*c,57.29577951308232*d);this.labels.set(a.id,b);0>=j.field(a.dp,this.stats.type)&&b.hide()},updateLabel:function(a){O.selectNode(a);var a=j.field(a,"__dhx_data__"),b=this.labels.get(a.id),c=this.radius*this.labelRadius,d=a.startAngle+(a.endAngle-a.startAngle)/2-Math.PI/2;b.set_text(this.labelDataPoint(a.dp,this.stats));b.place(-2.5+Math.cos(d)*c,-2.5+Math.sin(d)*c,57.29577951308232*d);0==j.field(a.dp,this.stats.type)?b.hide():b.show()},removeLabel:function(a){O.selectNode(a);a=j.field(a,"__dhx_data__");this.labels.get(a.id).destroy();this.labels.remove(a.id)},onMouseClick:function(a){this.mouseClick(j.field(a,"__dhx_data__").dp)},onMouseOver:function(a){if(null!=this.labelDataPointOver){var b=j.field(a,"__dhx_data__"),c=this.labelDataPointOver(b.dp,this.stats);if(null==c)this.tooltip.hide();else{var b=b.startAngle+(b.endAngle-b.startAngle)/2-Math.PI/2,d=this.radius*this.tooltipRadius;this.tooltip.html(c.split("\n").join("<br>"));this.moveTooltip(this.width/2+Math.cos(b)*d,this.height/2+Math.sin(b)*d,T.extractColor(a))}}},data:function(a){this.stats=this.variableDependent.stats;var a=this.g.selectAll("g.group").data(this.pief(a),v(this,this.id)),b=a.enter().append("svg:g").attr("class").stringf(function(a,b){return"group fill-"+b}).attr("transform").string("translate("+this.radius+","+this.radius+")"),c=b.append("svg:path").attr("class").string("slice");T.storeColorForSelection(b);this.displayGradient&&b.eachNode(v(this,this.applyGradient));this.animated?(c.attr("d").stringf(this.arcShape(this.arcStart)),b.eachNode(v(this,this.fadein)).onNode("mouseover.animation",v(this,this.highlight)).onNode("mouseout.animation",v(this,this.backtonormal))):c.attr("d").stringf(this.arcShape(this.arcNormal));b.onNode("mouseover.label",v(this,this.onMouseOver));if(null!=this.mouseClick)b.onNode("click.user",v(this,this.onMouseClick));null!=this.labelDataPoint&&a.enter().append("svg:g").attr("transform").string("translate("+this.radius+","+this.radius+")").eachNode(v(this,this.appendLabel));a.update().select("path").transition().ease(this.animationEase).duration(null,this.animationDuration).attr("d").stringf(this.arcShape(this.arcNormal));null!=this.labelDataPoint&&a.update().eachNode(v(this,this.updateLabel));a.exit().eachNode(v(this,this.removeLabel)).remove();this.ready.dispatch()},resize:function(){n.Chart.prototype.resize.call(this);this.radius=Math.min(this.width,this.height)/2;this.arcStart=p.Arc.fromAngleObject().innerRadius(this.radius*this.innerRadius).outerRadius(this.radius*this.innerRadius);this.arcNormal=p.Arc.fromAngleObject().innerRadius(this.radius*this.innerRadius).outerRadius(this.radius*this.outerRadius);this.arcBig=p.Arc.fromAngleObject().innerRadius(this.radius*this.innerRadius).outerRadius(this.radius*this.overRadius);this.width>this.height?this.g.attr("transform").string("translate("+(this.width/2-this.height/2)+",0)"):this.g.attr("transform").string("translate(0,"+(this.height/2-this.width/2)+")")},setVariables:function(a,b){this.variableDependent=b[0]},mouseClick:null,labels:null,labelDontFlip:null,labelOrientation:null,animationDelay:null,displayGradient:null,gradientLightness:null,variableDependent:null,stats:null,radius:null,pie:null,arcBig:null,arcStart:null,arcNormal:null,tooltipRadius:null,labelRadius:null,overRadius:null,outerRadius:null,innerRadius:null,__class__:n.PieChart});n.Sankey=function(a){n.Chart.call(this,a);this.addClass("sankey");this.layerWidth=61;this.nodeSpacing=28;this.dummySpacing=18;this.extraWidth=28;this.backEdgeSpacing=4;this.extraRadius=this.extraHeight=5;this.chunkWidth=10;this.imageWidth=60;this.imageHeight=48;this.imageSpacing=0;this.labelNodeSpacing=4;this.styleNode="0";this.styleentry="4";this.styleexit="6";this.styleEdgeBackward="3";this.styleEdgeForward="0";this.thinbackedges=this.stackbackedges=!0};i["rg.svg.chart.Sankey"]=n.Sankey;n.Sankey.__name__=["rg","svg","chart","Sankey"];n.Sankey.__super__=n.Chart;n.Sankey.prototype=A(n.Chart.prototype,{hnode:function(a){return this.nheight(a.data.weight)},isdummy:function(a){return"#"==u.substr(a.data.id,0,1)},nodepadding:function(a){return this.isdummy(a)?this.dummySpacing:this.nodeSpacing},ynode:function(a){for(var b=this.layout.cell(a),c=this.layerstarty[b.layer],d=0,e=b.position;d<e;)var h=d++,h=this.layout.nodeAt(b.layer,h),c=c+(this.hnode(h)+this.nodepadding(h));c+=this.nodepadding(a);return Math.round(c)+.5},xlayer:function(a){return 1>=this.layout.length?this.width/2:Math.round((this.width-this.padBefore-this.padAfter-this.layerWidth)/(this.layout.length-1)*a+this.layerWidth/2+this.padBefore)},hafter:function(a,b){for(var c=!1,d=this.backEdgeSpacing/this.nheight(1),e=d;b.hasNext();){var h=b.next();c?e+=h.weight+d:h.id==a&&(c=!0)}return this.nheight(e)},cafter:function(a,b){for(var c=!1,d=0;b.hasNext();){var e=b.next();c?d++:e.id==a&&(c=!0)}return d},ydiagonal:function(a,b){for(var c=0;b.hasNext();){var d=b.next();if(d.id==a)break;c+=d.weight}return this.nheight(c)},nheight:function(a){return 0==a?0:Math.round(a/this.maxweight*this.availableheight)},onmouseoverexit:function(a,b,c,d){this.highlight(c.id,"node");null!=this.labelEdgeOver&&(c=this.labelEdgeOver(this.edgeDataWithNode(c,!0),this.dependentVariable.stats),null==c?this.tooltip.hide():(this.tooltip.anchor("topleft"),this.tooltip.html(c.split("\n").join("<br>")),this.moveTooltip(a,b,T.extractColor(d))))},onmouseoverentry:function(a,b,c,d){this.highlight(c.id,"node");null!=this.labelEdgeOver&&(c=this.labelEdgeOver(this.edgeDataWithNode(c,!1),this.dependentVariable.stats),null==c?this.tooltip.hide():(this.tooltip.anchor("bottomright"),this.tooltip.html(c.split("\n").join("<br>")),this.moveTooltip(a,b,T.extractColor(d))))},onmouseoveredge:function(a,b,c,d){this.highlight(c.id,"edge");null!=this.labelEdgeOver&&(c=this.labelEdgeOver(this.edgeData(c),this.dependentVariable.stats),null==c?this.tooltip.hide():(this.tooltip.anchor("bottomright"),this.tooltip.html(c.split("\n").join("<br>")),this.moveTooltip(a,b,T.extractColor(d))))},onmouseovernode:function(a,b){this.highlight(a.id,"node");if(this.isdummy(a)){if(null!=this.labelEdgeOver){var c=this.labelEdgeOver(this.edgeData(a.graph.edges.positives(a).next()),this.dependentVariable.stats);if(!1!==c)if(null==c)this.tooltip.hide();else{var d=this.layout.cell(a);this.tooltip.anchor("bottomright");this.tooltip.html(c.split("\n").join("<br>"));this.moveTooltip(this.xlayer(d.layer),this.ynode(a)+this.hnode(a)/2,T.extractColor(b))}}}else null!=this.labelDataPointOver&&(c=this.labelDataPointOver(a.data.dp,this.dependentVariable.stats),!1!==c&&(null==c?this.tooltip.hide():(d=this.layout.cell(a),this.tooltip.anchor("bottomright"),this.tooltip.html(c.split("\n").join("<br>")),this.moveTooltip(this.xlayer(d.layer),this.ynode(a)+this.hnode(a)/2,T.extractColor(b)))))},edgeClickWithNode:function(a,b,c,d){this.edgeclick(this.edgeDataWithNode(a,b),c,d)},edgeClickWithEdge:function(a,b,c){this.edgeclick(this.edgeData(a),b,c)},edgeclick:function(a){this.clickEdge(a,this.dependentVariable.stats)},nodeclick:function(a){this.click(a.data.dp,this.dependentVariable.stats)},edgeDataWithNode:function(a,b){return{tail:b?a.data.dp:null,head:b?null:a.data.dp,edgeweight:b?a.data.exit:a.data.entry,nodeweight:a.data.weight}},edgeData:function(a){for(var b=a.head,c=a.tail;this.isdummy(b);)b=b.graph.edges.positives(b).next().head;for(;this.isdummy(c);)c=c.graph.edges.negatives(c).next().tail;return{head:b.data.dp,tail:c.data.dp,edgeweight:a.weight,nodeweight:c.data.weight}},highlight:function(a,b){for(var c=this,d=function(a){return function(){return a.iterator()}}(this.maphi)();d.hasNext();)d.next().classed().remove("over");this.maphi=new L.StringMap;var e=null,h=null,f=null,g=null,i=function(a,b){var d=b+":"+a;c.maphi.set(d,c.mapelements.get(d).classed().add("over"))},k=function(a){var a="entry:"+a,b=c.mapelements.get(a);null!=b&&c.maphi.set(a,b.classed().add("over"))},e=function(a){c.maphi.exists("edge:"+a.id)||(i(a.id,"edge"),c.isbackward(a)||h(a.head))},h=function(a){if(!c.maphi.exists("node:"+a.id)){i(a.id,"node");var b="exit:"+a.id,d=c.mapelements.get(b);null!=d&&c.maphi.set(b,d.classed().add("over"));for(a=a.graph.edges.positives(a);a.hasNext();)b=a.next(),e(b)}},f=function(a){c.isbackward(a)||g(a.tail);c.maphi.exists("edge:"+a.id)||c.isbackward(a)||i(a.id,"edge")},g=function(a){for(var b=a.graph.edges.negatives(a);b.hasNext();){var d=b.next();f(d)}c.maphi.exists("node:"+a.id)||(i(a.id,"node"),k(a.id))};"edge"==b?(e(this.layout.graph.edges.get(a)),f(this.layout.graph.edges.get(a))):"node"==b&&(h(this.layout.graph.nodes.get(a)),g(this.layout.graph.nodes.get(a)),k(a))},isbackward:function(a){return this.layout.cell(a.head).layer<=this.layout.cell(a.tail).layer},addToMap:function(a,b,c){this.mapelements.set(b+":"+a,c)},redraw:function(){var a=this;this.mapelements=new L.StringMap;this.maphi=new L.StringMap;this.maxweight=0;this.layerstarty=[];for(var b=0,c=this.layout.length;b<c;){var d=b++,e=I.reduce(Qa(this.layout.layer(d))(),function(a,b){return a+b.data.weight},0);if(e>this.maxweight)this.maxweight=e}for(var h=0,b=0,c=this.layout.length;b<c;)d=b++,e=I.reduce(Qa(this.layout.layer(d))(),function(b,c){return b+a.nodepadding(c)},0),e>h&&(h=e);this.availableheight=this.height-h;if(this.thinbackedges)this.availableheight-=(1+this.backEdgeSpacing)*(this.stackbackedges?I.filter(this.layout.graph.edges.collection.iterator(),function(b){return a.layout.cell(b.tail).layer>=a.layout.cell(b.head).layer}).length:1);else if(this.stackbackedges)for(b=this.layout.graph.edges.collection.iterator();b.hasNext();)d=b.next(),this.layout.cell(d.tail).layer<this.layout.cell(d.head).layer||(this.availableheight-=this.backEdgeSpacing,this.maxweight+=d.weight);else{this.availableheight-=this.backEdgeSpacing;e=0;for(b=this.layout.graph.edges.collection.iterator();b.hasNext();)if(d=b.next(),!(this.layout.cell(d.tail).layer<this.layout.cell(d.head).layer)&&d.weight>e)e=d.weight;this.maxweight+=e}this.availableheight-=this.extraRadius+this.extraHeight;for(var f=0,b=0,c=this.layout.length;b<c;){for(var d=b++,h=this.layout.layer(d),g=0,i=0;i<h.length;)e=h[i],++i,g+=this.nodepadding(e)+this.nheight(e.data.weight);this.layerstarty[d]=g;g>f&&(f=g)}b=0;for(c=this.layerstarty.length;b<c;)d=b++,this.layerstarty[d]=(f-this.layerstarty[d])/2;f+=this.extraRadius+this.extraHeight;this.padBefore=0;if(this.thinbackedges){c=0;for(b=this.layout.layer(0);c<b.length;){e=b[c];++c;i=null!=this.displayEntry&&this.displayEntry(e.data,this.dependentVariable.stats);h=!0;g=0;for(e=e.graph.edges.negatives(e);e.hasNext();)d=e.next(),h?(h=!1,g+=this.extraRadius+this.chunkWidth):g+=this.backEdgeSpacing+2;if(g>this.padBefore)this.padBefore=g;if(i&&this.extraWidth>this.padBefore)this.padBefore=this.extraWidth}}else{c=0;for(b=this.layout.layer(0);c<b.length;){e=b[c];++c;h=Math.min(this.nheight(e.data.entry),this.extraWidth);for(g=e.graph.edges.negatives(e);g.hasNext();)d=g.next(),d=this.hafter(d.id,e.graph.edges.negatives(e))+this.nheight(d.weight),d>h&&(h=d);
if(h>this.padBefore)this.padBefore=h}}this.padBefore+=2;this.padAfter=0;if(this.thinbackedges){c=0;for(b=this.layout.layer(this.layout.length-1);c<b.length;){e=b[c];++c;i=null!=this.displayExit&&this.displayExit(e.data,this.dependentVariable.stats);h=!0;g=0;for(e=e.graph.edges.positives(e);e.hasNext();)d=e.next(),h?(h=!1,g+=this.extraRadius+this.chunkWidth):g+=this.backEdgeSpacing+2;if(g>this.padAfter)this.padAfter=g;if(i&&this.extraWidth>this.padAfter)this.padAfter=this.extraWidth}}else{c=0;for(b=this.layout.layer(this.layout.length-1);c<b.length;){e=b[c];++c;h=Math.min(this.nheight(e.data.exit),this.extraWidth);for(g=e.graph.edges.positives(e);g.hasNext();)d=g.next(),d=this.hafter(d.id,e.graph.edges.positives(e))+this.nheight(d.weight)+Math.min(this.nheight(e.data.exit),this.extraWidth),d>h&&(h=d);if(h>this.padAfter)this.padAfter=h}}this.padAfter+=2;var k=this.g.select("g.edges");k.empty()?k=this.g.append("svg:g").attr("class").string("edges"):k.selectAll("*").remove();b=S.order(I.array(Qa(I.array(this.layout.graph.edges.iterator()))()),function(b,c){var d=a.layout.cell(b.tail).layer-a.layout.cell(b.head).layer,d=a.layout.cell(c.tail).layer-a.layout.cell(c.head).layer-d;return 0!=d?d:G.compare(c.weight,b.weight)});I.each(this.layout.graph.nodes.iterator(),function(b){b.graph.edges.sortPositives(b,function(b,c){var d=a.layout.cell(b.head),e=a.layout.cell(c.head),h=e.layer-d.layer;return 0!=h?h:d.position-e.position});b.graph.edges.sortNegatives(b,function(b,c){var d=a.layout.cell(b.tail),e=a.layout.cell(c.tail);return d.layer>e.layer?1:d.position-e.position})});c=b.slice();c.sort(function(b,c){var d=a.layout.cell(b.tail);return a.layout.cell(c.tail).position-d.position});this.thinbackedges?I.each(Qa(c)(),function(b){if(!(0>=b.weight)){var c=a.layout.cell(b.head),d=a.layout.cell(b.tail);if(!(c.layer>d.layer)){var e=a.nheight(b.weight),h=5+a.cafter(b.id,b.tail.positives())*(a.backEdgeSpacing+1),g=5+a.cafter(b.id,b.head.negatives())*(a.backEdgeSpacing+1),d=a.layerWidth/2+a.xlayer(d.layer),i=-a.layerWidth/2+a.xlayer(c.layer),j=a.ynode(b.tail)+a.ydiagonal(b.id,b.tail.positives()),Td=a.nheight(b.head.data.entry)+a.ynode(b.head)+a.ydiagonal(b.id,b.head.negatives()),kb=k.append("svg:g");kb.append("svg:rect").attr("x")["float"](d).attr("y")["float"](j).attr("width")["float"](a.chunkWidth).attr("height")["float"](e).attr("class").string("edge fill fill-"+a.styleEdgeBackward+" stroke stroke-"+a.styleEdgeBackward).onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoveredge),(d+i)/2,f,b));kb.append("svg:rect").attr("x")["float"](i-a.chunkWidth).attr("y")["float"](Td).attr("width")["float"](a.chunkWidth).attr("height")["float"](e).attr("class").string("edge fill fill-"+a.styleEdgeBackward+" stroke stroke-"+a.styleEdgeBackward).onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoveredge),(d+i)/2,f,b));c=new l.HookConnector(kb,"stroke stroke-"+a.styleEdgeBackward);a.addToMap(b.id,"edge",kb);c.update(d+a.chunkWidth,j+e/2,i-a.chunkWidth,Td+e/2,f,h,g);c.g.onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoveredge),(d+i)/2,f,b));null!=a.edgeClass&&(e=a.edgeClass({head:b.head.data,tail:b.tail.data,edgeweight:b.weight},a.dependentVariable.stats),null!=e&&c.addClass(e));T.storeColorForSelection(c.g,"stroke",c.line.style("stroke").get());if(null!=a.clickEdge)c.g.onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(v(a,a.edgeClickWithEdge),b));a.stackbackedges&&(f+=1+a.backEdgeSpacing)}}}):I.each(Qa(c)(),function(b){if(!(0>=b.weight)){var c=a.layout.cell(b.head),d=a.layout.cell(b.tail);if(!(c.layer>d.layer)){var e=a.nheight(b.weight),h=new l.HookConnectorArea(k,"fill fill-"+a.styleEdgeBackward,"stroke stroke-"+a.styleEdgeBackward),g=a.hafter(b.id,b.tail.positives())+Math.min(a.extraWidth,a.nheight(b.tail.data.exit)),i=a.hafter(b.id,b.head.negatives()),d=a.layerWidth/2+a.xlayer(d.layer),c=-a.layerWidth/2+a.xlayer(c.layer),j=a.ynode(b.tail)+a.ydiagonal(b.id,b.tail.positives()),Td=a.nheight(b.head.data.entry)+a.ynode(b.head)+a.ydiagonal(b.id,b.head.negatives());a.addToMap(b.id,"edge",h.g);h.update(d,j,c,Td,e,f,g,i);h.g.onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoveredge),(d+c)/2,f+e/2,b));null!=a.edgeClass&&(g=a.edgeClass({head:b.head.data,tail:b.tail.data,edgeweight:b.weight},a.dependentVariable.stats),null!=g&&h.addClass(g));T.storeColorForSelection(h.g,"fill",h.area.style("fill").get());if(null!=a.clickEdge)h.g.onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(v(a,a.edgeClickWithEdge),b));a.stackbackedges&&(f+=e+a.backEdgeSpacing)}}});I.each(Qa(b)(),function(b){if(!(0>=b.weight)){var c=b.head,d=b.tail,e=a.layout.cell(c),h=a.layout.cell(d);if(!(e.layer<=h.layer)){var h=Math.round(a.layerWidth/2+a.xlayer(h.layer))-.5,e=Math.round(-a.layerWidth/2+a.xlayer(e.layer))-.5,d=a.ynode(d)+a.ydiagonal(b.id,d.graph.edges.positives(d)),c=a.ynode(c)+a.nheight(c.data.entry)+a.ydiagonal(b.id,c.graph.edges.negatives(c)),f=a.nheight(b.weight),g=new l.DiagonalArea(k,"fill fill-"+a.styleEdgeForward,"stroke stroke-"+a.styleEdgeForward);g.update(h,d,e,c,f,f);if(null!=a.edgeClass){var o=a.edgeClass({head:b.head.data,tail:b.tail.data,edgeweight:b.weight},a.dependentVariable.stats);null!=o&&g.addClass(o)}a.addToMap(b.id,"edge",g.g);g.g.onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoveredge),(h+e)/2,(d+c+f)/2,b));T.storeColorForSelection(g.g,"fill",g.area.style("fill").get());if(null!=a.clickEdge)g.g.onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(v(a,a.edgeClickWithEdge),b))}}});this.layout.each(function(b,c){if(!(0>=c.data.exit||0>=a.extraWidth||null!=a.displayExit&&!a.displayExit(c.data,a.dependentVariable.stats))){var d=new l.ElbowArea(k,"fill fill-"+a.styleexit,"stroke stroke-"+a.styleexit),e=a.nheight(c.data.exit),h=a.layerWidth/2+a.xlayer(b.layer),f=a.ynode(c)+a.ydiagonal(null,c.graph.edges.positives(c)),g=Math.max(0,Math.min(e-3,a.extraRadius));d.update(l.Orientation.RightBottom,e,h,f+e,g,a.extraWidth,0,a.extraHeight);if(null!=a.labelEdge){var o,i=a.labelEdge({tail:c,head:null,nodeweight:c.data.weight,edgeweight:c.data.exit},a.dependentVariable.stats);o=new l.Label(k,!0,!0,!1);o.addClass("edge");o.place(h,f+e/2,0);o.set_anchor(l.GridAnchor.Left);o.set_text(i);o.getSize().height>.75*e&&o.destroy()}d.g.onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoverexit),h+g+(-g+Math.min(a.extraWidth,e))/2,a.ynode(c)+a.hnode(c)+g+a.extraHeight,c));null!=a.edgeClass&&(e=a.edgeClass({head:null,tail:c.data,edgeweight:c.data.exit},a.dependentVariable.stats),null!=e&&d.addClass(e));T.storeColorForSelection(d.g,"fill",d.area.style("fill").get());if(null!=a.clickEdge)d.g.onNode("click",function(a,b,c){return function(d,e){return a(b,c,d,e)}}(v(a,a.edgeClickWithNode),c,!0));a.addToMap(c.id,"exit",d.g)}});this.layout.each(function(b,c){if(!(0>=c.data.entry||0>=a.extraWidth||null!=a.displayEntry&&!a.displayEntry(c.data,a.dependentVariable.stats))){var d=new l.ElbowArea(k,"fill fill-"+a.styleentry,"stroke stroke-"+a.styleentry),e=a.nheight(c.data.entry),h=Math.max(0,Math.min(e-3,a.extraRadius)),f=-a.layerWidth/2+a.xlayer(b.layer);d.update(l.Orientation.LeftTop,e,f,a.ynode(c),h,a.extraWidth,0,a.extraHeight);if(null!=a.labelEdge){var g,o=a.labelEdge({tail:null,head:c,nodeweight:c.data.weight,edgeweight:c.data.entry},a.dependentVariable.stats);g=new l.Label(k,!0,!0,!1);g.addClass("edge");g.place(f,a.ynode(c)+e/2,0);g.set_anchor(l.GridAnchor.Right);g.set_text(o);g.getSize().height>.75*e&&g.destroy()}d.g.onNode("mouseover",function(a,b,c,d){return function(e,h){return a(b,c,d,e,h)}}(v(a,a.onmouseoverentry),f-h+(h-Math.min(a.extraWidth,e))/2,a.ynode(c)-h-a.extraHeight,c));null!=a.edgeClass&&(e=a.edgeClass({head:c.data,tail:null,edgeweight:c.data.entry},a.dependentVariable.stats),null!=e&&d.addClass(e));T.storeColorForSelection(d.g,"fill",d.area.style("fill").get());if(null!=a.clickEdge)d.g.onNode("click",function(a,b,c){return function(d,e){return a(b,c,d,e)}}(v(a,a.edgeClickWithNode),c,!1));a.addToMap(c.id,"entry",d.g)}});null!=this.labelEdge&&I.each(Qa(b)(),function(b){if(!(0>=b.weight)){var c=b.tail;if(!a.isdummy(c)){var d=a.layout.cell(c),e=a.nheight(b.weight),h,f=a.labelEdge(a.edgeData(b),a.dependentVariable.stats);h=new l.Label(k,!0,!0,!1);h.addClass("edge");h.place(a.layerWidth/2+a.xlayer(d.layer)+2,a.ynode(c)+a.ydiagonal(b.id,c.graph.edges.positives(c))+e/2,0);h.set_anchor(l.GridAnchor.Left);h.set_text(f);h.getSize().height>.75*e&&h.destroy()}}});b=this.g.selectAll("g.layer").data(this.layout.layers()).enter().append("svg:g").attr("class").string("layer").append("svg:line").attr("class").stringf(function(a,b){return"rule rule-"+b}).attr("x1")["float"](0).attr("x2")["float"](0).attr("y1")["float"](0).attr("y2")["float"](this.height).update().attr("transform").stringf(function(b,c){return"translate("+a.xlayer(c)+",0)"}).exit().remove().update().selectAll("g.node").dataf(function(b,c){return a.layout.layer(c)});c=b.enter().append("svg:g").attr("class").string("node");0<this.layerWidth&&(e=c.append("svg:rect").attr("class").stringf(function(b){return"fill fill-"+(a.isdummy(b)?a.styleEdgeForward+" nonode":a.styleNode+" node")}).attr("x")["float"](-this.layerWidth/2).attr("y")["float"](0).attr("width")["float"](Math.round(this.layerWidth)).attr("height").floatf(v(this,this.hnode)),c.each(function(b){a.addToMap(b.id,"node",O.selectNode(la.current));null!=a.nodeClass&&(b=a.nodeClass(b.data,a.dependentVariable.stats),null!=b&&O.selectNode(la.current).classed().add(b))}),T.storeColorForSelection(c,"fill",e.style("fill").get()),c.append("svg:line").attr("class").stringf(function(b){return"node stroke stroke-"+(a.isdummy(b)?a.styleEdgeForward:a.styleNode)}).attr("x1")["float"](-this.layerWidth/2).attr("y1")["float"](0).attr("x2")["float"](this.layerWidth/2).attr("y2")["float"](0),c.append("svg:line").attr("class").stringf(function(b){return"node stroke stroke-"+(a.isdummy(b)?a.styleEdgeForward:a.styleNode)}).attr("x1")["float"](-this.layerWidth/2).attr("y1").floatf(v(this,this.hnode)).attr("x2")["float"](this.layerWidth/2).attr("y2").floatf(v(this,this.hnode)));b.update().attr("transform").stringf(function(b){return"translate(0,"+a.ynode(b)+")"});c.each(function(b){var c=O.selectNode(la.current);if(!a.isdummy(b)){var d=a.hnode(b),e;if(null!=a.labelDataPoint)for(var h=a.labelDataPoint(b.data.dp,a.dependentVariable.stats).split("\n"),f=null,g,o=0,k=0,i=h.length;k<i;){o=k++;g=h[o];e=new l.Label(c,!0,!0,!1);e.addClass("node");0==o&&e.addClass("first");o=3;null!=f&&(o+=f.y+f.getSize().height);e.place(-a.layerWidth/2+6,o,0);e.set_anchor(l.GridAnchor.TopLeft);e.set_text(g);if(e.y+e.getSize().height>d){e.destroy();break}f=e}d=!1;null!=a.imagePath&&!a.isdummy(b)&&(e=a.imagePath(b.data.dp),null!=e&&(d=!0,c.append("svg:g").attr("transform").string("translate("+Math.round(-a.imageWidth/2)+","+Math.round(-a.imageHeight-a.imageSpacing)+")").append("svg:image").attr("preserveAspectRatio").string("xMidYMid slice").attr("width")["float"](a.imageWidth).attr("height")["float"](a.imageHeight).attr("xlink:href").string(e)));null!=a.labelNode&&(e=d?new l.Label(c,!0,!0,!0):new l.Label(c,!0,!1,!1),e.set_anchor(l.GridAnchor.Bottom),e.place(0,-a.labelNodeSpacing,0),e.set_text(a.labelNode(b.data.dp,a.dependentVariable.stats)))}});c.each(function(b){var c=O.selectNode(la.current);c.onNode("mouseover",function(a,b){return function(c,d){return a(b,c,d)}}(v(a,a.onmouseovernode),b));if(null!=a.click)c.onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(v(a,a.nodeclick),b))});this.ready.dispatch()},data:function(a){var b=this;this.layout=a.clone();for(var a=I.filter(this.layout.graph.nodes.iterator(),function(a){return b.isdummy(a)}).filter(function(a){a=a.graph.edges.positives(a).next();if(null==a)return!1;var c=b.layout.cell(a.head);return b.layout.cell(a.tail).layer>c.layer}),c=this.layout.layers(),d=0;d<a.length;){var e=a[d];++d;var h=this.layout.cell(e),f=e.graph.edges.positives(e).next(),g=e.graph.edges.negatives(e).next();c[h.layer].splice(h.position,1);this.layout.graph.edges.create(g.tail,f.head,f.weight,f.data);e.graph.nodes._remove(e)}this.redraw()},setVariables:function(a,b){this.dependentVariable=b[0]},maphi:null,mapelements:null,dependentVariable:null,styleEdgeForward:null,styleEdgeBackward:null,styleexit:null,styleentry:null,styleNode:null,layerstarty:null,padAfter:null,padBefore:null,availableheight:null,maxweight:null,layout:null,chunkWidth:null,displayExit:null,displayEntry:null,edgeClass:null,nodeClass:null,clickEdge:null,imagePath:null,labelNode:null,labelEdgeOver:null,labelEdge:null,thinbackedges:null,stackbackedges:null,labelNodeSpacing:null,imageSpacing:null,imageHeight:null,imageWidth:null,extraRadius:null,extraHeight:null,backEdgeSpacing:null,extraWidth:null,dummySpacing:null,nodeSpacing:null,layerWidth:null,__class__:n.Sankey});n.ScatterGraph=function(a){n.CartesianChart.call(this,a);this.addClass("scatter-graph");this.chart=this.g.append("svg:g")};i["rg.svg.chart.ScatterGraph"]=n.ScatterGraph;n.ScatterGraph.__name__=["rg","svg","chart","ScatterGraph"];n.ScatterGraph.__super__=n.CartesianChart;n.ScatterGraph.prototype=A(n.CartesianChart.prototype,{onclick:function(a,b){this.click(b,a)},onmouseover:function(a,b){var c=this.labelDataPointOver(j.field(b,"__dhx_data__"),a);if(null==c)this.tooltip.hide();else{var d=O.selectNode(b),d=n.Coords.fromTransform(d.attr("transform").get());this.tooltip.html(c.split("\n").join("<br>"));this.moveTooltip(d[0],d[1],null)}},getTranslatePointf:function(a){var b=v(this,this.x),c=this.getY1(a);return function(a,e){return"translate("+b(a)+","+c(a,e)+")"}},redraw:function(){var a=this;if(!(null==this.dps||null==this.dps[0]||null==this.dps[0][0])){var b=this.chart.selectAll("g.group").data(this.dps);b.enter().append("svg:g").attr("class").stringf(function(a,b){return"group group-"+b});b.exit().remove();for(var b=0,c=this.dps.length;b<c;){var d=[b++],e=this.dps[d[0]],h=this.chart.select("g.group-"+d[0]),f=[this.yVariables[d[0]].stats],e=h.selectAll("g.symbol").data(e),g=function(){return function(a,b){return function(){return function(c,d){return a(b,c,d)}}()}}()(v(this,this.onclick),f[0]),i=function(){return function(a,b){return function(){return function(c,d){return a(b,c,d)}}()}}()(v(this,this.onmouseover),f[0]),h=e.enter().append("svg:g").attr("class").stringf(this.classf(d[0],"symbol")).attr("transform").stringf(this.getTranslatePointf(d[0]));if(null!=this.click)h.on("click",g);if(null!=this.labelDataPointOver)h.onNode("mouseover",i);K.SVGSymbolBuilder.generate(h,f[0],this.symbol,this.symbolStyle);null!=this.labelDataPoint&&(g=[this.chart.append("svg:g").attr("class").string("datapoint-labels")],h.eachNode(function(b,c,d){return function(e,h){var f=j.field(e,"__dhx_data__");K.PointLabel.label(b[0],a.labelDataPoint(f,c[0]),a.x(f),a.getY1(d[0])(f,h)-a.labelDataPointVerticalOffset,a.labelDataPointShadow,a.labelDataPointOutline)}}(g,f,d)));e.update().selectAll("g.symbol").dataf(function(){return function(a){return a}}()).update().attr("transform").stringf(this.getTranslatePointf(d[0]));e.exit().remove()}this.ready.dispatch()}},resize:function(){n.CartesianChart.prototype.resize.call(this);this.redraw()},data:function(a){this.dps=a;this.redraw()},classf:function(a,b){return function(){return b+" stroke-"+a+" fill-"+a}},getY1:function(a){var b=this.height,c=this.yVariables[a];return function(a){a=j.field(a,c.type);a=c.axis.scale(c.min(),c.max(),a)*b;return b-a}},x:function(a){a=j.field(a,this.xVariable.type);return this.xVariable.axis.scale(this.xVariable.min(),this.xVariable.max(),a)*this.width},dps:null,chart:null,symbolStyle:null,symbol:null,__class__:n.ScatterGraph});n.StreamEffect={__ename__:["rg","svg","chart","StreamEffect"],__constructs__:["NoEffect","GradientHorizontal","GradientVertical"]};n.StreamEffect.NoEffect=["NoEffect",0];n.StreamEffect.NoEffect.toString=q;n.StreamEffect.NoEffect.__enum__=n.StreamEffect;n.StreamEffect.GradientHorizontal=function(a){a=["GradientHorizontal",1,a];a.__enum__=n.StreamEffect;a.toString=q;return a};n.StreamEffect.GradientVertical=function(a){a=["GradientVertical",2,a];a.__enum__=n.StreamEffect;a.toString=q;return a};n.StreamEffects=function(){};i["rg.svg.chart.StreamEffects"]=n.StreamEffects;n.StreamEffects.__name__=["rg","svg","chart","StreamEffects"];n.StreamEffects.getLightness=function(a,b){return null==a?b:t.parseFloat(a)};n.StreamEffects.parse=function(a){a=a.toLowerCase().split(":");switch(a.shift()){case"gradient":case"gradientv":case"gradientvert":case"gradientvertical":return n.StreamEffect.GradientVertical(n.StreamEffects.getLightness(a.pop(),.75));case"gradienth":case"gradienthoriz":case"gradienthorizontal":return n.StreamEffect.GradientHorizontal(n.StreamEffects.getLightness(a.pop(),.75));default:return n.StreamEffect.NoEffect}};n.StreamGraph=function(a){n.CartesianChart.call(this,a);this.interpolator=p.LineInterpolator.Cardinal(.6);this.gradientLightness=.75;this.gradientStyle=1};i["rg.svg.chart.StreamGraph"]=n.StreamGraph;n.StreamGraph.__name__=["rg","svg","chart","StreamGraph"];n.StreamGraph.__super__=n.CartesianChart;n.StreamGraph.prototype=A(n.CartesianChart.prototype,{applyGradientH:function(a){for(var b=O.selectNode(la.current),c=f.Hsl.toHsl(T.parse(b.style("fill").get(),"#cccccc")),d="rg_stream_gradient_v_"+n.StreamGraph.vid++,e=this.defs.append("svg:linearGradient").attr("gradientUnits").string("objectBoundingBox").attr("class").string("x").attr("id").string(d).attr("x1").string("0%").attr("x2").string("100%").attr("y1").string("0%").attr("y2").string("0%"),h=a[0].coord.x,g=a[a.length-1].coord.x-h,i=S.floatMax(a,function(a){return a.coord.y}),l=0,k=a.length;l<k;){var j=l++,j=a[j],m=T.applyLightness(c,this.gradientLightness,j.coord.y/i);e.append("svg:stop").attr("offset").string(Math.round(1e4*((j.coord.x-h)/g))/100+"%").attr("stop-color").string(m.hex("#")).attr("stop-opacity")["float"](1)}b.attr("style").string("fill:url(#"+d+")")},applyGradientV:function(){var a=O.selectNode(la.current),b=T.parse(a.style("fill").get(),"#cccccc"),c="rg_stream_gradient_h_"+b.hex("");if(this.defs.select("#"+c).empty()){var d=T.applyLightness(f.Hsl.toHsl(b),this.gradientLightness).toRgbString(),e=this.defs.append("svg:linearGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string(c).attr("x1").string("0%").attr("x2").string("0%").attr("y1").string("100%").attr("y2").string("0%").attr("spreadMethod").string("pad");e.append("svg:stop").attr("offset").string("0%").attr("stop-color").string(d).attr("stop-opacity")["float"](1);e.append("svg:stop").attr("offset").string("100%").attr("stop-color").string(b.toRgbString()).attr("stop-opacity")["float"](1)}a.attr("style").string("fill:url(#"+c+")")},prepareData:function(){var a=this;this.defs.selectAll("linearGradient.h").remove();var b=function(a,b,c){return function(d){return a(b,c,d)}}((Q=this.xVariable.axis,v(Q,Q.scale)),this.xVariable.min(),this.xVariable.max()),c=this.xVariable.type,d=function(a,b,c){return function(d){return a(b,c,d)}}((Q=this.yVariables[0].axis,v(Q,Q.scale)),this.yVariables[0].min(),this.yVariables[0].max()),e=this.yVariables[0].type,h=S.floatMax(this.dps,function(a){return a.length})|0,f=I.map(u.iter(this.dps),function(f){return I.map(u.iter(P.range(0,h)),function(h,g){var o=f[g];if(null==o){a:{for(var o=0,i=a.dps.length;o<i;){var l=o++;if(null!=a.dps[l][g]){o=a.dps[l][g];break a}}o=null}o={x:b(j.field(o,c)),y:0}}else o={x:b(j.field(o,c)),y:Math.max(0,d(j.field(o,e)))};return o})}),f=(new R.layout.Stack).offset(R.layout.StackOffset.Silhouette).order(R.layout.StackOrder.DefaultOrder).stack(f);this.transformedData=I.map(u.iter(f),function(b,c){return I.map(u.iter(b),function(b,d){return{coord:b,dp:a.dps[c][d]}})});this.stats=this.yVariables[0].stats;this.maxy=S.floatMax(f,function(a){return S.floatMax(a,function(a){return a.y0+a.y})});this.area=(new p.Area).interpolator(this.interpolator).x(function(b){return b.coord.x*a.width}).y0(function(b){return a.height-b.coord.y0*a.height/a.maxy}).y1(function(b){return a.height-(b.coord.y+b.coord.y0)*a.height/a.maxy})},onclick:function(a,b){null!=this.click&&this.click(this.getDataAtNode(a,b).dp,this.stats)},onover:function(a,b){if(null!=this.labelDataPointOver){var c=this.getDataAtNode(a,b);this.tooltip.html(this.labelDataPointOver(c.dp,this.stats).split("\n").join("<br>"));this.moveTooltip(c.coord.x*this.width,this.height-(c.coord.y+c.coord.y0)*this.height/this.maxy,T.extractColor(a))}},getDataAtNode:function(a,b){var c=Ec.mouse(a)[0],c=G.uninterpolatef(this.transformedData[b][0].coord.x,S.last(this.transformedData[b]).coord.x)(c/this.width);j.field(a,"__dhx_data__");return S.nearest(this.transformedData[b],c,function(a){return a.coord.x})},redraw:function(){if(null!=this.transformedData){var a=this.g.selectAll("g.group").data(this.transformedData);a.update().select("path.line").attr("d").stringf((Q=this.area,v(Q,Q.shape)));var b=a.enter().append("svg:g").attr("class").string("group").append("svg:path").attr("class").stringf(function(a,b){return"line fill-"+b+" stroke-"+b}).attr("d").stringf((Q=this.area,v(Q,Q.shape))).onNode("mousemove",v(this,this.onover)).onNode("click",v(this,this.onclick));T.storeColorForSelection(b);0!=this.gradientStyle&&b.each(1==this.gradientStyle?v(this,this.applyGradientV):v(this,this.applyGradientH));a.exit().remove();this.ready.dispatch()}},data:function(a){this.dps=a;this.prepareData();this.redraw()},setVariables:function(a,b,c,d){n.CartesianChart.prototype.setVariables.call(this,a,b,c,d)},init:function(){n.CartesianChart.prototype.init.call(this);this.defs=this.g.append("svg:defs");this.g.classed().add("stream-chart")},maxy:null,defs:null,stats:null,transformedData:null,area:null,dps:null,gradientStyle:null,gradientLightness:null,interpolator:null,__class__:n.StreamGraph});ta={RulesOrtho:function(a,b){U.Layer.call(this,a);this.orientation=b;this.displayAnchorLine=this.displayMajor=this.displayMinor=!0;this.g.classed().add("tickmarks")}};i["rg.svg.layer.RulesOrtho"]=ta.RulesOrtho;ta.RulesOrtho.__name__=["rg","svg","layer","RulesOrtho"];ta.RulesOrtho.__super__=U.Layer;ta.RulesOrtho.prototype=A(U.Layer.prototype,{tickClass:function(a){return a.get_major()?"major":null},y2Vertical:function(){return this.height},y2Horizontal:function(){return 0},x2Vertical:function(){return 0},x2Horizontal:function(){return this.width},y1Vertical:function(){return 0},y1Horizontal:function(){return 0},x1Vertical:function(){return 0},x1Horizontal:function(){return 0},translateVertical:function(a){return"translate("+a.get_delta()*this.width+",0)"},translateHorizontal:function(a){return"translate(0,"+(this.height-a.get_delta()*this.height)+")"},init:function(){this.initf();this.displayAnchorLine&&(this.g.append("svg:line").attr("class").string("anchor-line"),this.updateAnchorLine())},initf:function(){switch(this.orientation[1]){case 1:this.translate=v(this,this.translateHorizontal);this.x1=v(this,this.x1Horizontal);this.y1=v(this,this.y1Horizontal);this.x2=v(this,this.x2Horizontal);this.y2=v(this,this.y2Horizontal);break;case 0:this.translate=v(this,this.translateVertical),this.x1=v(this,this.x1Vertical),this.y1=v(this,this.y1Vertical),this.x2=v(this,this.x2Vertical),this.y2=v(this,this.y2Vertical)}},redraw:function(){var a=this.axis.ticks(this.min,this.max,this.maxTicks()),a=this.g.selectAll("g.rule").data(a,v(this,this.id)),b=a.enter().append("svg:g").attr("class").string("rule").attr("transform").stringf(this.translate);this.displayMinor&&b.filter(function(a){return!a.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(v(this,this.tickClass));this.displayMajor&&b.filter(function(a){return a.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(v(this,this.tickClass));a.update().attr("transform").stringf(this.translate);a.exit().remove()},id:function(a){return""+t.string(a.get_value())},maxTicks:function(){var a;switch(this.orientation[1]){case 1:a=this.width;break;case 0:a=this.height}return Math.round(a/2.5)},updateAnchorLine:function(){var a=this.g.select("line.anchor-line");switch(this.orientation[1]){case 1:a.attr("x1")["float"](0).attr("y1")["float"](0).attr("x2")["float"](0).attr("y2")["float"](this.height);break;case 0:a.attr("x1")["float"](0).attr("y1")["float"](this.height).attr("x2")["float"](this.width).attr("y2")["float"](this.height)}},update:function(a,b,c){this.axis=a;this.min=b;this.max=c;this.redraw()},resize:function(){null!=this.axis&&(this.displayAnchorLine&&this.updateAnchorLine(),this.redraw())},max:null,min:null,axis:null,y2:null,x2:null,y1:null,x1:null,translate:null,displayAnchorLine:null,displayMajor:null,displayMinor:null,orientation:null,__class__:ta.RulesOrtho});ta.TickmarksOrtho=function(a,b){U.Layer.call(this,a);this.anchor=b;this.displayLabel=this.displayMajor=this.displayMinor=!0;this.displayAnchorLine=!1;this.lengthMinor=2;this.lengthMajor=5;this.paddingMajor=this.paddingMinor=1;this.paddingLabel=10;this.g.classed().add("tickmarks")};i["rg.svg.layer.TickmarksOrtho"]=ta.TickmarksOrtho;ta.TickmarksOrtho.__name__=["rg","svg","layer","TickmarksOrtho"];ta.TickmarksOrtho.__super__=U.Layer;ta.TickmarksOrtho.prototype=A(U.Layer.prototype,{tickClass:function(a){return a.get_major()?"major":null},y2Right:function(){return 0},y2Left:function(){return 0},y2Bottom:function(a){return-(a.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor)},y2Top:function(a){return a.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor},x2Right:function(a){return-(a.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor)},x2Left:function(a){return a.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor},x2Bottom:function(){return 0},x2Top:function(){return 0},y1Right:function(){return 0},y1Left:function(){return 0},y1Bottom:function(a){return-(a.get_major()?this.paddingMajor:this.paddingMinor)},y1Top:function(a){return a.get_major()?this.paddingMajor:this.paddingMinor},x1Right:function(a){return-(a.get_major()?this.paddingMajor:this.paddingMinor)},x1Left:function(a){return a.get_major()?this.paddingMajor:this.paddingMinor},x1Bottom:function(){return 0},x1Top:function(){return 0},translateRight:function(a){return"translate("+this.panel.frame.width+","+(this.panel.frame.height-a.get_delta()*this.panel.frame.height)+")"},translateLeft:function(a){return"translate(0,"+(this.panel.frame.height-a.get_delta()*this.panel.frame.height)+")"},translateBottom:function(a){return"translate("+a.get_delta()*this.panel.frame.width+","+this.panel.frame.height+")"},translateTop:function(a){return"translate("+a.get_delta()*this.panel.frame.width+",0)"},init:function(){this.initf();this.displayAnchorLine&&(this.g.append("svg:line").attr("class").string("anchor-line"),this.updateAnchorLine())},initf:function(){switch(this.anchor[1]){case 0:this.translate=v(this,this.translateTop);this.x1=v(this,this.x1Top);this.y1=v(this,this.y1Top);this.x2=v(this,this.x2Top);this.y2=v(this,this.y2Top);break;case 1:this.translate=v(this,this.translateBottom);this.x1=v(this,this.x1Bottom);this.y1=v(this,this.y1Bottom);this.x2=v(this,this.x2Bottom);this.y2=v(this,this.y2Bottom);break;case 2:this.translate=v(this,this.translateLeft);this.x1=v(this,this.x1Left);this.y1=v(this,this.y1Left);this.x2=v(this,this.x2Left);this.y2=v(this,this.y2Left);break;case 3:this.translate=v(this,this.translateRight),this.x1=v(this,this.x1Right),this.y1=v(this,this.y1Right),this.x2=v(this,this.x2Right),this.y2=v(this,this.y2Right)}if(null==this.labelOrientation){var a;switch(this.anchor[1]){case 0:case 1:this.labelOrientation=l.LabelOrientation.Orthogonal;break;case 2:case 3:this.labelOrientation=l.LabelOrientation.Aligned}}else if(null==this.labelAnchor)switch(this.labelOrientation[1]){case 1:switch(this.anchor[1]){case 0:case 2:this.labelAnchor=l.GridAnchor.Left;break;case 1:case 3:this.labelAnchor=l.GridAnchor.Right}break;case 2:switch(this.anchor[1]){case 0:case 2:this.labelAnchor=l.GridAnchor.Top;break;case 1:case 3:this.labelAnchor=l.GridAnchor.Bottom}}if(null==this.labelAnchor)switch(this.anchor[1]){case 0:this.labelAnchor=l.GridAnchor.Top;break;case 1:this.labelAnchor=l.GridAnchor.Bottom;break;case 2:this.labelAnchor=l.GridAnchor.Left;break;case 3:this.labelAnchor=l.GridAnchor.Right}if(null==this.labelAngle)switch(this.anchor[1]){case 0:this.labelAngle=90;break;case 1:this.labelAngle=90;break;case 2:this.labelAngle=0;break;case 3:this.labelAngle=0}},createLabel:function(a){var b=j.field(a,"__dhx_data__");if(b.get_major()){a=new l.Label(O.selectNode(a),!1,!1,!1);a.set_anchor(this.labelAnchor);a.set_orientation(this.labelOrientation);var c=this.paddingLabel;a.set_text(null==this.tickLabel?b.get_label():this.tickLabel(b.get_value()));switch(this.anchor[1]){case 0:a.place(0,c,this.labelAngle);break;case 1:a.place(0,-c,this.labelAngle);break;case 2:a.place(c,0,this.labelAngle);break;case 3:a.place(-c,0,this.labelAngle)}var d;switch(this.anchor[1]){case 0:case 1:d=a.getSize().height+c;break;case 2:case 3:d=a.getSize().width+c}b=d;if(b>this.desiredSize)this.desiredSize=b}},redraw:function(){this.desiredSize=Math.max(this.paddingMinor+this.lengthMinor,this.paddingMajor+this.lengthMajor);var a=this.axis.ticks(this.min,this.max,this.maxTicks()),a=this.g.selectAll("g.tick").data(a,v(this,this.id)),b=a.enter().append("svg:g").attr("class").string("tick").attr("transform").stringf(this.translate);this.displayMinor&&b.filter(function(a){return!a.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(v(this,this.tickClass));this.displayMajor&&b.filter(function(a){return a.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(v(this,this.tickClass));this.displayLabel&&b.eachNode(v(this,this.createLabel));a.update().attr("transform").stringf(this.translate);a.exit().remove()},id:function(a){return""+t.string(a.get_value())},maxTicks:function(){var a;switch(this.anchor[1]){case 2:case 3:a=this.height;break;case 0:case 1:a=this.width}return Math.round(a/2.5)},updateAnchorLine:function(){var a=this.g.select("line.anchor-line");switch(this.anchor[1]){case 0:a.attr("x1")["float"](0).attr("y1")["float"](0).attr("x2")["float"](this.panel.frame.width).attr("y2")["float"](0);break;case 1:a.attr("x1")["float"](0).attr("y1")["float"](this.panel.frame.height).attr("x2")["float"](this.panel.frame.width).attr("y2")["float"](this.panel.frame.height);break;case 2:a.attr("x1")["float"](0).attr("y1")["float"](0).attr("x2")["float"](0).attr("y2")["float"](this.panel.frame.height);break;case 3:a.attr("x1")["float"](this.panel.frame.width).attr("y1")["float"](0).attr("x2")["float"](this.panel.frame.width).attr("y2")["float"](this.panel.frame.height)}},update:function(a,b,c){this.axis=a;this.min=b;this.max=c;this.redraw()},resize:function(){null!=this.axis&&(this.displayAnchorLine&&this.updateAnchorLine(),this.redraw())},max:null,min:null,axis:null,y2:null,x2:null,y1:null,x1:null,translate:null,tickLabel:null,desiredSize:null,labelAngle:null,labelAnchor:null,labelOrientation:null,paddingLabel:null,paddingMajor:null,paddingMinor:null,lengthMajor:null,lengthMinor:null,displayAnchorLine:null,displayLabel:null,displayMajor:null,displayMinor:null,anchor:null,__class__:ta.TickmarksOrtho});ta.Title=function(a,b,c,d,e,h,f){null==f&&(f=!1);null==h&&(h=!1);null==e&&(e="title");null==d&&(d=1);U.Layer.call(this,a);this.addClass(e);this.group=this.g.append("svg:g");this.label=new l.Label(this.group,!1,h,f);this.label.set_orientation(l.LabelOrientation.Orthogonal);
this.set_anchor(c);this.set_padding(d);this.set_text(b);this.resize()};i["rg.svg.layer.Title"]=ta.Title;ta.Title.__name__=["rg","svg","layer","Title"];ta.Title.__super__=U.Layer;ta.Title.prototype=A(U.Layer.prototype,{set_padding:function(a){this.padding=a;switch(this.anchor[1]){case 0:this.label.place(0,0,90);break;case 1:this.label.place(0,0,90);break;case 2:this.label.place(0,0,180);break;case 3:this.label.place(0,0,0)}return a},set_anchor:function(a){switch((this.anchor=a)[1]){case 0:this.label.set_anchor(l.GridAnchor.Top);break;case 1:this.label.set_anchor(l.GridAnchor.Bottom);break;case 2:this.label.set_anchor(l.GridAnchor.Bottom);break;case 3:this.label.set_anchor(l.GridAnchor.Bottom)}return a},set_text:function(a){return this.label.set_text(a)},resize:function(){if(!(null==this.anchor||null==this.width||null==this.padding))switch(this.anchor[1]){case 0:this.group.attr("transform").string("translate("+this.width/2+","+this.padding+")");break;case 3:this.group.attr("transform").string("translate("+(this.width-this.padding)+","+this.height/2+")");break;case 2:this.group.attr("transform").string("translate("+this.padding+","+this.height/2+")");break;case 1:this.group.attr("transform").string("translate("+this.width/2+","+(this.height-this.padding)+")")}},idealHeight:function(){var a=this.label.getSize();return Math.round(function(b){var c;switch(b.anchor[1]){case 2:case 3:c=a.width+b.padding;break;case 0:case 1:c=a.height+b.padding}return c}(this))},group:null,label:null,padding:null,anchor:null,__class__:ta.Title,__properties__:{set_anchor:"set_anchor",set_padding:"set_padding"}});U.Panel=function(a){this.frame=a;a.change=v(this,this.reframe);this._layers=[]};i["rg.svg.panel.Panel"]=U.Panel;U.Panel.__name__=["rg","svg","panel","Panel"];U.Panel.prototype={reframe:function(){this.g.attr("transform").string("translate("+this.frame.x+","+this.frame.y+")");for(var a,b=0,c=this._layers.length;b<c;)a=this._layers[b++],a._resize()},init:function(a){this.g=a.append("svg:g").attr("class").string("panel").attr("transform").string("translate("+this.frame.x+","+this.frame.y+")")},setParent:function(a){null!=this.g&&this.g.remove();this.parent=a;null!=a&&this.init(a.g)},removeLayer:function(a){u.remove(this._layers,a)},addLayer:function(a){u.remove(this._layers,a);this._layers.push(a)},_layers:null,parent:null,g:null,frame:null,__class__:U.Panel};U.Container=function(a,b){U.Panel.call(this,a);this.stack=new pd(a.width,a.height,b);this.panels=[]};i["rg.svg.panel.Container"]=U.Container;U.Container.__name__=["rg","svg","panel","Container"];U.Container.__super__=U.Panel;U.Container.prototype=A(U.Panel.prototype,{reframe:function(){U.Panel.prototype.reframe.call(this);this.stack.setSize(this.frame.width,this.frame.height);this.stack.reflow()},createContainerAt:function(a,b,c){b=new U.Container(new Ta(b),c);this.insertPanel(a,b);return b},createPanelAt:function(a,b){var c=new U.Panel(new Ta(b));this.insertPanel(a,c);return c},createContainer:function(a,b){var c=new U.Container(new Ta(a),b);this.addPanel(c);return c},createPanel:function(a){a=new U.Panel(new Ta(a));this.addPanel(a);return a},removePanel:function(a){if(!u.remove(this.panels,a))return this;this.stack.removeChild(B.__cast(a.frame,Ta));a.setParent(null);return this},addPanels:function(a){for(var b=[],a=Qa(a)();a.hasNext();){var c=a.next();null!=c&&(null!=c.parent&&c.parent.removePanel(c),this.panels.push(c),c.setParent(this),b.push(B.__cast(c.frame,Ta)))}this.stack.addItems(b);return this},addPanel:function(a){return this.addPanels([a])},insertPanel:function(a,b){if(null==b)return this;if(a>=this.stack.get_length())return this.addPanel(b);0>a&&(a=0);null!=b.parent&&b.parent.removePanel(b);this.panels.splice(a,0,b);b.setParent(this);this.stack.insertItem(a,B.__cast(b.frame,Ta));return this},panels:null,stack:null,__class__:U.Container});U.Panels=function(){};i["rg.svg.panel.Panels"]=U.Panels;U.Panels.__name__=["rg","svg","panel","Panels"];U.Panels.absolutePos=function(a){for(var b=a,c=0,d=0;null!=b;)a=b,c+=b.frame.x,d+=b.frame.y,b=b.parent;var e=U.Panels.htmlContainer(a),a=kd.getLeft(),b=kd.getTop();if(null==e)return{x:a,y:b};e=e.getBoundingClientRect();return{x:e.left+c+a,y:e.top+d+b}};U.Panels.svgContainer=function(a){a=a.g.node();do a=a.ownerSVGElement;while(null!=a&&null!=j.field(a.ownerSVGElement,"ownerSVGElement"));return null==a?null:a};U.Panels.htmlContainer=function(a){a=U.Panels.svgContainer(a);return null==a?null:a.parentNode};U.Space=function(a,b,c){this.panel=new Ta(Y.Fill(0,0));U.Container.call(this,this.panel,wa.Vertical);this.init(this.svg=c.append("svg:svg").attr("xmlns").string("http://www.w3.org/2000/svg"));this.resize(a,b)};i["rg.svg.panel.Space"]=U.Space;U.Space.__name__=["rg","svg","panel","Space"];U.Space.__super__=U.Container;U.Space.prototype=A(U.Container.prototype,{resize:function(a,b){this.panel.width==a&&this.panel.height==b||(this.svg.attr("width")["float"](a).attr("height")["float"](b),this.panel.set_layout(0,0,a,b))},svg:null,panel:null,__class__:U.Space});K={PointLabel:function(){}};i["rg.svg.util.PointLabel"]=K.PointLabel;K.PointLabel.__name__=["rg","svg","util","PointLabel"];K.PointLabel.label=function(a,b,c,d,e,h){if(null==b)return null;a=new l.Label(a,!0,e,h);a.set_text(b);a.place(c,d,0);return a};K.RGCss=function(){};i["rg.svg.util.RGCss"]=K.RGCss;K.RGCss.__name__=["rg","svg","util","RGCss"];K.RGCss.colorsInCss=function(){if(null!=K.RGCss.cache)return K.RGCss.cache;var a=O.select("body").append("svg:svg").attr("class").string("rg"),b=K.RGCss.createBlock(a,0).style("fill").get();K.RGCss.cache=[b];for(var c=1;1e3>c;){var d=c++,d=K.RGCss.createBlock(a,d).style("fill").get();if(b==d)break;else K.RGCss.cache.push(d)}a.remove();sb.delay(function(){K.RGCss.cache=null},1e3);return K.RGCss.cache};K.RGCss.numberOfColorsInCss=function(){return K.RGCss.colorsInCss().length};K.RGCss.createBlock=function(a,b){return a.append("svg:rect").attr("class").string("fill-"+b)};K.SVGSymbolBuilder=function(){};i["rg.svg.util.SVGSymbolBuilder"]=K.SVGSymbolBuilder;K.SVGSymbolBuilder.__name__=["rg","svg","util","SVGSymbolBuilder"];K.SVGSymbolBuilder.generate=function(a,b,c,d){null!=c&&(a=K.SVGSymbolBuilder.createElement(a,b,c),T.storeColorForSelection(a,"stroke"),K.SVGSymbolBuilder.applyStyle(a,b,d))};K.SVGSymbolBuilder.createElement=function(a,b,c){a.each(function(a){a=c(a,b);K.SVGSymbolBuilder.createNode(O.selectNode(la.current),a).classed().add("symbol-item")});return a.selectAll(".symbol-item")};K.SVGSymbolBuilder.createNode=function(a,b){if(C.startsWith(b,"image")){var c=K.SVGSymbolBuilder.parseImageArguments(u.substr(b.split(":").shift(),5,null));return K.SVGSymbolBuilder.createImage(a,b.split(":").slice(1).join(":"),c)}return K.SVGSymbolBuilder.createPath(a,b)};K.SVGSymbolBuilder.createPath=function(a,b){return a.append("svg:path").attr("d").string(b)};K.SVGSymbolBuilder.createImage=function(a,b,c){a=a.append("svg:image").attr("xlink:href").string(b).attr("width")["float"](c.width).attr("height")["float"](c.height).attr("preserveAspectRatio").string(c.aspect);a.attr("x")["float"](function(){var a;switch(c.horizontal){case"right":a=-c.width;break;case"center":a=-c.width/2;break;default:a=0}return a}(this));a.attr("y")["float"](function(){var a;switch(c.vertical){case"bottom":a=-c.height;break;case"center":a=-c.height/2;break;default:a=0}return a}(this));return a};K.SVGSymbolBuilder.parseImageArguments=function(a){var b={width:50,height:50,vertical:"center",horizontal:"center",aspect:"none"};a.split(",").map(function(a){return C.trim(a)}).filter(function(a){return""!=a}).forEach(function(a){K.SVGSymbolBuilder.appendOption(b,a)});return b};K.SVGSymbolBuilder.appendOption=function(a,b){if(K.SVGSymbolBuilder.SIZE_PATTERN.match(b))a.width=t.parseInt(K.SVGSymbolBuilder.SIZE_PATTERN.matched(1)),a.height=t.parseInt(K.SVGSymbolBuilder.SIZE_PATTERN.matched(2));else if(K.SVGSymbolBuilder.ALIGN_PATTERN.match(b))a.horizontal=K.SVGSymbolBuilder.ALIGN_PATTERN.matched(1).toLowerCase(),a.vertical=K.SVGSymbolBuilder.ALIGN_PATTERN.matched(2).toLowerCase();else if(K.SVGSymbolBuilder.HORIZONTAL_PATTERN.match(b))a.horizontal=K.SVGSymbolBuilder.HORIZONTAL_PATTERN.matched(1).toLowerCase();else if(K.SVGSymbolBuilder.VERTICAL_PATTERN.match(b))a.vertical=K.SVGSymbolBuilder.VERTICAL_PATTERN.matched(1).toLowerCase()};K.SVGSymbolBuilder.applyStyle=function(a,b,c){null!=c&&a.attr("style").stringf(function(a){return c(a,b)})};K.SymbolCache=function(){this.c=new L.StringMap;this.r=0};i["rg.svg.util.SymbolCache"]=K.SymbolCache;K.SymbolCache.__name__=["rg","svg","util","SymbolCache"];K.SymbolCache.prototype={get:function(a,b){null==b&&(b=100);var c=a+":"+b,d=this.c.get(c);null==d&&(d=j.field(p.Symbol,a)(b),this.c.set(c,d));return d},r:null,c:null,__class__:K.SymbolCache};l={Balloon:function(a,b){null==b&&(b=!0);if(b){for(var c=a.node();null!=c&&"svg"!=c.nodeName;)c=c.parentNode;this.container=null==c?a:O.selectNode(c)}else this.container=a;this.visible=!0;this.duration=350;this.minwidth=30;this.set_preferredSide(2);this.ease=V.Ease.mode(V.EaseMode.EaseOut,V.Equations.cubic);this.set_roundedCorner(5);this.paddingHorizontal=3.5;this.paddingVertical=1.5;this.transition_id=0;this.balloon=this.container.append("svg:g").attr("pointer-events").string("none").attr("class").string("balloon").attr("transform").string("translate("+(this.x=0)+", "+(this.y=0)+")");this.frame=this.balloon.append("svg:g").attr("transform").string("translate(0, 0)").attr("class").string("frame");this.frame.append("svg:path").attr("class").string("shadow").attr("transform").string("translate(1, 1)");this.connectorShapeV=p.Diagonal.forObject();this.connectorShapeH=p.Diagonal.forObject().projection(function(a){return[a[1],a[0]]});this.connector=this.balloon.append("svg:path").attr("class").string("balloon-connector").style("fill").string("none").style("display").string("none").attr("transform").string("translate(0, 0)");this.frame.append("svg:path").attr("class").string("bg");this.labelsContainer=this.frame.append("svg:g").attr("class").string("labels");this.labels=[];c=this.createLabel(0);c.set_text("HELLO");this.set_lineHeight(c.getSize().height);c.destroy()}};i["rg.svg.widget.Balloon"]=l.Balloon;l.Balloon.__name__=["rg","svg","widget","Balloon"];l.Balloon.prototype={redraw:function(){var a=this;if(!(null==this.text||0==this.text.length)){for(var b=this.boxWidth=0,c=0,d=this.labels;c<d.length;)if(b=d[c],++c,(b=Math.ceil(b.getSize().width))>this.boxWidth)this.boxWidth=b;if(0==b){var e=this.text;sb.delay(function(){a.set_text(e)},15)}else this.boxWidth+=2*this.paddingHorizontal,this.boxHeight=this.lineHeight*this.labels.length+2*this.paddingVertical,c=this.frame.selectAll(".bg"),d=c.style("stroke-width").getFloat(),Math.isNaN(d)&&(d=0),this.labelsContainer.attr("transform").string("translate("+this.boxWidth/2+","+(d+this.paddingVertical)+")"),c.transition().ease(this.ease).delay(null,this.duration)}},_moveTo:function(a,b){for(var c=this.get_boundingBox(),d=c.x,e=c.x+c.width,h=c.y,f=c.y+c.height,g=2*this.roundedCorner,i=c=0,k=0,j=0,m=this.preferredSide,n=1;0<n&&5>n;){if(a>=e-g)if(b<=h+g){a-e<h-b?(k=-this.boxWidth+e-a,j=h-b+this.roundedCorner,m=0,c=this.boxWidth-4*this.roundedCorner):(k=-this.boxWidth+e-a-this.roundedCorner,j=h-b,m=1,c=this.roundedCorner);i=1;break}else{if(b>=f-g){a-e<b-f?(k=-this.boxWidth+e-a,j=f-b-this.boxHeight-this.roundedCorner,m=2,c=this.boxWidth-4*this.roundedCorner):(k=-this.boxWidth+e-a-this.roundedCorner,j=f-b-this.boxHeight,m=1,c=this.boxHeight-3*this.roundedCorner);i=1;break}}else if(a<=d+g)if(b<=h+g){d-a<h-b?(k=d-a,j=h-b+this.roundedCorner,c=m=0):(k=d-a+this.roundedCorner,j=h-b,m=3,c=this.roundedCorner);i=1;break}else if(b>=f-g){d-a<b-f?(k=d-a,j=f-b-this.boxHeight-this.roundedCorner,m=2,c=0):(k=d-a+this.roundedCorner,j=f-b-this.boxHeight,m=3,c=this.boxHeight-3*this.roundedCorner);i=1;break}switch(m){case 0:if(b+this.boxHeight+this.roundedCorner>=f){m=2;n++;continue}else if(a<=d+g){m=3;n++;continue}else if(a>=e-g){m=1;n++;continue}k=-this.boxWidth/2;j=this.roundedCorner;c=this.boxWidth/2-2*this.roundedCorner;a-this.boxWidth/2<=d?(n=d-a+this.boxWidth/2,c=Math.max(0,c-n),k+=n):a+this.boxWidth/2>=e&&(n=e-a-this.boxWidth/2,c=Math.min(this.boxWidth-3*this.roundedCorner,c-n),k+=n);b<h&&(i=1,j=h-b+this.roundedCorner);break;case 1:if(a-this.boxWidth-this.roundedCorner<=d){m=3;n++;continue}else if(b<=h+g){m=2;n++;continue}else if(b>=f-g){m=0;n++;continue}k=-this.boxWidth-this.roundedCorner;j=-this.boxHeight/2;c=(this.boxHeight-2*this.roundedCorner)/2;b-this.boxHeight/2<=h?(n=h-b+this.boxHeight/2,c=Math.max(0,c-n),j+=n):b+this.boxHeight/2>=f&&(n=f-b-this.boxHeight/2,c=Math.min(this.boxHeight-3*this.roundedCorner,c-n),j+=n);a>e&&(i=2,k=e-a-this.boxWidth-this.roundedCorner);break;case 2:if(b-this.boxHeight-this.roundedCorner<=h){m=0;n++;continue}else if(a<=d+g){m=3;n++;continue}else if(a>=e-g){m=1;n++;continue}k=-this.boxWidth/2;j=-this.boxHeight-this.roundedCorner;c=this.boxWidth/2-2*this.roundedCorner;a-this.boxWidth/2<=d?(n=d-a+this.boxWidth/2,c=Math.max(this.roundedCorner,c-n),k+=n):a+this.boxWidth/2>=e&&(n=e-a-this.boxWidth/2,c=Math.min(this.boxWidth-3*this.roundedCorner,c-n),k+=n);b>f&&(i=1,j=f-b-this.boxHeight-this.roundedCorner);break;case 3:if(a+this.boxWidth+this.roundedCorner>=e){m=1;n++;continue}else if(b<=h+g){m=2;n++;continue}else if(b>=f-g){m=0;n++;continue}k=this.roundedCorner;j=-this.boxHeight/2;c=(this.boxHeight-2*this.roundedCorner)/2;b-this.boxHeight/2<=h?(n=h-b+this.boxHeight/2,c=Math.max(this.roundedCorner,c-n),j+=n):b+this.boxHeight/2>=f&&(n=f-b-this.boxHeight/2,c=Math.min(this.boxHeight-3*this.roundedCorner,c-n),j+=n);a<d&&(i=2,k=d-a+this.roundedCorner)}n=0}d=null;if(0==i)this.connector.style("display").string("none");else switch(this.connector.style("display").string("block"),d={x0:1,y0:1,x1:1,y1:1},m){case 0:d.x1=k+1+c+2*this.roundedCorner;d.y1=j+1-this.roundedCorner;break;case 1:d.y1=k+1+this.boxWidth+this.roundedCorner;d.x1=j+1+c+this.roundedCorner;break;case 2:d.x1=k+1+c+2*this.roundedCorner;d.y1=j+1+this.boxHeight+this.roundedCorner;break;case 3:d.y1=k+1+-this.roundedCorner,d.x1=j+1+c+this.roundedCorner}this.balloon.attr("transform").string("translate("+(this.x=a)+", "+(this.y=b)+")");this.frame.attr("transform").string("translate("+k+", "+j+")").selectAll("path").attr("d").string(l.BalloonShape.shape(this.boxWidth,this.boxHeight,this.roundedCorner,this.roundedCorner,m,c));0!=i&&this.connector.attr("d").string(0==m%2?this.connectorShapeV.diagonal(d):this.connectorShapeH.diagonal(d))},moveTo:function(a,b,c){null==c&&(c=!0);var d=this;if(c){V.Equations.elasticf();var e=++this.transition_id,h=G.interpolatef(this.x,a,this.ease),f=G.interpolatef(this.y,b,this.ease);oa.timer(function(c){if(e!=d.transition_id)return!0;if(c>d.duration)return d._moveTo(a,b),!0;d._moveTo(h(c/d.duration),f(c/d.duration));return!1},0)}else 0==this.boxWidth?sb.delay(function(a,b,c){return function(){return a(b,c)}}(v(this,this._moveTo),a,b),15):this._moveTo(a,b)},transition_id:null,get_boundingBox:function(){if(null==this.boundingBox)try{this.set_boundingBox(this.container.node().getBBox())}catch(a){return{width:0,height:0,x:0,y:0}}return this.boundingBox},set_boundingBox:function(a){this.boundingBox=a;this.redraw();return a},set_roundedCorner:function(a){this.roundedCorner=a;this.redraw();return a},set_lineHeight:function(a){this.lineHeight=a;this.redraw();return a},set_text:function(a){for(;this.labels.length>a.length;)this.labels.pop().destroy();for(var b=this.labels.length,c=a.length;b<c;){var d=b++;this.labels[d]=this.createLabel(d)}b=0;for(c=a.length;b<c;)d=b++,this.labels[d].set_text(a[d]);this.text=a;this.redraw();return a},set_preferredSide:function(a){this.preferredSide=P.clamp(a,0,3);this.redraw();return a},createLabel:function(a){var b=new l.Label(this.labelsContainer,!0,!1,!1);b.addClass("line-"+a);b.set_anchor(l.GridAnchor.Top);b.set_orientation(l.LabelOrientation.Orthogonal);b.place(0,a*this.lineHeight,90);return b},boundingBox:null,connectorShapeH:null,connectorShapeV:null,ease:null,duration:null,connector:null,labelsContainer:null,frame:null,balloon:null,container:null,labels:null,minwidth:null,preferredSide:null,paddingVertical:null,paddingHorizontal:null,roundedCorner:null,lineHeight:null,visible:null,boxHeight:null,boxWidth:null,y:null,x:null,text:null,__class__:l.Balloon,__properties__:{set_text:"set_text",set_lineHeight:"set_lineHeight",set_roundedCorner:"set_roundedCorner",set_preferredSide:"set_preferredSide",set_boundingBox:"set_boundingBox",get_boundingBox:"get_boundingBox"}};l.BalloonShape=function(){};i["rg.svg.widget.BalloonShape"]=l.BalloonShape;l.BalloonShape.__name__=["rg","svg","widget","BalloonShape"];l.BalloonShape.shape=function(a,b,c,d,e,h){a-=2*c;b-=2*c;d="M"+c+",0";d=0==e?d+("h"+h)+("a"+c+","+c+",0,0,0,"+c+","+-c)+("a"+c+","+c+",0,0,0,"+c+","+c)+("h"+(a-(h+2*c))):d+("h"+a);d+="a"+c+","+c+",0,0,1,"+c+","+c;d=1==e?d+("v"+(h-c))+("a"+c+","+c+",0,0,0,"+c+","+c)+("a"+c+","+c+",0,0,0,"+-c+","+c)+("v"+(b-(h+c))):d+("v"+b);d+="a"+c+","+c+",0,0,1,"+-c+","+c;d=2==e?d+("h"+-(a-(h+2*c)))+("a"+c+","+c+",0,0,0,"+-c+","+c)+("a"+c+","+c+",0,0,0,"+-c+","+-c)+("h"+-h):d+("h"+-a);d+="a"+c+","+c+",0,0,1,"+-c+","+-c;d=3==e?d+("v"+-(b-(h+c)))+("a"+c+","+c+",0,0,0,"+-c+","+-c)+("a"+c+","+c+",0,0,0,"+c+","+-c)+("v"+-(h-c)):d+("v"+-b);return d+("a"+c+","+c+",0,0,1,"+c+","+-c)+"Z"};l.DiagonalArea=function(a,b,c){this.g=a.append("svg:g").attr("class").string("diagonal");this.diagonal=p.Diagonal.forArray().projection(function(a){return[a[1],a[0]]});this.area=this.g.append("svg:path").attr("class").string("diagonal-fill"+(null==b?"":" "+b));this.before=this.g.append("svg:path").attr("class").string("diagonal-stroke before"+(null==c?"":" "+c));this.after=this.g.append("svg:path").attr("class").string("diagonal-stroke after"+(null==c?"":" "+c))};i["rg.svg.widget.DiagonalArea"]=l.DiagonalArea;l.DiagonalArea.__name__=["rg","svg","widget","DiagonalArea"];l.DiagonalArea.prototype={update:function(a,b,c,d,e,h){var f=this.diagonal.diagonal([b,a,d,c]),a=this.diagonal.diagonal([d+h,c,b+e,a]),b=f+"L"+u.substr(a,1,null)+"z";this.before.attr("d").string(f);this.after.attr("d").string(a);this.area.attr("d").string(b)},addClass:function(a){this.g.classed().add(a)},after:null,before:null,area:null,diagonal:null,g:null,__class__:l.DiagonalArea};l.ElbowArea=function(a,b,c){this.g=a.append("svg:g").attr("class").string("elbow");this.area=this.g.append("svg:path").attr("class").string("elbow-fill"+(null==b?"":" "+b));this.outer=this.g.append("svg:path").attr("class").string("elbow-stroke outer"+(null==c?"":" "+c));this.inner=this.g.append("svg:path").attr("class").string("elbow-stroke inner"+(null==c?"":" "+c))};i["rg.svg.widget.ElbowArea"]=l.ElbowArea;l.ElbowArea.__name__=["rg","svg","widget","ElbowArea"];l.ElbowArea.prototype={update:function(a,b,c,d,e,h,f,g){null==g&&(g=10);null==f&&(f=0);null==h&&(h=16);null==e&&(e=3);if(0!=b){var i="",k="",j=0>b?Math.max(h,b):Math.min(h,b);switch(a[1]){case 0:i="M"+(f+c+e)+","+(d+e+g)+"L"+(f+c+e)+","+(d+e)+"A"+Math.abs(e)+","+Math.abs(e)+" 0 0,0 "+(f+c)+","+d+"L"+c+","+d;k="M"+c+","+(d-b)+"L"+(f+c)+","+(d-b)+"A"+Math.abs(j)+","+Math.abs(j)+" 0 0,1 "+(f+c+j)+","+(d-b+j)+"L"+(f+c+j)+","+(d+g+e);break;case 3:this.update(l.Orientation.RightBottom,-b,c,d,-e,-h,-f,-g);return}a=k+"L"+u.substr(i,1,null)+"z";this.inner.attr("d").string(i);this.outer.attr("d").string(k);this.area.attr("d").string(a)}},addClass:function(a){this.g.classed().add(a)},inner:null,outer:null,area:null,g:null,__class__:l.ElbowArea};l.Orientation={__ename__:["rg","svg","widget","Orientation"],__constructs__:"RightBottom,LeftBottom,RightTop,LeftTop,BottomRight,BottomLeft,TopRight,TopLeft".split(",")};l.Orientation.RightBottom=["RightBottom",0];l.Orientation.RightBottom.toString=q;l.Orientation.RightBottom.__enum__=l.Orientation;l.Orientation.LeftBottom=["LeftBottom",1];l.Orientation.LeftBottom.toString=q;l.Orientation.LeftBottom.__enum__=l.Orientation;l.Orientation.RightTop=["RightTop",2];l.Orientation.RightTop.toString=q;l.Orientation.RightTop.__enum__=l.Orientation;l.Orientation.LeftTop=["LeftTop",3];l.Orientation.LeftTop.toString=q;l.Orientation.LeftTop.__enum__=l.Orientation;l.Orientation.BottomRight=["BottomRight",4];l.Orientation.BottomRight.toString=q;l.Orientation.BottomRight.__enum__=l.Orientation;l.Orientation.BottomLeft=["BottomLeft",5];l.Orientation.BottomLeft.toString=q;l.Orientation.BottomLeft.__enum__=l.Orientation;l.Orientation.TopRight=["TopRight",6];l.Orientation.TopRight.toString=q;l.Orientation.TopRight.__enum__=l.Orientation;l.Orientation.TopLeft=["TopLeft",7];l.Orientation.TopLeft.toString=q;l.Orientation.TopLeft.__enum__=l.Orientation;l.GeoMap=function(a,b){var c=this;this.g=a.append("svg:g").attr("class").string("map");this.projection=b;this.map=new L.StringMap;this.ready=!1;this.onReady=new Zb;this.onReady.addOnce(function(){c.ready=!0})};i["rg.svg.widget.GeoMap"]=l.GeoMap;l.GeoMap.__name__=["rg","svg","widget","GeoMap"];l.GeoMap.loadJsonp=function(a,b){Tb.get(a,b,null,null,null)};l.GeoMap.loadJsonAjax=function(a,b){var c=new Ac(a);c.onData=function(a){a=aa.Json.decode(a);b(a)};c.onError=function(b){throw new H.Error("unable to load JSON file '{0}': {1}",[a,b],null,{fileName:"GeoMap.hx",lineNumber:90,className:"rg.svg.widget.GeoMap",methodName:"loadJsonAjax"})};c.request(!1)};l.GeoMap.prototype={set_className:function(a){this.g.attr("class").string("map"+(null==a?"":" "+a));return a},handlerClick:null,handlerDataPointOver:null,onClick:function(a){this.handlerClick(a,this.click)},onMouseOver:function(a,b){this.handlerDataPointOver(b,a,this.labelDataPointOver)},draw:function(a){var b=this,c=null!=this.mapping?function(a){return j.hasField(b.mapping,a)?j.field(b.mapping,a):a}:function(a){return a},d=new p.PathGeoJson;d.set_projection(this.projection);switch(a.type){case"FeatureCollection":for(var e=0,h=a.features.length;e<h;){var f=e++,f=a.features[f],g=d.centroid(f.geometry),i="Point"==f.geometry.type?this.g.append("svg:circle").attr("cx")["float"](g[0]).attr("cy")["float"](g[1]).attr("r")["float"](5):this.g.append("svg:path").attr("d").string(d.path(f.geometry)),k={};k.$centroid=g;k.$data=f.properties;null!=f.id&&this.map.set(c(f.id),{svg:i,dp:k});if(null!=this.labelDataPointOver)i.onNode("mouseover",function(a,b){return function(c,d){return a(b,c,d)}}(v(this,this.onMouseOver),k));if(null!=this.click)i.onNode("click",function(a,b){return function(c,d){return a(b,c,d)}}(v(this,this.onClick),k))}break;case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":throw new H.Error("the type '{0}' is not implemented yet",[a.type],null,{fileName:"GeoMap.hx",lineNumber:133,className:"rg.svg.widget.GeoMap",methodName:"draw"});default:this.g.append("svg:path").attr("d").string(d.path(a))}this.onReady.dispatch()},loadGeoJson:function(a,b,c){var d=this,e=c?l.GeoMap.loadJsonp:l.GeoMap.loadJsonAjax;null==b?e(a,v(this,this.draw)):e(b,function(b){d.mapping=b;e(a,v(d,d.draw))})},load:function(a,b,c,d){switch(b){case"geojson":this.loadGeoJson(a,c,d);break;default:new H.Error("unsupported geographic format '{0}'",null,b,{fileName:"GeoMap.hx",lineNumber:59,className:"rg.svg.widget.GeoMap",methodName:"load"})}},g:null,projection:null,mapping:null,ready:null,colorMode:null,radius:null,labelDataPointOver:null,labelDataPoint:null,click:null,onReady:null,map:null,__class__:l.GeoMap};l.GridAnchor={__ename__:["rg","svg","widget","GridAnchor"],__constructs__:"TopLeft,Top,TopRight,Left,Center,Right,BottomLeft,Bottom,BottomRight".split(",")};l.GridAnchor.TopLeft=["TopLeft",0];l.GridAnchor.TopLeft.toString=q;l.GridAnchor.TopLeft.__enum__=l.GridAnchor;l.GridAnchor.Top=["Top",1];l.GridAnchor.Top.toString=q;l.GridAnchor.Top.__enum__=l.GridAnchor;l.GridAnchor.TopRight=["TopRight",2];l.GridAnchor.TopRight.toString=q;l.GridAnchor.TopRight.__enum__=l.GridAnchor;l.GridAnchor.Left=["Left",3];l.GridAnchor.Left.toString=q;l.GridAnchor.Left.__enum__=l.GridAnchor;l.GridAnchor.Center=["Center",4];l.GridAnchor.Center.toString=q;l.GridAnchor.Center.__enum__=l.GridAnchor;l.GridAnchor.Right=["Right",5];l.GridAnchor.Right.toString=q;l.GridAnchor.Right.__enum__=l.GridAnchor;l.GridAnchor.BottomLeft=["BottomLeft",6];l.GridAnchor.BottomLeft.toString=q;l.GridAnchor.BottomLeft.__enum__=l.GridAnchor;l.GridAnchor.Bottom=["Bottom",7];l.GridAnchor.Bottom.toString=q;l.GridAnchor.Bottom.__enum__=l.GridAnchor;l.GridAnchor.BottomRight=["BottomRight",8];l.GridAnchor.BottomRight.toString=q;l.GridAnchor.BottomRight.__enum__=l.GridAnchor;l.GridAnchors=function(){};i["rg.svg.widget.GridAnchors"]=l.GridAnchors;l.GridAnchors.__name__=["rg","svg","widget","GridAnchors"];l.GridAnchors.parse=function(a){switch(a.toLowerCase()){case"topleft":a=l.GridAnchor.TopLeft;break;case"top":a=l.GridAnchor.Top;break;case"topright":a=l.GridAnchor.TopRight;break;case"left":a=l.GridAnchor.Left;break;case"center":a=l.GridAnchor.Center;break;case"right":a=l.GridAnchor.Right;break;case"bottomleft":a=l.GridAnchor.BottomLeft;break;case"bottom":a=l.GridAnchor.Bottom;break;case"bottomright":a=l.GridAnchor.BottomRight;break;default:a=l.GridAnchor.Center}return a};l.HookConnector=function(a,b){this.g=a.append("svg:g").attr("class").string("hook");this.line=this.g.append("svg:path").attr("class").string("hook-stroke line"+(null==b?"":" "+b))};i["rg.svg.widget.HookConnector"]=l.HookConnector;l.HookConnector.__name__=["rg","svg","widget","HookConnector"];l.HookConnector.lineTo=function(a,b){return"L"+a+","+b};l.HookConnector.quarterTo=function(a,b,c){return"A"+Math.abs(c)+","+Math.abs(c)+" 0 0,"+(0>c?0:1)+" "+a+","+b};l.HookConnector.prototype={createPath:function(a,b,c,d,e,h,f,g,i){var k;k="M"+a+","+b+l.HookConnector.lineTo(a+h-g,b);k+=l.HookConnector.quarterTo(a+h,b+i,g);k+=l.HookConnector.lineTo(a+h,e-i);k+=l.HookConnector.quarterTo(a+h-g,e,g);k+=l.HookConnector.lineTo(c-f+g,e);k+=l.HookConnector.quarterTo(c-f,e-i,g);k+=l.HookConnector.lineTo(c-f,d+i);k+=l.HookConnector.quarterTo(c-f+g,d,g);return k+=l.HookConnector.lineTo(c,d)},update:function(a,b,c,d,e,h,f){a=this.createPath(a,b,c,d,e,h,f,5,5);this.line.attr("d").string(a)},addClass:function(a){this.g.classed().add(a)},line:null,g:null,__class__:l.HookConnector};l.HookConnectorArea=function(a,b,c){this.g=a.append("svg:g").attr("class").string("hook-area");this.area=this.g.append("svg:path").attr("class").string("hook-area-fill"+(null==b?"":" "+b));this.upper=this.g.append("svg:path").attr("class").string("hook-area-stroke upper"+(null==c?"":" "+c));this.lower=this.g.append("svg:path").attr("class").string("hook-area-stroke lower"+(null==c?"":" "+c))};i["rg.svg.widget.HookConnectorArea"]=l.HookConnectorArea;l.HookConnectorArea.__name__=["rg","svg","widget","HookConnectorArea"];l.HookConnectorArea.lineTo=function(a,b){return"L"+a+","+b};l.HookConnectorArea.quarterTo=function(a,b,c){return"A"+Math.abs(c)+","+Math.abs(c)+" 0 0,"+(0>c?0:1)+" "+a+","+b};l.HookConnectorArea.prototype={createPath:function(a,b,c,d,e,h,f,g,i){var k;k="M"+a+","+b+l.HookConnectorArea.lineTo(a+h-g,b);k+=l.HookConnectorArea.quarterTo(a+h,b+i,g);k+=l.HookConnectorArea.lineTo(a+h,e-i);k+=l.HookConnectorArea.quarterTo(a+h-g,e,g);k+=l.HookConnectorArea.lineTo(c-f+g,e);k+=l.HookConnectorArea.quarterTo(c-f,e-i,g);k+=l.HookConnectorArea.lineTo(c-f,d+i);k+=l.HookConnectorArea.quarterTo(c-f+g,d,g);return k+=l.HookConnectorArea.lineTo(c,d)},update:function(a,b,c,d,e,h,f,g){var i=Math.min(5,e),k=this.createPath(a,b,c,d,b>h?h:h+e,f+e,g+e,e,e),a=this.createPath(c,d+e,a,b+e,b>h?h-e:h,-g,-f,-i,i);this.upper.attr("d").string(k);this.lower.attr("d").string(a);this.area.attr("d").string(k+"L"+u.substr(a,1,null)+"z")},addClass:function(a){this.g.classed().add(a)},lower:null,upper:null,area:null,g:null,__class__:l.HookConnectorArea};l.Label=function(a,b,c,d){null==b&&(b=!0);this.shadow=c;this.outline=d;this.g=a.append("svg:g").attr("class").string("label");if(c)this.gshadow=this.g.append("svg:g").attr("transform").string("translate(0,0)"),this.gshadowrot=this.gshadow.append("svg:g"),this.tshadow=this.gshadowrot.append("svg:text").attr("class").string("shadow"+(d?"":" nooutline"));this.gtext=this.g.append("svg:g");if(d)this.toutline=this.gtext.append("svg:text").attr("class").string("outline"+(c?"":" noshadow"));a=S.addIf(S.addIf(["text"],!d,"nooutline"),!c,"noshadow");this.ttext=this.gtext.append("svg:text").attr("class").string(a.join(" "));this.dontFlip=b;d?this.setShadowOffset(1,1.25):this.setShadowOffset(.5,.5);this.angle=this.y=this.x=0;this.set_orientation(l.LabelOrientation.FixedAngle(0));this.set_anchor(l.GridAnchor.Center);this.visible=!0};i["rg.svg.widget.Label"]=l.Label;l.Label.__name__=["rg","svg","widget","Label"];l.Label.prototype={destroy:function(){this.g.remove()},reanchor:function(){if(null!=this.anchor){var a=this.getBB(),b,c,d=this.anchor;if(this.dontFlip)switch(this.orientation[1]){case 1:90<this.angle&&270>this.angle&&(d=function(){var a;switch(d[1]){case 0:a=l.GridAnchor.BottomRight;break;case 1:a=l.GridAnchor.Bottom;break;case 2:a=l.GridAnchor.BottomLeft;break;case 3:a=l.GridAnchor.Right;break;case 4:a=l.GridAnchor.Center;break;case 5:a=l.GridAnchor.Left;break;case 6:a=l.GridAnchor.TopRight;break;case 7:a=l.GridAnchor.Top;break;case 8:a=l.GridAnchor.TopLeft}return a}(this));break;case 2:180<this.angle&&(d=function(){var a;switch(d[1]){case 0:a=l.GridAnchor.BottomRight;break;case 1:a=l.GridAnchor.Bottom;break;case 2:a=l.GridAnchor.BottomLeft;break;case 3:a=l.GridAnchor.Right;break;case 4:a=l.GridAnchor.Center;break;case 5:a=l.GridAnchor.Left;break;case 6:a=l.GridAnchor.TopRight;break;case 7:a=l.GridAnchor.Top;break;case 8:a=l.GridAnchor.TopLeft}return a}(this))}switch(d[1]){case 0:b=0;c=a.height;break;case 1:b=-a.width/2;c=a.height;break;case 2:b=-a.width;c=a.height;break;case 3:b=0;c=a.height/2;break;case 4:b=-a.width/2;c=a.height/2;break;case 5:b=-a.width;c=a.height/2;break;case 6:c=b=0;break;case 7:b=-a.width/2;c=0;break;case 8:b=-a.width,c=0}if(this.outline)this.toutline.attr("x")["float"](b+.5).attr("y")["float"](c-1.5);this.ttext.attr("x")["float"](b+.5).attr("y")["float"](c-1.5);if(this.shadow)this.tshadow.attr("x")["float"](b+.5).attr("y")["float"](c-1.5)}},getBB:function(){var a=this.ttext.node(),b=this.ttext.style("font-size").getFloat();if(null==b||0>=b)try{b=a.getExtentOfChar("A").height}catch(c){b=O.selectNode(a).style("height").getFloat()}var d;try{d=a.getComputedTextLength()}catch(e){d=O.selectNode(a).style("width").getFloat()}return{width:d,height:b}},set_anchor:function(a){this.anchor=a;this.reanchor();return a},set_orientation:function(a){this.orientation=a;this.place(this.x,this.y,this.angle);return a},set_text:function(a){this.text=a;this.outline&&this.toutline.text().string(a);this.ttext.text().string(a);this.shadow&&this.tshadow.text().string(a);this.reanchor();return a},setShadowOffset:function(a,b){this.shadowOffsetX=a;this.shadowOffsetY=b;this.shadow&&this.gshadow.attr("transform").string("translate("+this.shadowOffsetX+","+this.shadowOffsetY+")")},place:function(a,b,c){this.x=Math.isNaN(a)?0:a;this.y=Math.isNaN(b)?0:b;this.angle=c%360;0>this.angle&&(this.angle+=360);this.g.attr("transform").string("translate("+this.x+","+this.y+")");a=this.orientation;switch(a[1]){case 0:c=a[2];this.gtext.attr("transform").string("rotate("+c+")");break;case 1:this.dontFlip&&90<this.angle&&270>this.angle&&(c+=180);this.gtext.attr("transform").string("rotate("+c+")");break;case 2:this.dontFlip&&180<this.angle&&(c-=180),this.gtext.attr("transform").string("rotate("+(-90+c)+")")}this.shadow&&this.gshadowrot.attr("transform").string(this.gtext.attr("transform").get());this.reanchor()},getSize:function(){try{return this.g.node().getBBox()}catch(a){return{width:0,height:0}}},addClass:function(a){this.g.classed().add(a)},_toggleVisibility:function(){this.g.style("opacity")["float"](this.visible?1:0)},hide:function(){if(this.visible)this.visible=!1,this._toggleVisibility()},show:function(){if(!this.visible)this.visible=!0,this._toggleVisibility()},tshadow:null,toutline:null,ttext:null,gshadowrot:null,gtext:null,gshadow:null,g:null,visible:null,outline:null,shadow:null,shadowOffsetY:null,shadowOffsetX:null,dontFlip:null,angle:null,y:null,x:null,anchor:null,orientation:null,text:null,__class__:l.Label,__properties__:{set_text:"set_text",set_orientation:"set_orientation",set_anchor:"set_anchor"}};
l.LabelOrientation={__ename__:["rg","svg","widget","LabelOrientation"],__constructs__:["FixedAngle","Aligned","Orthogonal"]};l.LabelOrientation.FixedAngle=function(a){a=["FixedAngle",0,a];a.__enum__=l.LabelOrientation;a.toString=q;return a};l.LabelOrientation.Aligned=["Aligned",1];l.LabelOrientation.Aligned.toString=q;l.LabelOrientation.Aligned.__enum__=l.LabelOrientation;l.LabelOrientation.Orthogonal=["Orthogonal",2];l.LabelOrientation.Orthogonal.toString=q;l.LabelOrientation.Orthogonal.__enum__=l.LabelOrientation;l.LabelOrientations=function(){};i["rg.svg.widget.LabelOrientations"]=l.LabelOrientations;l.LabelOrientations.__name__=["rg","svg","widget","LabelOrientations"];l.LabelOrientations.parse=function(a){switch(a.split(":")[0].toLowerCase()){case"fixed":case"angle":a=t.parseFloat(a.split(":")[1]);if(null==a||!Math.isFinite(a))throw new H.Error("when 'fixed' is used a number should follow the 'dash' character",null,null,{fileName:"LabelOrientations.hx",lineNumber:27,className:"rg.svg.widget.LabelOrientations",methodName:"parse"});return l.LabelOrientation.FixedAngle(a);case"ortho":case"orthogonal":return l.LabelOrientation.Orthogonal;case"align":case"aligned":return l.LabelOrientation.Aligned;case"horiz":case"horizontal":return l.LabelOrientation.FixedAngle(0);default:throw new H.Error("invalid filter orientation '{0}'",null,a,{fileName:"LabelOrientations.hx",lineNumber:36,className:"rg.svg.widget.LabelOrientations",methodName:"parse"})}};l.Sensible=function(){};i["rg.svg.widget.Sensible"]=l.Sensible;l.Sensible.__name__=["rg","svg","widget","Sensible"];l.Sensible.sensibleZone=function(a,b,c,d,e){if(!(null==c&&null==d)){var h=a.append("svg:rect").attr("class").string("sensible").attr("x")["float"](0).attr("y")["float"](0).attr("width")["float"](b.frame.width).attr("height")["float"](b.frame.height).attr("fill").string("#000").style("fill-opacity")["float"](0);if(null!=d)h.onNode("mousemove",function(){var b=l.Sensible.findDataNodeNearMouse(a,e);0<b.length?(d(b[0]),null!=c&&h.classed().add("pointer")):null!=c&&h.classed().remove("pointer")});if(null!=c){if(null==d)h.onNode("mousemove",function(){0<l.Sensible.findDataNodeNearMouse(a,e).length?h.classed().add("pointer"):h.classed().remove("pointer")});h.onNode("click",function(){var b=l.Sensible.findDataNodeNearMouse(a,e);0<b.length&&c(b[0])})}}};l.Sensible.findDataNodeNearMouse=function(a,b){var c=O.event;return l.Sensible.findDataNodesNear({x:c.clientX,y:c.clientY},a,b)};l.Sensible.findDataNodesNear=function(a,b,c){var b=b.selectAll(".rgdata"),d=[],e=c*c;b.eachNode(function(b){var c=b.getBoundingClientRect(),f=a.x-(c.left+c.width/2),c=a.y-(c.top+c.height/2),f=f*f+c*c;f>e||d.push({node:b,dist:f})});d.sort(function(a,b){return G.compare(a.dist,b.dist)});return I.map(u.iter(d),function(a){return a.node})};ac=void 0;rd=void 0;X=void 0;Aa=void 0;ka=void 0;sd=void 0;td=void 0;xa=void 0;T=void 0;ud=void 0;Tb=void 0;bc=void 0;sd=function(a){try{this.tests=bc.decrypt(a).split(",")}catch(b){}};i["rg.util.Auth"]=sd;sd.__name__=["rg","util","Auth"];sd.prototype={authorizeMany:function(a){for(var b=0;b<a.length;){var c=a[b];++b;if(this.authorize(c))return!0}return!1},authorizeOne:function(a,b){return"*."==a.substring(0,2)?C.endsWith("."+b,a.substring(1)):b==a},authorize:function(a){for(var b=0,c=this.tests;b<c.length;){var d=c[b];++b;if(this.authorizeOne(a,d))return!0}return!1},tests:null,__class__:sd};td=function(a){this.handler=a;this.actions=[];this.pos=0;this.executor=v(this,this.execute)};i["rg.util.ChainedExecutor"]=td;td.__name__=["rg","util","ChainedExecutor"];td.prototype={executor:null,execute:function(a){if(this.pos==this.actions.length)this.pos=0,this.handler(a);else this.actions[this.pos++](a,v(this,this.execute))},addAction:function(a){this.actions.push(a)},pos:null,actions:null,handler:null,__class__:td};xa=function(){};i["rg.util.DataPoints"]=xa;xa.__name__=["rg","util","DataPoints"];xa.partition=function(a,b,c){null==c&&(c="default");for(var d=new yb.HashList,e,h=0;h<a.length;){var f=a[h];++h;e=j.field(f,b);e=null==e?c:ca.string(e);var g=d.get(e);null==g&&(g=[],d.set(e,g));g.push(f)}return d.array()};xa.filterByIndependents=function(a,b){for(var c=0;c<b.length;){var d=[b[c]];++c;var e=[d[0].axis.range(d[0].min(),d[0].max())],a=a.filter(function(a,b){return function(c){c=j.field(c,b[0].type);return null==c?!1:S.exists(a[0],c)}}(e,d))}return a};xa.filterByDependents=function(a,b){for(var c=0;c<b.length;){var d=[b[c]];++c;a=a.filter(function(a){return function(b){return null==j.field(b,a[0].type)?!1:!0}}(d))}return a};xa.valueAlt=function(a,b,c){var d;return null==(d=j.field(a,b))?c:d};xa.values=function(a,b){return a.map(function(a){return j.field(a,b)}).filter(function(a){return null!=a})};xa.id=function(a,b){for(var c=ra.clone(a),d=0;d<b.length;){var e=b[d];++d;j.deleteField(c,e)}return Mb.Md5.encode(ca.string(c))};bc=function(){};i["rg.util.Decrypt"]=bc;bc.__name__=["rg","util","Decrypt"];bc.decrypt=function(a){var b=new ya.RSAEncrypt(bc.modulus,bc.publicExponent),a=Bc.Base64.decode(a);try{return b.verify(a).toString()}catch(c){return null}};rd=function(){};i["rg.util.Js"]=rd;rd.__name__=["rg","util","Js"];rd.findScript=function(a){var b=ea.document.getElementsByTagName("SCRIPT");if("string"==typeof a)for(var c=0,d=b.length;c<d;){var e=c++,e=b[e],h=e.getAttribute("src");if(null!=h&&0<=h.indexOf(a))return e}else{c=0;for(d=b.length;c<d;)if(e=c++,e=b[e],h=e.getAttribute("src"),null!=h&&h.match(a))return e}return null};Tb=function(){};i["rg.util.Jsonp"]=Tb;Tb.__name__=["rg","util","Jsonp"];Tb.get=function(a,b,c,d,e){var h=Tb.get_api;h(a,{success:b,failure:c},d,e)};Tb.request_api=function(a,b,c,d,e,h){null==e&&(e={});b=ac.addQueryParameters(b,e);null==h&&(h={});var f=d.success,g=null==d.failure?function(){}:d.failure,i="ReportGridChartsJsonpCallback"+(214748363*Math.random()|0),k=ea.document.head;null==k&&(k=ea.document.getElementsByTagName("head")[0]);ea.window[i]=function(a,b){200==b.status.code||"OK"==b.status.code?f(a):g(b.status.code,b.status.reason);k.removeChild(ea.document.getElementById(i));ea.window[i]=void 0;try{delete window[i]}catch(c){}};d={};d.method=a;if(0<j.fields(h).length)d.headers=aa.Json.encode(h);d.callback=i;if(null!=c)d.content=aa.Json.encode(c);a=ac.addQueryParameters(b,d);b=ea.document.createElement("SCRIPT");b.setAttribute("type","text/javascript");b.setAttribute("src",a);b.setAttribute("id",i);k.appendChild(b)};Tb.get_api=function(a,b,c,d){Tb.request_api("GET",a,null,b,c,d)};X=function(){};i["rg.util.Periodicity"]=X;X.__name__=["rg","util","Periodicity"];X.defaultRange=function(a){switch(a){case"eternity":case"single":a=[0,0];break;case"minute":a=X.parsePair("6 hours ago","now");break;case"hour":a=X.parsePair("2 days ago","now");break;case"day":a=X.parsePair("14 days ago","today");break;case"month":a=X.parsePair("6 months ago","today");break;case"year":a=X.parsePair("6 years ago","today");break;default:throw"invalid periodicity: "+a}return a};X.unitsBetween=function(a,b,c){return function(d){switch(c){case"eternity":case"single":d=1;break;case"minute":d=Math.floor((b-a)/6e4);break;case"hour":d=Math.floor((b-a)/36e5);break;case"day":d=Math.floor((b-a)/864e5);break;case"week":d=Math.floor((b-a)/6048e5);break;case"month":d=function(c){var d=function(){var b=new Date;b.setTime(a);return b}(c),f=function(){var a=new Date;a.setTime(b);return a}(c),c=d.getFullYear(),g=f.getFullYear(),d=d.getMonth(),f=f.getMonth();return 12*(g-c)+(f-d)}(d);break;case"year":d=Math.floor(X.unitsBetween(a,b,"month")/12);break;default:throw"invalid periodicity: "+c}return d}(this)};X.units=function(a,b){var c=X.unitsBetween(0,a,b),d;switch(b){case"hour":d=1;break;default:d=0}return c+d};X.range=function(a,b,c){var d=1e3;switch(c){case"eternity":case"single":return[0];case"minute":d=6e4;break;case"hour":d=36e5;break;case"day":for(var d=ja.snap(a,"day"),e=ja.snap(b,"day"),b=[];d<=e;)b.push(d),d=ja.snap(d+864e5,"day");return b;case"week":d=6048e5;break;case"month":d=X.dateUtc(a);e=X.dateUtc(b);a=d.getFullYear();c=e.getFullYear();d=d.getMonth();e=e.getMonth();for(b=[];a<c||a==c&&d<=e;)b.push(new Date(a,d,1,0,0,0).getTime()),d++,11<d&&(d=0,a++);return b;case"year":return b=P.range(X.dateUtc(a).getFullYear(),X.dateUtc(b).getFullYear()+1,1).map(function(a){return new Date(a,0,1,0,0,0).getTime()})}return G.range(a,b+d,d)};X.format=function(a,b){switch(a){case"eternity":return"all time";case"single":return"period";case"minute":return m.FormatDate.timeShort(function(){var a=new Date;a.setTime(b);return a}(this));case"hour":return m.FormatDate.hourShort(function(){var a=new Date;a.setTime(b);return a}(this));case"day":case"week":return m.FormatDate.dateShort(function(){var a=new Date;a.setTime(b);return a}(this));case"month":return m.FormatDate.yearMonth(function(){var a=new Date;a.setTime(b);return a}(this));case"year":return m.FormatDate.year(function(){var a=new Date;a.setTime(b);return a}(this));default:return a+": "+b}};X.smartFormat=function(a,b){switch(a){case"eternity":case"single":return"all time";case"minute":return X.firstInSeries("hour",b)?m.FormatDate.timeShort(function(){var a=new Date;a.setTime(b);return a}(this)):m.FormatDate.format("%i",function(){var a=new Date;a.setTime(b);return a}(this));case"hour":return X.firstInSeries("day",b)?m.FormatDate.format("%b %e",X.dateUtc(b)):m.FormatDate.hourShort(function(){var a=new Date;a.setTime(b);return a}(this));case"day":return X.firstInSeries("month",b)?m.FormatDate.format("%b %e",X.dateUtc(b)):m.FormatDate.format("%e",X.dateUtc(b));case"week":var c=X.dateUtc(b);return 7>=c.getDate()?m.FormatDate.format("%b %e",c):m.FormatDate.format("%e",c);case"month":return X.firstInSeries("year",b)?m.FormatDate.year(X.dateUtc(b)):m.FormatDate.format("%b",X.dateUtc(b));case"year":return m.FormatDate.year(X.dateUtc(b));default:return a+": "+t.string(function(){var a=new Date;a.setTime(b);return a}(this))}};X.firstInSeries=function(a,b){return function(c){switch(a){case"eternity":case"single":c=0==b;break;case"minute":c=0==b%6e4;break;case"hour":c=0==b%36e5;break;case"day":c=function(){var a=new Date;a.setTime(b);return 0==a.getHours()&&0==a.getMinutes()&&0==a.getSeconds()}(c);break;case"week":c=function(){var a=new Date;a.setTime(b);return 0==a.getDay()}(c);break;case"month":c=function(){var a=new Date;a.setTime(b);return 1==a.getDate()}(c);break;case"year":c=function(){var a=new Date;a.setTime(b);return 1==a.getDate()&&0==a.getMonth()}(c);break;default:c=!1}return c}(this)};X.parsePair=function(a,b){return[s.DateParser.parse(a).getTime(),s.DateParser.parse(b).getTime()]};X.dateUtc=function(a){var b=function(){var b=new Date;b.setTime(a);return b}(this).getTimezoneOffset();0>b&&(b=0);return function(){var c=new Date;c.setTime(a+6e4*b);return c}(this)};X.isValidGroupBy=function(a){return S.exists(X.validGroupValues,a)};Aa=function(){};i["rg.util.Properties"]=Aa;Aa.__name__=["rg","util","Properties"];Aa.isTime=function(a){return 0<=a.indexOf("time:")};Aa.periodicity=function(a){return u.substr(a,a.indexOf("time:")+5,null)};Aa.humanize=function(a){return ka.humanize(a)};Aa.formatValue=function(a,b){var c=j.field(b,a);if(null==c)return c;if(0<=a.indexOf("time:")){var d=u.substr(a,a.indexOf("time:")+5,null);return X.format(d,ja.snap(c,d))}return ka.humanize(c)};ud=function(){};i["rg.util.RG"]=ud;ud.__name__=["rg","util","RG"];ud.getTokenId=function(){try{return J.rtrim(J.ltrim(ReportGrid.$.Config.tokenId,'"'),'"')}catch(a){return null}};T=function(){};i["rg.util.RGColors"]=T;T.__name__=["rg","util","RGColors"];T.parse=function(a,b){try{var c=f.Colors.parse(a);if(null!=c)return c}catch(d){}return f.Colors.parse(b)};T.applyLightness=function(a,b,c){null==c&&(c=1/Math.abs(b));return 0<=b?f.Hsl.lighter(a,(1-c)*(1+b)):f.Hsl.darker(a,(1-c)*(1-b))};T.extractColor=function(a){return a.__rgcolor__};T.storeColor=function(a,b){a.__rgcolor__=b};T.storeColorForSelection=function(a,b,c){null==b&&(b="fill");a.eachNode(function(a){var e=null==c?O.selectNode(la.current).style(b).get():c;T.storeColor(a,e)})};ka=function(){};i["rg.util.RGStrings"]=ka;ka.__name__=["rg","util","RGStrings"];ka.humanize=function(a){if(B.__instanceof(a,le))return P.format(a);if(B.__instanceof(a,ae))return G.format(a);a=t.string(a);if(ka.range.match(a)){var a=ka.range.matched(1),b=ka.range.matched(2),a=null!=a?P.canParse(a)?P.format(P.parse(a)):G.format(G.parse(a)):"",b=null!=b?P.canParse(b)?P.format(P.parse(b)):G.format(G.parse(b)):"";return ka.hstring(ka.range.matchedLeft())+a+"-"+b+ka.hstring(ka.range.matchedRight())}return ka.hstring(a)};ka.hstring=function(a){return J.ucwords(J.humanize(a))};ac=function(){};i["rg.util.Urls"]=ac;ac.__name__=["rg","util","Urls"];ac.addQueryParameters=function(a,b){for(var c=0>a.indexOf("?")?"?":"&",d=[],e=0,h=j.fields(b);e<h.length;){var f=h[e];++e;var g=t.string(j.field(b,f));d.push(f+"="+C.urlEncode(g))}return 0==d.length?a:a+c+d.join("&")};ac.parseQueryParameters=function(a){var b=a.indexOf("?");if(0>b)return{};for(var a=u.substr(a,b+1,null).split("&"),b={},c=0;c<a.length;){var d=a[c];++c;var e=d.split("="),d=e[0],e=null==e[1]?null:C.urlDecode(e[1]);b[d]=e}return b};Qb=function(a){this.container=a};Ic=void 0;Jc=void 0;ha=void 0;Kc=void 0;Lc=void 0;Mc=void 0;Nc=void 0;Oc=void 0;Pc=void 0;mb=void 0;Qc=void 0;Rc=void 0;Ea=void 0;Fa=void 0;ub=void 0;i["rg.visualization.Visualization"]=Qb;Qb.__name__=["rg","visualization","Visualization"];Qb.prototype={addError:function(a){this.error.add(a)},addReady:function(a){this.ready.add(a);this.hasRendered&&a()},addReadyOnce:function(a){this.ready.addOnce(a);this.hasRendered&&a()},_feedData:function(){},feedData:function(a){try{this._feedData(a)}catch(b){this.error.dispatch(b)}},_init:function(){throw new H.AbstractMethod({fileName:"Visualization.hx",lineNumber:54,className:"rg.visualization.Visualization",methodName:"_init"})},init:function(){try{this._init()}catch(a){this.error.dispatch(a)}},setVariables:function(a,b,c){var d=this;this.variables=a;this.independentVariables=b;this.dependentVariables=c;this.hasRendered=!1;this.ready=new Zb;this.ready.addOnce(function(){d.hasRendered=!0});this.error=new Fc;this.error.addOnce(function(){d.ready.dispatch()})},hasRendered:null,error:null,ready:null,container:null,variables:null,dependentVariables:null,independentVariables:null,__class__:Qb};Ea=function(a){Qb.call(this,a.container);this.layout=a};i["rg.visualization.VisualizationSvg"]=Ea;Ea.__name__=["rg","visualization","VisualizationSvg"];Ea.__super__=Qb;Ea.prototype=A(Qb.prototype,{layout:null,baseChart:null,__class__:Ea});Fa=function(a){Ea.call(this,a)};i["rg.visualization.VisualizationCartesian"]=Fa;Fa.__name__=["rg","visualization","VisualizationCartesian"];Fa.__super__=Ea;Fa.prototype=A(Ea.prototype,{createRules:function(a,b,c){var a=this.info.displayMinorRule(b),d=this.info.displayMajorRule(b),e=this.info.displayAnchorLineRule(b);null!=this.info.label.axis&&this.info.label.axis(b);b=null;if(a||d){b=this.layout.getPanel("main");if(null==b)return null;b=new ta.RulesOrtho(b,c);b.displayMinor=a;b.displayMajor=d;b.displayAnchorLine=e;b.init()}return b},createTickmarks:function(a,b,c){var d=this,e=this.info.displayMinorTick(b),h=this.info.displayMajorTick(b),f=this.info.displayLabelTick(b),g=this.info.displayAnchorLineTick(b),i=null!=this.info.label.axis?this.info.label.axis(b):null,k=null,j;if(e||h||f||g){j=this.layout.getContext(c);if(null==j)return null;k=new ta.TickmarksOrtho(j.panel,j.anchor);this.setTickmarksDefaults(k,a,b,c);if(f){if(null!=this.info.label.tickmark)k.tickLabel=function(a){return d.info.label.tickmark(a,b)}}else k.displayLabel=!1;k.displayMinor=e;k.displayMajor=h;k.lengthMinor=this.info.lengthTickMinor;k.lengthMajor=this.info.lengthTickMajor;k.paddingMinor=this.info.paddingTickMinor;k.paddingMajor=this.info.paddingTickMajor;k.paddingLabel=this.info.paddingLabel;a=this.info.labelAnchor(b);if(null!=a)k.labelAnchor=l.GridAnchors.parse(a);a=this.info.labelOrientation(b);if(null!=a)k.labelOrientation=l.LabelOrientations.parse(a);if(null!=(a=this.info.labelAngle(b)))k.labelAngle=a;k.displayAnchorLine=g}if(null!=i&&null!=(j=this.layout.getContext(c+"title")))g=new ta.Title(j.panel,i,j.anchor,null,"axis-title").idealHeight(),this.layout.suggestSize(c+"title",g);null!=k&&k.init();return k},setTickmarksDefaults:function(){},transformData:function(){throw new H.AbstractMethod({fileName:"VisualizationCartesian.hx",lineNumber:167,className:"rg.visualization.VisualizationCartesian",methodName:"transformData"})},_feedData:function(a){if(0!=a.length){null!=this.title&&null!=this.info.label.title&&(this.title.set_text(this.info.label.title(this.variables,a,this.variables.map(function(a){return a.type}))),this.layout.suggestSize("title",this.title.idealHeight()));a=this.transformData(a);this.chart.setVariables(this.variables,this.independentVariables,this.dependentVariables,a);for(var b=0,c=this.ylabels.length;b<c;){var d=b++,d=this.ylabels[d],e=this.yvariables[d.id];d.tickmarks.update(e.axis,e.min(),e.max());e=Math.round(d.tickmarks.desiredSize);this.layout.suggestSize("y"+d.id,e)}b=0;for(c=this.yrules.length;b<c;)d=b++,d=this.yrules[d],e=this.yvariables[d.id],d.rules.update(e.axis,e.min(),e.max());if(null!=this.xlabel)e=this.xvariable,this.xlabel.update(e.axis,e.min(),e.max()),e=Math.round(this.xlabel.desiredSize),this.layout.suggestSize("x",e);if(null!=this.xrule)e=this.xvariable,this.xrule.update(e.axis,e.min(),e.max());this.chart.data(a)}},initTitle:function(){if(null!=this.info.label.title){var a=this.layout.getContext("title");if(null!=a)this.title=new ta.Title(a.panel,null,a.anchor)}},initCartesianChart:function(){this.chart.animated=this.info.animation.animated;this.chart.animationDuration=this.info.animation.duration;this.chart.animationEase=this.info.animation.ease;this.chart.click=this.info.click;this.chart.labelDataPoint=this.info.label.datapoint;this.chart.labelDataPointOver=this.info.label.datapointover;this.chart.labelDataPointVerticalOffset=this.info.label.datapointverticaloffset;this.chart.labelDataPointOutline=this.info.label.datapointoutline;this.chart.labelDataPointShadow=this.info.label.datapointshadow;this.chart.init()},initChart:function(){throw new H.AbstractMethod({fileName:"VisualizationCartesian.hx",lineNumber:88,className:"rg.visualization.VisualizationCartesian",methodName:"initChart"})},initXAxis:function(){this.xlabel=this.createTickmarks(0,this.xvariable.type,"x");this.xrule=this.createRules(0,this.xvariable.type,wa.Vertical)},initYAxes:function(){this.ylabels=[];this.yrules=[];for(var a=0,b=this.yvariables.length;a<b;){var c=a++,d=this.createTickmarks(c+1,this.yvariables[c].type,"y"+c),e=this.createRules(c+1,this.yvariables[c].type,wa.Horizontal);null!=d&&this.ylabels.push({id:c,tickmarks:d});null!=e&&this.yrules.push({id:c,rules:e})}},initPadding:function(){this.layout.adjustPadding()},initAxes:function(){throw new H.AbstractMethod({fileName:"VisualizationCartesian.hx",lineNumber:46,className:"rg.visualization.VisualizationCartesian",methodName:"initAxes"})},_init:function(){this.initAxes();this.initYAxes();this.initXAxis();this.initTitle();this.initPadding();this.initChart();this.initCartesianChart()},yvariables:null,xvariable:null,title:null,yrules:null,ylabels:null,xrule:null,xlabel:null,chart:null,info:null,__class__:Fa});Kc=function(a){Fa.call(this,a)};i["rg.visualization.VisualizationBarChart"]=Kc;Kc.__name__=["rg","visualization","VisualizationBarChart"];Kc.__super__=Fa;Kc.prototype=A(Fa.prototype,{transformData:function(a){var b=[],c=this.independentVariables[0],d=c.axis.range(c.min(),c.max());if(0<=c.type.indexOf("time:"))for(var e=Aa.periodicity(c.type),h=0;h<d.length;){var f=[d[h]];++h;for(var g=[],i=0,k=this.dependentVariables.length;i<k;){var l=i++,l=xa.filterByDependents(a,[this.dependentVariables[l]]);g.push(l.filter(function(a){return function(b){return ja.snap(j.field(b,c.type),e)==a[0]}}(f)))}b.push(g)}else for(h=0;h<d.length;){f=[d[h]];++h;g=[];i=0;for(k=this.dependentVariables.length;i<k;)l=i++,l=xa.filterByDependents(a,[this.dependentVariables[l]]),g.push(l.filter(function(a){return function(b){return j.field(b,c.type)==a[0]}}(f)));b.push(g)}var m=null;if(null!=this.infoBar.segment.on){var n=this.infoBar.segment.on,m=new yb.Set;if(0!=this.infoBar.segment.values.length){h=0;for(k=this.infoBar.segment.values;h<k.length;)f=k[h],++h,m.add(f)}else a.forEach(function(a){m.add(j.field(a,n))});a=m.array();k=0;for(h=d.length;k<h;){l=k++;d=0;for(i=this.dependentVariables.length;d<i;){for(var g=d++,f=b[l][g],p=[],q=0,s=a.length;q<s;)for(var r=q++,r=a[r],t=0,u=f.length;t<u;){var kb=t++,be=j.field(f[kb],n);r==be&&p.push(f[kb])}b[l][g]=p}}}return{data:b,segments:null==m?null:m.array()}},initChart:function(){var a=this,b=new n.BarChart(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=b;b.ready.add(function(){a.ready.dispatch()});b.stacked=this.infoBar.stacked;var c=this.infoBar.effect;switch(c[1]){case 0:b.displayGradient=!1;break;case 1:c=c[2],b.displayGradient=!0,b.gradientLightness=c}b.padding=this.infoBar.barPadding;b.paddingAxis=this.infoBar.barPaddingAxis;b.paddingDataPoint=this.infoBar.barPaddingDataPoint;b.horizontal=this.infoBar.horizontal;b.startat=this.infoBar.startat;b.segmentProperty=this.infoBar.segment.on;this.chart=b},initAxes:function(){this.infoBar.horizontal?(this.xvariable=this.dependentVariables.map(function(a){return a})[0],this.yvariables=[this.independentVariables[0]]):(this.yvariables=this.dependentVariables.map(function(a){return a}),this.xvariable=this.independentVariables[0])},infoBar:null,__class__:Kc});Lc=function(a){Ea.call(this,a)};i["rg.visualization.VisualizationFunnelChart"]=Lc;Lc.__name__=["rg","visualization","VisualizationFunnelChart"];Lc.__super__=Ea;Lc.prototype=A(Ea.prototype,{_feedData:function(a){this.chart.setVariables(this.independentVariables,this.dependentVariables);a=xa.filterByIndependents(xa.filterByDependents(a,this.dependentVariables),this.independentVariables);null!=this.info.sortDataPoint&&a.sort(this.info.sortDataPoint);null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,a,this.variables.map(function(a){return a.type}))),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0));null!=this.info.sortDataPoint&&a.sort(this.info.sortDataPoint);this.chart.init();this.chart.data(a)},_init:function(){var a=this,b=this.layout.getPanel(this.layout.mainPanelName);this.baseChart=this.chart=new n.FunnelChart(b);this.chart.ready.add(function(){a.ready.dispatch()});if(null!=this.info.label.datapoint)this.chart.labelDataPoint=this.info.label.datapoint;if(null!=this.info.label.datapoint)this.chart.labelDataPointOver=this.info.label.datapointover;if(null!=this.info.label.arrow)this.chart.labelArrow=this.info.label.arrow;if(null!=this.info.click)this.chart.click=this.info.click;this.chart.padding=this.info.padding;this.chart.flatness=this.info.flatness;b=this.info.effect;switch(b[1]){case 1:b=b[2];this.chart.displayGradient=!0;this.chart.gradientLightness=b;break;case 0:this.chart.displayGradient=!1}this.chart.arrowSize=this.info.arrowSize;if(null!=this.info.label.title&&(b=this.layout.getContext("title"),null!=b))this.title=new ta.Title(b.panel,null,b.anchor)},chart:null,title:null,info:null,__class__:Lc});Mc=function(a){Ea.call(this,a)};i["rg.visualization.VisualizationGeo"]=Mc;Mc.__name__=["rg","visualization","VisualizationGeo"];Mc.__super__=Ea;Mc.prototype=A(Ea.prototype,{_feedData:function(a){this.chart.setVariables(this.independentVariables,this.dependentVariables,a);null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,a,this.variables.map(function(a){return a.type}))),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0));this.chart.init();this.chart.data(a)},_init:function(){var a=this;if(null!=this.info.label.title){var b=this.layout.getContext("title");if(null==b)return;this.title=new ta.Title(b.panel,null,b.anchor)}b=this.layout.getPanel(this.layout.mainPanelName);this.chart=new n.Geo(b);this.chart.labelOutline=this.info.labelOutline;this.chart.labelShadow=this.info.labelShadow;this.baseChart=this.chart;this.chart.ready.add(function(){a.ready.dispatch()});for(var b=new Ad,c=0,d=this.info.map;c<d.length;){var e=d[c];++c;var f=b.create(e),f=new l.GeoMap(this.chart.mapcontainer,f);f.set_className(e.classname);f.labelDataPoint=null==e.label?this.info.label.datapoint:e.label.datapoint;f.labelDataPointOver=null==e.label?this.info.label.datapointover:e.label.datapointover;f.click=e.click;f.radius=e.radius;f.colorMode=e.colorScaleMode;f.handlerClick=(Q=this.chart,v(Q,Q.handlerClick));f.handlerDataPointOver=(Q=this.chart,v(Q,Q.handlerDataPointOver));f.mapping=e.mapping;var g=e.mappingurl;if(null!=g&&(!C.startsWith(g,"http://")||!C.startsWith(g,"https://")))g=Cb.BASE_URL_GEOJSON+g+".json"+(e.usejsonp?".js":"");f.load(e.url,e.type,g,e.usejsonp);this.chart.addMap(f,e.property)}},chart:null,title:null,info:null,__class__:Mc});Nc=function(a){Fa.call(this,a)};i["rg.visualization.VisualizationHeatGrid"]=Nc;Nc.__name__=["rg","visualization","VisualizationHeatGrid"];Nc.__super__=Fa;Nc.prototype=A(Fa.prototype,{setTickmarksDefaults:function(a,b){if(0==b)a.labelAnchor=l.GridAnchor.Left,a.labelAngle=180},transformData:function(a){return a},initChart:function(){var a=this,b=new n.HeatGrid(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=b;b.ready.add(function(){a.ready.dispatch()});b.useContour=this.infoHeatGrid.contour;b.set_colorMode(this.infoHeatGrid.colorScaleMode);this.chart=b},initAxes:function(){this.xvariable=this.independentVariables[0];this.yvariables=[this.independentVariables[1]]},infoHeatGrid:null,__class__:Nc});ub=function(a){Qb.call(this,a);a.classed().add("rg")};i["rg.visualization.VisualizationHtml"]=ub;ub.__name__=["rg","visualization","VisualizationHtml"];ub.__super__=Qb;ub.prototype=A(Qb.prototype,{__class__:ub});Jc=function(a){ub.call(this,a)};i["rg.visualization.VisualizationLeaderboard"]=Jc;Jc.__name__=["rg","visualization","VisualizationLeaderboard"];Jc.__super__=ub;Jc.prototype=A(ub.prototype,{_feedData:function(a){this.chart.setVariables(this.independentVariables,this.dependentVariables);this.chart.data(a)},_init:function(){var a=this;this.chart=new Ua.Leadeboard(this.container);this.chart.ready.add(function(){a.ready.dispatch()});if(null!=this.info.label.datapoint)this.chart.labelDataPoint=this.info.label.datapoint;if(null!=this.info.label.datapointover)this.chart.labelDataPointOver=this.info.label.datapointover;if(null!=this.info.label.rank)this.chart.labelRank=this.info.label.rank;if(null!=this.info.label.value)this.chart.labelValue=this.info.label.value;this.chart.animated=this.info.animation.animated;this.chart.animationDuration=this.info.animation.duration;this.chart.animationDelay=this.info.animation.delay;this.chart.animationEase=this.info.animation.ease;this.chart.useMax=this.info.usemax;this.chart.displayBar=this.info.displaybar;this.chart.colorScale=this.info.colorscale;if(null!=this.info.click)this.chart.click=this.info.click;if(null!=this.info.sortDataPoint)this.chart.sortDataPoint=this.info.sortDataPoint;this.chart.init()},chart:null,info:null,__class__:Jc});Oc=function(a){Fa.call(this,a)};i["rg.visualization.VisualizationLineChart"]=Oc;Oc.__name__=["rg","visualization","VisualizationLineChart"];Oc.__super__=Fa;Oc.prototype=A(Fa.prototype,{transformData:function(a){for(var b=[],c=new sc(this.infoLine.segment.on,this.infoLine.segment.transform,this.infoLine.segment.scale,this.infoLine.segment.values),d=0,e=this.dependentVariables.length;d<e;){var f=this.dependentVariables[d++],f=xa.filterByDependents(a,[f]);b.push(c.segment(f))}return b},initChart:function(){var a=this,b=new n.LineChart(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=b;b.ready.add(function(){a.ready.dispatch()});b.symbol=this.infoLine.symbol;b.symbolStyle=this.infoLine.symbolStyle;b.lineInterpolator=this.infoLine.interpolation;b.lineEffect=this.infoLine.effect;b.sensibleRadius=this.infoLine.sensibleradius;if(null==this.independentVariables[0].scaleDistribution)this.independentVariables[0].scaleDistribution=Ga.ScaleFill;if(null!=this.infoLine.y0property)b.y0property=this.infoLine.y0property;else if(this.infoLine.displayarea)b.y0property="";this.chart=b},initAxes:function(){this.xvariable=this.variables[0];this.yvariables=this.variables.slice(1)},infoLine:null,__class__:Oc});Pc=function(a){Ea.call(this,a)};i["rg.visualization.VisualizationPieChart"]=Pc;Pc.__name__=["rg","visualization","VisualizationPieChart"];Pc.__super__=Ea;Pc.prototype=A(Ea.prototype,{_feedData:function(a){this.chart.setVariables(this.independentVariables,this.dependentVariables);null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,a,this.variables.map(function(a){return a.type}))),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0));null!=this.info.sortDataPoint&&a.sort(this.info.sortDataPoint);this.chart.init();this.chart.data(a)},_init:function(){var a=this,b=this.layout.getPanel(this.layout.mainPanelName);this.baseChart=this.chart=new n.PieChart(b);this.chart.ready.add(function(){a.ready.dispatch()});this.chart.innerRadius=this.info.innerradius;this.chart.outerRadius=this.info.outerradius;this.chart.overRadius=this.info.overradius;this.chart.tooltipRadius=this.info.tooltipradius;b=this.info.effect;switch(b[1]){case 1:b=b[2];this.chart.displayGradient=!0;this.chart.gradientLightness=b;break;case 0:this.chart.displayGradient=!1}this.chart.labelDataPoint=this.info.label.datapoint;this.chart.labelDataPointOver=this.info.label.datapointover;this.chart.labelRadius=this.info.labelradius;this.chart.labelOrientation=this.info.labelorientation;this.chart.labelDontFlip=this.info.dontfliplabel;this.chart.animated=this.info.animation.animated;this.chart.animationDuration=this.info.animation.duration;this.chart.animationEase=this.info.animation.ease;this.chart.animationDelay=this.info.animation.delay;if(null!=this.info.click)this.chart.mouseClick=this.info.click;if(null!=this.info.label.title&&(b=this.layout.getContext("title"),null!=b))this.title=new ta.Title(b.panel,null,b.anchor)},info:null,title:null,chart:null,__class__:Pc});Ic=function(a){ub.call(this,a)};i["rg.visualization.VisualizationPivotTable"]=Ic;Ic.__name__=["rg","visualization","VisualizationPivotTable"];Ic.__super__=ub;Ic.prototype=A(ub.prototype,{_feedData:function(a){this.chart.setVariables(this.independentVariables,this.dependentVariables);this.chart.data(a)},_init:function(){var a=this;this.chart=new Ua.PivotTable(this.container);this.chart.ready.add(function(){a.ready.dispatch()});this.chart.displayColumnTotal=this.info.displayColumnTotal;this.chart.displayHeatMap=this.info.displayHeatmap;this.chart.displayRowTotal=this.info.displayRowTotal;this.chart.colorStart=this.info.heatmapColorStart;this.chart.colorEnd=this.info.heatmapColorEnd;this.chart.cellclass=this.info.cellclass;this.chart.valueclass=this.info.valueclass;this.chart.headerclass=this.info.headerclass;this.chart.totalclass=this.info.totalclass;if(null!=this.info.click)this.chart.click=this.info.click;if(null!=this.info.label.datapoint)this.chart.labelDataPoint=this.info.label.datapoint;if(null!=this.info.label.datapointover)this.chart.labelDataPointOver=this.info.label.datapointover;if(null!=this.info.label.axis)this.chart.labelAxis=this.info.label.axis;if(null!=this.info.label.axisvalue)this.chart.labelAxisValue=this.info.label.axisvalue;if(null!=this.info.label.total)this.chart.labelTotal=this.info.label.total;if(null!=this.info.label.totalover)this.chart.labelTotalOver=this.info.label.totalover;this.chart.incolumns=P.min(this.info.columnAxes,this.independentVariables.length);this.chart.init()},chart:null,info:null,__class__:Ic});mb=function(a){Ea.call(this,a)};i["rg.visualization.VisualizationSankey"]=mb;mb.__name__=["rg","visualization","VisualizationSankey"];mb.defaultIdf=function(a){return null==a?function(a){return a.id
}:a};mb.defaultNodef=function(a){if(null==a){var b=0;return function(a){return{id:"#"+ ++b,weight:a.weight,entry:0,exit:0}}}return a};mb.defaultEdgesf=function(a,b){return null==b?function(b){for(var d=[],e=a(b),f=0,g=j.fields(b.parents);f<g.length;){var i=g[f];++f;d.push({head:e,tail:i,weight:j.field(b.parents,i)})}return d}:b};mb.__super__=Ea;mb.prototype=A(Ea.prototype,{defaultWeightf:function(a){if(null==a){var b=this.dependentVariables[0].type;return function(a){a=j.field(a,b);return null!=a?a:0}}return a},sugiyama:function(a,b){return(new r.SugiyamaMethod).resolve(a,b)},weightBalance:function(a,b){var c=new r.GraphLayout(a,(new r.HeaviestNodeLayer).lay(a)),c=(new r.EdgeSplitter).split(c,[],b);return c=r.GreedySwitchDecrosser.best().decross(c)},layoutData:function(a,b,c,d,e,f){a=this.createGraph(a,c,e,f);d=mb.defaultNodef(d);switch(b){case"weightbalance":return this.weightBalance(a,d);default:return this.sugiyama(a,d)}},extractEdges:function(a){return a.filter(function(a){return null!=a.head&&null!=a.tail})},extractNodes:function(a){var b=a.filter(function(a){return null!=a.id});if(0==b.length){var c=this.dependentVariables[0].type,d=new L.StringMap,e=function(a,b,c){if(null!=a){var e=d.get(a);null==e&&(e={node:{id:a},positive:0,negative:0},d.set(a,e));b?e.positive+=c:e.negative+=c}};a.filter(function(a){return j.hasField(a,"head")||j.hasField(a,"tail")}).forEach(function(a){var b=j.field(a,c);e(a.tail,!0,b);e(a.head,!1,b)});b=I.array(d.iterator()).map(function(a){var b=a.node;b[c]=Math.max(a.positive,a.negative);return b})}return b},createGraph:function(a,b,c,d){b=mb.defaultIdf(b);mb.defaultEdgesf(b,d);for(var c=this.defaultWeightf(c),d=new r.Graph(b),e=this.extractNodes(a),a=this.extractEdges(a),f=0;f<e.length;){var g=e[f];++f;d.nodes.create({dp:g,id:b(g),weight:c(g),entry:0,exit:0})}for(f=0;f<a.length;){b=a[f];++f;var e=d.nodes.getById(b.head),i=d.nodes.getById(b.tail);if(null==e){var g={id:b.head},j=c(b);g[this.dependentVariables[0].type]=j;e=d.nodes.create({dp:g,id:b.head,weight:j,entry:0,exit:0})}null==i&&(g={id:b.tail},j=c(b),g[this.dependentVariables[0].type]=j,i=d.nodes.create({dp:g,id:b.tail,weight:j,entry:0,exit:0}));d.edges.create(i,e,c(b))}for(c=d.nodes.collection.iterator();c.hasNext();){a=c.next();f=a.negativeWeight();g=a.positiveWeight();if(0==a.data.weight)a.data.weight=f;a.data.entry=Math.max(0,a.data.weight-f);a.data.exit=Math.max(0,a.data.weight-g)}return d},layoutDataWithMap:function(a,b,c,d,e){var f=this.createGraph(a,c,d,e);b.layers.map(function(a){return a.map(function(a){var b=f.nodes.getById(a);null==b&&(b=f.nodes.create({id:a,weight:0,entry:0,exit:0,dp:{id:a}}));return b.id})});a=0;for(c=b.dummies;a<c.length;){d=c[a];++a;for(var g=f.nodes.getById(d[0]),e=f.nodes.getById(d[d.length-1]),i=[g],g=g.connectedBy(e),j=null==g?0:g.weight,k=1,l=d.length-1;k<l;){var m=k++;i.push(f.nodes.create({id:d[m],weight:j,entry:0,exit:0,dp:null}))}i.push(e);k=0;for(l=i.length-1;k<l;)m=k++,f.edges.create(i[m],i[m+1],j);null!=g&&g.graph.edges._remove(g)}b=b.layers.map(function(a){return a.map(function(a){var b=f.nodes.getById(a);null==b&&(b=f.nodes.create({id:a,weight:0,entry:0,exit:0,dp:{id:a}}));return b.id})});return new r.GraphLayout(f,b)},_feedData:function(a){this.chart.setVariables(this.independentVariables,this.dependentVariables,a);null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,a,this.variables.map(function(a){return a.type}))),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0));a=null!=this.info.layoutmap?this.layoutDataWithMap(a,this.info.layoutmap):this.layoutData(a,this.info.layoutmethod);if(null!=this.info.layerWidth)this.chart.layerWidth=this.info.layerWidth;if(null!=this.info.nodeSpacing)this.chart.nodeSpacing=this.info.nodeSpacing;if(null!=this.info.dummySpacing)this.chart.dummySpacing=this.info.dummySpacing;if(null!=this.info.extraWidth)this.chart.extraWidth=this.info.extraWidth;if(null!=this.info.backEdgeSpacing)this.chart.backEdgeSpacing=this.info.backEdgeSpacing;if(null!=this.info.extraHeight)this.chart.extraHeight=this.info.extraHeight;if(null!=this.info.extraRadius)this.chart.extraRadius=this.info.extraRadius;if(null!=this.info.imageWidth)this.chart.imageWidth=this.info.imageWidth;if(null!=this.info.imageHeight)this.chart.imageHeight=this.info.imageHeight;if(null!=this.info.imageSpacing)this.chart.imageSpacing=this.info.imageSpacing;if(null!=this.info.labelNodeSpacing)this.chart.labelNodeSpacing=this.info.labelNodeSpacing;if(null!=this.info.chunkWidth)this.chart.chunkWidth=this.info.chunkWidth;this.chart.stackbackedges=this.info.stackbackedges;this.chart.thinbackedges=this.info.thinbackedges;this.chart.labelDataPoint=this.info.label.datapoint;this.chart.labelDataPointOver=this.info.label.datapointover;this.chart.labelNode=this.info.label.node;this.chart.labelEdge=this.info.label.edge;this.chart.labelEdgeOver=this.info.label.edgeover;this.chart.imagePath=this.info.imagePath;this.chart.click=this.info.click;this.chart.clickEdge=this.info.clickEdge;this.chart.nodeClass=this.info.nodeclass;this.chart.edgeClass=this.info.edgeclass;this.chart.displayEntry=this.info.displayentry;this.chart.displayExit=this.info.displayexit;this.chart.init();this.chart.data(a)},_init:function(){var a=this;if(null!=this.info.label.title){var b=this.layout.getContext("title");if(null==b)return;this.title=new ta.Title(b.panel,null,b.anchor)}b=this.layout.getPanel(this.layout.mainPanelName);this.baseChart=this.chart=new n.Sankey(b);this.chart.ready.add(function(){a.ready.dispatch()})},chart:null,title:null,info:null,__class__:mb});Qc=function(a){Fa.call(this,a)};i["rg.visualization.VisualizationScatterGraph"]=Qc;Qc.__name__=["rg","visualization","VisualizationScatterGraph"];Qc.__super__=Fa;Qc.prototype=A(Fa.prototype,{transformData:function(a){var b=[];new sc(this.infoScatter.segment.on,this.infoScatter.segment.transform,this.infoScatter.segment.scale,this.infoScatter.segment.values);for(var c=0,d=this.dependentVariables;c<d.length;){var e=d[c];++c;b.push(xa.filterByDependents(a,[e]))}return b},initChart:function(){var a=this,b=new n.ScatterGraph(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=b;b.ready.add(function(){a.ready.dispatch()});b.symbol=this.infoScatter.symbol;b.symbolStyle=this.infoScatter.symbolStyle;if(null==this.independentVariables[0].scaleDistribution)this.independentVariables[0].scaleDistribution=Ga.ScaleFill;this.chart=b},initAxes:function(){this.xvariable=this.independentVariables[0];this.yvariables=this.dependentVariables.map(function(a){return a})},infoScatter:null,__class__:Qc});Rc=function(a){Fa.call(this,a)};i["rg.visualization.VisualizationStreamGraph"]=Rc;Rc.__name__=["rg","visualization","VisualizationStreamGraph"];Rc.__super__=Fa;Rc.prototype=A(Fa.prototype,{transformData:function(a){return new sc(this.infoStream.segment.on,this.infoStream.segment.transform,this.infoStream.segment.scale,this.infoStream.segment.values).segment(a)},initChart:function(){var a=this,b=new n.StreamGraph(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=b;b.ready.add(function(){a.ready.dispatch()});b.interpolator=this.infoStream.interpolation;var c=this.infoStream.effect;switch(c[1]){case 0:b.gradientStyle=0;break;case 2:c=c[2];b.gradientStyle=1;b.gradientLightness=c;break;case 1:c=c[2],b.gradientStyle=2,b.gradientLightness=c}this.chart=b},initAxes:function(){this.xvariable=this.independentVariables[0];this.yvariables=this.dependentVariables.map(function(a){return a})},infoStream:null,__class__:Rc});ha=function(){};i["rg.visualization.Visualizations"]=ha;ha.__name__=["rg","visualization","Visualizations"];ha.instantiateLayout=function(a,b,c,d){return z.createInstance(ha.layoutType.get(a),[b,c,d])};yb={HashList:function(){this.length=0;this.__keys=[];this.__hash=new L.StringMap}};i["thx.collection.HashList"]=yb.HashList;yb.HashList.__name__=["thx","collection","HashList"];yb.HashList.prototype={__hash:null,__keys:null,array:function(){for(var a=[],b=0,c=this.__keys;b<c.length;){var d=c[b];++b;a.push(this.__hash.get(d))}return a},get:function(a){return this.__hash.get(a)},set:function(a,b){this.__hash.exists(a)||(this.__keys.push(a),this.length++);this.__hash.set(a,b)},length:null,__class__:yb.HashList};yb.Set=function(){this._v=[];this.length=0};i["thx.collection.Set"]=yb.Set;yb.Set.__name__=["thx","collection","Set"];yb.Set.prototype={array:function(){return this._v.slice()},add:function(a){u.remove(this._v,a);this._v.push(a);this.length=this._v.length},_v:null,length:null,__class__:yb.Set};f.Cmyk=function(a,b,c,d){f.Rgb.call(this,P.interpolate(G.normalize(1-a-d),0,255,null),P.interpolate(G.normalize(1-b-d),0,255,null),P.interpolate(G.normalize(1-c-d),0,255,null));this.cyan=G.normalize(a);this.magenta=G.normalize(b);this.yellow=G.normalize(c);this.black=G.normalize(d)};i["thx.color.Cmyk"]=f.Cmyk;f.Cmyk.__name__=["thx","color","Cmyk"];f.Cmyk.__super__=f.Rgb;f.Cmyk.prototype=A(f.Rgb.prototype,{yellow:null,magenta:null,cyan:null,black:null,__class__:f.Cmyk});f.Colors=function(){};i["thx.color.Colors"]=f.Colors;f.Colors.__name__=["thx","color","Colors"];f.Colors.parse=function(a){if(!f.Colors._reParse.match(a=C.trim(a.toLowerCase()))){var b=f.NamedColors.byName.get(a);return null==b?"transparent"==a?f.Rgb.fromInt(16777215):null:b}a=f.Colors._reParse.matched(1);if(!J.empty(a))switch(b=f.Colors._reParse.matched(2).split(","),a){case"rgb":case"rgba":return new f.Rgb(f.Colors._c(b[0]),f.Colors._c(b[1]),f.Colors._c(b[2]));case"hsl":return new f.Hsl(f.Colors._d(b[0]),f.Colors._p(b[1]),f.Colors._p(b[2]));case"cmyk":return new f.Cmyk(f.Colors._p(b[0]),f.Colors._p(b[1]),f.Colors._p(b[2]),f.Colors._p(b[3]))}a=f.Colors._reParse.matched(3);if(3==a.length)a=a.split("").map(function(a){return a+a}).join("");else if(6!=a.length)return null;return f.Rgb.fromInt(t.parseInt("0x"+a))};f.Colors._c=function(a){return t.parseInt(C.trim(a))};f.Colors._d=function(a){a=C.trim(a);"deg"==u.substr(a,-3,null)?a=u.substr(a,0,-3):"º"==u.substr(a,-1,null)&&(a=u.substr(a,0,-1));return t.parseFloat(a)};f.Colors._p=function(a){a=C.trim(a);return"%"==u.substr(a,-1,null)?t.parseFloat(u.substr(a,0,-1))/100:t.parseFloat(a)};f.Grey=function(a){this.grey=G.normalize(a);a=P.interpolate(this.grey,0,255,null);f.Rgb.call(this,a,a,a)};i["thx.color.Grey"]=f.Grey;f.Grey.__name__=["thx","color","Grey"];f.Grey.toGrey=function(a,b){if(null==b)b=f.PerceivedLuminance.Perceived;switch(b[1]){case 0:return new f.Grey(.2126*(a.red/255)+.7152*(a.green/255)+.0722*(a.blue/255));case 1:return new f.Grey(.299*(a.red/255)+.587*(a.green/255)+.114*(a.blue/255));case 2:return new f.Grey(Math.sqrt(.241*Math.pow(a.red/255,2)+.691*Math.pow(a.green/255,2)+.068*Math.pow(a.blue/255,2)))}};f.Grey.__super__=f.Rgb;f.Grey.prototype=A(f.Rgb.prototype,{grey:null,__class__:f.Grey});f.PerceivedLuminance={__ename__:["thx","color","PerceivedLuminance"],__constructs__:["Standard","Perceived","PerceivedAccurate"]};f.PerceivedLuminance.Standard=["Standard",0];f.PerceivedLuminance.Standard.toString=q;f.PerceivedLuminance.Standard.__enum__=f.PerceivedLuminance;f.PerceivedLuminance.Perceived=["Perceived",1];f.PerceivedLuminance.Perceived.toString=q;f.PerceivedLuminance.Perceived.__enum__=f.PerceivedLuminance;f.PerceivedLuminance.PerceivedAccurate=["PerceivedAccurate",2];f.PerceivedLuminance.PerceivedAccurate.toString=q;f.PerceivedLuminance.PerceivedAccurate.__enum__=f.PerceivedLuminance;f.NamedColors=function(){};i["thx.color.NamedColors"]=f.NamedColors;f.NamedColors.__name__=["thx","color","NamedColors"];Kb={Csv:function(){}};i["thx.csv.Csv"]=Kb.Csv;Kb.Csv.__name__=["thx","csv","Csv"];Kb.Csv.decode=function(a,b,c,d,e,f,g,i){var j=new Ha.ValueHandler;new Kb.CsvDecoder(j,b,c,d,e,f,g,i).decode(a);return j.value};Kb.CsvDecoder=function(a,b,c,d,e,f,g,i){null==i&&(i=!0);null==g&&(g=!0);null==f&&(f='"');null==e&&(e="\r\n|\n|\r");null==d&&(d=!1);null==c&&(c=",");null==b&&(b=!0);this.handler=a;this.delimiter=c;this.emptytonull=d;this.quote=f;this.doublequotations=g;this.trim_whitespace=i;this.check_type=b;"\r\n|\n|\r"!=e&&(e=fb.ERegs.escapeERegChars(e));this.newline=e;this._end=new M("("+fb.ERegs.escapeERegChars(c)+"|"+e+"|$)","")};i["thx.csv.CsvDecoder"]=Kb.CsvDecoder;Kb.CsvDecoder.__name__=["thx","csv","CsvDecoder"];Kb.CsvDecoder.prototype={typeString:function(a){this.handler.arrayItemStart();""==a&&this.emptytonull?this.handler.valueNull():this.handler.valueString(a);this.handler.arrayItemEnd()},typeDate:function(a){this.handler.arrayItemStart();this.handler.valueDate(ja.parse(a));this.handler.arrayItemEnd()},typeBool:function(a){this.handler.arrayItemStart();this.handler.valueBool(Wa.parse(a));this.handler.arrayItemEnd()},typeFloat:function(a){this.handler.arrayItemStart();this.handler.valueFloat(G.parse(a));this.handler.arrayItemEnd()},typeCultureFloat:function(a){this.handler.arrayItemStart();this.handler.valueFloat(Lb.NumberParser.parse(a,m.Culture.get_defaultCulture()));this.handler.arrayItemEnd()},typeInt:function(a){this.handler.arrayItemStart();this.handler.valueInt(P.parse(a));this.handler.arrayItemEnd()},typeToken:function(a){this.check_type?P.canParse(a)?this.typeInt(a):G.canParse(a)?this.typeFloat(a):Wa.canParse(a)?this.typeBool(a):ja.canParse(a)?this.typeDate(a):this.typeString(a):this.typeString(a)},getTyper:function(a){var b=this._typers[this.column];if(null==b){if(""==a)return v(this,this.typeToken);b=this.check_type?P.canParse(a)?this._typers[this.column]=v(this,this.typeInt):Lb.NumberParser.canParse(a,m.Culture.get_defaultCulture())?this._typers[this.column]=v(this,this.typeCultureFloat):G.canParse(a)?this._typers[this.column]=v(this,this.typeFloat):Wa.canParse(a)?this._typers[this.column]=v(this,this.typeBool):ja.canParse(a)?this._typers[this.column]=v(this,this.typeDate):this._typers[this.column]=v(this,this.typeString):this._typers[this.column]=v(this,this.typeString)}return b},error:function(a){throw new H.Error("invalid string value '{0}' at line {1}, column {2}",[J.ellipsis(a,50),this.line,this.column],null,{fileName:"CsvDecoder.hx",lineNumber:128,className:"thx.csv.CsvDecoder",methodName:"error"})},parseValue:function(){if(u.substr(this._s,0,1)==this.quote){var a=this._s.indexOf(this.quote,1);if(-1!=a){if(this.doublequotations)for(;u.substr(this._s,a+1,1)==this.quote;)if(a=this._s.indexOf(this.quote,a+2),-1==a){a=this._s.length;break}}else a=this._s.length;var b=u.substr(this._s,1,a-1);this._s=u.substr(this._s,a+1,null);this.typeString(C.replace(b,this.quote+this.quote,this.quote));this._end.match(this._s)||this.error(this._s);this._s=this._end.matchedRight();return this._end.matched(0)==this.delimiter}this._end.match(this._s)||this.error(this._s);this._s=this._end.matchedRight();1==this.line?(b=this._end.matchedLeft(),this.trim_whitespace&&(b=C.trim(b)),this.typeToken(b)):(b=this._end.matchedLeft(),this.trim_whitespace&&(b=C.trim(b)),this.getTyper(b)(b));if(this._end.matched(0)==this.delimiter)return!0;this._s=C.ltrim(this._s);return!1},parseLine:function(){this.handler.arrayItemStart();this.column=1;for(this.handler.arrayStart();this.parseValue();)this.column++;this.handler.arrayEnd();this.line++;this.handler.arrayItemEnd()},decode:function(a){this._s=a;this._typers=[];this.line=1;this.handler.start();for(this.handler.arrayStart();0<this._s.length;)this.parseLine();this.handler.arrayEnd();this.handler.end()},_typers:null,_end:null,_s:null,handler:null,check_type:null,column:null,line:null,trim_whitespace:null,doublequotations:null,quote:null,newline:null,emptytonull:null,delimiter:null,__class__:Kb.CsvDecoder};Ha={IDataHandler:function(){}};i["thx.data.IDataHandler"]=Ha.IDataHandler;Ha.IDataHandler.__name__=["thx","data","IDataHandler"];Ha.IDataHandler.prototype={valueBool:null,valueNull:null,valueFloat:null,valueInt:null,valueString:null,valueDate:null,arrayEnd:null,arrayItemEnd:null,arrayItemStart:null,arrayStart:null,objectEnd:null,objectFieldEnd:null,objectFieldStart:null,objectStart:null,end:null,start:null,__class__:Ha.IDataHandler};m={Info:function(){}};i["thx.culture.Info"]=m.Info;m.Info.__name__=["thx","culture","Info"];m.Info.prototype={pluralRule:null,iso3:null,iso2:null,english:null,"native":null,name:null,__class__:m.Info};m.Culture=function(){};i["thx.culture.Culture"]=m.Culture;m.Culture.__name__=["thx","culture","Culture"];m.Culture.__properties__={get_cultures:"get_cultures"};m.Culture.get_cultures=function(){if(null==m.Culture.cultures)m.Culture.cultures=new L.StringMap;return m.Culture.cultures};m.Culture.get_defaultCulture=function(){return null==m.Culture._defaultCulture?Na.EnUS.get_culture():m.Culture._defaultCulture};m.Culture.add=function(a){if(null==m.Culture._defaultCulture)m.Culture._defaultCulture=a;var b=a.name.toLowerCase();m.Culture.get_cultures().exists(b)||m.Culture.get_cultures().set(b,a)};m.Culture.__super__=m.Info;m.Culture.prototype=A(m.Info.prototype,{percent:null,currency:null,number:null,symbolPosInf:null,symbolNegInf:null,symbolPermille:null,symbolPercent:null,symbolNaN:null,signPos:null,signNeg:null,digits:null,isMetric:null,nativeRegion:null,englishRegion:null,currencyIso:null,currencySymbol:null,nativeCurrency:null,englishCurrency:null,date:null,language:null,__class__:m.Culture});m.FormatDate=function(){};i["thx.culture.FormatDate"]=m.FormatDate;m.FormatDate.__name__=["thx","culture","FormatDate"];m.FormatDate.format=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=m.Culture.get_defaultCulture());for(var e=0,f=a.length,g=new Ab,i=c.date;e<f;){var j=a.charAt(e);if("%"!=j)g.b+=t.string(j);else switch(e++,j=a.charAt(e),j){case"a":g.b+=t.string(i.abbrDays[b.getDay()]);break;case"A":g.b+=t.string(i.days[b.getDay()]);break;case"b":case"h":g.b+=t.string(i.abbrMonths[b.getMonth()]);break;case"B":g.b+=t.string(i.months[b.getMonth()]);break;case"c":g.b+=t.string(m.FormatDate.dateTime(b,c));break;case"C":g.b+=t.string(m.FormatNumber.digits(""+Math.floor(b.getFullYear()/100),c));break;case"d":g.b+=t.string(m.FormatNumber.digits(C.lpad(""+b.getDate(),"0",2),c));break;case"D":g.b+=t.string(m.FormatDate.format("%m/%d/%y",b,c));break;case"e":g.b+=t.string(m.FormatNumber.digits(d?C.lpad(""+b.getDate()," ",2):""+b.getDate(),c));break;case"f":g.b+=t.string(m.FormatNumber.digits(d?C.lpad(""+(b.getMonth()+1)," ",2):""+(b.getMonth()+1),c));break;case"G":throw"Not Implemented Yet";case"g":throw"Not Implemented Yet";case"H":g.b+=t.string(m.FormatNumber.digits(C.lpad(""+b.getHours(),"0",2),c));break;case"i":g.b+=t.string(m.FormatNumber.digits(d?C.lpad(""+b.getMinutes()," ",2):""+b.getMinutes(),c));break;case"I":g.b+=t.string(m.FormatNumber.digits(C.lpad(""+m.FormatDate.getMHours(b),"0",2),c));break;case"j":throw"Not Implemented Yet";case"k":g.b+=t.string(m.FormatNumber.digits(d?C.lpad(""+b.getHours()," ",2):""+b.getHours(),c));break;case"l":g.b+=t.string(m.FormatNumber.digits(d?C.lpad(""+m.FormatDate.getMHours(b)," ",2):""+m.FormatDate.getMHours(b),c));break;case"m":g.b+=t.string(m.FormatNumber.digits(C.lpad(""+(b.getMonth()+1),"0",2),c));break;case"M":g.b+=t.string(m.FormatNumber.digits(C.lpad(""+b.getMinutes(),"0",2),c));break;case"n":g.b+="\n";break;case"p":g.b+=t.string(11<b.getHours()?i.pm:i.am);break;case"P":g.b+=t.string((11<b.getHours()?i.pm:i.am).toLowerCase());break;case"q":g.b+=t.string(m.FormatNumber.digits(d?C.lpad(""+b.getSeconds()," ",2):""+b.getSeconds(),c));break;case"r":g.b+=t.string(m.FormatDate.format("%I:%M:%S %p",b,c));break;case"R":g.b+=t.string(m.FormatDate.format("%H:%M",b,c));break;case"s":g.b+=t.string(""+(b.getTime()/1e3|0));break;case"S":g.b+=t.string(m.FormatNumber.digits(C.lpad(""+b.getSeconds(),"0",2),c));break;case"t":g.b+="	";break;case"T":g.b+=t.string(m.FormatDate.format("%H:%M:%S",b,c));break;case"u":j=b.getDay();g.b+=t.string(m.FormatNumber.digits(0==j?"7":""+j,c));break;case"U":throw"Not Implemented Yet";case"V":throw"Not Implemented Yet";case"w":g.b+=t.string(m.FormatNumber.digits(""+b.getDay(),c));break;case"W":throw"Not Implemented Yet";case"x":g.b+=t.string(m.FormatDate.date(b,c));break;case"X":g.b+=t.string(m.FormatDate.time(b,c));break;case"y":g.b+=t.string(m.FormatNumber.digits(u.substr(""+b.getFullYear(),-2,null),c));break;case"Y":g.b+=t.string(m.FormatNumber.digits(""+b.getFullYear(),c));break;case"z":g.b+="+0000";break;case"Z":g.b+="GMT";break;case"%":g.b+="%";break;default:g.b+=t.string("%"+j)}e++}return g.b};m.FormatDate.getMHours=function(a){a=a.getHours();return 12<a?a-12:a};m.FormatDate.yearMonth=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternYearMonth,a,b,!1)};m.FormatDate.monthDay=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternMonthDay,a,b,!1)};m.FormatDate.date=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternDate,a,b,!1)};m.FormatDate.dateShort=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternDateShort,a,b,!1)};m.FormatDate.dateRfc=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternDateRfc,a,b,!1)};m.FormatDate.dateTime=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternDateTime,a,b,!1)};m.FormatDate.universal=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternUniversal,a,b,!1)};m.FormatDate.sortable=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternSortable,a,b,!1)};m.FormatDate.time=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternTime,a,b,!1)};m.FormatDate.timeShort=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatDate.format(b.date.patternTimeShort,a,b,!1)};m.FormatDate.hourShort=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return null==b.date.am?m.FormatDate.format("%H",a,b,!1):m.FormatDate.format("%l %p",a,b,!1)};m.FormatDate.year=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatNumber.digits(""+a.getFullYear(),b)};m.FormatDate.month=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatNumber.digits(""+(a.getMonth()+1),b)};m.FormatDate.monthName=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return b.date.abbrMonths[a.getMonth()]};m.FormatDate.monthNameShort=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return b.date.months[a.getMonth()]};m.FormatDate.weekDay=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatNumber.digits(""+(a.getDay()+b.date.firstWeekDay),b)};m.FormatDate.weekDayName=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return b.date.abbrDays[a.getDay()]};m.FormatDate.weekDayNameShort=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return b.date.days[a.getDay()]};m.FormatNumber=function(){};i["thx.culture.FormatNumber"]=m.FormatNumber;m.FormatNumber.__name__=["thx","culture","FormatNumber"];m.FormatNumber.decimal=function(a,b,c){null==c&&(c=m.Culture.get_defaultCulture());return m.FormatNumber.crunch(a,b,c.percent,c.number.patternNegative,c.number.patternPositive,c,null,null)};m.FormatNumber.percent=function(a,b,c){null==c&&(c=m.Culture.get_defaultCulture());return m.FormatNumber.crunch(a,b,c.percent,c.percent.patternNegative,c.percent.patternPositive,c,"%",c.symbolPercent)};m.FormatNumber.permille=function(a,b,c){null==c&&(c=m.Culture.get_defaultCulture());return m.FormatNumber.crunch(a,b,c.percent,c.percent.patternNegative,c.percent.patternPositive,c,"%",c.symbolPermille)};m.FormatNumber.currency=function(a,b,c,d){null==d&&(d=m.Culture.get_defaultCulture());return m.FormatNumber.crunch(a,c,d.currency,d.currency.patternNegative,d.currency.patternPositive,d,"$",null==b?d.currencySymbol:b)};m.FormatNumber["int"]=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatNumber.decimal(a,0,b)};m.FormatNumber.digits=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return m.FormatNumber.processDigits(a,b.digits)};m.FormatNumber.crunch=function(a,b,c,d,e,f,g,i){if(Math.isNaN(a))return f.symbolNaN;if(!Math.isFinite(a))return a==Math.NEGATIVE_INFINITY?f.symbolNegInf:f.symbolPosInf;b=m.FormatNumber.value(a,c,null==b?c.decimals:0>b?0:b,f.digits);return null!=g?C.replace(C.replace(0>a?d:e,"n",b),g,i):C.replace(0>a?d:e,"n",b)};m.FormatNumber.processDigits=function(a,b){if(null==b)return a;for(var c=[],d=0,e=a.length;d<e;){var f=d++;c.push(b[t.parseInt(u.substr(a,f,1))])}return c.join("")};m.FormatNumber.value=function(a,b,c,d){var e=""+Math.abs(a),f=e.indexOf("E");if(0<f){var a=t.parseInt(u.substr(e,f+1,null)),g=!0;0>a&&(g=!1,a=-a);e=C.replace(u.substr(e,0,f),".","");e=g?C.rpad(e,"0",a+1):"0"+C.rpad(".","0",a)+e}a=e.split(".");g=a[0];e=[];for(f=0;!(0==g.length);){var i=b.groups[f];if(g.length<=i){e.unshift(m.FormatNumber.processDigits(g,d));break}e.unshift(m.FormatNumber.processDigits(u.substr(g,-i,null),d));g=u.substr(g,0,-i);f<b.groups.length-1&&f++}g=e.join(b.groupsSeparator);return 0<c?(c=1==a.length?C.lpad("","0",c):a[1].length>c?u.substr(a[1],0,c):C.rpad(a[1],"0",c),g+b.decimalsSeparator+m.FormatNumber.processDigits(c,d)):g};m.FormatParams=function(){};i["thx.culture.FormatParams"]=m.FormatParams;m.FormatParams.__name__=["thx","culture","FormatParams"];m.FormatParams.cleanQuotes=function(a){if(1>=a.length)return a;var b=u.substr(a,0,1);return('"'==b||"'"==b)&&u.substr(a,-1,null)==b?u.substr(a,1,a.length-2):a};m.FormatParams.params=function(a,b,c){if(null!=b&&null!=a)return[a].concat(b);if((null==b||0==b.length)&&null==a)return[c];return null==b||0==b.length?(a=a.split(":"),[a[0]].concat(1==a.length?[]:I.map(u.iter(a[1].split(",")),function(a,b){return 0==b?a:m.FormatParams.cleanQuotes(a)}))):b};m.Language=function(){};i["thx.culture.Language"]=m.Language;m.Language.__name__=["thx","culture","Language"];m.Language.__properties__={get_languages:"get_languages"};m.Language.get_languages=function(){if(null==m.Language.languages)m.Language.languages=new L.StringMap;return m.Language.languages};m.Language.add=function(a){m.Language.get_languages().exists(a.iso2)||m.Language.get_languages().set(a.iso2,a)};m.Language.__super__=m.Info;m.Language.prototype=A(m.Info.prototype,{__class__:m.Language});m.core={};m.core.DateTimeInfo=function(a,b,c,d,e,f,g,i,j,k,l,m,n,p,q,s,r,t,u,kb){this.months=a;this.abbrMonths=b;this.days=c;this.abbrDays=d;this.shortDays=e;this.am=f;this.pm=g;this.separatorDate=i;this.separatorTime=j;this.firstWeekDay=k;this.patternYearMonth=l;this.patternMonthDay=m;this.patternDate=n;this.patternDateShort=p;this.patternDateRfc=q;this.patternDateTime=s;this.patternUniversal=r;this.patternSortable=t;this.patternTime=u;this.patternTimeShort=kb};i["thx.culture.core.DateTimeInfo"]=m.core.DateTimeInfo;m.core.DateTimeInfo.__name__=["thx","culture","core","DateTimeInfo"];m.core.DateTimeInfo.prototype={patternTimeShort:null,patternTime:null,patternSortable:null,patternUniversal:null,patternDateTime:null,patternDateRfc:null,patternDateShort:null,patternDate:null,patternMonthDay:null,patternYearMonth:null,firstWeekDay:null,separatorTime:null,separatorDate:null,pm:null,am:null,shortDays:null,abbrDays:null,days:null,abbrMonths:null,months:null,__class__:m.core.DateTimeInfo};m.core.NumberInfo=function(a,b,c,d,e,f){this.decimals=a;this.decimalsSeparator=b;this.groups=c;this.groupsSeparator=d;this.patternNegative=e;this.patternPositive=f};i["thx.culture.core.NumberInfo"]=m.core.NumberInfo;m.core.NumberInfo.__name__=["thx","culture","core","NumberInfo"];m.core.NumberInfo.prototype={patternPositive:null,patternNegative:null,groupsSeparator:null,groups:null,decimalsSeparator:null,decimals:null,__class__:m.core.NumberInfo};gb={En:function(){this.name="en";this.english="English";this["native"]="English";this.iso2="en";this.iso3="eng";this.pluralRule=1;m.Language.add(this)}};i["thx.languages.En"]=gb.En;gb.En.__name__=["thx","languages","En"];gb.En.__properties__={get_language:"get_language"};gb.En.get_language=function(){if(null==gb.En.language)gb.En.language=new gb.En;return gb.En.language};gb.En.__super__=m.Language;gb.En.prototype=A(m.Language.prototype,{__class__:gb.En});Na={EnUS:function(){this.language=gb.En.get_language();this.name="en-US";this.english="English (United States)";this["native"]="English (United States)";this.date=new m.core.DateTimeInfo("January,February,March,April,May,June,July,August,September,October,November,December,".split(","),"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,".split(","),"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),"Su,Mo,Tu,We,Th,Fr,Sa".split(","),"AM","PM","/",":",0,"%B, %Y","%B %d","%A, %B %d, %Y","%f/%e/%Y","%a, %d %b %Y %H:%M:%S GMT","%A, %B %d, %Y %l:%M:%S %p","%Y-%m-%d %H:%M:%SZ","%Y-%m-%dT%H:%M:%S","%l:%M:%S %p","%l:%M %p");this.symbolNaN="NaN";this.symbolPercent="%";this.symbolPermille="‰";this.signNeg="-";this.signPos="+";this.symbolNegInf="-Infinity";this.symbolPosInf="Infinity";this.number=new m.core.NumberInfo(2,".",[3],",","-n","n");this.currency=new m.core.NumberInfo(2,".",[3],",","($n)","$n");this.percent=new m.core.NumberInfo(2,".",[3],",","-n %","n %");this.pluralRule=1;this.nativeCurrency=this.englishCurrency="US Dollar";this.currencySymbol="$";this.currencyIso="USD";this.nativeRegion=this.englishRegion="United States";this.iso2="US";this.iso3="USA";this.isMetric=!1;m.Culture.add(this)}};i["thx.cultures.EnUS"]=Na.EnUS;Na.EnUS.__name__=["thx","cultures","EnUS"];Na.EnUS.__properties__={get_culture:"get_culture"};Na.EnUS.get_culture=function(){if(null==Na.EnUS.culture)Na.EnUS.culture=new Na.EnUS;return Na.EnUS.culture};Na.EnUS.__super__=m.Culture;Na.EnUS.prototype=A(m.Culture.prototype,{__class__:Na.EnUS});Ha.ValueEncoder=function(a){this.handler=a};i["thx.data.ValueEncoder"]=Ha.ValueEncoder;Ha.ValueEncoder.__name__=["thx","data","ValueEncoder"];Ha.ValueEncoder.prototype={encodeArray:function(a){this.handler.arrayStart();for(var b=0;b<a.length;){var c=a[b];++b;this.handler.arrayItemStart();this.encodeValue(c);this.handler.arrayItemEnd()}this.handler.arrayEnd()},encodeList:function(a){this.handler.arrayStart();for(a=a.iterator();a.hasNext();){var b=a.next();this.handler.arrayItemStart();this.encodeValue(b);this.handler.arrayItemEnd()}this.handler.arrayEnd()},encodeHash:function(a){this.handler.objectStart();for(var b=a.keys();b.hasNext();){var c=b.next();this.handler.objectFieldStart(c);this.encodeValue(a.get(c));this.handler.objectFieldEnd()}this.handler.objectEnd()},encodeObject:function(a){this.handler.objectStart();for(var b=0,c=j.fields(a);b<c.length;){var d=c[b];++b;this.handler.objectFieldStart(d);this.encodeValue(j.field(a,d));this.handler.objectFieldEnd()}this.handler.objectEnd()},encodeValue:function(a){var b=z["typeof"](a);switch(b[1]){case 0:this.handler.valueNull();break;case 1:this.handler.valueInt(a);break;case 2:this.handler.valueFloat(a);break;case 3:this.handler.valueBool(a);break;case 4:this.encodeObject(a);break;case 5:throw new H.Error("unable to encode TFunction type",null,null,{fileName:"ValueEncoder.hx",lineNumber:39,className:"thx.data.ValueEncoder",methodName:"encodeValue"});case 6:b=b[2];if(B.__instanceof(a,String))this.handler.valueString(a);else if(B.__instanceof(a,Array))this.encodeArray(a);else if(B.__instanceof(a,Date))this.handler.valueDate(a);else if(B.__instanceof(a,Ed))this.encodeHash(a);else if(B.__instanceof(a,de))this.encodeList(a);else throw new H.Error("unable to encode class '{0}'",null,z.getClassName(b),{fileName:"ValueEncoder.hx",lineNumber:53,className:"thx.data.ValueEncoder",methodName:"encodeValue"});break;case 7:throw new H.Error("unable to encode TEnum type '{0}'",null,z.getEnumName(b[2]),{fileName:"ValueEncoder.hx",lineNumber:55,className:"thx.data.ValueEncoder",methodName:"encodeValue"});case 8:throw new H.Error("unable to encode TUnknown type",null,null,{fileName:"ValueEncoder.hx",lineNumber:57,className:"thx.data.ValueEncoder",methodName:"encodeValue"})}},encode:function(a){this.handler.start();
this.encodeValue(a);this.handler.end()},handler:null,__class__:Ha.ValueEncoder};Ha.ValueHandler=function(){};i["thx.data.ValueHandler"]=Ha.ValueHandler;Ha.ValueHandler.__name__=["thx","data","ValueHandler"];Ha.ValueHandler.__interfaces__=[Ha.IDataHandler];Ha.ValueHandler.prototype={valueBool:function(a){this._stack.push(a)},valueNull:function(){this._stack.push(null)},valueFloat:function(a){this._stack.push(a)},valueInt:function(a){this._stack.push(a)},valueString:function(a){this._stack.push(a)},valueDate:function(a){this._stack.push(a)},arrayItemEnd:function(){var a=this._stack.pop();S.last(this._stack).push(a)},arrayItemStart:function(){},arrayEnd:function(){},arrayStart:function(){this._stack.push([])},objectFieldEnd:function(){var a=this._stack.pop();S.last(this._stack)[this._names.pop()]=a},objectFieldStart:function(a){this._names.push(a)},objectEnd:function(){},objectStart:function(){this._stack.push({})},end:function(){this.value=this._stack.pop()},start:function(){this._stack=[];this._names=[]},_names:null,_stack:null,value:null,__class__:Ha.ValueHandler};s={DateParser:function(){}};i["thx.date.DateParser"]=s.DateParser;s.DateParser.__name__=["thx","date","DateParser"];s.DateParser.parse=function(a,b){var c=s.DateParser.parseTime(a),d;null==b&&(b=new Date);null!=c.matched&&(a=C.replace(a,c.matched,""));var e=0,f=0,g=0,i=null!=c.matched;if(s.DateParser.dateexp.match(a))if(i=!0,a=C.replace(a,s.DateParser.dateexp.matched(0),""),null!=(d=s.DateParser.dateexp.matched(1)))g=t.parseInt(s.DateParser.dateexp.matched(2)),f=s.DateParser.months.indexOf(d.toLowerCase()),e=null!=(d=s.DateParser.dateexp.matched(3))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(4)))g=t.parseInt(s.DateParser.dateexp.matched(5)),f=s.DateParser.shortmonths.indexOf(d.toLowerCase()),e=null!=(d=s.DateParser.dateexp.matched(6))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(8)))f=s.DateParser.months.indexOf(d.toLowerCase()),g=null!=(d=s.DateParser.dateexp.matched(7))?t.parseInt(d):1,e=null!=(d=s.DateParser.dateexp.matched(9))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(11)))f=s.DateParser.shortmonths.indexOf(d.toLowerCase()),g=null!=(d=s.DateParser.dateexp.matched(10))?t.parseInt(d):1,e=null!=(d=s.DateParser.dateexp.matched(12))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(14)))f=s.DateParser.months.indexOf(d.toLowerCase()),g=null!=(d=s.DateParser.dateexp.matched(13))?t.parseInt(d):1,e=null!=(d=s.DateParser.dateexp.matched(15))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(17)))f=s.DateParser.shortmonths.indexOf(d.toLowerCase()),g=null!=(d=s.DateParser.dateexp.matched(16))?t.parseInt(d):1,e=null!=(d=s.DateParser.dateexp.matched(18))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(19)))g=t.parseInt(s.DateParser.dateexp.matched(20)),f=t.parseInt(d)-1,e=null!=(d=s.DateParser.dateexp.matched(21))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(23)))g=t.parseInt(s.DateParser.dateexp.matched(22)),f=t.parseInt(d)-1,e=null!=(d=s.DateParser.dateexp.matched(24))?s.DateParser.fixyear(t.parseInt(d)):b.getFullYear();else if(null!=(d=s.DateParser.dateexp.matched(25)))e=s.DateParser.fixyear(t.parseInt(d)),g=t.parseInt(s.DateParser.dateexp.matched(27)),f=t.parseInt(s.DateParser.dateexp.matched(26))-1;else{if(null!=(d=s.DateParser.dateexp.matched(28)))e=b.getFullYear(),g=t.parseInt(d),f=b.getMonth()}else if(s.DateParser.absdateexp.match(a)){i=!0;a=C.replace(a,s.DateParser.absdateexp.matched(0),"");e=b.getFullYear();f=b.getMonth();g=b.getDate();if(null!=(d=s.DateParser.absdateexp.matched(1))){var j=d.toLowerCase();switch(j){case"now":case"this second":if(null==c.matched)c.hour=b.getHours(),c.minute=b.getMinutes(),c.second=b.getSeconds();break;case"tomorrow":g+=1;break;case"yesterday":g-=1}}else if(null!=(d=s.DateParser.absdateexp.matched(3)))var k=s.DateParser.absdateexp.matched(2),j=s.DateParser.months.indexOf(d.toLowerCase()),e=j==f?e+(s.DateParser.last(k)?-1:s.DateParser.next(k)?1:0):j>f?e+(s.DateParser.last(k)?-1:0):e+(s.DateParser.next(k)?1:0),f=j,g=1;else if(null!=(d=s.DateParser.absdateexp.matched(5)))var k=s.DateParser.absdateexp.matched(4),j=s.DateParser.days.indexOf(d.toLowerCase()),l=b.getDay(),g=j==l?g+(s.DateParser.last(k)?-7:s.DateParser.next(k)?7:0):j>l?g+(j-l+(s.DateParser.last(k)?-7:0)):g+(j-l+(s.DateParser.next(k)?7:0));else if(null!=(d=s.DateParser.absdateexp.matched(7)))k=s.DateParser.absdateexp.matched(6),j=s.DateParser.shortmonths.indexOf(d.toLowerCase()),e=j==f?e+(s.DateParser.last(k)?-1:s.DateParser.next(k)?1:0):j>f?e+(s.DateParser.last(k)?-1:0):e+(s.DateParser.next(k)?1:0),f=j,g=1;else if(null!=(d=s.DateParser.absdateexp.matched(9)))k=s.DateParser.absdateexp.matched(8),j=s.DateParser.shortdays.indexOf(d.toLowerCase()),l=b.getDay(),g=j==l?g+(s.DateParser.last(k)?-7:s.DateParser.next(k)?7:0):j>l?g+(j-l+(s.DateParser.last(k)?-7:0)):g+(j-l+(s.DateParser.next(k)?7:0));if(null==c.matched)c.matched="x"}else e=b.getFullYear(),f=b.getMonth(),g=b.getDate();for(;s.DateParser.relexp.match(a);){i=!0;a=C.replace(a,s.DateParser.relexp.matched(0),"");j=s.DateParser.relexp.matched(1);if(null!=j)k=null!=(d=s.DateParser.relexp.matched(2))?t.parseInt(d):1,l=s.DateParser.relexp.matched(3);else{l=s.DateParser.relexp.matched(5);if(null==l)break;k=null!=(d=s.DateParser.relexp.matched(4))?t.parseInt(d):1;j=null!=(d=s.DateParser.relexp.matched(6))?d:"after"}j=j.toLowerCase();switch(j){case"minus":case"-":case"before":case"ago":k=-k}switch(j){case"ago":case"in":if(null==c.matched)c.hour=b.getHours(),c.minute=b.getMinutes(),c.second=b.getSeconds(),c.matched="x"}j=l.toLowerCase();switch(j){case"second":case"seconds":c.second+=k;break;case"minute":case"minutes":c.minute+=k;break;case"hour":case"hours":c.hour+=k;break;case"day":case"days":g+=k;break;case"week":case"weeks":g+=7*k;break;case"month":case"months":f+=k;break;case"year":case"years":e+=k}}if(!i)throw new H.Error("no date information found in the string '{0}'",null,a,{fileName:"DateParser.hx",lineNumber:339,className:"thx.date.DateParser",methodName:"parse"});d=new Date;d.setTime(new Date(e,f,g,c.hour,c.minute,c.second).getTime()+c.millis);return d};s.DateParser.parseTime=function(a){var b={hour:0,minute:0,second:0,millis:0,matched:null};if(!s.DateParser.timeexp.match(a))return b;b.matched=s.DateParser.timeexp.matched(0);var c;if(null!=(c=s.DateParser.timeexp.matched(1)))b.hour=t.parseInt(c)+s.DateParser.plusPm(s.DateParser.timeexp.matched(3)),b.minute=t.parseInt(s.DateParser.timeexp.matched(2));else if(null!=(c=s.DateParser.timeexp.matched(4))){b.hour=t.parseInt(c);b.minute=t.parseInt(s.DateParser.timeexp.matched(5));if(null!=(c=s.DateParser.timeexp.matched(6)))b.second=t.parseInt(c);if(null!=(c=s.DateParser.timeexp.matched(7)))b.millis=t.parseFloat(c)/1e3}else if(null!=(c=s.DateParser.timeexp.matched(8)))b.hour=t.parseInt(c)+s.DateParser.plusPm(s.DateParser.timeexp.matched(10)),b.minute=t.parseInt(s.DateParser.timeexp.matched(9));else if(null!=(c=s.DateParser.timeexp.matched(11)))b.hour=t.parseInt(c)+s.DateParser.plusPm(s.DateParser.timeexp.matched(12));else if(null!=(c=s.DateParser.timeexp.matched(13)))switch(c.toLowerCase()){case"evening":b.hour=17;break;case"morning":b.hour=8;break;case"afternoon":b.hour=14;break;case"sunsrise":case"dawn":b.hour=6;break;case"sunset":case"dusk":b.hour=19;break;case"noon":case"midday":case"mid-day":b.hour=12;break;case"mid-night":case"midnight":b.hour=23,b.minute=59,b.second=59,b.millis=.999}else throw new H.Error("failed to parse time for '{0}'",null,a,{fileName:"DateParser.hx",lineNumber:406,className:"thx.date.DateParser",methodName:"parseTime"});return b};s.DateParser.fixyear=function(a){return 70>a?2e3+a:100>a?1900+a:a};s.DateParser.last=function(a){return null==a?!1:"last"==a.toLowerCase()};s.DateParser.next=function(a){return null==a?!0:"next"==a.toLowerCase()};s.DateParser.plusPm=function(a){if(null==a)a=0;else switch(a.toLowerCase()){case"pm":case"evening":case"afternoon":a=12;break;default:a=0}return a};Z={Message:function(a,b,c){this.message=a;this.params=null==b?[]:b;null!=c&&this.params.push(c)}};i["thx.util.Message"]=Z.Message;Z.Message.__name__=["thx","util","Message"];Z.Message.prototype={toString:function(){return J.format(this.message,this.params)},params:null,message:null,__class__:Z.Message};H={Error:function(a,b,c,d){Z.Message.call(this,a,b,c);this.pos=d}};i["thx.error.Error"]=H.Error;H.Error.__name__=["thx","error","Error"];H.Error.__super__=Z.Message;H.Error.prototype=A(Z.Message.prototype,{toString:function(){try{return J.format(this.message,this.params)}catch(a){return""}},pos:null,__class__:H.Error});H.AbstractMethod=function(a){H.Error.call(this,"method {0}.{1}() is abstract",[a.className,a.methodName],a,{fileName:"AbstractMethod.hx",lineNumber:14,className:"thx.error.AbstractMethod",methodName:"new"})};i["thx.error.AbstractMethod"]=H.AbstractMethod;H.AbstractMethod.__name__=["thx","error","AbstractMethod"];H.AbstractMethod.__super__=H.Error;H.AbstractMethod.prototype=A(H.Error.prototype,{__class__:H.AbstractMethod});H.NullArgument=function(a,b,c){null==b&&(b="invalid null or empty argument '{0}' for method {1}.{2}()");H.Error.call(this,b,[a,c.className,c.methodName],c,{fileName:"NullArgument.hx",lineNumber:16,className:"thx.error.NullArgument",methodName:"new"})};i["thx.error.NullArgument"]=H.NullArgument;H.NullArgument.__name__=["thx","error","NullArgument"];H.NullArgument.__super__=H.Error;H.NullArgument.prototype=A(H.Error.prototype,{__class__:H.NullArgument});W={IProjection:function(){}};i["thx.geo.IProjection"]=W.IProjection;W.IProjection.__name__=["thx","geo","IProjection"];W.IProjection.prototype={project:null,__class__:W.IProjection};W.Albers=function(){this._origin=[-98,38];this._parallels=[29.5,45.5];this._scale=1e3;this._translate=[480,250];this.reload()};i["thx.geo.Albers"]=W.Albers;W.Albers.__name__=["thx","geo","Albers"];W.Albers.__interfaces__=[W.IProjection];W.Albers.prototype={get_scale:function(){return this._scale},set_scale:function(a){return this._scale=a},reload:function(){var a=.017453292519943295*this.get_parallels()[0],b=.017453292519943295*this.get_parallels()[1],c=.017453292519943295*this.get_origin()[1],d=Math.sin(a),a=Math.cos(a);this.lng0=.017453292519943295*this.get_origin()[0];this.n=.5*(d+Math.sin(b));this.C=a*a+2*this.n*d;this.p0=Math.sqrt(this.C-2*this.n*Math.sin(c))/this.n;return this},set_translate:function(a){this._translate=[a[0],a[1]];return a},get_translate:function(){return this._translate.slice()},set_parallels:function(a){this._parallels=[a[0],a[1]];this.reload();return a},get_parallels:function(){return this._parallels.slice()},set_origin:function(a){this._origin=[a[0],a[1]];this.reload();return a},get_origin:function(){return this._origin.slice()},project:function(a){var b=this.n*(.017453292519943295*a[0]-this.lng0),a=Math.sqrt(this.C-2*this.n*Math.sin(.017453292519943295*a[1]))/this.n;return[this.get_scale()*a*Math.sin(b)+this.get_translate()[0],this.get_scale()*(a*Math.cos(b)-this.p0)+this.get_translate()[1]]},_scale:null,_translate:null,_parallels:null,_origin:null,p0:null,C:null,n:null,lng0:null,__class__:W.Albers};W.AlbersUsa=function(){this.lower48=new W.Albers;this.alaska=new W.Albers;this.alaska.set_origin([-160,60]);this.alaska.set_parallels([55,65]);this.hawaii=new W.Albers;this.hawaii.set_origin([-160,20]);this.hawaii.set_parallels([8,18]);this.puertoRico=new W.Albers;this.puertoRico.set_origin([-60,10]);this.puertoRico.set_parallels([8,18]);this.set_scale(this.lower48.get_scale())};i["thx.geo.AlbersUsa"]=W.AlbersUsa;W.AlbersUsa.__name__=["thx","geo","AlbersUsa"];W.AlbersUsa.__interfaces__=[W.IProjection];W.AlbersUsa.prototype={set_translate:function(a){var b=this.lower48.get_scale()/1e3,c=a[0],d=a[1];this.lower48.set_translate(a);this.alaska.set_translate([c-400*b,d+170*b]);this.hawaii.set_translate([c-190*b,d+200*b]);this.puertoRico.set_translate([c+580*b,d+430*b]);return a},set_scale:function(a){this.lower48.set_scale(a);this.alaska.set_scale(.6*a);this.hawaii.set_scale(a);this.puertoRico.set_scale(1.5*a);this.set_translate(this.lower48.get_translate());return a},project:function(a){var b=a[0],c=a[1];return(50<c?this.alaska:-140>b?this.hawaii:21>c?this.puertoRico:this.lower48).project(a)},puertoRico:null,hawaii:null,alaska:null,lower48:null,__class__:W.AlbersUsa};W.Azimuthal=function(){this.set_mode(W.ProjectionMode.Orthographic);this.set_scale(200);this.set_translate([480,250]);this.set_origin([0,0])};i["thx.geo.Azimuthal"]=W.Azimuthal;W.Azimuthal.__name__=["thx","geo","Azimuthal"];W.Azimuthal.__interfaces__=[W.IProjection];W.Azimuthal.prototype={get_mode:function(){return this.mode},set_mode:function(a){return this.mode=a},get_scale:function(){return this.scale},set_scale:function(a){return this.scale=a},set_translate:function(a){this.translate=[a[0],a[1]];return a},get_translate:function(){return this.translate.slice()},set_origin:function(a){this.origin=[a[0],a[1]];this.x0=.017453292519943295*a[0];this.y0=.017453292519943295*a[1];this.cy0=Math.cos(this.y0);this.sy0=Math.sin(this.y0);return a},project:function(a){var b=.017453292519943295*a[0]-this.x0,c=.017453292519943295*a[1],a=Math.cos(b),b=Math.sin(b),d=Math.cos(c),c=Math.sin(c),e;switch(this.get_mode()[1]){case 0:e=1;break;case 1:e=1/(1+this.sy0*c+this.cy0*d*a)}a=e*(this.sy0*d*a-this.cy0*c);return[this.get_scale()*e*d*b+this.get_translate()[0],this.get_scale()*a+this.get_translate()[1]]},sy0:null,cy0:null,y0:null,x0:null,translate:null,scale:null,origin:null,mode:null,__class__:W.Azimuthal,__properties__:{set_mode:"set_mode",get_mode:"get_mode",set_origin:"set_origin",set_scale:"set_scale",get_scale:"get_scale",set_translate:"set_translate",get_translate:"get_translate"}};W.ProjectionMode={__ename__:["thx","geo","ProjectionMode"],__constructs__:["Orthographic","Stereographic"]};W.ProjectionMode.Orthographic=["Orthographic",0];W.ProjectionMode.Orthographic.toString=q;W.ProjectionMode.Orthographic.__enum__=W.ProjectionMode;W.ProjectionMode.Stereographic=["Stereographic",1];W.ProjectionMode.Stereographic.toString=q;W.ProjectionMode.Stereographic.__enum__=W.ProjectionMode;W.Mercator=function(){this.set_scale(500);this.set_translate([480,250])};i["thx.geo.Mercator"]=W.Mercator;W.Mercator.__name__=["thx","geo","Mercator"];W.Mercator.__interfaces__=[W.IProjection];W.Mercator.prototype={set_translate:function(a){this.translate=[a[0],a[1]];return a},get_translate:function(){return this.translate.slice()},get_scale:function(){return this.scale},set_scale:function(a){return this.scale=a},project:function(a){var b=a[0]/360,a=-(Math.log(Math.tan(Math.PI/4+.017453292519943295*a[1]/2))/.017453292519943295)/360;return[this.get_scale()*b+this.get_translate()[0],this.get_scale()*Math.max(-.5,Math.min(.5,a))+this.get_translate()[1]]},translate:null,scale:null,__class__:W.Mercator,__properties__:{set_scale:"set_scale",get_scale:"get_scale",set_translate:"set_translate",get_translate:"get_translate"}};R={Polygon:function(a){this.coordinates=a}};i["thx.geom.Polygon"]=R.Polygon;R.Polygon.__name__=["thx","geom","Polygon"];R.Polygon.prototype={centroid:function(a){var b,c,d,e=0,f=0;null==a&&(a=1/(6*this.area()));for(var g=0,i=this.coordinates.length-1;g<i;)c=g++,b=this.coordinates[c],c=this.coordinates[c+1],d=b[0]*c[1]-c[0]*b[1],e+=(b[0]+c[0])*d,f+=(b[1]+c[1])*d;return[e*a,f*a]},area:function(){for(var a=this.coordinates.length,b=this.coordinates[a-1][0]*this.coordinates[0][1],c=this.coordinates[a-1][1]*this.coordinates[0][0],d=1;d<a;)var e=d++,b=b+this.coordinates[e-1][0]*this.coordinates[e][1],c=c+this.coordinates[e-1][1]*this.coordinates[e][0];return.5*(c-b)},coordinates:null,__class__:R.Polygon};R.layout={};R.layout.Pie=function(){this._startAngle=function(){return 0};this._endAngle=function(){return 6.283185307179586};this._sort=null;this._value=function(a){return Number(a)}};i["thx.geom.layout.Pie"]=R.layout.Pie;R.layout.Pie.__name__=["thx","geom","layout","Pie"];R.layout.Pie.prototype={pie:function(a,b){var c=this._startAngle(a,b),d=this._endAngle(a,b)-c,e=P.range(a.length);if(null!=this._sort){var f=this._sort;e.sort(function(b,c){return f(a[b],a[c])})}var g=I.map(u.iter(a),this._value),d=d/g.reduce(function(a,b){return a+b},0);Math.isFinite(d)||(d=0);var i,j=I.map(u.iter(e),function(a,b){i=g[b];return{value:i,startAngle:c,endAngle:c+=i*d}});return I.map(u.iter(a),function(a,b){return j[e[b]]})},_value:null,_sort:null,_endAngle:null,_startAngle:null,__class__:R.layout.Pie};R.layout.Stack=function(){this._order=R.layout.StackOrder.DefaultOrder;this._offset=R.layout.StackOffset.ZeroOffset};i["thx.geom.layout.Stack"]=R.layout.Stack;R.layout.Stack.__name__=["thx","geom","layout","Stack"];R.layout.Stack.getStackOrder=function(a,b){switch(a[1]){case 0:return P.range(b.length);case 1:var c=b.length,d=I.map(u.iter(b),R.layout.Stack.stackMaxIndex),e=I.map(u.iter(b),R.layout.Stack.stackReduceSum),f=P.range(c),g=0,i=0,j=[],k=[];f.sort(function(a,b){return d[a]-d[b]});for(var l=0;l<c;){var m=l++,m=f[m];g<i?(g+=e[m],j.push(m)):(i+=e[m],k.push(m))}k.reverse();return k.concat(j);case 2:return f=P.range(b.length),f.reverse(),f}};R.layout.Stack.getStackOffset=function(a,b,c){switch(a[1]){case 0:for(var a=c.length,d=c[0].length,e=[],f=0,g,i=0;i<d;){for(var j=i++,k=g=0;k<a;){var l=k++;g+=c[l][j].y}g>f&&(f=g);e.push(g)}l=b[0];for(i=0;i<d;)j=i++,c[l][j].y0=(f-e[j])/2;break;case 1:var a=c.length,f=c[0],d=f.length,m,n=b[0],p,q,s,r,t;c[n][0].y0=g=t=0;for(i=1;i<d;){j=i++;for(k=p=0;k<a;)l=k++,p+=c[l][j].y;q=0;r=f[j].x-f[j-1].x;for(k=0;k<a;){l=k++;m=b[l];s=(c[m][j].y-c[m][j-1].y)/(2*r);for(var u=0;u<l;){var kb=u++;s+=(c[e=b[kb]][j].y-c[e][j-1].y)/r}q+=s*c[m][j].y}c[n][j].y0=g-=0!=p?q/p*r:0;g<t&&(t=g)}for(i=0;i<d;)j=i++,c[n][j].y0-=t;break;case 2:d=c[0].length;n=b[0];for(i=0;i<d;)j=i++,c[n][j].y0=0}};R.layout.Stack.stackMaxIndex=function(a){for(var b=0,c=a[0].y,d,e=a.length,f=1;f<e;){var g=f++;if((d=a[g].y)>c)b=g,c=d}return b};R.layout.Stack.stackReduceSum=function(a){return a.reduce(R.layout.Stack.stackSum,0)};R.layout.Stack.stackSum=function(a,b){return a+b.y};R.layout.Stack.prototype={offset:function(a){this._offset=a;return this},order:function(a){this._order=a;return this},stack:function(a){for(var b=a.length,c=a[0].length,d=[],e=0;e<b;){var f=e++,g=[];d.push(g);for(var i=0;i<c;){var j=i++,k=a[f][j];g[j]={x:k.x,y:k.y,y0:0}}}g=R.layout.Stack.getStackOrder(this._order,d);R.layout.Stack.getStackOffset(this._offset,g,d);for(e=0;e<c;){j=e++;a=d[g[0]][j].y0;for(i=1;i<b;)f=i++,d[g[f]][j].y0=a+=d[g[f-1]][j].y}return d},_offset:null,_order:null,__class__:R.layout.Stack};R.layout.StackOrder={__ename__:["thx","geom","layout","StackOrder"],__constructs__:["DefaultOrder","InsideOut","ReverseOrder"]};R.layout.StackOrder.DefaultOrder=["DefaultOrder",0];R.layout.StackOrder.DefaultOrder.toString=q;R.layout.StackOrder.DefaultOrder.__enum__=R.layout.StackOrder;R.layout.StackOrder.InsideOut=["InsideOut",1];R.layout.StackOrder.InsideOut.toString=q;R.layout.StackOrder.InsideOut.__enum__=R.layout.StackOrder;R.layout.StackOrder.ReverseOrder=["ReverseOrder",2];R.layout.StackOrder.ReverseOrder.toString=q;R.layout.StackOrder.ReverseOrder.__enum__=R.layout.StackOrder;R.layout.StackOffset={__ename__:["thx","geom","layout","StackOffset"],__constructs__:["Silhouette","Wiggle","ZeroOffset"]};R.layout.StackOffset.Silhouette=["Silhouette",0];R.layout.StackOffset.Silhouette.toString=q;R.layout.StackOffset.Silhouette.__enum__=R.layout.StackOffset;R.layout.StackOffset.Wiggle=["Wiggle",1];R.layout.StackOffset.Wiggle.toString=q;R.layout.StackOffset.Wiggle.__enum__=R.layout.StackOffset;R.layout.StackOffset.ZeroOffset=["ZeroOffset",2];R.layout.StackOffset.ZeroOffset.toString=q;R.layout.StackOffset.ZeroOffset.__enum__=R.layout.StackOffset;r={EdgeSplitter:function(){}};i["thx.graph.EdgeSplitter"]=r.EdgeSplitter;r.EdgeSplitter.__name__=["thx","graph","EdgeSplitter"];r.EdgeSplitter.prototype={split:function(a,b,c,d){var e=a.layers(),f,g;null==d&&(d=function(){});for(var i=a.graph.nodes.collection.iterator();i.hasNext();){var j=i.next();f=a.cell(j);for(j=j.graph.edges.positives(j);j.hasNext();){var k=j.next();g=a.cell(k.head);if(f.layer!=g.layer&&f.layer!=g.layer-1&&f.layer!=g.layer+1){var l=[f.layer<g.layer?1:-1];g=P.abs(g.layer-f.layer)-1;b.push(k.split(g,c,function(a){return function(b,c,g){e[f.layer+(1+g)*a[0]].push(b.head.id);d(b,c,g)}}(l)))}}}return new r.GraphLayout(a.graph,e)},__class__:r.EdgeSplitter};r.GraphElement=function(a,b,c){this.id=b;this.data=c;this.graph=a};i["thx.graph.GraphElement"]=r.GraphElement;r.GraphElement.__name__=["thx","graph","GraphElement"];r.GraphElement.prototype={destroy:function(){this.graph=null;this.id=-1},data:null,id:null,graph:null,__class__:r.GraphElement};r.GEdge=function(a,b,c,d,e,f){r.GraphElement.call(this,a,b,f);this.tail=c;this.head=d;this.weight=e};i["thx.graph.GEdge"]=r.GEdge;r.GEdge.__name__=["thx","graph","GEdge"];r.GEdge.create=function(a,b,c,d,e,f){return new r.GEdge(a,b,c,d,e,f)};r.GEdge.__super__=r.GraphElement;r.GEdge.prototype=A(r.GraphElement.prototype,{invert:function(){var a=this.graph.edges.create(this.head,this.tail,this.weight,this.data);this.graph.edges._remove(this);return a},split:function(a,b,c){null==a&&(a=1);if(1>a)throw new H.Error("the split times parameter must be an integer value greater than zero",null,null,{fileName:"GEdge.hx",lineNumber:34,className:"thx.graph.GEdge",methodName:"split"});null==c&&(c=function(){});null==b&&(b=function(){return null});for(var d=this,e=[],f,g,i=d.graph,j=0;j<a;){var k=j++;f=i.nodes.create(b(d));g=i.edges.create(d.tail,f,d.weight,d.data);f=i.edges.create(f,d.head,d.weight,d.data);i.edges.remove(d);c(g,f,k);d=f;i=d.graph;e.push(g)}e.push(d);return e},destroy:function(){r.GraphElement.prototype.destroy.call(this);this.head=this.tail=null},weight:null,head:null,tail:null,__class__:r.GEdge});r.GNode=function(a,b,c){r.GraphElement.call(this,a,b,c)};i["thx.graph.GNode"]=r.GNode;r.GNode.__name__=["thx","graph","GNode"];r.GNode.create=function(a,b,c){return new r.GNode(a,b,c)};r.GNode.__super__=r.GraphElement;r.GNode.prototype=A(r.GraphElement.prototype,{negatives:function(){return this.graph.edges.negatives(this)},positives:function(){return this.graph.edges.positives(this)},predecessorBy:function(a){return I.firstf(this.graph.edges.positives(this),function(b){return b.head.id==a.id})},isIsolated:function(){return!this.graph.edges.edges(this).hasNext()},isSink:function(){return this.graph.edges.negatives(this).hasNext()&&!this.graph.edges.positives(this).hasNext()},isSource:function(){return this.graph.edges.positives(this).hasNext()&&!this.graph.edges.negatives(this).hasNext()},_weight:function(a){for(var b=0;a.hasNext();)var c=a.next(),b=b+c.weight;return b},negativeWeight:function(){return this._weight(this.graph.edges.negatives(this))},positiveWeight:function(){return this._weight(this.graph.edges.positives(this))},connectedBy:function(a){if(a.graph!=this.graph)throw new H.Error("the node is not part of this graph",null,null,{fileName:"GNode.hx",lineNumber:41,className:"thx.graph.GNode",methodName:"connectedBy"});var b=I.firstf(this.graph.edges.positives(this),function(b){return b.head.id==a.id});return null!=b?b:I.firstf(this.graph.edges.negatives(this),function(b){return b.tail.id==a.id})},destroy:function(){r.GraphElement.prototype.destroy.call(this)},__class__:r.GNode});r.Graph=function(a,b){this.nodes=r.GraphNodes.newInstance(this,a);this.edges=r.GraphEdges.newInstance(this,b)};i["thx.graph.Graph"]=r.Graph;r.Graph.__name__=["thx","graph","Graph"];r.Graph.prototype={findIsolateds:function(){return I.filter(this.nodes.iterator(),function(a){return a.isIsolated()})},findSource:function(){return I.firstf(this.nodes.iterator(),function(a){return a.isSource()})},findSink:function(){return I.firstf(this.nodes.iterator(),function(a){return a.isSink()})},findSinks:function(){return I.filter(this.nodes.iterator(),function(a){return a.isSink()})},clone:function(){var a=new r.Graph;a.nodes=this.nodes.copyTo(a);a.edges=this.edges.copyTo(a);return a},edges:null,nodes:null,__class__:r.Graph};r.GraphCollection=function(a,b){var c=this;this.nextid=0;this.graph=a;this.idf=b;this.collection=new L.IntMap;this._map=new L.StringMap;if(null!=b){var d=v(this,this.collectionCreate);this.collectionCreate=function(a){c._map.set(b(a.data),a);d(a)};var e=v(this,this.collectionRemove);this.collectionRemove=function(a){c._map.remove(b(a.data));e(a)}}this.onRemove=new Fc;this.onCreate=new Fc};i["thx.graph.GraphCollection"]=r.GraphCollection;r.GraphCollection.__name__=["thx","graph","GraphCollection"];r.GraphCollection.prototype={iterator:function(){return this.collection.iterator()},collectionRemove:function(a){this.collection.remove(a.id);this.onRemove.dispatch(a)},collectionCreate:function(a){this.onCreate.dispatch(a);this.collection.set(a.id,a)},get:function(a){return this.collection.get(a)},getById:function(a){return this._map.get(a)},_map:null,idf:null,nextid:null,collection:null,graph:null,onCreate:null,onRemove:null,__class__:r.GraphCollection};r.GraphEdges=function(a,b){r.GraphCollection.call(this,a,b);this.edgesp=new L.IntMap;this.edgesn=new L.IntMap};i["thx.graph.GraphEdges"]=r.GraphEdges;r.GraphEdges.__name__=["thx","graph","GraphEdges"];r.GraphEdges.newInstance=function(a,b){return new r.GraphEdges(a,b)};r.GraphEdges.__super__=r.GraphCollection;r.GraphEdges.prototype=A(r.GraphCollection.prototype,{removeConnection:function(a,b,c){var d=c.get(b);null!=d&&(u.remove(d,a),0==d.length&&c.remove(b))},connections:function(a,b){var c=b.get(a);null==c&&b.set(a,c=[]);return c},_unlink:function(a,b){var c=b.get(a.id);if(null!=c){for(var c=c.slice(),d=0;d<c.length;){var e=c[d];++d;e=this.get(e);null==e||null==e.graph||this._remove(e)}b.remove(a.id)}},_edges:function(a,b){var c=this;return this._edgeids(a,b).map(function(a){return c.get(a)})},_edgeids:function(a,b){var c=b.get(a);null==c&&(c=[]);return c},edgeCount:function(a){return this._edgeids(a.id,this.edgesp).length+this._edgeids(a.id,this.edgesn).length},negativeCount:function(a){return this._edgeids(a.id,this.edgesn).length},positiveCount:function(a){return this._edgeids(a.id,this.edgesp).length},edges:function(a){return u.iter(this._edges(a.id,this.edgesp).concat(this._edges(a.id,this.edgesn)))},_sort:function(a,b,c){var d=this,a=c.get(a.id);null!=a&&a.sort(function(a,c){var f=d.graph.edges.get(a),g=d.graph.edges.get(c);return b(f,g)})},sortNegatives:function(a,b){this._sort(a,b,this.edgesn)},sortPositives:function(a,b){this._sort(a,b,this.edgesp)},negatives:function(a){return u.iter(this._edges(a.id,this.edgesn))},positives:function(a){return u.iter(this._edges(a.id,this.edgesp))},unlink:function(a){if(a.graph!=this.graph)throw new H.Error("unlink: the node is not part of this graph",null,null,{fileName:"GraphEdges.hx",lineNumber:70,className:"thx.graph.GraphEdges",methodName:"unlink"});this._unlink(a,this.edgesp);this._unlink(a,this.edgesn)},_remove:function(a){this.collectionRemove(a);this.removeConnection(a.id,a.tail.id,this.edgesp);this.removeConnection(a.id,a.head.id,this.edgesn);a.destroy()},remove:function(a){if(a.graph!=this.graph)throw new H.Error("remove: the edge is not part of this graph",null,null,{fileName:"GraphEdges.hx",lineNumber:55,className:"thx.graph.GraphEdges",methodName:"remove"});this._remove(a)},_create:function(a,b,c,d,e){d=r.GEdge.create(this.graph,a,b,c,d,e);this.collectionCreate(d);this.connections(b.id,this.edgesp).push(a);this.connections(c.id,this.edgesn).push(a);return d},create:function(a,b,c,d){null==c&&(c=1);if(a.graph!=b.graph||a.graph!=this.graph)throw new H.Error("can't create an edge between nodes on different graphs",null,null,{fileName:"GraphEdges.hx",lineNumber:39,className:"thx.graph.GraphEdges",methodName:"create"});return this._create(++this.nextid,a,b,c,d)},copyTo:function(a){for(var b=new r.GraphEdges(a),a=a.nodes,c,d,e=this.collection.iterator();e.hasNext();){var f=e.next();c=a.get(f.tail.id);d=a.get(f.head.id);b._create(f.id,c,d,f.weight,f.data)}b.nextid=this.nextid;return b},edgesn:null,edgesp:null,__class__:r.GraphEdges});r.GraphLayout=function(a,b){this.graph=a;this._layers=b.map(function(a){return a.slice()});this.friendCell=this._cell=new r.LayoutCell;this._updateMap();this.length=this._layers.length;a.nodes.onRemove.add(v(this,this._nodeRemove))};i["thx.graph.GraphLayout"]=r.GraphLayout;r.GraphLayout.__name__=["thx","graph","GraphLayout"];r.GraphLayout.arrayCrossings=function(a,b,c){for(var d=new L.IntMap,e=0,f=0,g=c.length;f<g;){var i=f++;d.set(c[i],i)}if(1>=b.length||1>=c.length)return e;f=0;for(g=b.length;f<g;){i=f++;c=a.nodes.get(b[i]);for(c=c.graph.edges.positives(c);c.hasNext();){var j=c.next(),j=d.get(j.head.id);if(null!=j)for(var k=i+1,l=b.length;k<l;)for(var m=k++,m=a.nodes.get(b[m]),m=m.graph.edges.positives(m);m.hasNext();){var n=m.next();d.get(n.head.id)<j&&e++}}}return e};r.GraphLayout.prototype={_nodeRemove:function(a){a=this.cell(a);this._layers[a.layer].splice(a.position,1);0==this._layers[a.layer].length&&this._layers.splice(a.layer,1);this._updateMap()},crossings:function(){for(var a=0,b=0,c=this._layers.length-1;b<c;)var d=b++,a=a+r.GraphLayout.arrayCrossings(this.graph,this._layers[d],this._layers[d+1]);return a},layers:function(){for(var a=[],b=0,c=this._layers;b<c.length;){var d=c[b];++b;a.push(d.slice())}return a},layer:function(a){var b=this;return this._layers[a].map(function(a){return b.graph.nodes.get(a)})},nodeAt:function(a,b){var c=this._layers[a];return null==c||b>=c.length?null:this.graph.nodes.get(c[b])},cell:function(a){if(a.graph!=this.graph)throw new H.Error("node doesn't belong to this graph",null,null,{fileName:"GraphLayout.hx",lineNumber:59,className:"thx.graph.GraphLayout",methodName:"cell"});a=this._map.get(a.id);return null==a?null:new r.LayoutCell(a[0],a[1],this._layers.length,this._layers[a[0]].length)},each:function(a){for(var b=this._layers.length,c,d=0;d<b;){var e=d++;c=this._layers[e].length;for(var f=0;f<c;){var g=f++;this.friendCell.update(e,g,b,c);a(this._cell,this.graph.nodes.get(this._layers[e][g]))}}},clone:function(){return new r.GraphLayout(this.graph.clone(),this.layers())},_updateMap:function(){var a=this;this._map=new L.IntMap;this.each(function(b,c){a._map.set(c.id,[b.layer,b.position])})},friendCell:null,_map:null,_cell:null,_layers:null,length:null,graph:null,__class__:r.GraphLayout};r.LayoutCell=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.layer=a;this.layers=c;this.position=b;this.positions=d};i["thx.graph.LayoutCell"]=r.LayoutCell;r.LayoutCell.__name__=["thx","graph","LayoutCell"];r.LayoutCell.prototype={update:function(a,b,c,d){this.layer=a;this.layers=c;this.position=b;this.positions=d},positions:null,layers:null,position:null,layer:null,__class__:r.LayoutCell};r.GraphNodes=function(a,b){r.GraphCollection.call(this,a,b)};i["thx.graph.GraphNodes"]=r.GraphNodes;r.GraphNodes.__name__=["thx","graph","GraphNodes"];r.GraphNodes.newInstance=function(a,b){return new r.GraphNodes(a,b)};r.GraphNodes.__super__=r.GraphCollection;r.GraphNodes.prototype=A(r.GraphCollection.prototype,{_remove:function(a){this.graph.edges.unlink(a);this.collectionRemove(a);a.destroy()},_create:function(a,b){var c=r.GNode.create(this.graph,a,b);this.collectionCreate(c);return c},create:function(a){return this._create(++this.nextid,a)},copyTo:function(a){for(var a=new r.GraphNodes(a),b=this.collection.iterator();b.hasNext();){var c=b.next();a._create(c.id,c.data)}a.nextid=this.nextid;return a},__class__:r.GraphNodes});r.GreedyCyclePartitioner=function(){};i["thx.graph.GreedyCyclePartitioner"]=r.GreedyCyclePartitioner;r.GreedyCyclePartitioner.__name__=["thx","graph","GreedyCyclePartitioner"];r.GreedyCyclePartitioner.findMaxPositiveOverNegative=function(a){for(var b=null,c=0,a=a.nodes.collection.iterator();a.hasNext();){var d=a.next(),e=d.graph.edges.positiveCount(d)-d.graph.edges.negativeCount(d);
if(null==b||c<e)b=d,c=e}return b};r.GreedyCyclePartitioner.prototype={partition:function(a){for(var b=[],c=[],d=a.clone(),e;0!=I.count(d.nodes.iterator());){for(;null!=(e=d.findSink());){for(var f=e.graph.edges.negatives(e);f.hasNext();){var g=f.next();c.unshift(a.edges.get(g.id));g.graph.edges._remove(g)}e.graph.nodes._remove(e)}e=0;for(g=d.findIsolateds();e<g.length;)f=g[e],++e,f.graph.nodes._remove(f);for(;null!=(e=d.findSource());){for(f=e.graph.edges.positives(e);f.hasNext();)g=f.next(),b.push(a.edges.get(g.id)),g.graph.edges._remove(g);e.graph.nodes._remove(e)}if(0!=I.count(d.nodes.iterator())){e=r.GreedyCyclePartitioner.findMaxPositiveOverNegative(d);for(f=e.graph.edges.negatives(e);f.hasNext();)g=f.next(),c.unshift(a.edges.get(g.id)),g.graph.edges._remove(g);for(f=e.graph.edges.positives(e);f.hasNext();)g=f.next(),b.push(a.edges.get(g.id)),g.graph.edges._remove(g);e.graph.nodes._remove(e)}}return{left:b,right:c}},__class__:r.GreedyCyclePartitioner};r.GreedySwitchDecrosser=function(){};i["thx.graph.GreedySwitchDecrosser"]=r.GreedySwitchDecrosser;r.GreedySwitchDecrosser.__name__=["thx","graph","GreedySwitchDecrosser"];r.GreedySwitchDecrosser.combined=function(){return{decross:function(a){a=(new r.GreedySwitchDecrosser).decross(a);return(new r.GreedySwitch2Decrosser).decross(a)}}};r.GreedySwitchDecrosser.best=function(){return{decross:function(a){a=[(new r.GreedySwitchDecrosser).decross(a),(new r.GreedySwitch2Decrosser).decross(a),r.GreedySwitchDecrosser.combined().decross(a)];return S.min(a,function(a){return a.crossings()})}}};r.GreedySwitchDecrosser.prototype={swap:function(a,b){var c=a[b];a[b]=a[b+1];a[b+1]=c},decrossPair:function(a,b,c){var d=r.GraphLayout.arrayCrossings(a,b,c),e=d,f;do for(var d=e,g=0,i=c.length-1;g<i;){var j=g++;this.swap(c,j);(f=r.GraphLayout.arrayCrossings(a,b,c))>=e?this.swap(c,j):e=f}while(e<d)},decross:function(a){var b=a.layers(),c=a.graph,d=a;if(1>=b.length)return new r.GraphLayout(a.graph,b);var e,f,g=b.length-1,i;do{a=b.map(function(a){return a.slice()});d=new r.GraphLayout(c,b);e=d.crossings();for(f=0;f<g;)i=f++,b=a[i],i=a[i+1],this.decrossPair(c,b,i);f=new r.GraphLayout(c,a).crossings();b=a}while(e>f);return d},__class__:r.GreedySwitchDecrosser};r.GreedySwitch2Decrosser=function(){r.GreedySwitchDecrosser.call(this)};i["thx.graph.GreedySwitch2Decrosser"]=r.GreedySwitch2Decrosser;r.GreedySwitch2Decrosser.__name__=["thx","graph","GreedySwitch2Decrosser"];r.GreedySwitch2Decrosser.__super__=r.GreedySwitchDecrosser;r.GreedySwitch2Decrosser.prototype=A(r.GreedySwitchDecrosser.prototype,{decrossTriplet:function(a,b,c,d){if(null==b)this.decrossPair(a,c,d);else if(null==d)this.decrossPair(a,b,c);else{var e=r.GraphLayout.arrayCrossings(a,b,c)+r.GraphLayout.arrayCrossings(a,c,d),f=e,g;do for(var e=f,i=0,j=c.length-1;i<j;){var k=i++;this.swap(c,k);(g=r.GraphLayout.arrayCrossings(a,b,c)+r.GraphLayout.arrayCrossings(a,c,d))>=f?this.swap(c,k):f=g}while(f<e)}},decross:function(a){var b=a.layers(),c=a.graph,d=a;if(1>=b.length)return new r.GraphLayout(a.graph,b);var e,f,g=b.length-1,i;do{a=b.map(function(a){return a.slice()});d=new r.GraphLayout(c,b);e=d.crossings();for(var j=0;j<g;)i=j++,b=a[i-1],f=a[i],i=a[i+1],this.decrossTriplet(c,b,f,i);f=new r.GraphLayout(c,a).crossings();b=a}while(e>f);return d},__class__:r.GreedySwitch2Decrosser});r.HeaviestNodeLayer=function(){};i["thx.graph.HeaviestNodeLayer"]=r.HeaviestNodeLayer;r.HeaviestNodeLayer.__name__=["thx","graph","HeaviestNodeLayer"];r.HeaviestNodeLayer.prototype={lay:function(a){for(var b=[],c=S.order(I.array(a.nodes.iterator()),function(a,b){return G.compare(b.positiveWeight(),a.positiveWeight())}),d=function(){var a=null;return a=function(d,e){if(u.remove(c,d)){var f=b[e];null==f&&(f=b[e]=[]);f.push(d.id);for(f=d.graph.edges.positives(d);f.hasNext();){var g=f.next();a(g.head,e+1)}}}}(this);0<c.length;)d(c[0],0);for(d=0;d<b.length;){var e=b[d];++d;e.sort(function(b,c){return G.compare(a.nodes.get(c).positiveWeight(),a.nodes.get(b).positiveWeight())})}return b},__class__:r.HeaviestNodeLayer};r.LongestPathLayer=function(){};i["thx.graph.LongestPathLayer"]=r.LongestPathLayer;r.LongestPathLayer.__name__=["thx","graph","LongestPathLayer"];r.LongestPathLayer.distanceToASink=function(a,b){var c=function(){var a=null;return a=function(b,c){for(var f=c;b.hasNext();){var g=b.next();g.head.isSink()||(f=P.max(f,a(g.head.positives(),c+1)))}return f}}(this);return b.isIsolated()?0:c(b.graph.edges.positives(b),1)};r.LongestPathLayer.prototype={lay:function(a){for(var a=a.clone(),b=[[]],c=0,d=a.findSinks();c<d.length;){var e=d[c];++c;b[0].push(e.id)}c=0;for(d=I.filter(a.nodes.iterator(),function(a){return!a.isSink()});c<d.length;){e=d[c];++c;var f=r.LongestPathLayer.distanceToASink(a,e),g=b[f];null==g&&(g=b[f]=[]);g.push(e.id)}b.reverse();return b},__class__:r.LongestPathLayer};r.OneCycleRemover=function(){};i["thx.graph.OneCycleRemover"]=r.OneCycleRemover;r.OneCycleRemover.__name__=["thx","graph","OneCycleRemover"];r.OneCycleRemover.prototype={remove:function(a){for(var b=[],c=a.nodes.collection.iterator();c.hasNext();){var d=c.next(),a=d.predecessorBy(d);null!=a&&(b.push({node:d,weight:a.weight,data:a.data}),a.graph.edges._remove(a))}return b},__class__:r.OneCycleRemover};r.SugiyamaMethod=function(a,b,c,d){this.partitioner=null==a?new r.GreedyCyclePartitioner:a;this.layer=null==b?new r.LongestPathLayer:b;this.splitter=null==c?new r.EdgeSplitter:c;this.decrosser=null==d?r.GreedySwitchDecrosser.best():d};i["thx.graph.SugiyamaMethod"]=r.SugiyamaMethod;r.SugiyamaMethod.__name__=["thx","graph","SugiyamaMethod"];r.SugiyamaMethod.prototype={resolve:function(a,b,c){var d=(new r.OneCycleRemover).remove(a),e=(new r.TwoCycleRemover).remove(a),f=this.partitioner.partition(a),g=new L.StringMap;(f.left.length>f.right.length?f.right:f.left).forEach(function(a){g.set(a.tail.id+"-"+a.head.id,[a.invert()])});f=this.layer.lay(a);a=new r.GraphLayout(a,f);f=[];a=this.splitter.split(a,f,b,c);f.forEach(function(a){var b=a[a.length-1].head.id+"-"+a[0].tail.id;g.exists(b)&&g.set(b,a)});a=this.decrosser.decross(a);for(b=function(a){return function(){return a.iterator()}}(g)();b.hasNext();)b.next().forEach(function(a){a.invert()});for(b=0;b<e.length;)c=e[b],++b,a.graph.edges.create(c.tail,c.head,c.weight,c.data);for(b=0;b<d.length;)c=d[b],++b,a.graph.edges.create(c.node,c.node,c.weight,c.data);return a},decrosser:null,splitter:null,layer:null,partitioner:null,__class__:r.SugiyamaMethod};r.TwoCycleRemover=function(){};i["thx.graph.TwoCycleRemover"]=r.TwoCycleRemover;r.TwoCycleRemover.__name__=["thx","graph","TwoCycleRemover"];r.TwoCycleRemover.prototype={remove:function(a){for(var b=[],a=a.nodes.collection.iterator();a.hasNext();)for(var c=a.next(),d=c.graph.edges.positives(c);d.hasNext();){var e=d.next().head.predecessorBy(c);null!=e&&(b.push({tail:e.tail,head:e.head,weight:e.weight,data:e.data}),e.graph.edges._remove(e))}return b},__class__:r.TwoCycleRemover};aa={Json:function(){}};i["thx.json.Json"]=aa.Json;aa.Json.__name__=["thx","json","Json"];aa.Json.encode=function(a){if(null!=aa.Json.nativeEncoder)return aa.Json.nativeEncoder(a);var b=new aa.JsonEncoder;new Ha.ValueEncoder(b).encode(a);return b.encodedString};aa.Json.decode=function(a){if(null!=aa.Json.nativeDecoder)return aa.Json.nativeDecoder(a);var b=new Ha.ValueHandler;new aa.JsonDecoder(b).decode(a);return b.value};aa.JsonDecoder=function(a,b){null==b&&(b=4);this.handler=a;this.tabsize=b};i["thx.json.JsonDecoder"]=aa.JsonDecoder;aa.JsonDecoder.__name__=["thx","json","JsonDecoder"];aa.JsonDecoder.prototype={error:function(a){var b=this.pos==this.src.length?"":"\nrest: "+(null!=this["char"]?this["char"]:"")+u.substr(this.src,this.pos,null)+"...";throw new H.Error("error at L {0} C {1}: {2}{3}",[this.line,this.col,a,b],null,{fileName:"JsonDecoder.hx",lineNumber:357,className:"thx.json.JsonDecoder",methodName:"error"})},parseDigits:function(a){null==a&&(a=0);for(var b="";;){var c=null;try{c=this.readChar()}catch(d){if(B.__instanceof(d,aa._JsonDecoder.StreamError))return b.length<a&&this.error("expected digit"),b;throw d}var e=u.cca(c,0);if(48>e||57<e)return b.length<a&&this.error("expected digit"),this.col+=b.length,this["char"]=c,b;b+=c}return null},parseFloat:function(){var a="";this.expect("-")&&(a="-");if(this.expect("0"))a+="0";else{var b=this.readChar(),c=u.cca(b,0);(49>c||57<c)&&this.error("expected digit between 1 and 9");a+=b;this.col++}try{a+=this.parseDigits()}catch(d){if(B.__instanceof(d,aa._JsonDecoder.StreamError)){this.handler.valueInt(t.parseInt(a));return}throw d}try{if(this.expect("."))a+="."+this.parseDigits(1);else{this.handler.valueInt(t.parseInt(a));return}if(this.expect("e")||this.expect("E"))a+="e",this.expect("+")||this.expect("-")&&(a+="-"),a+=this.parseDigits(1)}catch(e){if(B.__instanceof(e,aa._JsonDecoder.StreamError)){this.handler.valueFloat(t.parseFloat(a));return}throw e}this.handler.valueFloat(t.parseFloat(a))},parseHexa:function(){for(var a=[],b=0;4>b;){b++;var c=this.readChar(),d=u.cca(c.toLowerCase(),0);48<=d&&57>=d||97<=d&&102>=d||this.error("invalid hexadecimal value "+c);a.push(c)}this.handler.valueInt(t.parseInt("0x"+a.join("")));return t.parseInt("0x"+a.join(""))},_parseString:function(){this.expect('"')||this.error("expected double quote");var a="",b=!1;try{for(;;){var c=this.readChar();this.col++;if(b){switch(c){case'"':a+='"';break;case"\\":a+="\\";break;case"/":a+="/";break;case"b":a+="\b";break;case"f":a+="\f";break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="	";break;case"u":a+=String.fromCharCode(this.parseHexa());break;default:this.error("unexpected char "+c)}b=!1}else switch(c){case"\\":b=!0;break;case'"':throw"__break__";default:a+=c}}}catch(d){if("__break__"!=d)throw d}return a},parseString:function(){this.handler.valueString(this._parseString())},parseValue:function(){this.expect("true")?this.handler.valueBool(!0):this.expect("false")?this.handler.valueBool(!1):this.expect("null")?this.handler.valueNull():this.parseFloat()},parseArray:function(){this.ignoreWhiteSpace();var a=!0;for(this.handler.arrayStart();;){this.ignoreWhiteSpace();if(this.expect("]"))break;else a?a=!1:this.expect(",")?this.ignoreWhiteSpace():this.error("expected ','");this.handler.arrayItemStart();this.parse();this.handler.arrayItemEnd()}this.handler.arrayEnd()},parseObject:function(){var a=!0;for(this.handler.objectStart();;){this.ignoreWhiteSpace();if(this.expect("}"))break;else a?a=!1:this.expect(",")?this.ignoreWhiteSpace():this.error("expected ','");var b=this._parseString();this.ignoreWhiteSpace();this.expect(":")||this.error("expected ':'");this.ignoreWhiteSpace();this.handler.objectFieldStart(b);this.parse();this.handler.objectFieldEnd()}this.handler.objectEnd()},expect:function(a){return(null==this["char"]?u.substr(this.src,this.pos,a.length):this["char"]+u.substr(this.src,this.pos,a.length-1))==a?(null==this["char"]?this.pos+=a.length:(this.pos+=a.length-1,this["char"]=null),!0):!1},readChar:function(){if(null==this["char"]){if(this.pos==this.src.length)throw aa._JsonDecoder.StreamError.Eof;return this.src.charAt(this.pos++)}var a=this["char"];this["char"]=null;return a},parse:function(){var a=this.readChar();switch(a){case"{":this.col++;this.ignoreWhiteSpace();this.parseObject();break;case"[":this.col++;this.ignoreWhiteSpace();this.parseArray();break;case'"':this["char"]=a;this.parseString();break;default:this["char"]=a,this.parseValue()}},ignoreWhiteSpace:function(){for(;this.pos<this.src.length;){var a=this.readChar();switch(a){case" ":this.col++;break;case"\n":this.col=0;this.line++;break;case"\r":break;case"	":this.col+=this.tabsize;break;default:this["char"]=a;return}}},decode:function(a){this.line=this.col=0;this.src=a;this["char"]=null;this.pos=0;this.ignoreWhiteSpace();this.handler.start();try{this.parse()}catch(b){if(B.__instanceof(b,aa._JsonDecoder.StreamError))this.error("unexpected end of stream");else throw b}this.ignoreWhiteSpace();this.pos<this.src.length&&this.error("the stream contains unrecognized characters at its end");this.handler.end()},handler:null,pos:null,"char":null,src:null,tabsize:null,line:null,col:null,__class__:aa.JsonDecoder};aa._JsonDecoder={};aa._JsonDecoder.StreamError={__ename__:["thx","json","_JsonDecoder","StreamError"],__constructs__:["Eof"]};aa._JsonDecoder.StreamError.Eof=["Eof",0];aa._JsonDecoder.StreamError.Eof.toString=q;aa._JsonDecoder.StreamError.Eof.__enum__=aa._JsonDecoder.StreamError;aa.JsonEncoder=function(){};i["thx.json.JsonEncoder"]=aa.JsonEncoder;aa.JsonEncoder.__name__=["thx","json","JsonEncoder"];aa.JsonEncoder.__interfaces__=[Ha.IDataHandler];aa.JsonEncoder.prototype={quote:function(a){return'"'+new M(".","").customReplace(new M("(\n)","g").replace(new M('("|\\\\)',"g").replace(a,"\\$1"),"\\n"),function(a){a=u.cca(a.matched(0),0);return 32<=a&&127>=a?String.fromCharCode(a):"\\u"+C.hex(a,4)})+'"'},valueBool:function(a){this.buf.b+=t.string(a?"true":"false")},valueNull:function(){this.buf.b+="null"},valueFloat:function(a){this.buf.b+=t.string(a)},valueInt:function(a){this.buf.b+=t.string(a)},valueString:function(a){this.buf.b+=t.string(this.quote(a))},valueDate:function(a){this.buf.b+=t.string(a.getTime())},arrayEnd:function(){this.buf.b+="]";this.count.pop()},arrayItemEnd:function(){},arrayItemStart:function(){0<this.count[this.count.length-1]++&&(this.buf.b+=",")},arrayStart:function(){this.buf.b+="[";this.count.push(0)},objectEnd:function(){this.buf.b+="}";this.count.pop()},objectFieldEnd:function(){},objectFieldStart:function(a){0<this.count[this.count.length-1]++&&(this.buf.b+=",");this.buf.b+=t.string(this.quote(a)+":")},objectStart:function(){this.buf.b+="{";this.count.push(0)},end:function(){this.encodedString=this.buf.b;this.buf=null},start:function(){this.lvl=0;this.buf=new Ab;this.encodedString=null;this.count=[]},count:null,lvl:null,buf:null,encodedString:null,__class__:aa.JsonEncoder};V.Ease=function(){};i["thx.math.Ease"]=V.Ease;V.Ease.__name__=["thx","math","Ease"];V.Ease.mode=function(a,b){if(null==b)b=V.Equations.cubic;if(null==a)a=V.EaseMode.EaseIn;switch(a[1]){case 0:return b;case 1:return function(a){return 1-b(1-a)};case 2:return function(a){return.5*(.5>a?b(2*a):2-b(2-2*a))};case 3:return V.Ease.mode(V.EaseMode.EaseInEaseOut,V.Ease.mode(V.EaseMode.EaseOut,b))}};V.EaseMode={__ename__:["thx","math","EaseMode"],__constructs__:["EaseIn","EaseOut","EaseInEaseOut","EaseOutEaseIn"]};V.EaseMode.EaseIn=["EaseIn",0];V.EaseMode.EaseIn.toString=q;V.EaseMode.EaseIn.__enum__=V.EaseMode;V.EaseMode.EaseOut=["EaseOut",1];V.EaseMode.EaseOut.toString=q;V.EaseMode.EaseOut.__enum__=V.EaseMode;V.EaseMode.EaseInEaseOut=["EaseInEaseOut",2];V.EaseMode.EaseInEaseOut.toString=q;V.EaseMode.EaseInEaseOut.__enum__=V.EaseMode;V.EaseMode.EaseOutEaseIn=["EaseOutEaseIn",3];V.EaseMode.EaseOutEaseIn.toString=q;V.EaseMode.EaseOutEaseIn.__enum__=V.EaseMode;V.Random=function(a){null==a&&(a=1);this.seed=a};i["thx.math.Random"]=V.Random;V.Random.__name__=["thx","math","Random"];V.Random.prototype={seed:null,__class__:V.Random};Lb={NumberParser:function(){}};i["thx.number.NumberParser"]=Lb.NumberParser;Lb.NumberParser.__name__=["thx","number","NumberParser"];Lb.NumberParser.parse=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());Lb.NumberParser.cultureNumberEReg(b);var c=a,d=Math.NaN,e=b.number,f=fb.ERegs.escapeERegChars(e.groupsSeparator),e=fb.ERegs.escapeERegChars(e.decimalsSeparator);Lb.NumberParser.canParse(a,b)&&(c=new M(f,"gi").replace(c,""),c=new M(e,"gi").replace(c,"."),d=t.parseFloat(c),new M(fb.ERegs.escapeERegChars(b.signNeg),"").match(a)&&0<d&&(d*=-1));return d};Lb.NumberParser.cultureNumberEReg=function(a){var b=a.number,c=b.groups.slice(),d="",e=fb.ERegs.escapeERegChars(b.groupsSeparator),f=fb.ERegs.escapeERegChars(b.decimalsSeparator);if(null!=a.digits)throw"unsupported digit characters";d="[0-9]";a=new Ab;a.b+="(";if(2<c.length)throw"too many groups!";if(2==c.length)0==c[1]?a.b+=t.string("("+d+"*"+e+")"):(a.b+=t.string("(("+d+"{1,"+c[1]+"}"+e+")"),a.b+=t.string("("+d+"{"+c[1]+"}"+e+")*"+d+"{"+c[0]+"})|")),a.b=0==c[0]?a.b+t.string("("+d+"*"+e+")"):a.b+t.string("("+d+"+)");1==c.length&&(a.b+=t.string("(("+d+"{1,"+c[0]+"})"),a.b+=t.string("("+e+d+"{"+c[0]+"})+)|"),a.b+=t.string("("+d+"+)"));a.b+=")";a.b+=t.string("("+f+d+"*)?");a.b+="([eE][+\\-]?\\d+)?";c=a.b;"-n"!=b.patternNegative?(b=new M("([^n]+)","g").replace(fb.ERegs.escapeERegChars(b.patternNegative),"($1)?"),c=new M("n","").replace(b,c)):c="[+-]?"+c;return new M("^"+c+"$","gi")};Lb.NumberParser.canParse=function(a,b){null==b&&(b=m.Culture.get_defaultCulture());return Lb.NumberParser.cultureNumberEReg(b).match(a)?!0:!1};p={Arc:function(){this._r0=function(){return 0};this._r1=function(){return 1};this._a0=function(){return 0};this._a1=function(){return Math.PI}}};i["thx.svg.Arc"]=p.Arc;p.Arc.__name__=["thx","svg","Arc"];p.Arc.fromAngleObject=function(){return(new p.Arc).startAnglef(function(a){return a.startAngle}).endAnglef(function(a){return a.endAngle})};p.Arc.prototype={shape:function(a,b){var c=this._a0(a,b)+p.LineInternals.arcOffset,d=this._a1(a,b)+p.LineInternals.arcOffset,e=d-c,f=e<Math.PI?"0":"1",g=Math.cos(c),c=Math.sin(c),i=Math.cos(d),d=Math.sin(d),j=this._r0(a,b),k=this._r1(a,b);return e>=p.LineInternals.arcMax?0!=j?"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"M0,"+j+"A"+j+","+j+" 0 1,1 0,"+-j+"A"+j+","+j+" 0 1,1 0,"+j+"Z":"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"Z":0!=j?"M"+k*g+","+k*c+"A"+k+","+k+" 0 "+f+",1 "+k*i+","+k*d+"L"+j*i+","+j*d+"A"+j+","+j+" 0 "+f+",0 "+j*g+","+j*c+"Z":"M"+k*g+","+k*c+"A"+k+","+k+" 0 "+f+",1 "+k*i+","+k*d+"L0,0Z"},endAnglef:function(a){this._a1=a;return this},startAnglef:function(a){this._a0=a;return this},outerRadiusf:function(a){this._r1=a;return this},outerRadius:function(a){return this.outerRadiusf(function(){return a})},innerRadiusf:function(a){this._r0=a;return this},innerRadius:function(a){return this.innerRadiusf(function(){return a})},_a1:null,_a0:null,_r1:null,_r0:null,__class__:p.Arc};p.Area=function(a,b,c,d){this._x=a;this._y0=b;this._y1=c;this._interpolator=d};i["thx.svg.Area"]=p.Area;p.Area.__name__=["thx","svg","Area"];p.Area.prototype={y1:function(a){this._y1=a;return this},y0:function(a){this._y0=a;return this},x:function(a){this._x=a;return this},interpolator:function(a){this._interpolator=a;return this},shape:function(a){var b=p.LineInternals.linePoints(a,this._x,this._y0);b.reverse();return 1>a.length?null:"M"+p.LineInternals.interpolatePoints(p.LineInternals.linePoints(a,this._x,this._y1),this._interpolator)+"L"+p.LineInternals.interpolatePoints(b,this._interpolator)+"Z"},_interpolator:null,_y1:null,_y0:null,_x:null,__class__:p.Area};p.Diagonal=function(){this._projection=p.Diagonal.diagonalProjection};i["thx.svg.Diagonal"]=p.Diagonal;p.Diagonal.__name__=["thx","svg","Diagonal"];p.Diagonal.diagonalProjection=function(a){return a};p.Diagonal.forObject=function(){return(new p.Diagonal).sourcef(function(a){return[a.x0,a.y0]}).targetf(function(a){return[a.x1,a.y1]})};p.Diagonal.forArray=function(){return(new p.Diagonal).sourcef(function(a){return[a[0],a[1]]}).targetf(function(a){return[a[2],a[3]]})};p.Diagonal.prototype={projection:function(a){this._projection=a;return this},targetf:function(a){this._target=a;return this},sourcef:function(a){this._source=a;return this},diagonal:function(a,b){var c=this._source(a,b),d=this._target(a,b),e=(c[1]+d[1])/2,c=I.map(u.iter([c,[c[0],e],[d[0],e],d]),this._projection);return"M "+c[0][0]+" "+c[0][1]+" C "+c[1][0]+" "+c[1][1]+" "+c[2][0]+" "+c[2][1]+" "+c[3][0]+" "+c[3][1]},_projection:null,_target:null,_source:null,__class__:p.Diagonal};p.Line=function(a,b,c){this._x=a;this._y=b;this._interpolator=c};i["thx.svg.Line"]=p.Line;p.Line.__name__=["thx","svg","Line"];p.Line.prototype={interpolator:function(a){this._interpolator=a;return this},shape:function(a){return 1>a.length?null:"M"+p.LineInternals.interpolatePoints(p.LineInternals.linePoints(a,this._x,this._y),this._interpolator)},_interpolator:null,_y:null,_x:null,__class__:p.Line};p.LineInternals=function(){};i["thx.svg.LineInternals"]=p.LineInternals;p.LineInternals.__name__=["thx","svg","LineInternals"];p.LineInternals.linePoints=function(a,b,c){for(var d=[],e,f=0,g=a.length;f<g;){var i=f++;e=a[i];d.push([b(e,i),c(e,i)])}return d};p.LineInternals.interpolatePoints=function(a,b){if(null==b)b=p.LineInterpolator.Linear;var c=[],d=0,e=a.length,f=a[0],g=b;switch(g[1]){case 0:for(c.push(f[0]+","+f[1]);++d<e;)f=a[d],c.push("L"+f[0]+","+f[1]);break;case 1:for(c.push(f[0]+","+f[1]);++d<e-1;)f=a[d],g=a[d+1],c.push("H"+(f[0]+g[0])/2+"V"+f[1]);f=a[d];c.push("H"+f[0]+"V"+f[1]);break;case 2:for(c.push(f[0]+","+f[1]);++d<e;)f=a[d],c.push("V"+f[1]+"H"+f[0]);break;case 3:for(c.push(f[0]+","+f[1]);++d<e;)f=a[d],c.push("H"+f[0]+"V"+f[1]);break;case 4:if(3>a.length)return p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear);var d=1,f=a[1],i=f[0],j=f[1],g=[i,i,i,f[0]],k=[j,j,j,f[1]];c.push(i+","+j);for(p.LineInternals._lineBasisBezier(c,g,k);++d<e;)f=a[d],g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),p.LineInternals._lineBasisBezier(c,g,k);for(d=-1;2>++d;)g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),p.LineInternals._lineBasisBezier(c,g,k);break;case 5:if(4>a.length)return p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear);d=-1;g=[0];for(k=[0];3>++d;)f=a[d],g.push(f[0]),k.push(f[1]);c.push(p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier3,g)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier3,k));for(--d;++d<e;)f=a[d],g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),p.LineInternals._lineBasisBezier(c,g,k);break;case 6:d=-1;i=e+4;g=[];for(k=[];4>++d;)f=a[d%e],g.push(f[0]),k.push(f[1]);c.push(p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier3,g)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier3,k));for(--d;++d<i;)f=a[d%e],g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),p.LineInternals._lineBasisBezier(c,g,k);break;case 7:return c=g[2],null==c&&(c=.7),3>a.length?p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear):a[0][0]+","+a[0][1]+p.LineInternals._lineHermite(a,p.LineInternals._lineCardinalTangents(a,c));case 8:return c=g[2],4>a.length?p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear):a[1][0]+","+a[1][1]+t.string(p.LineInternals._lineCardinalTangents(a,c));case 9:return c=g[2],null==c&&(c=.7),3>a.length?p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear):a[0][0]+","+a[0][1]+p.LineInternals._lineHermite(a,p.LineInternals._lineCardinalTangents([a[a.length-2]].concat(a).concat([a[1]]),c));case 10:return 3>a.length?p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear):a[0][0]+","+a[0][1]+p.LineInternals._lineHermite(a,p.LineInternals._lineMonotoneTangents(a))}return c.join("")};p.LineInternals._lineDot4=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};p.LineInternals._lineBasisBezier=function(a,b,c){a.push("C"+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier1,b)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier1,c)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier2,b)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier2,c)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier3,b)+","+p.LineInternals._lineDot4(p.LineInternals._lineBasisBezier3,c))};p.LineInternals._lineSlope=function(a,b){return(b[1]-a[1])/(b[0]-a[0])};p.LineInternals._lineFiniteDifferences=function(a){for(var b=0,c=a.length-1,d=[],e=a[1],f=d[0]=p.LineInternals._lineSlope(a[0],e);++b<c;)d[b]=f+(f=p.LineInternals._lineSlope(e,e=a[b+1]));d[b]=f;return d};p.LineInternals._lineMonotoneTangents=function(a){for(var b=[],c,d,e,f,g=p.LineInternals._lineFiniteDifferences(a),i=-1,j=a.length-1;++i<j;)c=p.LineInternals._lineSlope(a[i],a[i+1]),1e-6>Math.abs(c)?g[i]=g[i+1]=0:(d=g[i]/c,e=g[i+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),g[i]=f*d,g[i+1]=f*e));for(i=-1;++i<=j;)f=(a[P.min(j,i+1)][0]-a[P.max(0,i-1)][0])/(6*(1+g[i]*g[i])),b.push([Math.isFinite(f)?f:0,Math.isFinite(f*=g[i])?f:0]);return b};p.LineInternals._lineHermite=function(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return p.LineInternals.interpolatePoints(a,p.LineInterpolator.Linear);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],i=g,j=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],j=2);if(1<b.length){i=b[1];f=a[j];j++;d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-i[0])+","+(f[1]-i[1])+","+f[0]+","+f[1];e=2;for(g=b.length;e<g;)i=e++,f=a[j],i=b[i],d+="S"+(f[0]-i[0])+","+(f[1]-i[1])+","+f[0]+","+f[1],j++}c&&(c=a[j],d+="Q"+(f[0]+2*i[0]/3)+","+(f[1]+2*i[1]/3)+","+c[0]+","+c[1]);return d};p.LineInternals._lineCardinalTangents=function(a,b){for(var c=[],d=(1-b)/2,e=a[0],f=a[1],g=a[2],i=2,j=a.length;++i<j;)c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]),e=f,f=g,g=a[i];c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c};p.LineInterpolator={__ename__:["thx","svg","LineInterpolator"],__constructs__:"Linear,Step,StepBefore,StepAfter,Basis,BasisOpen,BasisClosed,Cardinal,CardinalOpen,CardinalClosed,Monotone".split(",")};p.LineInterpolator.Linear=["Linear",0];p.LineInterpolator.Linear.toString=q;p.LineInterpolator.Linear.__enum__=p.LineInterpolator;p.LineInterpolator.Step=["Step",1];p.LineInterpolator.Step.toString=q;p.LineInterpolator.Step.__enum__=p.LineInterpolator;p.LineInterpolator.StepBefore=["StepBefore",2];p.LineInterpolator.StepBefore.toString=q;p.LineInterpolator.StepBefore.__enum__=p.LineInterpolator;p.LineInterpolator.StepAfter=["StepAfter",3];p.LineInterpolator.StepAfter.toString=q;p.LineInterpolator.StepAfter.__enum__=p.LineInterpolator;p.LineInterpolator.Basis=["Basis",4];p.LineInterpolator.Basis.toString=q;p.LineInterpolator.Basis.__enum__=p.LineInterpolator;p.LineInterpolator.BasisOpen=["BasisOpen",5];p.LineInterpolator.BasisOpen.toString=q;p.LineInterpolator.BasisOpen.__enum__=p.LineInterpolator;p.LineInterpolator.BasisClosed=["BasisClosed",6];p.LineInterpolator.BasisClosed.toString=q;p.LineInterpolator.BasisClosed.__enum__=p.LineInterpolator;p.LineInterpolator.Cardinal=function(a){a=["Cardinal",7,a];a.__enum__=p.LineInterpolator;a.toString=q;return a};p.LineInterpolator.CardinalOpen=function(a){a=["CardinalOpen",8,a];a.__enum__=p.LineInterpolator;a.toString=q;return a};p.LineInterpolator.CardinalClosed=function(a){a=["CardinalClosed",9,a];a.__enum__=p.LineInterpolator;a.toString=q;return a};p.LineInterpolator.Monotone=["Monotone",10];p.LineInterpolator.Monotone.toString=q;p.LineInterpolator.Monotone.__enum__=p.LineInterpolator;p.LineInterpolators=function(){};i["thx.svg.LineInterpolators"]=p.LineInterpolators;p.LineInterpolators.__name__=["thx","svg","LineInterpolators"];p.LineInterpolators.parse=function(a,b){null==b&&(b=":");var c;switch(a.split(b)[0].toLowerCase()){case"basis":c=p.LineInterpolator.Basis;break;case"basisopen":c=p.LineInterpolator.BasisOpen;break;case"basisclosed":c=p.LineInterpolator.BasisClosed;break;case"cardinal":c=p.LineInterpolator.Cardinal(p.LineInterpolators.argument(a,b));break;case"cardinalopen":c=p.LineInterpolator.CardinalOpen(p.LineInterpolators.argument(a,b));break;case"cardinalclosed":c=p.LineInterpolator.CardinalClosed(p.LineInterpolators.argument(a,b));break;case"monotone":c=p.LineInterpolator.Monotone;break;case"step":c=p.LineInterpolator.Step;break;case"stepafter":c=p.LineInterpolator.StepAfter;break;case"stepbefore":c=p.LineInterpolator.StepBefore;break;default:c=p.LineInterpolator.Linear}return c};p.LineInterpolators.argument=function(a,b){var c=a.split(b)[1];return null==c?null:t.parseFloat(c)};p.PathGeoJson=function(){this.set_pointRadius(4.5);this.set_projection(new W.AlbersUsa);this.pathTypes=new p.PathTypes(this);this.centroidTypes=new p.CentroidTypes(this);this.areaTypes=new p.AreaTypes(this)};i["thx.svg.PathGeoJson"]=p.PathGeoJson;p.PathGeoJson.__name__=["thx","svg","PathGeoJson"];p.PathGeoJson.circle=function(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"};p.PathGeoJson.prototype={set_projection:function(a){return this.projection=a},set_pointRadius:function(a){this.pointRadius=a;this.pathCircle=p.PathGeoJson.circle(a);return a},centroid:function(a){return this.centroidTypes.centroid(a)},path:function(a){return this.pathTypes.path(a)},areaTypes:null,centroidTypes:null,pathTypes:null,pathCircle:null,projection:null,pointRadius:null,__class__:p.PathGeoJson,__properties__:{set_pointRadius:"set_pointRadius",set_projection:"set_projection"}};p.PathTypes=function(a){this.geo=a};i["thx.svg.PathTypes"]=p.PathTypes;p.PathTypes.__name__=["thx","svg","PathTypes"];p.PathTypes.prototype={project:function(a){return this.geo.projection.project(a).join(",")},geometryCollection:function(a){for(var b=[],c=0,a=a.geometries;c<a.length;){var d=a[c];++c;b.push(this.path(d))}return b.join("")},multiPolygon:function(a){for(var b=[],a=a.coordinates,c=0;c<a.length;){var d=a[c];++c;for(var e=0;e<d.length;){var f=d[e];++e;b.push("M");for(var g=0;g<f.length;){var i=f[g];++g;b.push(this.project(i));b.push("L")}b[b.length-1]="Z"}}return b.join("")},polygon:function(a){for(var b=[],a=a.coordinates,c=0;c<a.length;){var d=a[c];++c;b.push("M");for(var e=0,f=d.length;e<f;){var g=e++;b.push(this.project(d[g]));b.push("L")}b[b.length-1]="Z"}return b.join("")},multiLineString:function(a){for(var b=[],a=a.coordinates,c=0;c<a.length;){var d=a[c];++c;b.push("M");for(var e=0,f=d.length;e<f;){var g=e++;b.push(this.project(d[g]));b.push("L")}b.pop()}return b.join("")},lineString:function(a){for(var b=[],a=a.coordinates,c=0,d=a.length;c<d;){var e=c++;b.push(this.project(a[e]))}return"M"+b.join("L")},multiPoint:function(a){for(var b=[],a=a.coordinates,c=0,d=a.length;c<d;){var e=c++;b.push("M"+this.project(a[e])+this.geo.pathCircle)}return b.join("")},point:function(a){return"M"+this.project(a.coordinates)+this.geo.pathCircle},feature:function(a){return this.path(a.geometry)},featureCollection:function(a){for(var b=[],a=a.features,c=0,d=a.length;c<d;){var e=c++;b.push(this.path(a[e].geometry))}return b.join("")},path:function(a){var b=j.field(this,J.lcfirst(a.type));return null==b?"":b.apply(this,[a])},geo:null,__class__:p.PathTypes};p.AreaTypes=function(a){this.geo=a};i["thx.svg.AreaTypes"]=p.AreaTypes;p.AreaTypes.__name__=["thx","svg","AreaTypes"];p.AreaTypes.prototype={project:function(a){return this.geo.projection.project(a)},parea:function(a){return Math.abs(new R.Polygon(I.map(u.iter(a),v(this,this.project))).area())},polygonArea:function(a){for(var b=this.parea(a[0]),c=1,d=a.length;c<d;)var e=c++,b=b-this.parea(a[e]);return b},geometryCollection:function(a){for(var b=0,c=0,a=a.geometries;c<a.length;){var d=a[c];++c;b+=this.area(d)}return b},multiPolygon:function(a){for(var b=0,a=a.coordinates,c=0;c<a.length;){var d=a[c];++c;b+=this.polygonArea(d)}return b},polygon:function(a){return this.polygonArea(a.coordinates)},multiLineString:function(){return 0},lineString:function(){return 0},multiPoint:function(){return 0},point:function(){return 0},feature:function(a){return this.area(a.geometry)},featureCollection:function(a){for(var b=0,c=0,a=a.features;c<a.length;){var d=a[c];++c;b+=this.area(d.geometry)}return b},area:function(a){var b=j.field(this,J.lcfirst(a.type));return null==b?0:b.apply(this,[a])},geo:null,__class__:p.AreaTypes};p.CentroidTypes=function(a){this.geo=a};i["thx.svg.CentroidTypes"]=p.CentroidTypes;p.CentroidTypes.__name__=["thx","svg","CentroidTypes"];p.CentroidTypes.prototype={project:function(a){return this.geo.projection.project(a)},polygonCentroid:function(a){for(var b=new R.Polygon(I.map(u.iter(a[0]),v(this,this.project))),c=b.centroid(1),d=c[0],e=c[1],f=Math.abs(b.area()),g=1,i=a.length;g<i;)b=g++,b=new R.Polygon(I.map(u.iter(a[b]),v(this,this.project))),c=b.centroid(1),d-=c[0],e-=c[1],f-=Math.abs(b.area());return[d,e,6*f]},multiPolygon:function(a){for(var b=0,c=0,d=0,e,a=a.coordinates,f=0;f<a.length;)e=a[f],++f,e=this.polygonCentroid(e),b+=e[0],c+=e[1],d+=e[2];return[b/d,c/d]},polygon:function(a){a=this.polygonCentroid(a.coordinates);return[a[0]/a[2],a[1]/a[2]]},feature:function(a){return this.centroid(a.geometry)
},point:function(a){return this.project(a.coordinates)},centroid:function(a){var b=j.field(this,J.lcfirst(a.type));return null==b?[0,0]:b.apply(this,[a])},geo:null,__class__:p.CentroidTypes};p.Symbol=function(){};i["thx.svg.Symbol"]=p.Symbol;p.Symbol.__name__=["thx","svg","Symbol"];p.Symbol.triangleDown=function(a){var a=Math.sqrt(a/p.Symbol.sqrt3),b=a*p.Symbol.sqrt3/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"};p.Symbol.triangleUp=function(a){var a=Math.sqrt(a/p.Symbol.sqrt3),b=a*p.Symbol.sqrt3/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"};p.Symbol.square=function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"};p.Symbol.diamond=function(a){var a=Math.sqrt(a/(2*p.Symbol.tan30)),b=a*p.Symbol.tan30;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"};p.Symbol.cross=function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"};p.Symbol.circle=function(a){a=Math.sqrt(a/Math.PI);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"};p.Symbol.arrowUp=function(a){a=Math.sqrt(a/2);return"M"+-a+",0h"+a/2+"v"+a+"h"+a+"v"+-a+"h"+a/2+"l"+-a+","+-a+"Z"};p.Symbol.arrowDown=function(a){a=Math.sqrt(a/2);return"M"+-a+",0h"+a/2+"v"+-a+"h"+a+"v"+a+"h"+a/2+"l"+-a+","+a+"Z"};p.Symbol.arrowDownWide=function(a){a=Math.sqrt(a/2.5);return"M"+-a+",0h"+a/4+"v"+-a+"h"+1.5*a+"v"+a+"h"+a/4+"l"+-a+","+a+"Z"};p.Symbol.arrowRight=function(a){a=Math.sqrt(a/2);return"M0,"+-a+"v"+a/2+"h"+-a+"v"+a+"h"+a+"v"+a/2+"l"+a+","+-a+"Z"};p.Symbol.arrowLeft=function(a){a=Math.sqrt(a/2);return"M0,"+-a+"v"+a/2+"h"+a+"v"+a+"h"+-a+"v"+a/2+"l"+-a+","+-a+"Z"};p.Symbol.star=function(a){a=Math.sqrt(a/.31027)/2;return"M0,"+-a+"L"+.236*a+","+-.325*a+" "+.951*a+","+-.309*a+" "+.382*a+","+.124*a+" "+.588*a+","+.809*a+" "+0*a+","+.401*a+" "+-.588*a+","+.809*a+" "+-.382*a+","+.124*a+" "+-.951*a+","+-.309*a+" "+-.236*a+","+-.325*a+" Z"};fb={ERegs:function(){}};i["thx.text.ERegs"]=fb.ERegs;fb.ERegs.__name__=["thx","text","ERegs"];fb.ERegs.escapeERegChars=function(a){return fb.ERegs._escapePattern.customReplace(a,function(a){return"\\"+a.matched(0)})};var Q;if(!("indexOf"in Array.prototype))Array.prototype.indexOf=function(a,b){void 0===b&&(b=0);0>b&&(b+=this.length);0>b&&(b=0);for(var c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};if(!("lastIndexOf"in Array.prototype))Array.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);0>b&&(b+=this.length);b>this.length-1&&(b=this.length-1);for(b++;0<b--;)if(b in this&&this[b]===a)return b;return-1};if(!("forEach"in Array.prototype))Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)};if(!("map"in Array.prototype))Array.prototype.map=function(a,b){for(var c=Array(this.length),d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c};if(!("filter"in Array.prototype))Array.prototype.filter=function(a,b){for(var c=[],d,e=0,f=this.length;e<f;e++)e in this&&a.call(b,d=this[e],e,this)&&c.push(d);return c};if(!("every"in Array.prototype))Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0};var se=new ld;jc.EMPTY=se.getBytes();if(Array.prototype.indexOf)u.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;i.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=i.String=String;String.__name__=["String"];Array.prototype.__class__=i.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=i.Date=Date;Date.__name__=["Date"];var le=i.Int={__name__:["Int"]},pe=i.Dynamic={__name__:["Dynamic"]},ae=i.Float=Number;ae.__name__=["Float"];var ie=Boolean;ie.__ename__=["Bool"];var qe=i.Class={__name__:["Class"]},re={};if(null==Array.prototype.map)Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;c<d;){var e=c++;b[e]=a(this[e])}return b};if(null==Array.prototype.filter)Array.prototype.filter=function(a){for(var b=[],c=0,d=this.length;c<d;){var e=this[c++];a(e)&&b.push(e)}return b};var $b=Xa.userAgent(),me=Xa.hasNavigator(),Pb;Xa.host=!me?sa.UnknownServer:"undefined"!==typeof module&&module.exports?sa.NodeJs:(Pb=new M("MSIE(?:/| )(\\S*);","")).match($b)?sa.IE(Pb.matched(1)):(Pb=new M("Firefox(?:/| )(\\S*)","")).match($b)?sa.Firefox(Pb.matched(1)):(Pb=new M("Chrome(?:/| )(\\S*)","")).match($b)?sa.Chrome(Pb.matched(1)):(Pb=new M("Version(?:/| )(\\S*) Safari(?:/| )(\\S*)","")).match($b)?sa.Safari(Pb.matched(1)):(Pb=new M("Opera(?:/| )(\\S*)","")).match($b)?sa.Opera(Pb.matched(1)):sa.Unknown($b);Xa.os=!me?na.UnknownOs:(Pb=new M("Windows NT\\s+(\\d+\\.\\d+)","")).match($b)?function(){var a;switch(Pb.matched(1)){case"5.1":a="XP";break;case"5.2":a="2003/XP x64";break;case"6.0":a="Vista";break;case"6.1":a="7";break;case"6.2":a="8";break;default:a="unknown"}return na.Windows(a)}(this):new M("Mac OS X","").match($b)?na.Mac:new M("(iPhone|iPad|iPod)","").match($b)?na.IOs:new M("Linux","").match($b)?na.Linux:new M("Android","").match($b)?na.Android:na.UnknownOs;Xa.environment=function(a){return function(a){var c;switch(Xa.host[1]){case 0:c=za.Server;break;case 1:c=za.Server;break;case 2:case 6:case 3:c=za.Desktop;break;case 4:c=function(){var a;switch(Xa.os[1]){case 1:a=za.Mobile;break;default:a=za.Desktop}return a}(a);break;case 5:c=function(){var a;switch(Xa.os[1]){case 2:a=za.Mobile;break;default:a=za.Desktop}return a}(a);break;case 7:c=function(){var a;switch(Xa.os[1]){case 5:a=za.UnknownEnvironment;break;default:a=za.Desktop}return a}(a)}return c}(a)}(this);!function(){function a(a,b,c,d,e,f){for(var e=0,g=d.length;e<g;e++){var h=d[e];if(h){for(var i=!1,h=h[a];h;){if(h.sizcache===c){i=d[h.sizset];break}if(1===h.nodeType&&!f)h.sizcache=c,h.sizset=e;if(h.nodeName.toLowerCase()===b){i=h;break}h=h[a]}d[e]=i}}}function b(a,b,c,d,e,f){for(var e=0,g=d.length;e<g;e++){var h=d[e];if(h){for(var i=!1,h=h[a];h;){if(h.sizcache===c){i=d[h.sizset];break}if(1===h.nodeType){if(!f)h.sizcache=c,h.sizset=e;if("string"!==typeof b){if(h===b){i=!0;break}}else if(0<k.filter(b,[h]).length){i=h;break}}h=h[a]}d[e]=i}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,g=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){g=!1;return 0});var k=function(a,b,d,f){var d=d||[],g=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return d;var h,i,j,n,o,p=!0,s=k.isXML(b),r=[],t=a;do if(c.exec(""),h=c.exec(t))if(t=h[3],r.push(h[1]),h[2]){n=h[3];break}while(h);if(1<r.length&&m.exec(a))if(2===r.length&&l.relative[r[0]])i=u(r[0]+r[1],b);else for(i=l.relative[r[0]]?[b]:k(r.shift(),b);r.length;)a=r.shift(),l.relative[a]&&(a+=r.shift()),i=u(a,i);else if(!f&&1<r.length&&9===b.nodeType&&!s&&l.match.ID.test(r[0])&&!l.match.ID.test(r[r.length-1])&&(h=k.find(r.shift(),b,s),b=h.expr?k.filter(h.expr,h.set)[0]:h.set[0]),b){h=f?{expr:r.pop(),set:q(f)}:k.find(r.pop(),1===r.length&&("~"===r[0]||"+"===r[0])&&b.parentNode?b.parentNode:b,s);i=h.expr?k.filter(h.expr,h.set):h.set;for(0<r.length?j=q(i):p=!1;r.length;)h=o=r.pop(),l.relative[o]?h=r.pop():o="",null==h&&(h=b),l.relative[o](j,h,s)}else j=[];j||(j=i);j||k.error(o||a);if("[object Array]"===e.call(j))if(p)if(b&&1===b.nodeType)for(a=0;null!=j[a];a++)j[a]&&(!0===j[a]||1===j[a].nodeType&&k.contains(b,j[a]))&&d.push(i[a]);else for(a=0;null!=j[a];a++)j[a]&&1===j[a].nodeType&&d.push(i[a]);else d.push.apply(d,j);else q(j,d);n&&(k(n,g,d,f),k.uniqueSort(d));return d};k.uniqueSort=function(a){if(r&&(f=g,a.sort(r),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};k.matches=function(a,b){return k(a,null,null,b)};k.matchesSelector=function(a,b){return 0<k(b,null,null,[a]).length};k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if("\\"!==j.substr(j.length-1)&&(g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c),null!=d)){a=a.replace(l.match[h],"");break}}}d||(d="undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};k.filter=function(a,b,c,d){for(var e,f,g=a,h=[],i=b,j=b&&b[0]&&k.isXML(b[0]);a&&b.length;){for(var m in l.filter)if(null!=(e=l.leftMatch[m].exec(a))&&e[2]){var o,n,p=l.filter[m];n=e[1];f=!1;e.splice(1,1);if("\\"!==n.substr(n.length-1)){i===h&&(h=[]);if(l.preFilter[m])if(e=l.preFilter[m](e,i,c,h,d,j)){if(!0===e)continue}else f=o=!0;if(e)for(var q=0;null!=(n=i[q]);q++)if(n){o=p(n,e,q,i);var r=d^!!o;c&&null!=o?r?f=!0:i[q]=!1:r&&(h.push(n),f=!0)}if(void 0!==o){c||(i=h);a=a.replace(l.match[m],"");if(!f)return[];break}}}if(a===g)if(null==f)k.error(a);else break;g=a}return i};k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"===typeof b,d=c&&!j.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&k.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,e=0,f=a.length;if(d&&!j.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(c,e,f){var g,h=d++,i=b;"string"===typeof e&&!j.test(e)&&(g=e=e.toLowerCase(),i=a);i("parentNode",e,h,c,g,f)},"~":function(c,e,f){var g,h=d++,i=b;"string"===typeof e&&!j.test(e)&&(g=e=e.toLowerCase(),i=a);i("previousSibling",e,h,c,g,f)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var f=0,g;null!=(g=b[f]);f++)g&&(e^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||k.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(i,"");!f&&l.attrMap[b]&&(a[1]=l.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(i,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,d,e,f){if("not"===a[1])if(1<(c.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=k(a[3],null,null,b);else return a=k.filter(a[3],b,d,1^f),d||e.push.apply(e,a),!1;else if(l.match.POS.test(a[0])||l.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),a=a.type;return"text"===a&&(b===a||null===b)},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===c)return!0;d=a;case"last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case"nth":var c=b[2],e=b[3];if(1===c&&0===e)return!0;var f=b[0],g=a.parentNode;if(g&&(g.sizcache!==f||!a.nodeIndex)){for(var h=0,d=g.firstChild;d;d=d.nextSibling)if(1===d.nodeType)d.nodeIndex=++h;g.sizcache=f}d=a.nodeIndex-e;return 0===c?0===d:0===d%c&&0<=d/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=l.attrHandle[c]?l.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:"="===e?d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):!f?d&&!1!==c:"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1},POS:function(a,b,c,d){var e=l.setFilters[b[2]];if(e)return e(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)},p;for(p in l.match)l.match[p]=RegExp(l.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[p]=RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[p].source.replace(/\\(\d+)/g,n));var q=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(s){q=function(a,b){var c=0,d=b||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,t;document.documentElement.compareDocumentPosition?r=function(a,b){return a===b?(f=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){var c,d,e=[],g=[];c=a.parentNode;d=b.parentNode;var i=c;if(a===b)return f=!0,0;if(c===d)return t(a,b);if(c){if(!d)return 1}else return-1;for(;i;)e.unshift(i),i=i.parentNode;for(i=d;i;)g.unshift(i),i=i.parentNode;c=e.length;d=g.length;for(i=0;i<c&&i<d;i++)if(e[i]!==g[i])return t(e[i],g[i]);return i===c?t(a,g[i],-1):t(e[i],b,1)},t=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});k.getText=function(a){for(var b="",c,d=0;a[d];d++)c=a[d],3===c.nodeType||4===c.nodeType?b+=c.nodeValue:8!==c.nodeType&&(b+=k.getText(c.childNodes));return b};!function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>";c.insertBefore(a,c.firstChild);if(document.getElementById(b))l.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},l.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b};c.removeChild(a);c=a=null}();!function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(0<a.getElementsByTagName("*").length)l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c};a.innerHTML="<a href='#'></a>";if(a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href"))l.attrHandle.href=function(a){return a.getAttribute("href",2)};a=null}();document.querySelectorAll&&function(){var a=k,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&0===b.querySelectorAll(".TEST").length)){k=function(b,c,d,e){c=c||document;if(!e&&!k.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return q(c.getElementsByTagName(b),d);if(f[2]&&l.find.CLASS&&c.getElementsByClassName)return q(c.getElementsByClassName(f[2]),d)}if(9===c.nodeType){if("body"===b&&c.body)return q([c.body],d);if(f&&f[3]){var g=c.getElementById(f[3]);if(g&&g.parentNode){if(g.id===f[3])return q([g],d)}else return q([],d)}try{return q(c.querySelectorAll(b),d)}catch(h){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,i=(g=c.getAttribute("id"))||"__sizzle__",j=c.parentNode,m=/^\s*[+~]/.test(b);g?i=i.replace(/'/g,"\\$&"):c.setAttribute("id",i);if(m&&j)c=c.parentNode;try{if(!m||j)return q(c.querySelectorAll("[id='"+i+"'] "+b),d)}catch(n){}finally{g||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)k[c]=a[c];b=null}}();!function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(document.createElement("div"),"div"),d=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(e){d=!0}k.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(d||!l.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return 0<k(e,null,null,[a]).length}}}();!function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length))l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null}();k.contains=document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};k.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var u=function(a,b){for(var c,d=[],e="",f=b.nodeType?[b]:b;c=l.match.PSEUDO.exec(a);)e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;c=0;for(var g=f.length;c<g;c++)k(a,f[c],d);return k.filter(e,d)};window.Sizzle=k}();var ne=Ob.getSizzle();ee=ne;ee.select=ne;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};var je,oe=window.navigator.appName;je="Microsoft Internet Explorer"==oe?30:"Netscape"!=oe?26:28;switch(je){case 30:w.defaultAm=2;break;case 28:w.defaultAm=3;break;case 26:w.defaultAm=1;break;default:throw"bad dbits value"}w.DB=je;w.DM=(1<<w.DB)-1;w.DV=1<<w.DB;w.BI_FP=52;w.FV=Math.pow(2,w.BI_FP);w.F1=w.BI_FP-w.DB;w.F2=2*w.DB-w.BI_FP;w.initBiRc();w.BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";w.lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];w.lplim=67108864/w.lowprimes[w.lowprimes.length-1]|0;var od=window.ReportGrid?window.ReportGrid:window.ReportGrid={};od.$=od.$||{};od.$.pk=od.$.pk||{};od.$.pk.rg_query_BaseQuery=od.$.pk.rg_query_BaseQuery||Ja;od.$.pk.rg_query_Query=od.$.pk.rg_query_Query||pb;K.SymbolCache.cache=new K.SymbolCache;ha.layoutDefault=new L.StringMap;ha.layoutType=new L.StringMap;ha.layoutArgs=new L.StringMap;ha.layoutDefault.set("barchart","cartesian");ha.layoutDefault.set("funnelchart","simple");ha.layoutDefault.set("geo","simple");ha.layoutDefault.set("heatgrid","cartesian");ha.layoutDefault.set("linechart","cartesian");ha.layoutDefault.set("piechart","simple");ha.layoutDefault.set("sankey","simple");ha.layoutDefault.set("scattergraph","cartesian");ha.layoutDefault.set("streamgraph","x");ha.layoutType.set("cartesian",La);ha.layoutType.set("simple",Gc);ha.layoutType.set("x",Db);f.NamedColors.byName=new L.StringMap;f.NamedColors.byName.set("aliceblue",f.NamedColors.aliceblue=f.Rgb.fromInt(15792383));f.NamedColors.byName.set("alice blue",f.NamedColors.aliceblue);f.NamedColors.byName.set("antiquewhite",f.NamedColors.antiquewhite=f.Rgb.fromInt(16444375));f.NamedColors.byName.set("antique white",f.NamedColors.antiquewhite);f.NamedColors.byName.set("aqua",f.NamedColors.aqua=f.Rgb.fromInt(65535));f.NamedColors.byName.set("aquamarine",f.NamedColors.aquamarine=f.Rgb.fromInt(8388564));f.NamedColors.byName.set("azure",f.NamedColors.azure=f.Rgb.fromInt(15794175));f.NamedColors.byName.set("beige",f.NamedColors.beige=f.Rgb.fromInt(16119260));f.NamedColors.byName.set("bisque",f.NamedColors.bisque=f.Rgb.fromInt(16770244));f.NamedColors.byName.set("black",f.NamedColors.black=f.Rgb.fromInt(0));f.NamedColors.byName.set("blanchedalmond",f.NamedColors.blanchedalmond=f.Rgb.fromInt(16772045));f.NamedColors.byName.set("blanched almond",f.NamedColors.blanchedalmond);f.NamedColors.byName.set("blue",f.NamedColors.blue=f.Rgb.fromInt(255));f.NamedColors.byName.set("blueviolet",f.NamedColors.blueviolet=f.Rgb.fromInt(9055202));f.NamedColors.byName.set("blue violet",f.NamedColors.blueviolet);f.NamedColors.byName.set("brown",f.NamedColors.brown=f.Rgb.fromInt(10824234));f.NamedColors.byName.set("burlywood",f.NamedColors.burlywood=f.Rgb.fromInt(14596231));f.NamedColors.byName.set("burly wood",f.NamedColors.burlywood);f.NamedColors.byName.set("cadetblue",f.NamedColors.cadetblue=f.Rgb.fromInt(6266528));f.NamedColors.byName.set("cadet blue",f.NamedColors.cadetblue);f.NamedColors.byName.set("chartreuse",f.NamedColors.chartreuse=f.Rgb.fromInt(8388352));f.NamedColors.byName.set("chart reuse",f.NamedColors.chartreuse);f.NamedColors.byName.set("chocolate",f.NamedColors.chocolate=f.Rgb.fromInt(13789470));f.NamedColors.byName.set("coral",f.NamedColors.coral=f.Rgb.fromInt(16744272));f.NamedColors.byName.set("cornflowerblue",f.NamedColors.cornflowerblue=f.Rgb.fromInt(6591981));f.NamedColors.byName.set("corn flower blue",f.NamedColors.cornflowerblue);f.NamedColors.byName.set("cornsilk",f.NamedColors.cornsilk=f.Rgb.fromInt(16775388));f.NamedColors.byName.set("corn silk",f.NamedColors.cornsilk);f.NamedColors.byName.set("crimson",f.NamedColors.crimson=f.Rgb.fromInt(14423100));f.NamedColors.byName.set("cyan",f.NamedColors.cyan=f.Rgb.fromInt(65535));f.NamedColors.byName.set("darkblue",f.NamedColors.darkblue=f.Rgb.fromInt(139));f.NamedColors.byName.set("dark blue",f.NamedColors.darkblue);f.NamedColors.byName.set("darkcyan",f.NamedColors.darkcyan=f.Rgb.fromInt(35723));f.NamedColors.byName.set("dark cyan",f.NamedColors.darkcyan);f.NamedColors.byName.set("darkgoldenrod",f.NamedColors.darkgoldenrod=f.Rgb.fromInt(12092939));f.NamedColors.byName.set("dark golden rod",f.NamedColors.darkgoldenrod);f.NamedColors.byName.set("darkgray",f.NamedColors.darkgray=f.NamedColors.darkgrey=f.Rgb.fromInt(11119017));f.NamedColors.byName.set("dark gray",f.NamedColors.darkgray);f.NamedColors.byName.set("darkgrey",f.NamedColors.darkgrey);f.NamedColors.byName.set("dark grey",f.NamedColors.darkgrey);f.NamedColors.byName.set("darkgreen",f.NamedColors.darkgreen=f.Rgb.fromInt(25600));f.NamedColors.byName.set("dark green",f.NamedColors.darkgreen);f.NamedColors.byName.set("darkkhaki",f.NamedColors.darkkhaki=f.Rgb.fromInt(12433259));f.NamedColors.byName.set("dark khaki",f.NamedColors.darkkhaki);f.NamedColors.byName.set("darkmagenta",f.NamedColors.darkmagenta=f.Rgb.fromInt(9109643));f.NamedColors.byName.set("dark magenta",f.NamedColors.darkmagenta);f.NamedColors.byName.set("darkolivegreen",f.NamedColors.darkolivegreen=f.Rgb.fromInt(5597999));f.NamedColors.byName.set("dark olive green",f.NamedColors.darkolivegreen);f.NamedColors.byName.set("darkorange",f.NamedColors.darkorange=f.Rgb.fromInt(16747520));f.NamedColors.byName.set("dark orange",f.NamedColors.darkorange);f.NamedColors.byName.set("darkorchid",f.NamedColors.darkorchid=f.Rgb.fromInt(10040012));f.NamedColors.byName.set("dark orchid",f.NamedColors.darkorchid);f.NamedColors.byName.set("darkred",f.NamedColors.darkred=f.Rgb.fromInt(9109504));f.NamedColors.byName.set("dark red",f.NamedColors.darkred);f.NamedColors.byName.set("darksalmon",f.NamedColors.darksalmon=f.Rgb.fromInt(15308410));f.NamedColors.byName.set("dark salmon",f.NamedColors.darksalmon);f.NamedColors.byName.set("darkseagreen",f.NamedColors.darkseagreen=f.Rgb.fromInt(9419919));f.NamedColors.byName.set("dark sea green",f.NamedColors.darkseagreen);f.NamedColors.byName.set("darkslateblue",f.NamedColors.darkslateblue=f.Rgb.fromInt(4734347));f.NamedColors.byName.set("dark slate blue",f.NamedColors.darkslateblue);f.NamedColors.byName.set("darkslategray",f.NamedColors.darkslategray=f.NamedColors.darkslategrey=f.Rgb.fromInt(3100495));f.NamedColors.byName.set("dark slate gray",f.NamedColors.darkslategray);f.NamedColors.byName.set("darkslategrey",f.NamedColors.darkslategrey);f.NamedColors.byName.set("dark slate grey",f.NamedColors.darkslategrey);f.NamedColors.byName.set("darkturquoise",f.NamedColors.darkturquoise=f.Rgb.fromInt(52945));f.NamedColors.byName.set("dark turquoise",f.NamedColors.darkturquoise);f.NamedColors.byName.set("darkviolet",f.NamedColors.darkviolet=f.Rgb.fromInt(9699539));f.NamedColors.byName.set("dark violet",f.NamedColors.darkviolet);f.NamedColors.byName.set("deeppink",f.NamedColors.deeppink=f.Rgb.fromInt(16716947));f.NamedColors.byName.set("deep pink",f.NamedColors.deeppink);f.NamedColors.byName.set("deepskyblue",f.NamedColors.deepskyblue=f.Rgb.fromInt(49151));f.NamedColors.byName.set("deep sky blue",f.NamedColors.deepskyblue);f.NamedColors.byName.set("dimgray",f.NamedColors.dimgray=f.NamedColors.dimgrey=f.Rgb.fromInt(6908265));f.NamedColors.byName.set("dim grey",f.NamedColors.dimgrey);f.NamedColors.byName.set("dimgrey",f.NamedColors.dimgrey);f.NamedColors.byName.set("dim grey",f.NamedColors.dimgrey);f.NamedColors.byName.set("dodgerblue",f.NamedColors.dodgerblue=f.Rgb.fromInt(2003199));f.NamedColors.byName.set("dodger blue",f.NamedColors.dodgerblue);f.NamedColors.byName.set("firebrick",f.NamedColors.firebrick=f.Rgb.fromInt(11674146));f.NamedColors.byName.set("fire brick",f.NamedColors.firebrick);f.NamedColors.byName.set("floralwhite",f.NamedColors.floralwhite=f.Rgb.fromInt(16775920));f.NamedColors.byName.set("floral white",f.NamedColors.floralwhite);f.NamedColors.byName.set("forestgreen",f.NamedColors.forestgreen=f.Rgb.fromInt(2263842));f.NamedColors.byName.set("forest green",f.NamedColors.forestgreen);f.NamedColors.byName.set("fuchsia",f.NamedColors.fuchsia=f.Rgb.fromInt(16711935));f.NamedColors.byName.set("gainsboro",f.NamedColors.gainsboro=f.Rgb.fromInt(14474460));f.NamedColors.byName.set("ghostwhite",f.NamedColors.ghostwhite=f.Rgb.fromInt(16316671));f.NamedColors.byName.set("ghost white",f.NamedColors.ghostwhite);f.NamedColors.byName.set("gold",f.NamedColors.gold=f.Rgb.fromInt(16766720));f.NamedColors.byName.set("goldenrod",f.NamedColors.goldenrod=f.Rgb.fromInt(14329120));f.NamedColors.byName.set("golden rod",f.NamedColors.goldenrod);f.NamedColors.byName.set("gray",f.NamedColors.gray=f.NamedColors.grey=f.Rgb.fromInt(8421504));f.NamedColors.byName.set("grey",f.NamedColors.grey);f.NamedColors.byName.set("green",f.NamedColors.green=f.Rgb.fromInt(32768));f.NamedColors.byName.set("greenyellow",f.NamedColors.greenyellow=f.Rgb.fromInt(11403055));f.NamedColors.byName.set("green yellow",f.NamedColors.greenyellow);f.NamedColors.byName.set("honeydew",f.NamedColors.honeydew=f.Rgb.fromInt(15794160));f.NamedColors.byName.set("honey dew",f.NamedColors.honeydew);f.NamedColors.byName.set("hotpink",f.NamedColors.hotpink=f.Rgb.fromInt(16738740));f.NamedColors.byName.set("hot pink",f.NamedColors.hotpink);f.NamedColors.byName.set("indianred",f.NamedColors.indianred=f.Rgb.fromInt(13458524));f.NamedColors.byName.set("indian red",f.NamedColors.indianred);f.NamedColors.byName.set("indigo",f.NamedColors.indigo=f.Rgb.fromInt(4915330));f.NamedColors.byName.set("ivory",f.NamedColors.ivory=f.Rgb.fromInt(16777200));f.NamedColors.byName.set("khaki",f.NamedColors.khaki=f.Rgb.fromInt(15787660));f.NamedColors.byName.set("lavender",f.NamedColors.lavender=f.Rgb.fromInt(15132410));f.NamedColors.byName.set("lavenderblush",f.NamedColors.lavenderblush=f.Rgb.fromInt(16773365));f.NamedColors.byName.set("lavender blush",f.NamedColors.lavenderblush);f.NamedColors.byName.set("lawngreen",f.NamedColors.lawngreen=f.Rgb.fromInt(8190976));f.NamedColors.byName.set("lawn green",f.NamedColors.lawngreen);f.NamedColors.byName.set("lemonchiffon",f.NamedColors.lemonchiffon=f.Rgb.fromInt(16775885));f.NamedColors.byName.set("lemon chiffon",f.NamedColors.lemonchiffon);f.NamedColors.byName.set("lightblue",f.NamedColors.lightblue=f.Rgb.fromInt(11393254));f.NamedColors.byName.set("light blue",f.NamedColors.lightblue);f.NamedColors.byName.set("lightcoral",f.NamedColors.lightcoral=f.Rgb.fromInt(15761536));f.NamedColors.byName.set("light coral",f.NamedColors.lightcoral);f.NamedColors.byName.set("lightcyan",f.NamedColors.lightcyan=f.Rgb.fromInt(14745599));f.NamedColors.byName.set("light cyan",f.NamedColors.lightcyan);f.NamedColors.byName.set("lightgoldenrodyellow",f.NamedColors.lightgoldenrodyellow=f.Rgb.fromInt(16448210));f.NamedColors.byName.set("light golden rod yellow",f.NamedColors.lightgoldenrodyellow);f.NamedColors.byName.set("lightgray",f.NamedColors.lightgray=f.NamedColors.lightgrey=f.Rgb.fromInt(13882323));f.NamedColors.byName.set("light gray",f.NamedColors.lightgray);f.NamedColors.byName.set("lightgrey",f.NamedColors.lightgrey);f.NamedColors.byName.set("light grey",f.NamedColors.lightgrey);f.NamedColors.byName.set("lightgreen",f.NamedColors.lightgreen=f.Rgb.fromInt(9498256));f.NamedColors.byName.set("light green",f.NamedColors.lightgreen);f.NamedColors.byName.set("lightpink",f.NamedColors.lightpink=f.Rgb.fromInt(16758465));f.NamedColors.byName.set("light pink",f.NamedColors.lightpink);f.NamedColors.byName.set("lightsalmon",f.NamedColors.lightsalmon=f.Rgb.fromInt(16752762));f.NamedColors.byName.set("light salmon",f.NamedColors.lightsalmon);f.NamedColors.byName.set("lightseagreen",f.NamedColors.lightseagreen=f.Rgb.fromInt(2142890));f.NamedColors.byName.set("light sea green",f.NamedColors.lightseagreen);f.NamedColors.byName.set("lightskyblue",f.NamedColors.lightskyblue=f.Rgb.fromInt(8900346));
f.NamedColors.byName.set("light sky blue",f.NamedColors.lightskyblue);f.NamedColors.byName.set("lightslategray",f.NamedColors.lightslategray=f.NamedColors.lightslategrey=f.Rgb.fromInt(7833753));f.NamedColors.byName.set("light slate gray",f.NamedColors.lightslategray);f.NamedColors.byName.set("lightslategrey",f.NamedColors.lightslategrey);f.NamedColors.byName.set("light slate grey",f.NamedColors.lightslategrey);f.NamedColors.byName.set("lightsteelblue",f.NamedColors.lightsteelblue=f.Rgb.fromInt(11584734));f.NamedColors.byName.set("light steel blue",f.NamedColors.lightsteelblue);f.NamedColors.byName.set("lightyellow",f.NamedColors.lightyellow=f.Rgb.fromInt(16777184));f.NamedColors.byName.set("light yellow",f.NamedColors.lightyellow);f.NamedColors.byName.set("lime",f.NamedColors.lime=f.Rgb.fromInt(65280));f.NamedColors.byName.set("limegreen",f.NamedColors.limegreen=f.Rgb.fromInt(3329330));f.NamedColors.byName.set("lime green",f.NamedColors.limegreen);f.NamedColors.byName.set("linen",f.NamedColors.linen=f.Rgb.fromInt(16445670));f.NamedColors.byName.set("magenta",f.NamedColors.magenta=f.Rgb.fromInt(16711935));f.NamedColors.byName.set("maroon",f.NamedColors.maroon=f.Rgb.fromInt(8388608));f.NamedColors.byName.set("mediumaquamarine",f.NamedColors.mediumaquamarine=f.Rgb.fromInt(6737322));f.NamedColors.byName.set("mediuma quamarine",f.NamedColors.mediumaquamarine);f.NamedColors.byName.set("mediumblue",f.NamedColors.mediumblue=f.Rgb.fromInt(205));f.NamedColors.byName.set("medium blue",f.NamedColors.mediumblue);f.NamedColors.byName.set("mediumorchid",f.NamedColors.mediumorchid=f.Rgb.fromInt(12211667));f.NamedColors.byName.set("medium orchid",f.NamedColors.mediumorchid);f.NamedColors.byName.set("mediumpurple",f.NamedColors.mediumpurple=f.Rgb.fromInt(9662683));f.NamedColors.byName.set("medium purple",f.NamedColors.mediumpurple);f.NamedColors.byName.set("mediumseagreen",f.NamedColors.mediumseagreen=f.Rgb.fromInt(3978097));f.NamedColors.byName.set("medium sea green",f.NamedColors.mediumseagreen);f.NamedColors.byName.set("mediumslateblue",f.NamedColors.mediumslateblue=f.Rgb.fromInt(8087790));f.NamedColors.byName.set("medium slate blue",f.NamedColors.mediumslateblue);f.NamedColors.byName.set("mediumspringgreen",f.NamedColors.mediumspringgreen=f.Rgb.fromInt(64154));f.NamedColors.byName.set("medium spring green",f.NamedColors.mediumspringgreen);f.NamedColors.byName.set("mediumturquoise",f.NamedColors.mediumturquoise=f.Rgb.fromInt(4772300));f.NamedColors.byName.set("medium turquoise",f.NamedColors.mediumturquoise);f.NamedColors.byName.set("mediumvioletred",f.NamedColors.mediumvioletred=f.Rgb.fromInt(13047173));f.NamedColors.byName.set("medium violet red",f.NamedColors.mediumvioletred);f.NamedColors.byName.set("midnightblue",f.NamedColors.midnightblue=f.Rgb.fromInt(1644912));f.NamedColors.byName.set("midnight blue",f.NamedColors.midnightblue);f.NamedColors.byName.set("mintcream",f.NamedColors.mintcream=f.Rgb.fromInt(16121850));f.NamedColors.byName.set("mint cream",f.NamedColors.mintcream);f.NamedColors.byName.set("mistyrose",f.NamedColors.mistyrose=f.Rgb.fromInt(16770273));f.NamedColors.byName.set("misty rose",f.NamedColors.mistyrose);f.NamedColors.byName.set("moccasin",f.NamedColors.moccasin=f.Rgb.fromInt(16770229));f.NamedColors.byName.set("navajowhite",f.NamedColors.navajowhite=f.Rgb.fromInt(16768685));f.NamedColors.byName.set("navajo white",f.NamedColors.navajowhite);f.NamedColors.byName.set("navy",f.NamedColors.navy=f.Rgb.fromInt(128));f.NamedColors.byName.set("oldlace",f.NamedColors.oldlace=f.Rgb.fromInt(16643558));f.NamedColors.byName.set("old lace",f.NamedColors.oldlace);f.NamedColors.byName.set("olive",f.NamedColors.olive=f.Rgb.fromInt(8421376));f.NamedColors.byName.set("olivedrab",f.NamedColors.olivedrab=f.Rgb.fromInt(7048739));f.NamedColors.byName.set("olive drab",f.NamedColors.olivedrab);f.NamedColors.byName.set("orange",f.NamedColors.orange=f.Rgb.fromInt(16753920));f.NamedColors.byName.set("orangered",f.NamedColors.orangered=f.Rgb.fromInt(16729344));f.NamedColors.byName.set("orangered",f.NamedColors.orangered);f.NamedColors.byName.set("orchid",f.NamedColors.orchid=f.Rgb.fromInt(14315734));f.NamedColors.byName.set("palegoldenrod",f.NamedColors.palegoldenrod=f.Rgb.fromInt(15657130));f.NamedColors.byName.set("pale golden rod",f.NamedColors.palegoldenrod);f.NamedColors.byName.set("palegreen",f.NamedColors.palegreen=f.Rgb.fromInt(10025880));f.NamedColors.byName.set("pale green",f.NamedColors.palegreen);f.NamedColors.byName.set("paleturquoise",f.NamedColors.paleturquoise=f.Rgb.fromInt(11529966));f.NamedColors.byName.set("pale turquoise",f.NamedColors.paleturquoise);f.NamedColors.byName.set("palevioletred",f.NamedColors.palevioletred=f.Rgb.fromInt(14381203));f.NamedColors.byName.set("pale violet red",f.NamedColors.palevioletred);f.NamedColors.byName.set("papayawhip",f.NamedColors.papayawhip=f.Rgb.fromInt(16773077));f.NamedColors.byName.set("papaya whip",f.NamedColors.papayawhip);f.NamedColors.byName.set("peachpuff",f.NamedColors.peachpuff=f.Rgb.fromInt(16767673));f.NamedColors.byName.set("peach puff",f.NamedColors.peachpuff);f.NamedColors.byName.set("peru",f.NamedColors.peru=f.Rgb.fromInt(13468991));f.NamedColors.byName.set("pink",f.NamedColors.pink=f.Rgb.fromInt(16761035));f.NamedColors.byName.set("plum",f.NamedColors.plum=f.Rgb.fromInt(14524637));f.NamedColors.byName.set("powderblue",f.NamedColors.powderblue=f.Rgb.fromInt(11591910));f.NamedColors.byName.set("powder blue",f.NamedColors.powderblue);f.NamedColors.byName.set("purple",f.NamedColors.purple=f.Rgb.fromInt(8388736));f.NamedColors.byName.set("red",f.NamedColors.red=f.Rgb.fromInt(16711680));f.NamedColors.byName.set("rosybrown",f.NamedColors.rosybrown=f.Rgb.fromInt(12357519));f.NamedColors.byName.set("rosy brown",f.NamedColors.rosybrown);f.NamedColors.byName.set("royalblue",f.NamedColors.royalblue=f.Rgb.fromInt(4286945));f.NamedColors.byName.set("royal blue",f.NamedColors.royalblue);f.NamedColors.byName.set("saddlebrown",f.NamedColors.saddlebrown=f.Rgb.fromInt(9127187));f.NamedColors.byName.set("saddle brown",f.NamedColors.saddlebrown);f.NamedColors.byName.set("salmon",f.NamedColors.salmon=f.Rgb.fromInt(16416882));f.NamedColors.byName.set("sandybrown",f.NamedColors.sandybrown=f.Rgb.fromInt(16032864));f.NamedColors.byName.set("sandy brown",f.NamedColors.sandybrown);f.NamedColors.byName.set("seagreen",f.NamedColors.seagreen=f.Rgb.fromInt(3050327));f.NamedColors.byName.set("sea green",f.NamedColors.seagreen);f.NamedColors.byName.set("seashell",f.NamedColors.seashell=f.Rgb.fromInt(16774638));f.NamedColors.byName.set("sea shell",f.NamedColors.seashell);f.NamedColors.byName.set("sienna",f.NamedColors.sienna=f.Rgb.fromInt(10506797));f.NamedColors.byName.set("silver",f.NamedColors.silver=f.Rgb.fromInt(12632256));f.NamedColors.byName.set("skyblue",f.NamedColors.skyblue=f.Rgb.fromInt(8900331));f.NamedColors.byName.set("sky blue",f.NamedColors.skyblue);f.NamedColors.byName.set("slateblue",f.NamedColors.slateblue=f.Rgb.fromInt(6970061));f.NamedColors.byName.set("slate blue",f.NamedColors.slateblue);f.NamedColors.byName.set("slategray",f.NamedColors.slategray=f.NamedColors.slategrey=f.Rgb.fromInt(7372944));f.NamedColors.byName.set("slate gray",f.NamedColors.slategray);f.NamedColors.byName.set("slategrey",f.NamedColors.slategrey);f.NamedColors.byName.set("slate grey",f.NamedColors.slategrey);f.NamedColors.byName.set("snow",f.NamedColors.snow=f.Rgb.fromInt(16775930));f.NamedColors.byName.set("springgreen",f.NamedColors.springgreen=f.Rgb.fromInt(65407));f.NamedColors.byName.set("spring green",f.NamedColors.springgreen);f.NamedColors.byName.set("steelblue",f.NamedColors.steelblue=f.Rgb.fromInt(4620980));f.NamedColors.byName.set("steel blue",f.NamedColors.steelblue);f.NamedColors.byName.set("tan",f.NamedColors.tan=f.Rgb.fromInt(13808780));f.NamedColors.byName.set("teal",f.NamedColors.teal=f.Rgb.fromInt(32896));f.NamedColors.byName.set("thistle",f.NamedColors.thistle=f.Rgb.fromInt(14204888));f.NamedColors.byName.set("tomato",f.NamedColors.tomato=f.Rgb.fromInt(16737095));f.NamedColors.byName.set("turquoise",f.NamedColors.turquoise=f.Rgb.fromInt(4251856));f.NamedColors.byName.set("violet",f.NamedColors.violet=f.Rgb.fromInt(15631086));f.NamedColors.byName.set("wheat",f.NamedColors.wheat=f.Rgb.fromInt(16113331));f.NamedColors.byName.set("white",f.NamedColors.white=f.Rgb.fromInt(16777215));f.NamedColors.byName.set("whitesmoke",f.NamedColors.whitesmoke=f.Rgb.fromInt(16119285));f.NamedColors.byName.set("white smoke",f.NamedColors.whitesmoke);f.NamedColors.byName.set("yellow",f.NamedColors.yellow=f.Rgb.fromInt(16776960));f.NamedColors.byName.set("yellowgreen",f.NamedColors.yellowgreen=f.Rgb.fromInt(10145074));f.NamedColors.byName.set("yellow green",f.NamedColors.yellowgreen);gb.En.get_language();Na.EnUS.get_culture();var ke;if(null!=(ke=window.JSON))aa.Json.nativeDecoder=ke.parse,aa.Json.nativeEncoder=ke.stringify;Ud.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];ja._reparse=new M("^\\d{4}-\\d\\d-\\d\\d(( |T)\\d\\d:\\d\\d(:\\d\\d(\\.\\d{1,3})?)?)?Z?$","");G._reparse=new M("^[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?","");G._reparseStrict=new M("^[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?$","");P._reparse=new M("^([+-])?\\d+$","");J._reFormat=new M("{(\\d+)(?::([a-zA-Z]+))?(?:,([^\"',}]+|'[^']+'|\"[^\"]+\"))?(?:,([^\"',}]+|'[^']+'|\"[^\"]+\"))?(?:,([^\"',}]+|'[^']+'|\"[^\"]+\"))?}","m");J._reCollapse=new M("\\s+","g");J.__ucwordsPattern=new M("[^a-zA-Z]([a-z])","");J._reInterpolateNumber=new M("[-+]?(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+|\\d+)(?:[eE][-]?\\d+)?","");Bb.refloat=new M("(\\d+(?:\\.\\d+)?)","");ib._escapePattern=new M("[*+?|{[()^$.# \\\\]","");ia.refloat=new M("(\\d+(?:\\.\\d+)?)","");ea.window="undefined"!=typeof window?window:null;ea.document="undefined"!=typeof window?window.document:null;O.doc=function(){var a=new la([ea.document]),b=Yb.create([a]);a.parentNode=b.parentNode=ea.document.documentElement;return b}();O.selectionEngine=function(){var a;if(Dc.supported())a=new Dc;else if(Ob.supported())a=new Ob;else throw"no selector engine available";return a}(this);Wb.prefix=function(){var a=new L.StringMap;a.set("svg","http://www.w3.org/2000/svg");a.set("xhtml","http://www.w3.org/1999/xhtml");a.set("xlink","http://www.w3.org/1999/xlink");a.set("xml","http://www.w3.org/XML/1998/namespace");a.set("xmlns","http://www.w3.org/2000/xmlns/");return a}();Ec._usepage=new M("WebKit","").match(ea.window.navigator.userAgent);oa.timeout=0;oa.interval=0;oa._step=oa.step;Ca._id=0;Ca._inheritid=0;Ra.at="@";Ra.bracketMismatch="Bracket mismatch! Inside template, non-paired brackets, '{' or '}', should be replaced by @{'{'} and @{'}'}.";Cb.BASE_URL_GEOJSON="https://api.reportgrid.com/geo/json/";Cb.SERVICE_RENDERING_STATIC="https://api.reportgrid.com/services/viz/charts/up.json";Cb.LEGACY_RENDERING_STATIC="https://api.reportgrid.com/services/viz/charts/upandsee.{ext}";Pa.lastid=0;Pa.chartsCounter=0;Pa.chartsLoaded=0;Fb.snapping={minute:[{to:10,s:1},{to:20,s:2},{to:30,s:5},{to:60,s:10},{to:120,s:30},{to:240,s:60},{to:960,s:240}],minutetop:480,hour:[{to:12,s:1},{to:24,s:6},{to:60,s:12},{to:240,s:24},{to:480,s:48},{to:960,s:120}],hourtop:240,month:[{to:13,s:1},{to:25,s:2},{to:49,s:4},{to:73,s:6}],monthtop:12,year:[{to:10,s:1},{to:20,s:2},{to:50,s:5}],yeartop:10};Ua.PivotTable.defaultColorStart=new f.Hsl(210,1,1);Ua.PivotTable.defaultColorEnd=new f.Hsl(210,1,.5);F.DownloaderMenu.DEFAULT_FORMATS=["png","jpg","pdf"];F.DownloaderMenu.DEFAULT_TITLE="Download";F.Logo.registry=new L.StringMap;F.Logo._id=0;ga.warner=window.console&&window.console.warn?function(a){console.warn(""+t.string(a))}:function(){};qb.defaultStartColor=new f.Hsl(210,1,1);qb.defaultEndColor=new f.Hsl(210,1,.5);g.TransformerArray.instance=new g.TransformerArray;g.TransformerObject.instance=new g.TransformerObject;g.TransformerString.instance=new g.TransformerString;g.TransformerBool.instance=new g.TransformerBool;g.TransformerInt.instance=new g.TransformerInt;g.TransformerFloat.instance=new g.TransformerFloat;g.TransformerFunction.instance=new g.TransformerFunction;g.TransformerExpressionToFunction.interp=new ic;g.TransformerExpressionToFunction.pattern=new M("^\\s*=","");Gb.ALLOWED_FORMATS=["pdf","ps","png","jpg","svg"];Ba.FORMAT="jpg";Ba.nextframeid=0;La.ALT_RIGHT=20;La.ALT_LEFT=20;La.ALT_TOP=8;La.ALT_BOTTOM=8;La.REYAXIS=new M("^y(\\d+)$","");La.REYINDEX=new M("^y(\\d+)","");La.REYTITLE=new M("^y(\\d+)title$","");Db.ALT_RIGHT=20;Db.ALT_LEFT=20;Db.ALT_TOP=8;Db.ALT_BOTTOM=8;n.Coords.retransform=new M("translate\\(\\s*(\\d+(?:\\.\\d+)?)\\s*(?:[, ]\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)","");n.StreamGraph.vid=0;K.SVGSymbolBuilder.SIZE_PATTERN=new M("^(\\d+)x(\\d+)$","");K.SVGSymbolBuilder.ALIGN_PATTERN=new M("^(center|left|right)\\s+(center|top|bottom)$","i");K.SVGSymbolBuilder.HORIZONTAL_PATTERN=new M("^(center|left|right)$","i");K.SVGSymbolBuilder.VERTICAL_PATTERN=new M("^(top|bottom)$","i");bc.modulus="00:ca:a7:37:07:b0:26:63:cb:f1:37:9d:e9:cc:c1:bd:f1:57:f5:90:72:4d:74:e2:5f:33:df:6c:c4:e4:7f:95:3c:87:89:ed:3c:60:cc:b0:15:f9:ad:57:77:52:4b:25:9b:c8:f9:d0:8a:b8:0a:ab:17:3d:7c:cf:1d:19:a3:8c:43:9b:ee:5b:2e:9e:45:18:b3:97:2a:91:c2:90:c2:1e:49:a3:5e:b1:48:09:1c:ee:06:b9:6e:ec:22:e6:2d:06:b8:b4:22:5f:4d:5e:81:6a:91:13:30:5d:6c:b5:7c:cc:fa:47:dc:8e:b4:f3:fd:0a:6e:d2:f8:09:3c:b1:c2:90:19";bc.publicExponent="3";X.validGroupValues=["hour","day","week","month","year"];ka.range=new M("(\\d+(?:\\.\\d+)?|\\.\\d+)?-(\\d+(?:\\.\\d+|\\.\\d+)?)?","");ha.html=["pivottable","leaderboard"];ha.svg="barchart,geo,funnelchart,heatgrid,linechart,piechart,scattergraph,streamgraph,sankey".split(",");ha.visualizations=ha.svg.concat(ha.html);ha.layouts=["simple","cartesian","x"];f.Colors._reParse=new M("^(?:(hsl|rgb|rgba|cmyk)\\(([^)]+)\\))|(?:(?:0x|#)([a-f0-9]{3,6}))$","i");s.DateParser.months=Na.EnUS.get_culture().date.months.slice(0,-1).map(function(a){return a.toLowerCase()});s.DateParser.shortmonths=Na.EnUS.get_culture().date.abbrMonths.slice(0,-1).map(function(a){return a.toLowerCase()});s.DateParser.days=Na.EnUS.get_culture().date.days.map(function(a){return a.toLowerCase()});s.DateParser.shortdays=Na.EnUS.get_culture().date.abbrDays.map(function(a){return a.toLowerCase()});s.DateParser.sfullmonths=s.DateParser.months.join("|");s.DateParser.sshortmonths=s.DateParser.shortmonths.join("|");s.DateParser.sfulldays=s.DateParser.days.join("|");s.DateParser.sshortdays=s.DateParser.shortdays.join("|");s.DateParser.day="(0?[0-9]|[1-2][0-9]|3[0-1])(?:st|nd|rd|th)?";s.DateParser.month="(?:0?[1-9]|1[0-2])";s.DateParser.hour="(?:0?[0-9]|1[0-9]|2[0-3])";s.DateParser.hhour="(?:0[0-9]|1[0-2])";s.DateParser.hohour="(?:0?[0-9]|1[0-2])";s.DateParser.fminsec="(?:0[0-9]|[1-5][0-9])";s.DateParser.minsec="(?:0?[0-9]|[1-5][0-9])";s.DateParser.ampm="(?:(?:in\\s+the\\s+)?(am|pm|evening|morning|afternoon))";s.DateParser.daypart="(?:(?:in\\s+the\\s+)?(evening|morning|afternoon|sunsrise|sunset|dawn|dusk|noon|mid-day|midday|mid-night|midnight))";s.DateParser.period="minute|minutes|hour|hours|day|days|week|weeks|month|months|year|years|second|seconds";s.DateParser.dateexp=new M("(?:(?:\\b("+s.DateParser.sfullmonths+")\\s+"+s.DateParser.day+"(?:\\s*,\\s*(\\d{2,4}))?\\b)|(?:\\b("+s.DateParser.sshortmonths+")\\s+"+s.DateParser.day+"(?:\\s*,?\\s*(\\d{2,4}))?\\b)|(?:\\b"+s.DateParser.day+"\\s+("+s.DateParser.sfullmonths+")(?:\\s+(\\d{2,4}))?\\b)|(?:\\b"+s.DateParser.day+"\\s+("+s.DateParser.sshortmonths+")(?:\\s+(\\d{2,4}))?\\b)|(?:\\b(?:"+s.DateParser.day+"\\s+)?("+s.DateParser.sfullmonths+")\\s+(\\d{2,4})\\b)|(?:\\b(?:"+s.DateParser.day+"\\s+)?("+s.DateParser.sshortmonths+")\\s+(\\d{2,4})\\b)|(?:\\b("+s.DateParser.month+")/"+s.DateParser.day+"(?:/(\\d{2,4}))?\\b)|(?:\\b"+s.DateParser.day+"/("+s.DateParser.month+")(?:/(\\d{2,4}))?\\b)|(?:\\b(\\d{2,4})-("+s.DateParser.month+")-"+s.DateParser.day+"\\b)|(?:^\\s*"+s.DateParser.day+"\\s*$))","i");s.DateParser.absdateexp=new M("(?:(?:\\b(today|now|this\\s+second|tomorrow|yesterday)\\b)|(?:\\b(?:(next|last|this)\\s+)?("+s.DateParser.sfullmonths+")\\b)|(?:\\b(?:(next|last|this)\\s+)?("+s.DateParser.sfulldays+")\\b)|(?:\\b(?:(next|last|this)\\s+)?("+s.DateParser.sshortmonths+")\\b)|(?:\\b(?:(next|last|this)\\s+)?("+s.DateParser.sshortdays+")\\b))","i");s.DateParser.relexp=new M("(?:(?:\\b(plus\\s+|minus\\s|\\+|-|in)\\s*(\\d+)?\\s+("+s.DateParser.period+")\\b)|(?:\\b(\\d+)?\\s+("+s.DateParser.period+")\\s+(from|before|hence|after|ago)?\\b))","i");s.DateParser.timeexp=new M("(?:\\bat\\s+)?(?:(?:\\b("+s.DateParser.hohour+"):("+s.DateParser.minsec+")\\s*"+s.DateParser.ampm+"\\b)|(?:(?:\\b|T)("+s.DateParser.hour+"):("+s.DateParser.minsec+")(?:[:]("+s.DateParser.minsec+")(?:\\.(\\d+))?)?\\b)|(?:(?:^|\\s+)("+s.DateParser.hhour+")("+s.DateParser.fminsec+")\\s*"+s.DateParser.ampm+"?(?:\\s+|$))|(?:\\b("+s.DateParser.hohour+")\\s*"+s.DateParser.ampm+"\\b)|(?:\\b"+s.DateParser.daypart+"\\b))","i");p.LineInternals.arcOffset=-Math.PI/2;p.LineInternals.arcMax=2*Math.PI-1e-6;p.LineInternals._lineBasisBezier1=[0,2/3,1/3,0];p.LineInternals._lineBasisBezier2=[0,1/3,2/3,0];p.LineInternals._lineBasisBezier3=[0,1/6,2/3,1/6];p.Symbol.sqrt3=Math.sqrt(3);p.Symbol.tan30=Math.tan(30*Math.PI/180);fb.ERegs._escapePattern=new M("[*+?|{[()^$.# \\\\]","");Ya.main()}();define("libs/precog/reportgrid-charts",function(){});define("app/util/output-error",[],function(){var elPanel=$('<div class="ui-widget"><div class="ui-content"></div></div>'),elError=elPanel.find(".ui-state-error");return{type:"error",name:"Error",display:false,panel:function(){return elPanel},update:function(errors,options,wrapper){elError.find("*").remove();$(errors).each(function(){if(!this.message&&"string"!==typeof this)return})}}});define("app/util/output-message",[],function(){var elPanel=$('<div class="ui-widget"><div class="pg-message ui-content ui-state-highlight ui-corner-all"></div></div>'),elMessage=elPanel.find(".pg-message");return{type:"message",name:"Message",display:false,panel:function(){return elPanel},update:function(result){var message="<p>"+result.message+"</p>";elMessage.html(message)}}});define("rtext!templates/toolbar.output.html",[],function(){return'<div class="pg-toolbar-actions pg-tabs-container">\n    <div class="pg-output-formats">\n    </div>\n</div>\n<div class="pg-toolbar-context pg-stacked-context">\n    <div class="pg-toolbar-result-type"></div>\n    <div class="pg-toolbar-result-general"></div>\n</div>'});define("app/util/humanize",[],function(){var root=this;var previousHumanize=root.humanize;var humanize={};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=humanize}exports.humanize=humanize}else{if(typeof define==="function"&&define.amd){define("humanize",function(){return humanize})}root.humanize=humanize}humanize.noConflict=function(){root.humanize=previousHumanize;return this};humanize.pad=function(str,count,padChar,type){str+="";if(!padChar){padChar=" "}else if(padChar.length>1){padChar=padChar.charAt(0)}type=type===undefined?"left":"right";if(type==="right"){while(str.length<count){str=str+padChar}}else{while(str.length<count){str=padChar+str}}return str};humanize.time=function(){return(new Date).getTime()/1e3};var dayTableCommon=[0,0,31,59,90,120,151,181,212,243,273,304,334];var dayTableLeap=[0,0,31,60,91,121,152,182,213,244,274,305,335];humanize.date=function(format,timestamp){var jsdate=timestamp===undefined?new Date:timestamp instanceof Date?new Date(timestamp):new Date(timestamp*1e3);var formatChr=/\\?([a-z])/gi;var formatChrCb=function(t,s){return f[t]?f[t]():s};var shortDayTxt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var monthTxt=["January","February","March","April","May","June","July","August","September","October","November","December"];var f={d:function(){return humanize.pad(f.j(),2,"0")},D:function(){return f.l().slice(0,3)},j:function(){return jsdate.getDate()},l:function(){return shortDayTxt[f.w()]},N:function(){return f.w()||7},S:function(){var j=f.j();return j>4&&j<21?"th":{1:"st",2:"nd",3:"rd"}[j%10]||"th"},w:function(){return jsdate.getDay()},z:function(){return(f.L()?dayTableLeap[f.n()]:dayTableCommon[f.n()])+f.j()-1},W:function(){var midWeekDaysFromJan4=f.z()-f.N()+1.5;return humanize.pad(1+Math.floor(Math.abs(midWeekDaysFromJan4)/7)+(midWeekDaysFromJan4%7>3.5?1:0),2,"0")},F:function(){return monthTxt[jsdate.getMonth()]},m:function(){return humanize.pad(f.n(),2,"0")},M:function(){return f.F().slice(0,3)},n:function(){return jsdate.getMonth()+1},t:function(){return new Date(f.Y(),f.n(),0).getDate()},L:function(){return new Date(f.Y(),1,29).getMonth()===1?1:0},o:function(){var n=f.n();var W=f.W();return f.Y()+(n===12&&W<9?-1:n===1&&W>9)},Y:function(){return jsdate.getFullYear()},y:function(){return String(f.Y()).slice(-2)},a:function(){return jsdate.getHours()>11?"pm":"am"},A:function(){return f.a().toUpperCase()},B:function(){var unixTime=jsdate.getTime()/1e3;var secondsPassedToday=unixTime%86400+3600;if(secondsPassedToday<0){secondsPassedToday+=86400}var beats=secondsPassedToday/86.4%1e3;if(unixTime<0){return Math.ceil(beats)}return Math.floor(beats)},g:function(){return f.G()%12||12},G:function(){return jsdate.getHours()},h:function(){return humanize.pad(f.g(),2,"0")},H:function(){return humanize.pad(f.G(),2,"0")},i:function(){return humanize.pad(jsdate.getMinutes(),2,"0")},s:function(){return humanize.pad(jsdate.getSeconds(),2,"0")},u:function(){return humanize.pad(jsdate.getMilliseconds()*1e3,6,"0")},O:function(){var tzo=jsdate.getTimezoneOffset();var tzoNum=Math.abs(tzo);return(tzo>0?"-":"+")+humanize.pad(Math.floor(tzoNum/60)*100+tzoNum%60,4,"0")},P:function(){var O=f.O();return O.substr(0,3)+":"+O.substr(3,2)},Z:function(){return-jsdate.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(formatChr,formatChrCb)},r:function(){return"D, d M Y H:i:s O".replace(formatChr,formatChrCb)},U:function(){return jsdate.getTime()/1e3||0}};return format.replace(formatChr,formatChrCb)};humanize.numberFormat=function(number,decimals,decPoint,thousandsSep){decimals=isNaN(decimals)?2:Math.abs(decimals);decPoint=decPoint===undefined?".":decPoint;thousandsSep=thousandsSep===undefined?",":thousandsSep;var sign=number<0?"-":"";number=Math.abs(+number||0);var intPart=parseInt(number.toFixed(decimals),10)+"";var j=intPart.length>3?intPart.length%3:0;return sign+(j?intPart.substr(0,j)+thousandsSep:"")+intPart.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousandsSep)+(decimals?decPoint+Math.abs(number-intPart).toFixed(decimals).slice(2):"")};humanize.naturalDay=function(timestamp,format){timestamp=timestamp===undefined?humanize.time():timestamp;format=format===undefined?"Y-m-d":format;var oneDay=86400;var d=new Date;var today=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime()/1e3;if(timestamp<today&&timestamp>=today-oneDay){return"yesterday"}else if(timestamp>=today&&timestamp<today+oneDay){return"today"}else if(timestamp>=today+oneDay&&timestamp<today+2*oneDay){return"tomorrow"}return humanize.date(format,timestamp)};humanize.relativeTime=function(timestamp){timestamp=timestamp===undefined?humanize.time():timestamp;var currTime=humanize.time();var timeDiff=currTime-timestamp;if(timeDiff<2&&timeDiff>-2){return(timeDiff>=0?"just ":"")+"now"}if(timeDiff<60&&timeDiff>-60){return timeDiff>=0?Math.floor(timeDiff)+" seconds ago":"in "+Math.floor(-timeDiff)+" seconds"}if(timeDiff<120&&timeDiff>-120){return timeDiff>=0?"about a minute ago":"in about a minute"}if(timeDiff<3600&&timeDiff>-3600){return timeDiff>=0?Math.floor(timeDiff/60)+" minutes ago":"in "+Math.floor(-timeDiff/60)+" minutes"}if(timeDiff<7200&&timeDiff>-7200){return timeDiff>=0?"about an hour ago":"in about an hour"}if(timeDiff<86400&&timeDiff>-86400){return timeDiff>=0?Math.floor(timeDiff/3600)+" hours ago":"in "+Math.floor(-timeDiff/3600)+" hours"}var days2=2*86400;if(timeDiff<days2&&timeDiff>-days2){return timeDiff>=0?"1 day ago":"in 1 day"}var days29=29*86400;if(timeDiff<days29&&timeDiff>-days29){return timeDiff>=0?Math.floor(timeDiff/86400)+" days ago":"in "+Math.floor(-timeDiff/86400)+" days"}var days60=60*86400;if(timeDiff<days60&&timeDiff>-days60){return timeDiff>=0?"about a month ago":"in about a month"}var currTimeYears=parseInt(humanize.date("Y",currTime),10);var timestampYears=parseInt(humanize.date("Y",timestamp),10);var currTimeMonths=currTimeYears*12+parseInt(humanize.date("n",currTime),10);var timestampMonths=timestampYears*12+parseInt(humanize.date("n",timestamp),10);var monthDiff=currTimeMonths-timestampMonths;if(monthDiff<12&&monthDiff>-12){return monthDiff>=0?monthDiff+" months ago":"in "+-monthDiff+" months"}var yearDiff=currTimeYears-timestampYears;if(yearDiff<2&&yearDiff>-2){return yearDiff>=0?"a year ago":"in a year"}return yearDiff>=0?yearDiff+" years ago":"in "+-yearDiff+" years"};humanize.ordinal=function(number){number=parseInt(number,10);number=isNaN(number)?0:number;var sign=number<0?"-":"";number=Math.abs(number);return sign+number+(number>4&&number<21?"th":{1:"st",2:"nd",3:"rd"}[number%10]||"th")};humanize.filesize=function(filesize,kilo,decimals,decPoint,thousandsSep){kilo=kilo===undefined?1024:kilo;decimals=isNaN(decimals)?2:Math.abs(decimals);decPoint=decPoint===undefined?".":decPoint;thousandsSep=thousandsSep===undefined?",":thousandsSep;if(filesize<=0){return"0 bytes"}var thresholds=[1];var units=["bytes","Kb","Mb","Gb","Tb","Pb"];if(filesize<kilo){return humanize.numberFormat(filesize,0)+" "+units[0]}for(var i=1;i<units.length;i++){thresholds[i]=thresholds[i-1]*kilo;if(filesize<thresholds[i]){return humanize.numberFormat(filesize/thresholds[i-1],decimals,decPoint,thousandsSep)+" "+units[i-1]}}return humanize.numberFormat(filesize/thresholds[units.length-1],decimals,decPoint,thousandsSep)+" "+units[units.length-1]};humanize.linebreaks=function(str){str=str.replace(/^([\n|\r]*)/,"");str=str.replace(/([\n|\r]*)$/,"");str=str.replace(/(\r\n|\n|\r)/g,"\n");str=str.replace(/(\n{2,})/g,"</p><p>");str=str.replace(/\n/g,"<br />");return"<p>"+str+"</p>"};humanize.nl2br=function(str){return str.replace(/(\r\n|\n|\r)/g,"<br />")};humanize.truncatechars=function(string,length){if(string.length<=length){return string}return string.substr(0,length)+"…"};humanize.truncatewords=function(string,numWords){var words=string.split(" ");if(words.length<numWords){return string}return words.slice(0,numWords).join(" ")+"…"};return humanize});define("rtext!templates/toolbar.folders.html",[],function(){return'<div class="pg-toolbar-description">\n</div>\n<div class="pg-toolbar-actions">\n</div>\n<div class="pg-toolbar-context">\n</div>'});!function($){$.vakata={}}(jQuery);!function($){$.fn.vakata_reverse=[].reverse}(jQuery);!function($){jQuery.expr[":"].vakata_icontains=function(a,i,m){return(a.textContent||a.innerText||"").toLowerCase().indexOf(m[3].toLowerCase())>=0}}(jQuery);!function($){$.vakata.array_remove=function(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;array.push.apply(array,rest);return array}}(jQuery);!function($){$.vakata.array_unique=function(array){var a=[],i,j,l;for(i=0,l=array.length;i<l;i++){for(j=0;j<=i;j++){if(array[i]===array[j]){break}}if(j===i){a.push(array[i])}}return a}}(jQuery);!function($){$.vakata.attributes=function(node,with_values){node=$(node)[0];var attr=with_values?{}:[];$.each(node.attributes,function(i,v){if($.inArray(v.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1){return}if(v.nodeValue!==null&&$.trim(v.nodeValue)!==""){if(with_values){attr[v.nodeName]=v.nodeValue}else{attr.push(v.nodeName)}}});return attr}}(jQuery);!function($){var sb;$.vakata.get_scrollbar_width=function(){var e1,e2;if(!sb){if(/msie/.test(navigator.userAgent.toLowerCase())){e1=$('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body");e2=$('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body");sb=e1.width()-e2.width();e1.add(e2).remove()}else{e1=$("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});sb=100-e1.width();e1.parent().remove()}}return sb}}(jQuery);!function($){$.vakata.css={get_css:function(rule_name,delete_flag,sheet){rule_name=rule_name.toLowerCase();var css_rules=sheet.cssRules||sheet.rules,j=0;do{if(css_rules.length&&j>css_rules.length+5){return false}if(css_rules[j].selectorText&&css_rules[j].selectorText.toLowerCase()===rule_name){if(delete_flag===true){if(sheet.removeRule){sheet.removeRule(j)}if(sheet.deleteRule){sheet.deleteRule(j)}return true}else{return css_rules[j]}}}while(css_rules[++j]);return false},add_css:function(rule_name,sheet){if($.jstree.css.get_css(rule_name,false,sheet)){return false}if(sheet.insertRule){sheet.insertRule(rule_name+" { }",0)}else{sheet.addRule(rule_name,null,0)}return $.vakata.css.get_css(rule_name)},remove_css:function(rule_name,sheet){return $.vakata.css.get_css(rule_name,true,sheet)},add_sheet:function(opts){var tmp=false,is_new=true;if(opts.str){if(opts.title){tmp=$("style[id='"+opts.title+"-stylesheet']")[0]}if(tmp){is_new=false}else{tmp=document.createElement("style");tmp.setAttribute("type","text/css");if(opts.title){tmp.setAttribute("id",opts.title+"-stylesheet")}}if(tmp.styleSheet){if(is_new){document.getElementsByTagName("head")[0].appendChild(tmp);tmp.styleSheet.cssText=opts.str}else{tmp.styleSheet.cssText=tmp.styleSheet.cssText+" "+opts.str}}else{tmp.appendChild(document.createTextNode(opts.str));document.getElementsByTagName("head")[0].appendChild(tmp)}return tmp.sheet||tmp.styleSheet}if(opts.url){if(document.createStyleSheet){try{tmp=document.createStyleSheet(opts.url)}catch(e){}}else{tmp=document.createElement("link");tmp.rel="stylesheet";tmp.type="text/css";tmp.media="all";tmp.href=opts.url;document.getElementsByTagName("head")[0].appendChild(tmp);return tmp.styleSheet}}}}}(jQuery);!function($){var vakata_dnd={element:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false};$.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5},_trigger:function(event_name,e){var data=$.vakata.dnd._get();data.event=e;$(document).triggerHandler("dnd_"+event_name+".vakata",data)},_get:function(){return{data:vakata_dnd.data,element:vakata_dnd.element,helper:vakata_dnd.helper}},_clean:function(){if(vakata_dnd.helper){vakata_dnd.helper.remove()}if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false}vakata_dnd={element:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false};$(document).unbind("mousemove",$.vakata.dnd.drag);$(document).unbind("mouseup",$.vakata.dnd.stop)},_scroll:function(init_only){if(!vakata_dnd.scroll_e||!vakata_dnd.scroll_l&&!vakata_dnd.scroll_t){if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false}return false}if(!vakata_dnd.scroll_i){vakata_dnd.scroll_i=setInterval($.vakata.dnd._scroll,100);return false}if(init_only===true){return false}var i=vakata_dnd.scroll_e.scrollTop(),j=vakata_dnd.scroll_e.scrollLeft();vakata_dnd.scroll_e.scrollTop(i+vakata_dnd.scroll_t*$.vakata.dnd.settings.scroll_speed);vakata_dnd.scroll_e.scrollLeft(j+vakata_dnd.scroll_l*$.vakata.dnd.settings.scroll_speed);if(i!==vakata_dnd.scroll_e.scrollTop()||j!==vakata_dnd.scroll_e.scrollLeft()){$.vakata.dnd._trigger("scroll",vakata_dnd.scroll_e)}},start:function(e,data,html){if(vakata_dnd.is_drag){$.vakata.dnd.stop({})}try{e.currentTarget.unselectable="on";e.currentTarget.onselectstart=function(){return false};if(e.currentTarget.style){e.currentTarget.style.MozUserSelect="none"}}catch(err){}vakata_dnd.init_x=e.pageX;vakata_dnd.init_y=e.pageY;vakata_dnd.data=data;vakata_dnd.is_down=true;vakata_dnd.element=e.currentTarget;if(html!==false){vakata_dnd.helper=$("<div id='vakata-dnd'></div>").html(html).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})
}$(document).bind("mousemove",$.vakata.dnd.drag);$(document).bind("mouseup",$.vakata.dnd.stop);return false},drag:function(e){if(!vakata_dnd.is_down){return}if(!vakata_dnd.is_drag){if(Math.abs(e.pageX-vakata_dnd.init_x)>$.vakata.dnd.settings.threshold||Math.abs(e.pageY-vakata_dnd.init_y)>$.vakata.dnd.settings.threshold){if(vakata_dnd.helper){vakata_dnd.helper.appendTo("body");vakata_dnd.helper_w=vakata_dnd.helper.outerWidth()}vakata_dnd.is_drag=true;$.vakata.dnd._trigger("start",e)}else{return}}var d=false,w=false,dh=false,wh=false,dw=false,ww=false,dt=false,dl=false,ht=false,hl=false;vakata_dnd.scroll_t=0;vakata_dnd.scroll_l=0;vakata_dnd.scroll_e=false;var p=$(e.target).parentsUntil("body").andSelf().vakata_reverse().filter(function(){return/^auto|scroll$/.test($(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var t=$(this),o=t.offset();if(this.scrollHeight>this.offsetHeight){if(o.top+t.height()-e.pageY<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1}if(e.pageY-o.top<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1}}if(this.scrollWidth>this.offsetWidth){if(o.left+t.width()-e.pageX<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1}if(e.pageX-o.left<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1}}if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=$(this);return false}});if(!vakata_dnd.scroll_e){d=$(document);w=$(window);dh=d.height();wh=w.height();dw=d.width();ww=w.width();dt=d.scrollTop();dl=d.scrollLeft();if(dh>wh&&e.pageY-dt<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1}if(dh>wh&&wh-(e.pageY-dt)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1}if(dw>ww&&e.pageX-dl<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1}if(dw>ww&&ww-(e.pageX-dl)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1}if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=d}}if(vakata_dnd.scroll_e){$.vakata.dnd._scroll(true)}if(vakata_dnd.helper){ht=parseInt(e.pageY+$.vakata.dnd.settings.helper_top,10);hl=parseInt(e.pageX+$.vakata.dnd.settings.helper_left,10);if(dh&&ht+25>dh){ht=dh-50}if(dw&&hl+vakata_dnd.helper_w>dw){hl=dw-(vakata_dnd.helper_w+2)}vakata_dnd.helper.css({left:hl+"px",top:ht+"px"})}$.vakata.dnd._trigger("move",e)},stop:function(e){if(vakata_dnd.is_drag){$.vakata.dnd._trigger("stop",e)}$.vakata.dnd._clean()}}}(jQuery);!function($){$.vakata.xslt=function(xml,xsl){var r=false,p,q,s;if(r===false&&window.ActiveXObject){try{r=new ActiveXObject("Msxml2.XSLTemplate");q=new ActiveXObject("Msxml2.DOMDocument");q.loadXML(xml);s=new ActiveXObject("Msxml2.FreeThreadedDOMDocument");s.loadXML(xsl);r.stylesheet=s;p=r.createProcessor();p.input=q;p.transform();r=p.output}catch(e){}}xml=$.parseXML(xml);xsl=$.parseXML(xsl);if(r===false&&typeof XSLTProcessor!=="undefined"){p=new XSLTProcessor;p.importStylesheet(xsl);r=p.transformToFragment(xml,document);r=$("<div />").append(r).html()}if(r===false&&typeof xml.transformNode!=="undefined"){r=xml.transformNode(xsl)}return r}}(jQuery);if(typeof jQuery.hotkeys==="undefined"){!function($){$.vakata_hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function keyHandler(handleObj){if(typeof handleObj.data!=="string"){return}var origHandler=handleObj.handler,keys=handleObj.data.toLowerCase().split(" ");handleObj.handler=function(event){if(this!==event.target&&(/textarea|select/i.test(event.target.nodeName)||event.target.type==="text")){return}var special=event.type!=="keypress"&&jQuery.vakata_hotkeys.specialKeys[event.which],character=String.fromCharCode(event.which).toLowerCase(),key,modif="",possible={};if(event.altKey&&special!=="alt"){modif+="alt+"}if(event.ctrlKey&&special!=="ctrl"){modif+="ctrl+"}if(event.metaKey&&!event.ctrlKey&&special!=="meta"){modif+="meta+"}if(event.shiftKey&&special!=="shift"){modif+="shift+"}if(special){possible[modif+special]=true}else{possible[modif+character]=true;possible[modif+jQuery.vakata_hotkeys.shiftNums[character]]=true;if(modif==="shift+"){possible[jQuery.vakata_hotkeys.shiftNums[character]]=true}}for(var i=0,l=keys.length;i<l;i++){if(possible[keys[i]]){return origHandler.apply(this,arguments)}}}}jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:keyHandler}})}(jQuery)}!function($){var right_to_left=false,vakata_context={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};$.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(event_name){$(document).triggerHandler("context_"+event_name+".vakata",{reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_execute:function(i){i=vakata_context.items[i];return i&&!i._disabled&&i.action?i.action.call(null,{item:i,reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}}):false},_parse:function(o,is_callback){if(!o){return false}if(!is_callback){vakata_context.html="";vakata_context.items=[]}var str="",sep=false,tmp;if(is_callback){str+="<ul>"}$.each(o,function(i,val){if(!val){return true}vakata_context.items.push(val);if(!sep&&val.separator_before){str+="<li class='vakata-context-separator'><a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"}sep=false;str+="<li class='"+(val._class||"")+(val._disabled?" vakata-contextmenu-disabled ":"")+"'>";str+="<a href='#' rel='"+(vakata_context.items.length-1)+"'>";if($.vakata.context.settings.icons){str+="<ins ";if(val.icon){if(val.icon.indexOf("/")!==-1){str+=" style='background:url(\""+val.icon+"\") center center no-repeat' "}else{str+=" class='"+val.icon+"' "}}str+=">&#160;</ins><span>&#160;</span>"}str+=val.label+"</a>";if(val.submenu){tmp=$.vakata.context._parse(val.submenu,true);if(tmp){str+=tmp}}str+="</li>";if(val.separator_after){str+="<li class='vakata-context-separator'><a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>";sep=true}});str=str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(is_callback){str+="</ul>"}if(!is_callback){vakata_context.html=str;$.vakata.context._trigger("parse")}return str.length>10?str:false},_show_submenu:function(o){o=$(o);if(!o.length||!o.children("ul").length){return}var e=o.children("ul"),x=o.offset().left+o.outerWidth(),y=o.offset().top,w=e.width(),h=e.height(),dw=$(document).width(),dh=$(document).height();if(right_to_left){o[x-(w+10+o.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left")}else{o[x+w+10>dw?"addClass":"removeClass"]("vakata-context-right")}if(y+h+10>dh){e.css("bottom","-1px")}e.show()},show:function(reference,position,data){if(vakata_context.element&&vakata_context.element.length){vakata_context.element.width("")}switch(!0){case!position&&!reference:return false;case!!position&&!!reference:vakata_context.reference=reference;vakata_context.position_x=position.x;vakata_context.position_y=position.y;break;case!position&&!!reference:vakata_context.reference=reference;var o=reference.offset();vakata_context.position_x=o.left+reference.outerHeight();vakata_context.position_y=o.top;break;case!!position&&!reference:vakata_context.position_x=position.x;vakata_context.position_y=position.y;break}if(!!reference&&!data&&$(reference).data("vakata_contextmenu")){data=$(reference).data("vakata_contextmenu")}if($.vakata.context._parse(data)){vakata_context.element.html(vakata_context.html)}if(vakata_context.items.length){var e=vakata_context.element,x=vakata_context.position_x,y=vakata_context.position_y,w=e.width(),h=e.height(),dw=$(document).width(),dh=$(document).height();if(x+w+20>dw){x=dw-(w+20)}if(y+h+20>dh){y=dh-(h+20)}vakata_context.element.css({left:x,top:y}).show().width(vakata_context.element.outerWidth());vakata_context.is_visible=true;$.vakata.context._trigger("show")}},hide:function(){if(vakata_context.is_visible){vakata_context.element.hide().find("ul").hide();vakata_context.is_visible=false;$.vakata.context._trigger("hide")}}};$(function(){right_to_left=$("body").css("direction")==="rtl";var to=false,css_string=""+".vakata-context { display:none; _width:1px; } "+".vakata-context, "+".vakata-context ul { margin:0; padding:2px; position:absolute; background:#f5f5f5; border:1px solid #979797; "+"	-moz-box-shadow:5px 5px 4px -4px #666666; -webkit-box-shadow:2px 2px 2px #999999; box-shadow:2px 2px 2px #999999; }"+".vakata-context ul { list-style:none; left:100%; margin-top:-2.7em; margin-left:-4px; } "+".vakata-context li.vakata-context-right ul { left:auto; right:100%; margin-left:auto; margin-right:-4px; } "+".vakata-context li { list-style:none; display:inline; }"+".vakata-context li a { display:block; padding:0 2em 0 2em; text-decoration:none; width:auto; color:black; white-space:nowrap; line-height:2.4em; "+"	-moz-text-shadow:1px 1px 0px white; -webkit-text-shadow:1px 1px 0px white; text-shadow:1px 1px 0px white; "+"	-moz-border-radius:1px; -webkit-border-radius:1px; border-radius:1px; }"+".vakata-context li a:hover { position:relative; background-color:#e8eff7; "+"	-moz-box-shadow:0px 0px 2px #0a6aa1; -webkit-box-shadow:0px 0px 2px #0a6aa1; box-shadow:0px 0px 2px #0a6aa1; }"+".vakata-context li.vakata-context-hover > a { position:relative; background-color:#e8eff7; "+"	-moz-box-shadow:0px 0px 2px #0a6aa1; -webkit-box-shadow:0px 0px 2px #0a6aa1; box-shadow:0px 0px 2px #0a6aa1; }"+'.vakata-context li a.vakata-context-parent { background-image:url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw=="); background-position:right center; background-repeat:no-repeat; } '+".vakata-context li.vakata-context-separator a, "+".vakata-context li.vakata-context-separator a:hover { background:white; border:0; border-top:1px solid #e2e3e3; height:1px; min-height:1px; max-height:1px; padding:0; margin:0 0 0 2.4em; border-left:1px solid #e0e0e0; _overflow:hidden; "+"	-moz-text-shadow:0 0 0 transparent; -webkit-text-shadow:0 0 0 transparent; text-shadow:0 0 0 transparent; "+"	-moz-box-shadow:0 0 0 transparent; -webkit-box-shadow:0 0 0 transparent; box-shadow:0 0 0 transparent; "+"	-moz-border-radius:0; -webkit-border-radius:0; border-radius:0; }"+".vakata-context li.vakata-contextmenu-disabled a, .vakata-context li.vakata-contextmenu-disabled a:hover { color:silver; background-color:transparent; border:0; box-shadow:0 0 0; }"+""+".vakata-context li a ins { text-decoration:none; display:inline-block; width:2.4em; height:2.4em; background:transparent; margin:0 0 0 -2em; } "+".vakata-context li a span { display:inline-block; width:1px; height:2.4em; background:white; margin:0 0.5em 0 0; border-left:1px solid #e2e3e3; _overflow:hidden; } "+""+".vakata-context-rtl ul { left:auto; right:100%; margin-left:auto; margin-right:-4px; } "+'.vakata-context-rtl li a.vakata-context-parent { background-image:url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7"); background-position:left center; background-repeat:no-repeat; } '+".vakata-context-rtl li.vakata-context-separator a { margin:0 2.4em 0 0; border-left:0; border-right:1px solid #e2e3e3;} "+".vakata-context-rtl li.vakata-context-left ul { right:auto; left:100%; margin-left:-4px; margin-right:auto; } "+".vakata-context-rtl li a ins { margin:0 -2em 0 0; } "+".vakata-context-rtl li a span { margin:0 0 0 0.5em; border-left-color:white; background:#e2e3e3; } "+"";$.vakata.css.add_sheet({str:css_string,title:"vakata-context"});vakata_context.element=$("<ul class='vakata-context'></ul>");vakata_context.element.delegate("li","mouseenter",function(e){e.stopImmediatePropagation();if($.contains(this,e.relatedTarget)){return}if(to){clearTimeout(to)}vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();$(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").andSelf().addClass("vakata-context-hover");$.vakata.context._show_submenu(this)}).delegate("li","mouseleave",function(e){if($.contains(this,e.relatedTarget)){return}$(this).find(".vakata-context-hover").andSelf().removeClass("vakata-context-hover")}).bind("mouseleave",function(e){$(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if($.vakata.context.settings.hide_onmouseleave){to=setTimeout(function(t){return function(){$.vakata.context.hide()}}(this),$.vakata.context.settings.hide_onmouseleave)}}).delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(e){if(!$(this).blur().parent().hasClass("vakata-context-disabled")&&$.vakata.context._execute($(this).attr("rel"))!==false){$.vakata.context.hide()}}).appendTo("body");$(document).bind("mousedown",function(e){if(vakata_context.is_visible&&!$.contains(vakata_context.element[0],e.target)){$.vakata.context.hide()}}).bind("context_show.vakata",function(e,data){vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(right_to_left){vakata_context.element.addClass("vakata-context-rtl").css("direction","rtl")}vakata_context.element.find("ul").hide().end()});if(typeof $.hotkeys!=="undefined"||typeof $.vakata_hotkeys!=="undefined"){$(document).bind("keydown","up",function(e){if(vakata_context.is_visible){var o=vakata_context.element.find("ul:visible").andSelf().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").andSelf().last().children("li:not(.vakata-context-separator)").last()}o.addClass("vakata-context-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","down",function(e){if(vakata_context.is_visible){var o=vakata_context.element.find("ul:visible").andSelf().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").andSelf().last().children("li:not(.vakata-context-separator)").first()}o.addClass("vakata-context-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","right",function(e){if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","left",function(e){if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover");e.stopImmediatePropagation();e.preventDefault()}}).bind("keydown","esc",function(e){$.vakata.context.hide();e.preventDefault()}).bind("keydown","space",function(e){vakata_context.element.find(".vakata-context-hover").last().children("a").click();e.preventDefault()})}})}(jQuery);!function($){var _quote=function(str){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(str.match(escapeable)){return'"'+str.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+str+'"'};$.vakata.json={encode:function(o){if(o===null){return"null"}var tmp=[],i;switch(typeof o){case"undefined":return undefined;case"number":case"boolean":return o+"";case"string":return _quote(o);case"object":if($.isFunction(o.toJSON)){return $.vakata.json.encode(o.toJSON())}if(o.constructor===Date){return'"'+o.getUTCFullYear()+"-"+String("0"+(o.getUTCMonth()+1)).slice(-2)+"-"+String("0"+o.getUTCDate()).slice(-2)+"T"+String("0"+o.getUTCHours()).slice(-2)+":"+String("0"+o.getUTCMinutes()).slice(-2)+":"+String("0"+o.getUTCSeconds()).slice(-2)+"."+String("00"+o.getUTCMilliseconds()).slice(-3)+'Z"'}if(o.constructor===Array){for(i=0;i<o.length;i++){tmp.push($.vakata.json.encode(o[i])||"null")}return"["+tmp.join(",")+"]"}$.each(o,function(i,v){if($.isFunction(v)){return true}i=typeof i==="number"?'"'+i+'"':_quote(i);v=$.vakata.json.encode(v);tmp.push(i+":"+v)});return"{"+tmp.join(", ")+"}"}},decode:function(json){return $.parseJSON(json)}}}(jQuery);!function($){$.vakata.cookie=function(key,value,options){var days,t,result,decode;if(arguments.length>1&&String(value)!=="[object Object]"){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==="number"){days=options.expires;t=options.expires=new Date;t.setDate(t.getDate()+days)}value=String(value);return document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||{};decode=options.raw?function(s){return s}:decodeURIComponent;return(result=new RegExp("(?:^|; )"+encodeURIComponent(key)+"=([^;]*)").exec(document.cookie))?decode(result[1]):null}}(jQuery);!function($){var _storage={},_storage_service={jStorage:"{}"},_storage_elm=null,_storage_size=0,json_encode=$.vakata.json.encode,json_decode=$.vakata.json.decode,_backend=false,_ttl_timeout=false;function _init(){var localStorageReallyWorks=false;if("localStorage"in window){try{window.localStorage.setItem("_tmptest","tmpval");localStorageReallyWorks=true;window.localStorage.removeItem("_tmptest")}catch(BogusQuotaExceededErrorOnIos5){}}if(localStorageReallyWorks){try{if(window.localStorage){_storage_service=window.localStorage;_backend="localStorage"}}catch(E3){}}else if("globalStorage"in window){try{if(window.globalStorage){_storage_service=window.globalStorage[window.location.hostname];_backend="globalStorage"}}catch(E4){}}else{_storage_elm=document.createElement("link");if(_storage_elm.addBehavior){_storage_elm.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(_storage_elm);try{_storage_elm.load("jStorage");var data="{}";data=_storage_elm.getAttribute("jStorage");_storage_service.jStorage=data;_backend="userDataBehavior"}catch(E5){}}if(!_backend&&(!!$.vakata.cookie("__vjstorage")||$.vakata.cookie("__vjstorage","{}",{expires:365})&&$.vakata.cookie("__vjstorage")==="{}")){_storage_elm=null;_storage_service.jStorage=$.vakata.cookie("__vjstorage");_backend="cookie"}if(!_backend){_storage_elm=null;return}}_load_storage();_handleTTL()}function _load_storage(){if(_storage_service.jStorage){try{_storage=json_decode(String(_storage_service.jStorage))}catch(E6){_storage_service.jStorage="{}"}}else{_storage_service.jStorage="{}"}_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0}function _save(){try{_storage_service.jStorage=json_encode(_storage);if(_backend==="userDataBehavior"){_storage_elm.setAttribute("jStorage",_storage_service.jStorage);_storage_elm.save("jStorage")}if(_backend==="cookie"){$.vakata.cookie("__vjstorage",_storage_service.jStorage,{expires:365})}_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0}catch(E7){}}function _checkKey(key){if(!key||typeof key!=="string"&&typeof key!=="number"){throw new TypeError("Key name must be string or numeric")}if(key==="__jstorage_meta"){throw new TypeError("Reserved key name")}return true}function _handleTTL(){var curtime=+new Date,i,TTL,nextExpire=Infinity,changed=false;if(_ttl_timeout!==false){clearTimeout(_ttl_timeout)}if(!_storage.__jstorage_meta||typeof _storage.__jstorage_meta.TTL!=="object"){return}TTL=_storage.__jstorage_meta.TTL;for(i in TTL){if(TTL.hasOwnProperty(i)){if(TTL[i]<=curtime){delete TTL[i];delete _storage[i];changed=true}else if(TTL[i]<nextExpire){nextExpire=TTL[i]}}}if(nextExpire!==Infinity){_ttl_timeout=setTimeout(_handleTTL,nextExpire-curtime)}if(changed){_save()}}$.vakata.storage={version:"0.1.6.1",set:function(key,value){_checkKey(key);_storage[key]=value;_save();return value},get:function(key,def){_checkKey(key);if(key in _storage){return _storage[key]}return typeof def==="undefined"?null:def},del:function(key){_checkKey(key);if(key in _storage){delete _storage[key];if(_storage.__jstorage_meta&&typeof _storage.__jstorage_meta.TTL==="object"&&key in _storage.__jstorage_meta.TTL){delete _storage.__jstorage_meta.TTL[key]}_save();return true}return false},setTTL:function(key,ttl){var curtime=+new Date;_checkKey(key);ttl=Number(ttl)||0;if(key in _storage){if(!_storage.__jstorage_meta){_storage.__jstorage_meta={}}if(!_storage.__jstorage_meta.TTL){_storage.__jstorage_meta.TTL={}}if(ttl>0){_storage.__jstorage_meta.TTL[key]=curtime+ttl}else{delete _storage.__jstorage_meta.TTL[key]}_save();_handleTTL();return true}return false},flush:function(){_storage={};_save();return true},storageObj:function(){function F(){}F.prototype=_storage;return new F},index:function(){var index=[],i;$.each(_storage,function(i,v){if(i!=="__jstorage_meta"){index.push(i)}});return index},storageSize:function(){return _storage_size},currentBackend:function(){return _backend},storageAvailable:function(){return!!_backend}};_init()}(jQuery);!function($){$.vakata.pretty_date={lang:{ago:"Ago",from:"From Now",now:"Just Now",minute:"Minute",minutes:"Minutes",hour:"Hour",hours:"Hours",day:"Day",days:"Days",week:"Week",weeks:"Weeks",month:"Month",months:"Months",year:"Year",years:"Years"},parse:function(date,compareTo){date=new Date(date.replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\+\d\d\:\d\d$/,""));compareTo=compareTo||new Date;var lang=$.vakata.pretty_date.lang,formats=[[60,lang.now],[3600,lang.minute,lang.minutes,60],[86400,lang.hour,lang.hours,3600],[604800,lang.day,lang.days,86400],[2628e3,lang.week,lang.weeks,604800],[31536e3,lang.month,lang.months,2628e3],[Infinity,lang.year,lang.years,31536e3]],seconds=(compareTo-date+compareTo.getTimezoneOffset()*6e4)/1e3,normalize=function(val,single){var margin=.1;if(val>=single&&val<=single*(1+margin)){return single}return val},token;if(seconds<0){seconds=Math.abs(seconds);token=" "+lang.from}else{token=" "+lang.ago}for(var i=0,format=formats[0];formats[i];format=formats[++i]){if(seconds<format[0]){if(i===0){return format[1]}var val=Math.ceil(normalize(seconds,format[3])/format[3]);return val+" "+(val!==1?format[2]:format[1])+(i>0?token:"")}}},init:function(i,format){$("time, [datetime]").vakata_pretty_date(format);setInterval(function(){$("time, [datetime]").vakata_pretty_date(format)},i||6e4)}};$.fn.vakata_pretty_date=function(format,compare){if(!format){format="%{s}"}return this.each(function(){var $t=jQuery(this),date=$.vakata.pretty_date.parse($t.attr("datetime"),compare);if(date){date=format.replace("%{s}",date);if($t.html()!==date){$t.html(date)}}})}}(jQuery);!function($){$.vakata.selection={get:function(as_text){if(window.getSelection){if(as_text){return window.getSelection().toString()}var userSelection=window.getSelection(),range=userSelection.getRangeAt&&userSelection.rangeCount?userSelection.getRangeAt(0):document.createRange(),div=document.createElement("div");if(!userSelection.getRangeAt){range.setStart(userSelection.anchorNode,userSelection.anchorOffset);range.setEnd(userSelection.focusNode,userSelection.focusOffset)}div.appendChild(range.cloneContents());return div.innerHTML}if(document.selection){return document.selection.createRange()[as_text?"text":"htmlText"]}return""},elm_get:function(e){e=typeof e==="string"?document.getElementById(e):e;if(e.jquery){e=e.get(0)}if("selectionStart"in e){return{start:e.selectionStart,end:e.selectionEnd,length:e.selectionEnd-e.selectionStart,text:e.value.substr(e.selectionStart,e.selectionEnd-e.selectionStart)}}else if(document.selection){e.focus();var tr0=document.selection.createRange(),tr1=false,tr2=false,len,text_whole,the_start,the_end;if(tr0&&tr0.parentElement()===e){len=e.value.length;text_whole=e.value.replace(/\r\n/g,"\n");tr1=e.createTextRange();tr1.moveToBookmark(tr0.getBookmark());tr2=e.createTextRange();tr2.collapse(false);if(tr1.compareEndPoints("StartToEnd",tr2)>-1){the_start=the_end=len}else{the_start=-tr1.moveStart("character",-len);the_start+=text_whole.slice(0,the_start).split("\n").length-1;if(tr1.compareEndPoints("EndToEnd",tr2)>-1){the_end=len}else{the_end=-tr1.moveEnd("character",-len);the_end+=text_whole.slice(0,the_end).split("\n").length-1}}text_whole=e.value.slice(the_start,the_end);return{start:the_start,end:the_end,length:text_whole.length,text:text_whole}}}else{return{start:e.value.length,end:e.value.length,length:0,text:""}}},elm_set:function(e,beg,end){e=typeof e==="string"?document.getElementById(e):e;if(e.jquery){e=e.get(0)}if("selectionStart"in e){e.focus();e.selectionStart=beg;e.selectionEnd=end}else if(document.selection){e.focus();var tr=e.createTextRange(),tx=e.value.replace(/\r\n/g,"\n");beg-=tx.slice(0,beg).split("\n").length-1;end-=tx.slice(0,end).split("\n").length-1;tr.collapse(true);tr.moveEnd("character",end);tr.moveStart("character",beg);tr.select()}return $.vakata.selection.elm_get(e)},elm_replace:function(e,replace){e=typeof e==="string"?document.getElementById(e):e;if(e.jquery){e=e.get(0)}var sel=$.vakata.selection.elm_get(e),beg=sel.start,end=beg+replace.length;e.value=e.value.substr(0,beg)+replace+e.value.substr(sel.end,e.value.length);$.vakata.selection.elm_set(e,beg,end);return{start:beg,end:end,length:replace.length,text:replace}},elm_get_caret:function(e){return $.vakata.selection.elm_get(e).end},elm_set_caret:function(e,pos){return $.vakata.selection.elm_set(e,pos,pos)},elm_get_caret_position:function(e){e=typeof e==="string"?document.getElementById(e):e;if(e.jquery){e=e.get(0)}var p=$.vakata.selection.elm_get_caret(e),s=e.value.substring(0,p).replace(/&/g,"&amp;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/\r/g,"").replace(/\t/g,"&#10;").replace(/\n/gi,"<br />"),b=$.vakata.get_scrollbar_width(),w=$(e).width(),h=$(e).height();if(e.scrollHeight>h){w-=b}if(e.scrollWidth>w){h-=b}e=$(e);e=$("<div />").html(s).css({background:"red",width:w+"px",height:"auto",position:"absolute",left:"0px",top:"-10000px",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),fontVariant:e.css("fontVariant"),fontStyle:e.css("fontStyle"),textTransform:e.css("textTransform"),lineHeight:e.css("lineHeight"),whiteSpace:"pre-wrap"});e.append('<span class="caret">&nbsp;</span>').appendTo("body");s=e.find("span.caret");p=s.offset();p.top=p.top+1e4+s.height();e.remove();return p}}}(jQuery);!function($){$.fn.vakata_highlight=function(settings){var _return=this;if(typeof settings==="string"){settings=[settings]}if($.isArray(settings)){settings={words:settings}}settings=$.extend(true,{},{css_class:"vakata-highlight",words:[],color:"#99ccff"},settings);if(settings.words.length){this.each(function(){var t=$(this);$.each(settings.words,function(i,v){var color=false;if(typeof settings.color==="string"){color=settings.color}if($.isArray(settings.color)&&typeof settings.color[i]==="string"){color=settings.color[i]}t.find(':vakata_icontains("'+v.replace(/\"/gi,"")+'")').filter("strong, span, li, p, h1, h2, h3, h4, h5, h6, div, u, em, i, dt, dd").contents().filter(function(){return this.nodeType===3}).each(function(){if(this.nodeValue.toLowerCase().indexOf(v.toLowerCase())>=0){this.nodeValue=this.nodeValue.replace(new RegExp("("+v.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")+")","ig"),"|{{{$1}}}|");var o=$(this).parent();o.html(o.html().replace(/\|\{\{\{/g,'<span class="'+settings.css_class+" "+settings.css_class+"-"+i+'" '+(typeof color==="string"?' style="background:'+color+';" ':"")+">").replace(/\}\}\}\|/g,"</span>"))}})})})}return _return}}(jQuery);define("libs/jquery/jstree/vakata",function(){});!function(){if(!jQuery){throw"jsTree: jQuery not included."}if(jQuery.jstree){return}!function($){var instances=[],focused_instance=-1,plugins={},functions={};$.jstree={VERSION:"1.0.0",IS_IE6:jQuery.browser.msie&&parseInt(jQuery.browser.version,10)===6,IS_IE7:jQuery.browser.msie&&parseInt(jQuery.browser.version,10)===6,IS_FF2:jQuery.browser.mozilla&&parseFloat(jQuery.browser.version,10)<1.9,__construct:function(container){var s={},d={},p=[],t=[],i=0;container=$(container);if($.jstree._reference(container)){$.jstree.__destruct(container)}$.extend.apply(null,[true,s].concat(Array.prototype.slice.call(arguments,1),container.data("jstree")||{}));p=$.isArray(s.plugins)?s.plugins:$.jstree.defaults.plugins.slice();p=$.vakata.array_unique(p);s=$.extend(true,{},$.jstree.defaults,s);$.each(plugins,function(i,val){if(i!=="core"&&$.inArray(i,p)===-1){s[i]=null;delete s[i]}else{t.push(i);d[i]={}}});s.plugins=t;i=parseInt(instances.push({}),10)-1;container.data("jstree_instance_id",i).addClass("jstree jstree-"+i);this.data=d;this.get_index=function(){return i};this.get_container=function(){return container};this.get_container_ul=function(){return container.children("ul:eq(0)")};this.get_settings=function(writable){return writable?s:$.extend(true,{},s)};this.__trigger=function(ev,data){if(!ev){return}if(!data){data={}}if(typeof ev==="string"){ev=ev.replace(".jstree","")+".jstree"}data.inst=this;this.get_container().triggerHandler(ev,data)};instances[i]=this;$.each(t,function(j,val){if(plugins[val]){plugins[val].__construct.apply(instances[i])}});this.__trigger("__construct");$.jstree._focus(i);return this},__destruct:function(instance){instance=$.jstree._reference(instance);if(!instance){return false}var s=instance.get_settings(),n=instance.get_index(),i=0;if(focused_instance===n){for(i in instances){if(instances.hasOwnProperty(i)&&i!==n){$.jstree._focus(i);break}}if(focused_instance===n){$.jstree._focus(false)}}$.each(s.plugins,function(i,val){try{plugins[val].__destruct.apply(instance)}catch(err){}});instance.__trigger("__destruct");instance.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")});$(document).unbind(".jstree-"+n).undelegate(".jstree-"+n);delete instances[n];return true},__call:function(instance,operation,args){instance=$.jstree._reference(instance);if(!instance||!$.isFunction(instance[operation])){return}return instance[operation].apply(instance,args)},_reference:function(needle){if(instances[needle]){return instances[needle]}var o=$(needle);if(!o.length&&typeof needle==="string"){o=$("#"+needle)}if(!o.length){return null}return instances[o.closest(".jstree").data("jstree_instance_id")]||null},_focused:function(){return instances[focused_instance]||null},_focus:function(instance){if(instance===false){instances[focused_instance].get_container().removeClass("jstree-focused");instances[focused_instance].__trigger("_defocus");focused_instance=-1;return false}instance=$.jstree._reference(instance);if(!instance||instance.get_index()===focused_instance){return false}if(focused_instance!==-1){instances[focused_instance].get_container().removeClass("jstree-focused");instances[focused_instance].__trigger("_defocus")}focused_instance=instance.get_index();instance.get_container().addClass("jstree-focused");instance.__trigger("_focus");return true},plugin:function(plugin_name,plugin_data){plugin_data=$.extend({},{__construct:$.noop,__destuct:$.noop,_fn:{},defaults:false},plugin_data);
plugins[plugin_name]=plugin_data;$.jstree.defaults[plugin_name]=plugin_data.defaults;$.each(plugin_data._fn,function(i,val){val.plugin=plugin_name;val.old=functions[i];functions[i]=function(){var rslt,func=val,args=Array.prototype.slice.call(arguments),evnt=new $.Event("before.jstree"),plgn=this.get_settings(true).plugins;do{if(func&&func.plugin&&$.inArray(func.plugin,plgn)!==-1){break}func=func.old}while(func);if(!func){return}if(i.indexOf("_")===0){rslt=func.apply(this,args)}else{rslt=this.__trigger(evnt,{func:i,args:args,plugin:func.plugin});if(rslt===false){return}rslt=func.apply($.extend({},this,{__callback:function(data){this.__trigger(i,{args:args,rslt:data,plugin:func.plugin});return data},__call_old:function(replace_arguments){return func.old.apply(this,replace_arguments?Array.prototype.slice.call(arguments,1):args)}}),args)}return rslt};functions[i].old=val.old;functions[i].plugin=plugin_name})},defaults:{plugins:[]}};$.fn.jstree=function(settings){var _is_method=typeof settings==="string",_arguments=Array.prototype.slice.call(arguments,1),_return=this;this.each(function(){if(_is_method){var val=$.jstree.__call(this,settings,_arguments);if(typeof val!=="undefined"&&(settings.indexOf("is_"===0)||val!==true&&val!==false)){_return=val;return false}}else{_is_method=new $.jstree.__construct(this,settings)}});return _return};functions=$.jstree.__construct.prototype;$.expr[":"].jstree=function(a,i,m){return typeof $(a).data("jstree_instance_id")!=="undefined"}}(jQuery);!function($){var ccp_node=false,ccp_mode=false;$(function(){$.jstree.SCROLLBAR_WIDTH=$.vakata.get_scrollbar_width()});$.jstree.plugin("core",{__construct:function(){this.data.core.rtl=this.get_container().css("direction")==="rtl";if(this.data.core.rtl){this.get_container().addClass("jstree-rtl")}this.data.core.ready=false;this.get_container().bind("__construct.jstree",$.proxy(function(){setTimeout($.proxy(function(){if(this){this.init()}},this),0)},this)).bind("before.jstree",$.proxy(function(e,data){if(!/^is_locked|unlock$/.test(data.func)&&this.data.core.locked){e.stopImmediatePropagation();return false}},this)).bind("create_node.jstree",$.proxy(function(e,data){this.clean_node(data.rslt.obj)},this)).bind("load_node.jstree",$.proxy(function(e,data){this.clean_node(data.rslt.obj===-1?this.get_container_ul().children("li"):data.rslt.obj.find("> ul > li"));if(!this.data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length){this.data.core.ready=true;this.__trigger("__ready")}},this)).bind("__loaded.jstree",$.proxy(function(e,data){data.inst.get_container_ul().children("li").each(function(){data.inst.correct_node(this)})},this)).bind("open_node.jstree",$.proxy(function(e,data){data.rslt.obj.find("> ul > li").each(function(){data.inst.correct_node(this)})},this)).bind("mousedown.jstree",$.proxy(function(){$.jstree._focus(this.get_index())},this)).bind("dblclick.jstree",function(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();try{sel.removeAllRanges();sel.collapse()}catch(er){}}}}).delegate("li > ins","click.jstree",$.proxy(function(e){this.toggle_node(e.target)},this))},__destruct:function(){},defaults:{strings:false},_fn:{_get_string:function(s){var a=this.get_settings(true).core.strings;if($.isFunction(a)){return a.call(this,s)}if(a&&a[s]){return a[s]}return s},init:function(){this.data.core.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.core.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.get_container().html("<ul><li class='jstree-loading'><a href='#'>"+this._get_string("Loading ...")+"</a></li></ul>");this.clean_node(-1);this.data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||18;this.load_node(-1,function(){this.__trigger("__loaded")})},lock:function(){this.data.core.locked=true;this.get_container().addClass("jstree-locked");this.__callback()},unlock:function(){this.data.core.locked=false;this.get_container().removeClass("jstree-locked");this.__callback()},is_locked:function(){return this.data.core.locked},get_node:function(obj){var $obj=$(obj,this.get_container());if($obj.is(".jstree")||obj===-1){return-1}$obj=$obj.closest("li",this.get_container());return $obj.length?$obj:false},get_next:function(obj,strict){obj=this.get_node(obj);if(obj===-1){return this.get_container_ul().children("li:eq(0)")}if(!obj||!obj.length){return false}if(strict){return obj.nextAll("li").size()>0?obj.nextAll("li:eq(0)"):false}if(obj.hasClass("jstree-open")){return obj.find("li:eq(0)")}else if(obj.nextAll("li").size()>0){return obj.nextAll("li:eq(0)")}else{return obj.parentsUntil(".jstree","li").next("li").eq(0)}},get_prev:function(obj,strict){obj=this.get_node(obj);if(obj===-1){return this.get_container().find("> ul > li:last-child")}if(!obj||!obj.length){return false}if(strict){return obj.prevAll("li").length>0?obj.prevAll("li:eq(0)"):false}if(obj.prev("li").length){obj=obj.prev("li").eq(0);while(obj.hasClass("jstree-open")){obj=obj.children("ul:eq(0)").children("li:last")}return obj}else{var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:false}},get_parent:function(obj){obj=this.get_node(obj);if(obj===-1||!obj||!obj.length){return false}var o=obj.parentsUntil(".jstree","li:eq(0)");return o.length?o:-1},get_children:function(obj){obj=this.get_node(obj);if(obj===-1){return this.get_container_ul().children("li")}if(!obj||!obj.length){return false}return obj.find("> ul > li")},is_parent:function(obj){obj=this.get_node(obj);return obj&&obj!==-1&&(obj.find("> ul > li:eq(0)").length||obj.hasClass("jstree-closed"))},is_loaded:function(obj){obj=this.get_node(obj);return obj&&(obj===-1&&!this.get_container().find("> ul > li.jstree-loading").length||obj!==-1&&!obj.hasClass("jstree-loading")&&(obj.find("> ul > li").length||obj.hasClass("jstree-leaf")))},is_loading:function(obj){obj=this.get_node(obj);return obj&&(obj===-1&&this.get_container().find("> ul > li.jstree-loading").length||obj!==-1&&obj.hasClass("jstree-loading"))},is_open:function(obj){obj=this.get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-open")},is_closed:function(obj){obj=this.get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-closed")},is_leaf:function(obj){obj=this.get_node(obj);return obj&&obj!==-1&&obj.hasClass("jstree-leaf")},load_node:function(obj,callback){obj=this.get_node(obj);if(!obj){callback.call(this,obj,false);return false}if(obj!==-1){obj.addClass("jstree-loading")}this._load_node(obj,$.proxy(function(status){if(obj!==-1){obj.removeClass("jstree-loading")}this.__callback({obj:obj,status:status});if(callback){callback.call(this,obj,status)}},this));return true},_load_node:function(obj,callback){if(obj===-1){this.get_container_ul().empty().append(this.data.core.original_container_html.clone(true))}callback.call(null,true)},open_node:function(obj,callback,animation){obj=this.get_node(obj);if(obj===-1||!obj||!obj.length){return false}if(!this.is_closed(obj)){if(callback){callback.call(this,obj,false)}return false}if(!this.is_loaded(obj)){this.load_node(obj,function(o,ok){return ok?this.open_node(o,callback,animation):callback?callback.call(this,o,false):false})}else{var t=this;obj.children("ul").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children("ul").stop(true,true).slideDown($.jstree.IS_IE6?0:animation,function(){this.style.display="";t.__trigger("__after_open",{rslt:{obj:obj}})});if(callback){callback.call(this,obj,true)}this.__callback({obj:obj})}},close_node:function(obj,animation){obj=this.get_node(obj);if(!obj||!obj.length||!this.is_open(obj)){return false}var t=this;obj.children("ul").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children("ul").stop(true,true).slideUp($.jstree.IS_IE6?0:animation,function(){this.style.display="";t.__trigger("__after_close",{rslt:{obj:obj}})});this.__callback({obj:obj})},toggle_node:function(obj){if(this.is_closed(obj)){return this.open_node(obj)}if(this.is_open(obj)){return this.close_node(obj)}},open_all:function(obj,animation,original_obj){obj=obj?this.get_node(obj):-1;obj=!obj||obj===-1?this.get_container_ul():obj;original_obj=original_obj||obj;var _this=this;obj=this.is_closed(obj)?obj.find("li.jstree-closed").andSelf():obj.find("li.jstree-closed");obj.each(function(){_this.open_node(this,_this.is_loaded(this)?false:function(obj){this.open_all(obj,animation,original_obj)},animation||0)});if(original_obj.find("li.jstree-closed").length===0){this.__callback({obj:original_obj})}},close_all:function(obj,animation){obj=obj?this._get_node(obj):-1;var $obj=!obj||obj===-1?this.get_container_ul():obj,_this=this;$obj=this.is_open($obj)?$obj.find("li.jstree-open").andSelf():$obj.find("li.jstree-open");$obj.each(function(){_this.close_node(this,animation||0)});this.__callback({obj:obj})},clean_node:function(obj){obj=this.get_node(obj);obj=!obj||obj===-1?this.get_container().find("li"):obj.find("li").andSelf();var _this=this;return obj.each(function(){var t=$(this),d=t.data("jstree"),s=d&&d.opened||t.hasClass("jstree-open")?"open":d&&d.closed||t.children("ul").length?"closed":"leaf";if(d&&d.opened){delete d.opened}if(d&&d.closed){delete d.closed}t.removeClass("jstree-open jstree-closed jstree-leaf jstree-last");if(!t.children("a").length){t.contents().filter(function(){return this.nodeType===3||this.tagName!=="UL"}).wrapAll('<a href="#"></a>');t.children("a").html(t.children("a").html().replace(/[\s\t\n]+$/,""))}else{if(!$.trim(t.children("a").attr("href"))){t.children("a").attr("href","#")}}if(!t.children("ins.jstree-ocl").length){t.prepend("<ins class='jstree-icon jstree-ocl'>&#160;</ins>")}if(t.is(":last-child")){t.addClass("jstree-last")}switch(s){case"leaf":t.addClass("jstree-leaf");break;case"closed":t.addClass("jstree-open");_this.close_node(t,0);break;case"open":t.addClass("jstree-closed");_this.open_node(t,false,0);break}})},correct_node:function(obj,deep){obj=this.get_node(obj);if(!obj||obj===-1&&!deep){return false}if(obj===-1){obj=this.get_container().find("li")}else{obj=deep?obj.find("li").andSelf():obj}obj.each(function(){var obj=$(this);switch(!0){case obj.hasClass("jstree-open")&&!obj.find("> ul > li").length:obj.removeClass("jstree-open").addClass("jstree-leaf").children("ul").remove();break;case obj.hasClass("jstree-leaf")&&!!obj.find("> ul > li").length:obj.removeClass("jstree-leaf").addClass("jstree-closed");break}obj[obj.is(":last-child")?"addClass":"removeClass"]("jstree-last")});return obj},scroll_to_node:function(obj){var c=this.get_container()[0],t;if(c.scrollHeight>c.offsetHeight){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length||!obj.is(":visible")){return}t=obj.offset().top-this.get_container().offset().top;if(t<0){c.scrollTop=c.scrollTop+t-1}if(t+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?$.jstree.SCROLLBAR_WIDTH:0)>c.offsetHeight){c.scrollTop=c.scrollTop+(t-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?$.jstree.SCROLLBAR_WIDTH:0))}}},get_state:function(){var state={open:[],scroll:{left:this.get_container().scrollLeft(),top:this.get_container().scrollTop()}};this.get_container_ul().find(".jstree-open").each(function(){if(this.id){state.open.push(this.id)}});return state},set_state:function(state,callback){if(state){if($.isArray(state.open)){var res=true,t=this;$.each(state.open.concat([]),function(i,v){v=document.getElementById(v);if(v){if(t.is_loaded(v)){if(t.is_closed(v)){t.open_node(v,false,0)}$.vakata.array_remove(state.open,i)}else{if(!t.is_loading(v)){t.open_node(v,$.proxy(function(){this.set_state(state)},t),0)}res=false}}});if(res){delete state.open;this.set_state(state,callback)}return false}if(state.scroll){if(state.scroll&&typeof state.scroll.left!=="undefined"){this.get_container().scrollLeft(state.scroll.left)}if(state.scroll&&typeof state.scroll.top!=="undefined"){this.get_container().scrollTop(state.scroll.top)}delete state.scroll;delete state.open;this.set_state(state,callback);return false}if($.isEmptyObject(state)){if(callback){callback.call(this)}this.__callback();return false}return true}return false},refresh:function(){this.data.core.state=this.get_state();this.load_node(-1,function(o,s){if(s){this.set_state($.extend(true,{},this.data.core.state),function(){this.__trigger("refresh")})}this.data.core.state=null})},get_text:function(obj,remove_html){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}obj=obj.children("a:eq(0)").clone();obj.children(".jstree-icon").remove();return obj[remove_html?"text":"html"]()},set_text:function(obj,val){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}obj=obj.children("a:eq(0)");var tmp=obj.children("INS").clone();obj.html(val).prepend(tmp);this.__callback({obj:obj,text:val});return true},parse_json:function(node){var li,a,ul,t;if($.isArray(node)){ul=$("<ul />");t=this;$.each(node,function(i,v){ul.append(t.parse_json(v))});return ul}if(typeof node==="undefined"){node={}}if(typeof node==="string"){node={title:node}}if(!node.li_attr){node.li_attr={}}if(!node.a_attr){node.a_attr={}}if(!node.a_attr.href){node.a_attr.href="#"}if(!node.title){node.title=this._get_string("New node")}li=$("<li />").attr(node.li_attr);a=$("<a />").attr(node.a_attr).html(node.title);ul=$("<ul />");if(node.data&&!$.isEmptyObject(node.data)){li.data(node.data)}if(node.children===true||$.isArray(node.children)||li.data("jstree")&&$.isArray(li.data("jstree").children)){if(!li.data("jstree")){li.data("jstree",{})}li.data("jstree").closed=true}li.append(a);if($.isArray(node.children)){$.each(node.children,$.proxy(function(i,n){ul.append(this.parse_json(n))},this));li.append(ul)}return li},get_json:function(obj,is_callback){obj=typeof obj!=="undefined"?this.get_node(obj):false;if(!is_callback){if(!obj||obj===-1){obj=this.get_container_ul().children("li")}}var r,t,li_attr={},a_attr={},tmp={};if(!obj||!obj.length){return false}if(obj.length>1||!is_callback){r=[];t=this;obj.each(function(){r.push(t.get_json($(this),true))});return r}tmp=$.vakata.attributes(obj,true);$.each(tmp,function(i,v){if(i==="id"){li_attr[i]=v;return true}v=$.trim(v.replace(/\bjstree[^ ]*/gi,"").replace(/\s+$/gi," "));if(v.length){li_attr[i]=v}});tmp=$.vakata.attributes(obj.children("a"),true);$.each(tmp,function(i,v){if(i==="id"){a_attr[i]=v;return true}v=$.trim(v.replace(/\bjstree[^ ]*/gi,"").replace(/\s+$/gi," "));if(v.length){a_attr[i]=v}});r={title:this.get_text(obj),data:$.extend(true,{},obj.data()||{}),children:false,li_attr:li_attr,a_attr:a_attr};if(!r.data.jstree){r.data.jstree={}}if(this.is_open(obj)){r.data.jstree.opened=true}if(this.is_closed(obj)){r.data.jstree.closed=true}obj=obj.find("> ul > li");if(obj.length){r.children=[];t=this;obj.each(function(){r.children.push(t.get_json($(this),true))})}return r},create_node:function(par,node,pos,callback,is_loaded){par=this.get_node(par);pos=typeof pos==="undefined"?"last":pos;if(par!==-1&&!par.length){return false}if(!pos.match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.create_node(par,node,pos,callback,true)})}var li=this.parse_json(node),tmp=par===-1?this.get_container():par;if(par===-1){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=par.index();par=this.get_parent(par);break;case"after":pos=par.index()+1;par=this.get_parent(par);break;case"inside":case"first":pos=0;break;case"last":pos=tmp.children("ul").children("li").length;break;default:if(!pos){pos=0}break}if(!this.check("create_node",li,par,pos)){return false}tmp=par===-1?this.get_container():par;if(!tmp.children("ul").length){tmp.append("<ul />")}if(tmp.children("ul").children("li").eq(pos).length){tmp.children("ul").children("li").eq(pos).before(li)}else{tmp.children("ul").append(li)}this.correct_node(par,true);if(callback){callback.call(this,li)}this.__callback({obj:li,parent:par,position:li.index()});return li},rename_node:function(obj,val){obj=this.get_node(obj);var old=this.get_text(obj);if(!this.check("rename_node",obj,this.get_parent(obj),val)){return false}if(obj&&obj.length){this.set_text(obj,val);this.__callback({obj:obj,title:val,old:old})}},delete_node:function(obj){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}var par=this.get_parent(obj),pre=this.get_prev(obj);if(!this.check("delete_node",obj,par,obj.index())){return false}obj=obj.detach();this.correct_node(par);this.correct_node(pre);this.__callback({obj:obj,prev:pre,parent:par});return obj},check:function(chk,obj,par,pos){var tmp=chk.match(/^move_node|copy_node|create_node$/i)?par:obj;tmp=tmp===-1?this.get_container().data("jstree"):tmp.data("jstree");if(tmp&&tmp.functions&&tmp.functions[chk]){tmp=tmp.functions[chk];if($.isFunction(tmp)){tmp=tmp.call(this,chk,obj,par,pos)}if(tmp===false){return false}}switch(chk){case"create_node":break;case"rename_node":break;case"move_node":tmp=par===-1?this.get_container():par;tmp=tmp.children("ul").children("li");if(tmp.length&&tmp.index(obj)!==-1&&(pos===obj.index()||pos===obj.index()+1)){return false}if(par!==-1&&par.parentsUntil(".jstree","li").andSelf().index(obj)!==-1){return false}break;case"copy_node":break;case"delete_node":break}return true},move_node:function(obj,par,pos,callback,is_loaded){obj=this.get_node(obj);par=this.get_node(par);pos=typeof pos==="undefined"?0:pos;if(!obj||obj===-1||!obj.length){return false}if(par!==-1&&!par.length){return false}if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.move_node(obj,par,pos,callback,true)})}var old_par=this.get_parent(obj),new_par=!pos.toString().match(/^(before|after)$/)||par===-1?par:this.get_parent(par),old_ins=$.jstree._reference(obj),new_ins=par===-1?this:$.jstree._reference(par),is_multi=old_ins.get_index()!==new_ins.get_index();if(new_par===-1){par=new_ins.get_container();if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=par.index();break;case"after":pos=par.index()+1;break;case"inside":case"first":pos=0;break;case"last":pos=par.children("ul").children("li").length;break;default:if(!pos){pos=0}break}if(!this.check("move_node",obj,new_par,pos)){return false}if(!par.children("ul").length){par.append("<ul />")}if(par.children("ul").children("li").eq(pos).length){par.children("ul").children("li").eq(pos).before(obj)}else{par.children("ul").append(obj)}if(is_multi){obj.find(".jstree-icon, .jstree-ocl").remove();this.clean_node(obj)}old_ins.correct_node(old_par,true);new_ins.correct_node(new_par,true);if(callback){callback.call(this,obj,new_par,obj.index())}this.__callback({obj:obj,parent:new_par,position:obj.index(),old_parent:old_par,is_multi:is_multi,old_instance:old_ins,new_instance:new_ins});return true},copy_node:function(obj,par,pos,callback,is_loaded){obj=this.get_node(obj);par=this.get_node(par);pos=typeof pos==="undefined"?"last":pos;if(!obj||obj===-1||!obj.length){return false}if(par!==-1&&!par.length){return false}if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.copy_node(obj,par,pos,callback,true)})}var org_obj=obj,old_par=this.get_parent(obj),new_par=!pos.toString().match(/^(before|after)$/)||par===-1?par:this.get_parent(par),old_ins=$.jstree._reference(obj),new_ins=par===-1?this:$.jstree._reference(par),is_multi=old_ins.get_index()!==new_ins.get_index();obj=obj.clone(true);obj.find("*[id]").andSelf().each(function(){if(this.id){this.id="copy_"+this.id}});if(new_par===-1){par=new_ins.get_container();if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=par.index();break;case"after":pos=par.index()+1;break;case"inside":case"first":pos=0;break;case"last":pos=par.children("ul").children("li").length;break;default:if(!pos){pos=0}break}if(!this.check("copy_node",org_obj,new_par,pos)){return false}if(!par.children("ul").length){par.append("<ul />")}if(par.children("ul").children("li").eq(pos).length){par.children("ul").children("li").eq(pos).before(obj)}else{par.children("ul").append(obj)}if(is_multi){obj.find(".jstree-icon, .jstree-ocl").remove()}new_ins.clean_node(obj);new_ins.correct_node(new_par,true);if(callback){callback.call(this,obj,new_par,obj.index(),org_obj)}this.__callback({obj:obj,parent:new_par,old_parent:old_par,position:obj.index(),original:org_obj,is_multi:is_multi,old_instance:old_ins,new_instance:new_ins});return true},cut:function(obj){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}ccp_node=obj;ccp_mode="move_node";this.__callback({obj:obj})},copy:function(obj){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}ccp_node=obj;ccp_mode="copy_node";this.__callback({obj:obj})},can_paste:function(){return ccp_mode!==false&&ccp_node!==false},paste:function(obj){obj=this.get_node(obj);if(!obj||!ccp_mode||!ccp_mode.match(/^(copy_node|move_node)$/)||!ccp_node){return false}this[ccp_mode](ccp_node,obj);this.__callback({obj:obj,nodes:ccp_node,mode:ccp_mode});ccp_node=false;ccp_mode=false},edit:function(obj,default_text){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}obj.parentsUntil(".jstree",".jstree-closed").each($.proxy(function(i,v){this.open_node(v,false,0)},this));var rtl=this.data.core.rtl,w=this.get_container().width(),a=obj.children("a:eq(0)"),oi=obj.children("ins"),ai=a.children("ins"),w1=oi.width()*oi.length,w2=ai.width()*ai.length,t=typeof default_text==="string"?default_text:this.get_text(obj),h1=$("<div />",{css:{position:"absolute",top:"-200px",left:rtl?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h2=obj.css("position","relative").append($("<input />",{value:t,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:rtl?"auto":w1+w2+4+"px",right:rtl?w1+w2+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:$.proxy(function(){var i=obj.children(".jstree-rename-input"),v=i.val();if(v===""){v=t}h1.remove();i.remove();this.rename_node(obj,v);obj.css("position","")},this),keyup:function(event){var key=event.keyCode||event.which;if(key===27){this.value=t;this.blur();return}else if(key===13){this.blur();return}else{h2.width(Math.min(h1.text("pW"+this.value).width(),w))}},keypress:function(event){var key=event.keyCode||event.which;if(key===13){return false}}})).children(".jstree-rename-input"),fn={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""};this.set_text(obj,"");h1.css(fn);h2.css(fn).width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select()}}});$(function(){var css_string=""+".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } "+".jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } "+".jstree-rtl li { margin-left:0; margin-right:18px; } "+".jstree > ul > li { margin-left:0px; } "+".jstree-rtl > ul > li { margin-right:0px; } "+".jstree .jstree-icon { display:inline-block; text-decoration:none; margin:0; padding:0; vertical-align:top; } "+".jstree .jstree-ocl { width:18px; height:18px; text-align:center; line-height:18px; cursor:default; vertical-align:top; } "+".jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; padding:1px 2px; margin:0; } "+".jstree a:focus { outline: none; } "+"li.jstree-open > ul { display:block; } "+"li.jstree-closed > ul { display:none; } ";if($.jstree.IS_IE6){try{document.execCommand("BackgroundImageCache",false,true)}catch(err){}css_string+=""+".jstree li { height:18px; margin-left:0; margin-right:0; } "+".jstree li li { margin-left:18px; } "+".jstree-rtl li li { margin-left:0px; margin-right:18px; } "+"li.jstree-open ul { display:block; } "+"li.jstree-closed ul { display:none !important; } "+".jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } "}if($.jstree.IS_IE7){css_string+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}if($.jstree.IS_FF2){css_string+=""+".jstree .jstree-icon { display:-moz-inline-box; } "+".jstree li { line-height:12px; } "+".jstree a { display:-moz-inline-box; } "}$.vakata.css.add_sheet({str:css_string,title:"jstree"})})}(jQuery)}();define("libs/jquery/jstree/jstree",function(){});!function($){$.jstree.plugin("sort",{__construct:function(){this.get_container().bind("load_node.jstree",$.proxy(function(e,data){var obj=this.get_node(data.rslt.obj);obj=obj===-1?this.get_container_ul():obj.children("ul");this._sort(obj,true)},this)).bind("rename_node.jstree create_node.jstree",$.proxy(function(e,data){this._sort(data.rslt.obj.parent(),false)},this)).bind("move_node.jstree copy_node.jstree",$.proxy(function(e,data){var m=data.rslt.parent===-1?this.get_container_ul():data.rslt.parent.children("ul");this._sort(m,false)},this))},defaults:function(a,b){return this.get_text(a,true)>this.get_text(b,true)?1:-1},_fn:{_sort:function(obj,deep){var s=this.get_settings(true).sort,t=this;obj.append($.makeArray(obj.children("li")).sort($.proxy(s,t)));obj.children("li").each(function(){t.correct_node(this,false)});if(deep){obj.find("> li > ul").each(function(){t._sort($(this))});t.correct_node(obj.children("li"),true)}}}});$.jstree.defaults.plugins.push("sort")}(jQuery);define("libs/jquery/jstree/jstree.sort",function(){});!function($){$.jstree.plugin("ui",{__construct:function(){this.data.ui.selected=$();this.data.ui.hovered=null;this.data.ui.last_selected=false;this.get_container().delegate("a","click.jstree",$.proxy(function(e){e.preventDefault();e.currentTarget.blur();var s=this.get_settings(true).ui,obj=this.get_node(e.currentTarget),is_selected=this.is_selected(obj),is_multiple=s.select_multiple_modifier==="on"||s.select_multiple_modifier!==false&&e&&e[s.select_multiple_modifier+"Key"],is_range=s.select_multiple_modifier==="on"||s.select_range_modifier!==false&&e&&e[s.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==obj[0]&&this.data.ui.last_selected.parent()[0]===obj.parent()[0];switch(!0){case is_range&&this.data.ui.last_selected!==false:this.select_range(obj);break;case is_range&&this.data.ui.last_selected===false:this.select_one(obj);break;case is_selected&&is_multiple:this.deselect_node(obj);break;default:this.select_one(obj,is_multiple);break}},this)).delegate("a","mouseenter.jstree",$.proxy(function(e){this.hover_node(e.target)},this)).delegate("a","mouseleave.jstree",$.proxy(function(e){this.dehover_node(e.target)},this)).bind("delete_node.jstree",$.proxy(function(event,data){var o=this.get_node(data.rslt.obj),n=o&&o.length?o.find("a.jstree-clicked"):$(),t=this;n.each(function(){t.deselect_node(this)})},this)).bind("move_node.jstree",$.proxy(function(event,data){if(data.rslt.cy){data.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")}},this))},defaults:{select_multiple_modifier:"ctrl",select_range_modifier:"shift",disable_nested_selection:true},_fn:{get_node:function(obj,allow_multiple){if(typeof obj==="undefined"||obj===null){return allow_multiple?this.data.ui.selected:this.data.ui.last_selected}return this.__call_old()},hover_node:function(obj){obj=this.get_node(obj);if(!obj||!obj.length||this.is_loading(obj)){return false}if(!obj.hasClass("jstree-hovered")){this.dehover_node()}this.data.ui.hovered=obj.children("a").addClass("jstree-hovered").parent();this.scroll_to_node(obj);this.__callback({obj:obj})},dehover_node:function(){var obj=this.data.ui.hovered,p;if(!obj||!obj.length){return false}p=obj.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===p[0]){this.data.ui.hovered=null}this.__callback({obj:obj})},select_node:function(obj){var t=this;obj=this.get_node(obj);if(obj===-1||!obj||!obj.length||this.is_loading(obj)){return false}obj.children("a").addClass("jstree-clicked");this.data.ui.last_selected=obj;this.data.ui.selected=this.data.ui.selected.add(obj);obj.parents(".jstree-closed").each(function(){t.open_node(this,false,0)});this.__callback({obj:obj})},deselect_node:function(obj){obj=this.get_node(obj);if(!obj||!obj.length){return false}if(this.is_selected(obj)){obj.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(obj);if(this.data.ui.last_selected.get(0)===obj.get(0)){this.data.ui.last_selected=this.data.ui.selected.eq(0)}this.__callback({obj:obj})}},deselect_all:function(context){var ret=context?$(context).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();ret.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=$();this.data.ui.last_selected=false;this.__callback({obj:ret})},is_selected:function(obj){return this.data.ui.selected.index(this.get_node(obj))>=0},get_selected:function(context){return context?$(context).find("a.jstree-clicked").parent():this.data.ui.selected},select_range:function(obj,start_node,keep_old_selection){var _this=this,i,s;obj=this.get_node(obj);if(!start_node){s=true;start_node=this.data.ui.last_selected}start_node=this.get_node(start_node);if(obj===-1||!obj||!obj.length||this.is_loading(obj)){return false}if(start_node===-1||!start_node||!start_node.length||this.is_loading(start_node)){return false}if(!keep_old_selection){this.deselect_all()}i=obj.index()<start_node.index();start_node.addClass("jstree-last-selected");obj=obj[i?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf().add(".jstree-last-selected");start_node.removeClass("jstree-last-selected");if(!i){obj=obj.vakata_reverse()}if(!obj.length){return false}obj.each(function(){_this.select_node(this)});if(s){this.data.ui.last_selected=start_node}this.__callback({obj:obj});return true},select_one:function(obj,keep_old_selection){obj=this.get_node(obj);if(obj===-1||!obj||!obj.length||this.is_loading(obj)){return false}if(!keep_old_selection){this.deselect_all()}else{if(this.get_settings(true).ui.disable_nested_selection&&(obj.parentsUntil(".jstree","li").children("a.jstree-clicked:eq(0)").length||obj.children("ul").find("a.jstree-clicked:eq(0)").length)){return false}}this.select_node(obj);this.__callback({obj:obj});return true},clean_node:function(obj){obj=this.__call_old();var _this=this;return obj.each(function(){var t=$(this),d=t.data("jstree");t.find(".jstree-clicked").removeClass("jstree-clicked");if(d&&d.selected){_this.select_node(t);delete d.selected}})},get_state:function(){var state=this.__call_old();state.selected=[];this.data.ui.selected.each(function(){state.selected.push(this.id)});return state},set_state:function(state,callback){if(this.__call_old()){if(state.selected){var _this=this;this.deselect_all();$.each(state.selected,function(i,v){_this.select_node(document.getElementById(v))});delete state.selected;this.set_state(state,callback);return false}return true}return false},get_json:function(obj,is_callback){var r=this.__call_old();if(is_callback){if(this.is_selected(obj)){r.data.jstree.selected=true}}return r}}});$.jstree.defaults.plugins.push("ui")}(jQuery);define("libs/jquery/jstree/jstree.ui",function(){});!function($){var themes_loaded=[];$.jstree.THEMES_DIR=false;$.jstree.plugin("themes",{__construct:function(){this.get_container().bind("__construct.jstree",$.proxy(function(){var s=this.get_settings(true).themes;this.data.themes.dots=s.dots;this.data.themes.icons=s.icons;if(s.url===false&&s.theme===false){s.theme=this.data.core.rtl?"default-rtl":"default"}this.set_theme(s.theme,s.url);this[this.data.themes.dots?"show_dots":"hide_dots"]();this[this.data.themes.icons?"show_icons":"hide_icons"]()},this))},defaults:{theme:false,url:false,dots:true,icons:true},_fn:{set_theme:function(theme_name,theme_url){if(!theme_name){return false
}if(!theme_url){theme_url=$.jstree.THEMES_DIR+theme_name+"/style.css"}if($.inArray(theme_url,themes_loaded)===-1){$.vakata.css.add_sheet({url:theme_url});themes_loaded.push(theme_url)}if(this.data.themes.theme!==theme_name){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=theme_name}this.get_container().addClass("jstree-"+theme_name);this.__callback(theme_name)},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){if(this.data.themes.icons){this.hide_icons()}else{this.show_icons()}},set_icon:function(obj,icon){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}obj=obj.find("> a > .jstree-themeicon");if(icon===false){this.hide_icon(obj)}else if(icon.indexOf("/")===-1){obj.addClass(icon).attr("rel",icon)}else{obj.css("background","url('"+icon+"') center center no-repeat").attr("rel",icon)}return true},get_icon:function(obj){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return null}obj=obj.find("> a > .jstree-themeicon");if(obj.hasClass("jstree-themeicon-hidden")){return false}obj=obj.attr("rel");return obj&&obj.length?obj:null},hide_icon:function(obj){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}obj.find("> a > .jstree-themeicon").addClass("jstree-themeicon-hidden");return true},show_icon:function(obj){obj=this.get_node(obj);if(!obj||obj===-1||!obj.length){return false}obj.find("> a > .jstree-themeicon").removeClass("jstree-themeicon-hidden");return true},clean_node:function(obj){obj=this.__call_old();var t=this;return obj.each(function(){var o=$(this),d=o.data("jstree");if(!o.find("> a > ins.jstree-themeicon").length){o.children("a").prepend("<ins class='jstree-icon jstree-themeicon'>&#160;</ins>")}if(d&&typeof d.icon!=="undefined"){t.set_icon(o,d.icon);delete d.icon}})},get_state:function(){var state=this.__call_old();state.themes={theme:this.get_theme(),icons:this.data.themes.icons,dots:this.data.themes.dots};return state},set_state:function(state,callback){if(this.__call_old()){if(state.themes){if(state.themes.theme){this.set_theme(state.themes.theme)}if(typeof state.themes.dots!=="undefined"){this[state.themes.dots?"show_dots":"hide_dots"]()}if(typeof state.themes.icons!=="undefined"){this[state.themes.icons?"show_icons":"hide_icons"]()}delete state.themes;this.set_state(state,callback);return false}return true}return false},get_json:function(obj,is_callback){var r=this.__call_old(),i;if(is_callback){i=this.get_icon(obj);if(typeof i!=="undefined"&&i!==null){r.data.jstree.icon=i}}return r}}});$(function(){if($.jstree.THEMES_DIR===false){$("script").each(function(){if(this.src.toString().match(/jstree[^\/]*?\.js(\?.*)?$/)){$.jstree.THEMES_DIR=this.src.toString().replace(/jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}})}if($.jstree.THEMES_DIR===false){$.jstree.THEMES_DIR="themes/"}var css_string=""+".jstree a { text-decoration:none; } "+".jstree a > .jstree-themeicon { height:16px; width:16px; margin-right:3px; } "+".jstree-rtl a > .jstree-themeicon { margin-left:3px; margin-right:0; } "+".jstree .jstree-no-icons .jstree-themeicon, .jstree .jstree-themeicon-hidden { display:none; } ";if($.jstree.IS_IE6){css_string+=""+".jstree li a .jstree-themeicon { height:16px; width:16px; margin-right:3px; } "+".jstree-rtl li a .jstree-themeicon { margin-right:0px; margin-left:3px; } "}$.vakata.css.add_sheet({str:css_string,title:"jstree"})});$.jstree.defaults.plugins.push("themes")}(jQuery);define("libs/jquery/jstree/jstree.themes",function(){});define("app/config/demo-queries",["app/util/utils"],function(utils){var values=[{name:"examples/summer games medals/Medals By Country",code:"data := //summer_games/london_medals\nbyCountry := solve 'Country\n  {country: 'Country,\n   total: sum(data.Total where data.Country = 'Country)}\nbyCountry"},{name:"examples/summer games medals/Attributes By Sport",code:"data := //summer_games/london_medals\n solve 'Sport \n  data' := data where data.Sport = 'Sport\n  {sport: 'Sport, \n  aveAge: mean(data'.Age),\n  aveWeight: mean(data'.Weight ),\n  aveHeight: mean(data'.HeightIncm)}"},{name:"examples/summer games medals/Age Distribution Of Medals",code:"london := //summer_games/london_medals\nsolve 'age\n  {age: 'age, medalWinnersByAge: count(london where london.Age = 'age)}"},{name:"examples/summer games medals/Correlation of Letters in Name and Medals",code:"data := //summer_games/london_medals \nbyCountry := solve 'Country\n  data' := data where data.Country = 'Country\n  {country: 'Country,\n  gold: sum(data'.G ),\n  silver: sum(data'.S ),\n  bronze: sum(data'.B ),\n  total: sum(data'.Total ),\naveLettersInName: mean(std::string::length(data'.Name))}\n\nstd::stats::corr(byCountry.aveLettersInName,byCountry.total)"},{name:"examples/summer games medals/Percentage of Female Athletes by Country",code:"data := //summer_games/london_medals\nbyCountry := solve 'Country\n data' := data where data.Country = 'Country\n  {country: 'Country,\n  percentWomen: sum(data'.Total where data'.Sex = \"F\")\n  /sum(data'.Total ),\n  total: sum(data'.Total)}\n\nfiltered := byCountry where byCountry.total >=5\n\nfiltered where std::stats::rank(neg filtered.percentWomen) <= 5"},{name:"examples/summer games athletes/Athletes By Country",code:"data := //summer_games/athletes \nsolve 'Countryname \n  {CountryName: 'Countryname, count: count(data where data.Countryname = 'Countryname)}"},{name:"examples/summer games athletes/Athletes By Sport",code:"data := //summer_games/athletes \nsolve 'Sportname \n  {Sportname: 'Sportname, count: count(data where data.Sportname = 'Sportname)}"},{name:"examples/summer games athletes/Top US Sports - Men",code:'data := //summer_games/athletes \nUSMaleAthletes := data where data.Countryname = "US" & data.Sex = "M" \nbySport := solve \'Sportname \n  {sport: \'Sportname, numberOfAthletes: count(USMaleAthletes where USMaleAthletes.Sportname = \'Sportname)} \nrank := std::stats::rank(bySport.numberOfAthletes) \nbySport where rank > max(rank) - 10'},{name:"examples/summer games athletes/Top US Sports - Women",code:'data := //summer_games/athletes \nUSFemaleAthletes := data where data.Countryname = "US" & data.Sex = "F" \nbySport := solve \'Sportname \n  {sport: \'Sportname, numberOfAthletes: count(USFemaleAthletes where USFemaleAthletes.Sportname = \'Sportname)} \nrank := std::stats::rank(bySport.numberOfAthletes) \nbySport where rank > max(rank) - 10'},{name:"examples/summer games athletes/Percentage of Female Athletes",code:"data := //summer_games/athletes \npercentageFemaleAthletesByCountry := solve 'Countryname \n  {country: 'Countryname,\n  percentFemale: 100*count(data where data.Sex = \"F\" & data.Countryname = 'Countryname)/count(data where data.Countryname = 'Countryname)}\n \nrank := std::stats::rank(neg percentageFemaleAthletesByCountry.percentFemale)\n \npercentageFemaleAthletesByCountry where rank <=5"},{name:"examples/tutorial/Top Five Products",code:"data := //tutorial/transactions\n\nsalesByProduct := solve 'product\n  {product: 'product,\n  sales: sum(data.total where data.ApocalypseProducts = 'product)}\nrank := std::stats::rank(neg salesByProduct.sales)\n\nsalesByProduct where rank <= 5"},{name:"examples/tutorial/Top Five Products Plus Other",code:"data := //tutorial/transactions\n\nsalesByProduct := solve 'ApocalypseProducts\n  {product: 'ApocalypseProducts,\n  sales: sum(data.total where data.ApocalypseProducts = 'ApocalypseProducts)}\nrank := std::stats::rank(neg salesByProduct.sales)\notherProducts := {product: \"other\",sales: sum(salesByProduct.sales where rank > 5)}\n\ntop5Products := salesByProduct where rank <= 5\nallProducts := (new otherProducts) union top5Products \nallProducts"},{name:"examples/tutorial/Quantity By Month",code:"data := //tutorial/transactions\ntoday := 233\ndataWithMonthAndYearAndDay := data with\n  {month: std::time::monthOfYear(data.timeStamp),\n  year: std::time::year(data.timeStamp),\n  day: std::time::dayOfYear(data.timeStamp)}\n\nquantityByMonth := solve 'month\n monthData := dataWithMonthAndYearAndDay where dataWithMonthAndYearAndDay.month = 'month\n  {month : 'month,\n  quantity: sum(monthData.quantity),\n  year : monthData.year,\n  day : monthData.day}\n\ndistinct({quantity: quantityByMonth.quantity, month: quantityByMonth.month} where\n  quantityByMonth.year=2012 & quantityByMonth.day < today)"},{name:"examples/tutorial/Sales By Source at a Particular Hour",code:"data := //tutorial/transactions\ndataWithHour := data with {hour: std::time::hourOfDay(data.timeStamp)}\n\naveSalesByHour :=solve 'source\n  {source : 'source,\n  averageSales: sum(dataWithHour.total where dataWithHour.source ='source),\n  hour : dataWithHour.hour}\n\n distinct(aveSalesByHour where aveSalesByHour.hour = 13)"},{name:"examples/clickstream/Clicks By Gender And Week",code:"import std::time::*\n\n clicks := //clicks\n clicks' := clicks with {week: weekOfYear(clicks.timeStamp)}\n\nclicksByGenderAndWeek := solve 'gender, 'week\n  {week: 'week,\n  gender: 'gender,\n  clicks: count(clicks' where clicks'.customer.gender = 'gender & clicks'.week = 'week)}\n clicksByGenderAndWeek"},{name:"examples/clickstream/Clicks By Referral",code:"clicks := //clicks\n\nclicksByReferral := solve 'referral\n  {referral: 'referral,\n  clicks: count(clicks where clicks.marketing.referral = 'referral)}\n\nclicksByReferral"}];var map={};for(var i=0;i<values.length;i++){var name=values[i].name;map[utils.normalizeQueryName(name)]={name:name,code:values[i].code}}return map});define("app/config/wizard-steps",[],function(){return function createWizardSteps(){var select_folder={name:"select_folder",target:".pg-labcoat .pg-folders .pg-tree li[data]:last-child a",text:"Now select your newly created folder.",width:300,init:function(goto,step,value){$(step.target).closest("a").one("click",function(){goto("upload_file")})},position:["left center","right center"]},load_data={name:"load_data",target:".pg-labcoat .pg-folders .pg-tree li[data]:last-child a",text:"Double click on a data file to load its content.<br>You can also select it and click on the 'lightning bolt' button above.",width:300,init:function(goto,step,value){$(step.ctx.folders).one("querypath",function(){goto("look_at_results")})},position:["left center","right center"]};return[{name:"welcome",target:".pg-labcoat",text:'Welcome to Labcoat! This Getting Started Tutorial will show you how to load your data in Labcoat and run your first query.<br><a href="#">Start now!</a>',position:["center","center"],width:300,init:function(goto,step){$(this).find("a").click(function(e){e.preventDefault();goto("select_root");return false})}},{name:"select_root",target:".pg-labcoat .pg-folders .pg-tree .pg-root .jstree.jstree-default:first-child ins",text:"Let's start by creating a folder where you will store your data.<br>Click on the root path.",width:250,position:["left+10 center","right center"],init:function(goto,step){$(".pg-labcoat .pg-folders .pg-root a").one("click",function(){goto("create_folder")})}},{name:"create_folder",target:".pg-labcoat .pg-folders .ui-icon-new-folder",text:'Click on the "create new folder" button.',width:300,init:function(goto,step){$(step.target).closest("button").one("click",function(){goto("#hide");function poll(){if(!$(".pg-el.ui-dialog").length){setTimeout(poll,100);return}$(".pg-el.ui-dialog").one("dialogclose",function(){var value=$(this).find(".pg-error:visible").length?null:$(this).find("#pg-input-lineinput").val();if(!value){goto("create_folder")}else{var li=$(".pg-labcoat .pg-folders li").filter(function(){return value==$(this).attr("data").split("/").pop()});select_folder.target='.pg-labcoat .pg-folders .pg-tree li[data="'+li.attr("data")+'"] a';load_data.target='.pg-labcoat .pg-folders .pg-tree li[data="'+li.attr("data")+'/[records]"] a';goto("select_folder")}})}poll()})},position:["left-36 top","right bottom"]},select_folder,{name:"upload_file",target:".pg-labcoat .pg-folders .ui-icon-arrowthickstop-1-n",text:"Click on the upload file button and choose one of your files to upload.",width:250,position:["center top","center bottom"],init:function(goto,step,value){$(step.target).closest("button").one("click",function(){goto("#hide");var started=false;function start(){started=true}$(step.ctx.folders).on("uploadStart",start);function poll(){if(!$(".pg-el.ui-dialog").length){setTimeout(poll,100);return}var o=$(step.ctx.folders);o.one("uploadStart",start);o.one("uploadComplete",complete);o.one("uploadError",error);function clear(){o.off("uploadStart",start);o.off("uploadComplete",complete);o.off("uploadError",error)}function complete(){clear();goto("upload_success")}function error(){clear();goto("upload_failure")}$(".pg-el.ui-dialog").one("dialogclose",function(){if(!started){clear();goto("upload_file");return}})}poll()})}},{name:"upload_success",target:".pg-labcoat .pg-results",text:'Great, it seems like your data was successfully uploaded! Have a look at the results below and <a href="#">click here</a> to continue.',width:300,position:["center bottom","center top"],init:function(goto,step){$(this).find("a").click(function(e){e.preventDefault();goto("load_data");return false})}},{name:"upload_failure",target:".pg-labcoat .pg-results",text:'Oh nooo! Something went wrong uploading your data. Be sure that the file you tried to upload is a valid CSV (with headers) or JSON file. Have a look at the results below and <a href="#">click here</a> to try uploading your data again.',width:280,position:["center bottom","center top"],init:function(goto,step){$(this).find("a").one("click",function(e){e.preventDefault();goto("upload_file");return false})}},load_data,{name:"look_at_results",target:".pg-labcoat .pg-output-formats label",text:'Congratulations, you just executed your first query!<br>In the panel below you can have a look at the results. Note that you can look at your data in a table, in JSON format or in a nice chart.<br><a href="#">Continue.</a>',width:360,position:["center bottom","center top"],init:function(goto,step){$(this).find("a").one("click",function(e){e.preventDefault();goto("save_query");return false})}},{name:"save_query",target:".pg-labcoat .pg-editor .ui-icon-disk",text:'Click on the "save query" button to store your Quirrel query in the query manager so that you can easily reload it the next time you visit Labcoat.',width:300,position:["center top","center bottom"],init:function(goto,step){$(step.target).closest("button").one("click",function(){goto("the_end");return false})}},{name:"the_end",target:".pg-labcoat",text:'Congrats, you completed our Labcoat Tutorial! Take a look at our resources on the right and start writing your custom queries to analyze your data.<br><a href="#">Close tutorial.</a>',width:300,position:["center center","center center"],init:function(goto,step){$(this).find("a").one("click",function(e){e.preventDefault();goto("#end");return false})}}]}});define("rtext!templates/content.tip.main.html",[],function(){return'<p>Labcoat by Precog is a friendly tool that allows you to analyze data using a simple, yet powerful query language called Quirrel. This interactive environment makes it so easy to understand data! Experiment with sample data by running preloaded queries or by creating your own queries. You can also learn the Quirrel language with our built-in tutorial and reference guide. Any query you develop can also be executed from inside an application through our REST API.</p>\n<p>This is an early preview, so you can\'t quite upload your own data but <a href="http://goo.gl/Jtdho" target="_blank">subscribe to our newsletter</a> to learn when you\'ll be able to analyze your own data. Now, we\'ll let you get started!</p>'});define("rtext!templates/content.tip.codepane.html",[],function(){return'This is the code editor. You can type your Quirrel queries here and execute them clicking on the "run" (or "run selected") or by using SHIFT+ENTER on your keyboard.'});define("rtext!templates/content.tip.filesystem.html",[],function(){return"This is the file system. You can see how your data is organized, as well as upload and download data through drag & drop."});define("rtext!templates/content.tip.querybrowser.html",[],function(){return"This is the query browser. Here you can create, rename, and delete queries. All these are stored on your local machine, so be sure to back them up elsewhere for safe-keeping!"});define("rtext!templates/content.tip.resultspane.html",[],function(){return"This is the results pane. Anytime you execute a query, the results will appear here. You can view the results as JSON, CSV, or charts."});define("rtext!templates/content.tip.supportpane.html",[],function(){return"<div>\n    <h3>tutorial</h3>\n    <div>This is a tutorial for the Quirrel query language. In about 30 minutes, you can learn everything you need to know to analyze data on Precog or any other system that supports Quirrel.</div>\n    <h3>reference</h3>\n    <div>This is a reference manual for functions in Quirrel's standard library. These functions help you save time and perform critical key operations when doing data analysis.</div>\n    <h3>IRC channel</h3>\n    <div>This is an IRC client that connects to the #quirrel channel on Freenode. On the Quirrel channel, you can often find other Quirrel users who can help answer your questions.</div>\n</div>"});define("app/results",["libs/jquery/slickgrid/jquery.event.drag-2.0.min","libs/jquery/ui/jquery.ui.sortable","libs/jquery/slickgrid/slick.core","libs/jquery/slickgrid/slick.grid","libs/jquery/slickgrid/slick.dataview","libs/jquery/slickgrid/slick.pager","libs/jquery/slickgrid/slick.columnpicker"],function(){function message_type_formatter(r,c,value,cell,item){switch(value){case"warning":src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTg4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTk4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBNjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBNzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pgd7PfIAAAGmSURBVHjaYvr//z8DJZiJgUIANoCRkREb9gLiSVAaQx4OQM7AAkwd7XU2/v++/rOttdYGEB9dASEvOMydGKfH8Gv/p4XTkvRBfLxeQAP+1cUhXopyvzhP7P/IoSj7g7Mw09cNKO6J1QQ0L4gICPIv/veg/8W+JdFvQNLHVsW9/nmn9zk7B+cCkDwhL7gt6knSZnx9/LuCEOcvkIAMP+cvto9nfqyZmmUAksfnBUtbM60gX/3/kgyv3/xSFOL5DZT+L8vP+Yfh5cvfPvp/xUHyQHXGyAYwgpwBjZYFT3Y1OEl/OfCH4ffv3wzc4iwMvNIsDJ+f/mH4+vIPAxsb631WW0Yln6ZpQLXdMK/DXGDflh+sIv37EivD5x//Gb7+YWT4y86sl7BCCkSD+Z++/1dkvsFRl+HnD1Rvje4F8whjMXmGj58YGf5zsDMwcnAwfPvKcml62DsQDeaDxN+/Y0qwlpEHqrdB94IRNIDUgfgfKJChGK4OikEW3gTiXUB950ASLFAF54AC94A0G9QAfOnmF9DCDzABFqS08IHYDIScdijOjQABBgC+/9awBH96jwAAAABJRU5ErkJggg==";break;case"error":src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTQ4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTU4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBMjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBMzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkgXxbAAAAJbSURBVHjapFNNaBNBFH4zs5vdZLP5sQmNpT82QY209heh1ioWisaDRcSKF0WKJ0GQnrzrxasHsR6EnlrwD0TagxJabaVEpFYxLWlLSS822tr87m66ccfd2GKyVhA6MMybgfe97/vmPUQphd0sZjto9XIn9OOsvlu2nkqRzVU+6vvlzPf8W6bk8dxQ0NPbxAALgCgg2JkaQuhzQau/El0zbmUA7U0Es8v2CiYmKQJHGO1QICCLoqilMhkmurDAyapKgqItezi/USRdJqEYY4D5jCy03ht2yMkkvL91jTTX10qzyyu2hruPRN7jgbH+EOsXcMLgYiThEgAMhABW85oqy1DXdRIdvP1AHJ2acQXvDIrVHcdQNrEKNYSVMSZGMjEzIIAwDXIo+6G/FxcGnzkC3T2oMhLjre49sBB+RRcHLqdafK6sYdE/GGBwU1VpFNj0aN8pJbe+BkZyevUrvLl6Xmm0W9IuTc0DxrDNAJd5oEvI/KRsNC3bQyNjPO9yQ1YHcfj2QvfQc/5TUhJTBc2iM0U7AWDQtc1nJHvD/cfO2s7jaGkiTEfa/Ep8coLu7zmNmh8+dc5lZDuUeFAGUNA/OY6JVaypQ0vjr7XYjUvJM37vt+j1vuTK5DgVfVUoTjVe+y3/LxMxY2GgU+CSLy4cpfsYorRXuXIOi0Vt40h67uZFTdIo6nLaZcwUJWAzwNS0tBnqqKzQDnjdG/iPyZxo46HaKUpbvYkj8qYRTZsBhge+JHhZyh0x9b95JqjVJkT084kZIPwu/mPWqPgfQ5jXh2+92Ay7HedfAgwA6KDWafb4w3cAAAAASUVORK5CYII=";break;case"info":src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAKcSURBVDjLpZPLa9RXHMU/d0ysZEwmMQqZiTaP0agoaKGJUiwIxU0hUjtUQaIuXHSVbRVc+R8ICj5WvrCldJquhVqalIbOohuZxjDVxDSP0RgzyST9zdzvvffrQkh8tBs9yy9fPhw45xhV5X1U8+Yhc3U0LcEdVxdOVq20OA0ooQjhpnfhzuDZTx6++m9edfDFlZGMtXKxI6HJnrZGGtauAWAhcgwVnnB/enkGo/25859l3wIcvpzP2EhuHNpWF9/dWs/UnKW4EOGDkqhbQyqxjsKzMgM/P1ymhlO5C4ezK4DeS/c7RdzQoa3x1PaWenJjJZwT9rQ1gSp/js1jYoZdyfX8M1/mp7uFaTR8mrt29FEMQILr62jQ1I5kA8OF59jIItVA78dJertTiBNs1ZKfLNG+MUHX1oaURtIHEAOw3p/Y197MWHEJEUGCxwfHj8MTZIcnsGKxzrIURYzPLnJgbxvG2hMrKdjItjbV11CYKeG8R7ygIdB3sBMFhkem0RAAQ3Fuka7UZtRHrasOqhYNilOwrkrwnhCU/ON5/q04vHV48ThxOCuoAbxnBQB+am65QnO8FqMxNCjBe14mpHhxBBGCWBLxD3iyWMaYMLUKsO7WYH6Stk1xCAGccmR/Ozs/bKJuXS39R/YgIjgROloSDA39Deit1SZWotsjD8pfp5ONqZ6uTfyWn+T7X0f59t5fqDhUA4ry0fYtjJcWeZQvTBu4/VqRuk9/l9Fy5cbnX+6Od26s58HjWWaflwkusKGxjm1bmhkvLXHvh1+WMbWncgPfZN+qcvex6xnUXkzvSiYP7EvTvH4toDxdqDD4+ygT+cKMMbH+3MCZ7H9uAaDnqytpVX8cDScJlRY0YIwpAjcNcuePgXP/P6Z30QuoP4J7WbYhuQAAAABJRU5ErkJggg==";break;case"upload":src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAH+SURBVBgZBcE9i11VGAbQtc/sO0OCkqhghEREAwpWAWUg8aMVf4KFaJEqQtAipTZWViKiCGOh2Ap2gmJhlSIWFsFOxUK0EsUM3pl79n4f12qHb3z3Fh7D83gC95GOJsDe0ixLk5Qq/+xv/Lw9Xd+78/HLX3Y8fXTr2nWapy4eCFKxG7Fby97SnDlYtMbxthyfzHO//nl85fNvfvnk8MbX5xa8IHx1518Vkrj54Q+qQms2vVmWZjdiu5ZR2rT01166/NCZg/2PFjwSVMU6yjoC1oq+x6Y3VbHdlXWExPd379nf7Nmejv2Os6OC2O4KLK0RNn3RNCdr2Z5GJSpU4o+/TkhaJ30mEk5HwNuvX7Hpi76wzvjvtIwqVUSkyjqmpHS0mki8+9mPWmuWxqYvGkbFGCUAOH/+QevYI9GFSqmaHr5wkUYTAlGhqiRRiaqiNes6SOkwJwnQEqBRRRJEgkRLJGVdm6R0GLMQENE0EkmkSkQSVVMqopyuIaUTs0J455VLAAAAAODW0U/GiKT0pTWziEj44PZ1AAAAcPPqkTmH3QiJrlEVDXDt0qsAAAAAapa5BqUnyaw0Am7//gUAAAB49tEXzTmtM5KkV/y2G/X4M5fPao03n/sUAAAAwIX7y5yBv9vhjW/fT/IkuSp5gJKElKRISYoUiSRIyD1tufs/IXxui20QsKIAAAAASUVORK5CYII=";break}return'<img src="'+src+'" alt="'+value+'" class="result-icon">'}function report_formatter(r,c,value,cell,item){if(value!=="report"){return null}return'<a href="#" class="report">report</a>'}function code_formatter(r,c,value,cell,item){return'<span class="inline-code ace_editor">'+value+"</span>"}return function($el){var wrapper,dataView=new Slick.Data.DataView,gridOptions={enableCellNavigation:false,enableColumnReorder:true,autoHeight:false,forceFitColumns:true,multiColumnSort:true},model=[{id:"type",name:" ",field:"type",width:25,resizable:false,formatter:message_type_formatter,cssClass:"centered"},{id:"nline",name:"L",field:"nline",width:25,resizable:false,cssClass:"centered"},{id:"ncol",name:"C",field:"ncol",width:25,resizable:false,cssClass:"centered"},{id:"detail",name:"Detail",field:"detail"},{id:"line",name:"Line",field:"line",formatter:code_formatter},{id:"timestamp",name:"Timestamp",field:"timestamp",width:170,resizable:false},{id:"report",name:"",field:"report",width:100,resizable:false,formatter:report_formatter}],layout=$el.parentsUntil("ui-layout-center").layout(),grid;function open_pane(){layout.open("south",false,false,true)}function close_pane(){layout.close("south")}function transform(type,id,msg){if("string"===typeof msg){var o={type:type,message:msg,timestamp:(new Date).toLocaleString(),nline:"",ncol:"",detail:msg,line:"",linemessage:""};if(type==="error"){o.report="report"}return o}if(!msg.position)return null;var position=msg.position.detail?msg.position.detail:{lineNum:msg.position.line,colNum:msg.position.column,detail:msg.message.split("\n").shift(),line:msg.position.text,message:msg.message};var o={type:type,message:msg.message,timestamp:new Date(msg.timestamp).toLocaleString(),nline:position.lineNum,ncol:position.colNum,detail:position.detail,line:position.line,linemessage:position.message};if(type==="error"){o.report="report"}return o}function reduced_resize(){clearInterval(this.killReducedResize);this.killReducedResize=setTimeout(function(){if(grid)grid.resizeCanvas()},20)}dataView.onRowsChanged.subscribe(function(e,args){if(!grid)return;grid.invalidateRows(args.rows);grid.render();grid.onClick.subscribe(function(e){var cell=grid.getCellFromEvent(e),data=dataView.getItem(cell.row),line=data.nline,column=data.ncol,type=data.type;if(model[cell.cell].id==="report"&&data.report==="report"){$(wrapper).trigger("report",data)}else{$(wrapper).trigger("goto",{line:line,column:column,type:type})}})});setTimeout(function(){grid=new Slick.Grid($el,dataView,model,gridOptions)},1e3);var history=[],counter=0;return wrapper={displayHistory:function(){setMessages(history)},clear:function(){dataView.setItems([],"#id")},setMessages:function(messages){if(messages.length)open_pane();else close_pane();messages.map(function(msg){if(msg["#id"]){return}else{msg["#id"]=++counter;history.push(msg)}if(!msg["timestamp"])msg["timestamp"]=(new Date).toLocaleString();if(!msg["type"])msg["type"]="info";if(!msg["line"])msg["line"]=""});this.clear();dataView.beginUpdate();dataView.setItems(messages,"#id");dataView.endUpdate()},setEditorMessages:function(errors,warnings){var messages=errors.map(function(msg){return transform("error",++counter,msg)}).concat(warnings.map(function(msg){return transform("warning",++counter,msg)})).filter(function(o){return!!o});messages.sort(function(a,b){return a.nline-b.nline});this.setMessages(messages);setTimeout(function(){var i=messages.length,item;$(wrapper).trigger("resetHighlightSyntax");while(--i>=0){item=messages[i];$(wrapper).trigger("highlightSyntax",{line:item.nline,column:item.ncol,text:item.detail,type:item.type})}},100)},resize:reduced_resize}}});define("app/util/guid",[],function(){return function(){var S4=function(){return Math.floor(Math.random()*65536).toString(16)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()}});define("app/util/ie",[],function(){var version,undef,v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");while(div.innerHTML="<!--[if gt IE "+ ++v+"]><i></i><![endif]-->",all[0]);version=v>4?v:undef;return{isIE:function(){return!!version},version:function(){return version},greaterOrEqualTo:function(v){return version&&version>v}}});var JSON;if(!JSON)JSON={};!function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}();!function(){var Precog=window.Precog=window.Precog||{};var Util={Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=this._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);
enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return output},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}}output=this._utf8_decode(output);return output},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext},_utf8_decode:function(utftext){var string="",i=0;c=0,c1=0,c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}},makeBaseAuth:function(user,password){var tok=user+":"+password;var hash=this.Base64.encode(tok);return"Basic "+hash},extend:function(object,extensions){for(var name in extensions){if(object[name]===undefined){object[name]=extensions[name]}}},findScripts:function(fragment){var scripts=document.getElementsByTagName("SCRIPT"),result=[];for(var i=0;i<scripts.length;i++){var script=scripts[i];var src=script.getAttribute("src");if(src&&(typeof fragment=="string"&&src.indexOf(fragment)!=-1||src.match(fragment))){result.push(script)}}return result},findScript:function(fragment){var scripts=document.getElementsByTagName("SCRIPT");for(var i=0;i<scripts.length;i++){var script=scripts[i];var src=script.getAttribute("src");if(src&&(typeof fragment=="string"&&src.indexOf(fragment)!=-1||src.match(fragment))){return script}}return undefined},getPageConfiguration:function(){return Util.parseQueryParameters(window.location.href)},getConfiguration:function(){var config={},scripts=Util.findScripts(/precog[^\/.]*\.js/);for(var i=0;i<scripts.length;i++){Util.extend(config,Util.parseQueryParameters(scripts[i].getAttribute("src")))}return config},parseQueryParameters:function(url){var index=url.indexOf("?");if(index<0)return{};var query=url.substr(index+1);var keyValuePairs=query.split("&");var parameters={};for(var i=0;i<keyValuePairs.length;i++){var keyValuePair=keyValuePairs[i];var split=keyValuePair.split("=");var key=split[0];var value="";if(split.length>=2){value=decodeURIComponent(split[1]);if(value.substr(-1)==="#")value=value.substr(0,value.length-1)}parameters[key]=value}return parameters},addQueryParameters:function(url,query){var hashtagpos=url.lastIndexOf("#"),hash="";if(hashtagpos>=0){hash="#"+url.substr(hashtagpos+1);url=url.substr(0,hashtagpos)}var suffix=url.indexOf("?")==-1?"?":"&";var queries=[];for(var name in query){var value=(query[name]||"").toString();queries.push(name+"="+encodeURIComponent(value))}if(queries.length===0)return url+hash;else return url+suffix+queries.join("&")+hash},getConsole:function(enabled){var console=enabled?window.console:undefined;if(!console){console={};console.log=function(){};console.debug=function(){};console.info=function(){};console.warn=function(){};console.error=function(){}}return console},getProtocol:function(){var src=Util.findScript(/precog[^\/.]*\.js/).getAttribute("src");if(src&&"https:"==src.substr(0,6))return"https:";else return"http:"},createCallbacks:function(success,failure,msg){var successFn=function(fn,msg){if($.Config.enableLog){return function(result){if(result!==undefined){$.Log.info("Success: "+msg+": "+JSON.stringify(result))}else{$.Log.info("Success: "+msg)}if(fn)fn(result)}}else{return fn?fn:function(){}}};var failureFn=function(fn,msg){if($.Config.enableLog){return function(code,reason){$.Log.error("Failure: "+msg+": code = "+code+", reason = "+reason);if(fn)fn(code,reason)}}else{return fn?fn:function(){}}};return{success:successFn(success,msg),failure:failureFn(failure,msg)}},removeTrailingSlash:function(path){if(path.length===0)return path;else if(path.substr(path.length-1)=="/")return path.substr(0,path.length-1);else return path},removeDuplicateSlashes:function(path){return path.replace(/[\/]+/g,"/")},trimPath:function(path){if(!path)throw Error("path cannot be undefined");path=Util.removeDuplicateSlashes("/"+path+"/");if(path.substr(0,1)==="/")path=path.substr(1);if(path.substr(-1)==="/")path=path.substr(0,path.length-1);return path},parseResponseHeaders:function(headerStr){var headers={};if(!headerStr){return headers}var headerPairs=headerStr.split("\r\n");for(var i=0;i<headerPairs.length;i++){var headerPair=headerPairs[i];var index=headerPair.indexOf(": ");if(index>0){var key=headerPair.substring(0,index);var val=headerPair.substring(index+2);headers[key]=val}}return headers},actionUrlVersionNo:function(host,service,action,options){return host+service+"/"+(action?action+"/":"")},actionUrlVersion1:function(host,service,action,options){return host+service+"/v1/"+(action?action+"/":"")},actionUrlVersion2:function(host,service,action,options){var preservice;switch(service){case"ingest":case"jobs":case"security":case"accounts":preservice=service;service=null;break;case"meta":case"analytics":preservice="analytics";break}return host+preservice+"/v2/"+(service?service+"/":"")+(action?action+"/":"")},actionUrl:function(service,action,options){if("undefined"===typeof options&&"object"===typeof action){options=action;action=null}options=options||{};var host=options.analyticsService||$.Config.analyticsService,version=options.version||$.Config.version;return this["actionUrlVersion"+(version==="false"?"No":version)](host,service,action,options)},actionUrl2:function(service,action,options){if("undefined"===typeof options&&"object"===typeof action){options=action;action=null}options=options||{};var host=options.analyticsService||$.Config.analyticsService,version=options.version||$.Config.version;return host+service+(version==="false"?"":"/v"+version)+"/"+(action?action:"")},actionPath:function(path,options){path=path&&this.trimPath(path);var prefix=options&&options.basePath||$.Config.basePath||false;if(prefix==="/")prefix=false;if(prefix&&path){prefix=this.trimPath(prefix);path=prefix+"/"+path}else if(prefix){path=this.trimPath(prefix)}else if(!path){path=""}return path}};var Network={doAjaxRequest:function(options){var method=options.method||"GET";var query=options.query||{};var path=Util.addQueryParameters(options.path,query);var content=options.content;var headers=options.headers||{};var success=options.success;var failure=options.failure||function(){};var progress=options.progress||function(){};$.Log.warn("HTTP "+method+" "+path+": headers("+JSON.stringify(headers)+"), content("+JSON.stringify(content)+")");var createNewXmlHttpRequest=function(){if(window.XMLHttpRequest){return new XMLHttpRequest}else{return new ActiveXObject("Microsoft.XMLHTTP")}};var request=createNewXmlHttpRequest();request.open(method,path);if(request.upload){request.upload.onprogress=function(e){if(e.lengthComputable){progress({loaded:e.loaded,total:e.total})}}}request.onreadystatechange=function(){var headers=request.getAllResponseHeaders&&Util.parseResponseHeaders(request.getAllResponseHeaders())||{};if(request.readyState===4){if(request.status===200||request.status===202||request.status===204||request.status==="OK"||request.code==="NoContent"){if(request.responseText!==null&&request.responseText.length>0){var txt=this.responseText,json=JSON.parse(txt);success(json,headers)}else{success(undefined,headers)}}else{failure(request.status,request.responseText?JSON.parse(request.responseText):request.statusText,headers)}}};for(var name in headers){var value=headers[name];request.setRequestHeader(name,value)}if(content!==undefined){window.console.log(content);window.console.log(headers["Content-Type"]);if(headers["Content-Type"]){request.send(content)}else{request.setRequestHeader("Content-Type","application/json");request.send(JSON.stringify(content))}}else{request.send(null)}return request},doJsonpRequest:function(options){var method=options.method||"GET";var query=options.query||{};var path=Util.addQueryParameters(options.path,query);var content=options.content;var headers=options.headers||{};var success=options.success;var failure=options.failure||function(){};$.Log.warn("HTTP "+method+" "+path+": headers("+JSON.stringify(headers)+"), content("+JSON.stringify(content)+")");var random=Math.floor(Math.random()*214748363);var funcName="PrecogJsonpCallback"+random.toString();window[funcName]=function(content,meta){if(meta.status.code===200||meta.status.code==="OK"||meta.status.code==="NoContent"||meta.status.code==="Created"){success(content,meta.headers)}else{failure(meta.status.code,content?content:meta.status.reason,meta.headers)}document.head.removeChild(document.getElementById(funcName));try{delete window[funcName]}catch(e){window[funcName]=undefined}};var extraQuery={};extraQuery.method=method;for(var _ in headers){extraQuery.headers=JSON.stringify(headers);break}extraQuery.callback=funcName;if(content!==undefined){extraQuery.content=JSON.stringify(content)}var fullUrl=Util.addQueryParameters(path,extraQuery);var script=document.createElement("SCRIPT");script.setAttribute("type","text/javascript");script.setAttribute("src",fullUrl);script.setAttribute("id",funcName);if(!document.head)document.head=document.getElementsByTagName("head")[0];document.head.appendChild(script)},createHttpInterface:function(doRequest){return{get:function(path,callbacks,query,headers){return doRequest({method:"GET",path:path,headers:headers,success:callbacks.success,failure:callbacks.failure,query:query})},put:function(path,content,callbacks,query,headers){return doRequest({method:"PUT",path:path,content:content,headers:headers,success:callbacks.success,failure:callbacks.failure,query:query})},post:function(path,content,callbacks,query,headers,progress){return doRequest({method:"POST",path:path,content:content,headers:headers,success:callbacks.success,failure:callbacks.failure,query:query,progress:progress})},remove:function(path,callbacks,query,headers){return doRequest({method:"DELETE",path:path,headers:headers,success:callbacks.success,failure:callbacks.failure,query:query})}}}};Precog.$={};var $=Precog.$;$.Util=Util;$.PageConfig=Util.getPageConfiguration();$.Config=Util.getConfiguration();$.Bool=function(v){return v===true||v===1||(v=(""+v).toLowerCase())=="true"||v=="on"||v=="1"};var current=window.location.hostname,service=current.substr(-11)==".precog.com"?current:"beta.precog.com";$.Util.extend($.Config,{analyticsService:"https://"+service+"/",useJsonp:"true",enableLog:"false",version:1});$.Config.analyticsService=$.PageConfig.analyticsService||$.Config.analyticsService;$.Config.apiKey=$.PageConfig.apiKey||$.Config.apiKey;$.Config.version=$.PageConfig.version||$.Config.version;$.Config.useJsonp=($.PageConfig.useJsonp||$.Config.useJsonp)==="true";$.Config.enableLog=$.PageConfig.enableLog||$.Config.enableLog;$.Http=function(){return $.Bool(Precog.$.Config.useJsonp)?Precog.$.Http.Jsonp:Precog.$.Http.Ajax};$.Http.Ajax=Network.createHttpInterface(Network.doAjaxRequest);$.Http.Jsonp=Network.createHttpInterface(Network.doJsonpRequest);var console=Util.getConsole($.Bool($.Config.enableLog));$.Log={log:function(text){console.log(text)},debug:function(text){console.debug(text)},info:function(text){console.info(text)},warn:function(text){console.warn(text)},error:function(text){console.error(text)}};var http=$.Http();$.Http.setUseJsonp=function(enabled){$.Config.useJsonp=enabled;http=$.Http()};$.Log.setEnable=function(enabled){$.Config.enableLog=enabled;console=Util.getConsole($.Bool($.Config.enableLog))};$.Store=function(){function h(){try{return d in b&&b[d]}catch(a){return!1}}function i(){try{return e in b&&b[e]&&b[e][b.location.hostname]}catch(a){return!1}}var a={},b=window,c=b.document,d="localStorage",e="globalStorage",f="__storejs__",g;a.disabled=!1,a.set=function(a,b){},a.get=function(a){},a.remove=function(a){},a.clear=function(){},a.transact=function(b,c,d){var e=a.get(b);d||(d=c,c=null),typeof e=="undefined"&&(e=c||{}),d(e),a.set(b,e)},a.getAll=function(){},a.getKeys=function(){},a.serialize=function(a){return JSON.stringify(a)},a.deserialize=function(a){return typeof a!="string"?undefined:JSON.parse(a)};if(h())g=b[d],a.set=function(b,c){if(c===undefined)return a.remove(b);g.setItem(b,a.serialize(c))},a.get=function(b){return a.deserialize(g.getItem(b))},a.remove=function(a){g.removeItem(a)},a.clear=function(){g.clear()},a.getAll=function(){var b={};for(var c=0;c<g.length;++c){var d=g.key(c);b[d]=a.get(d)}return b},a.getKeys=function(){var a=[];for(var b=0;b<g.length;++b)a.push(g.key(b));return a};else if(i())g=b[e][b.location.hostname],a.set=function(b,c){if(c===undefined)return a.remove(b);g[b]=a.serialize(c)},a.get=function(b){return a.deserialize(g[b]&&g[b].value)},a.remove=function(a){delete g[a]},a.clear=function(){for(var a in g)delete g[a]},a.getAll=function(){var b={};for(var c=0;c<g.length;++c){var d=g.key(c);b[d]=a.get(d)}return b},a.getKeys=function(){var a=[];for(var b=0;b<g.length;++b)a.push(g.key(b));return a};else if(c.documentElement.addBehavior){var j,k;try{k=new ActiveXObject("htmlfile"),k.open(),k.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),k.close(),j=k.w.frames[0].document,g=j.createElement("div")}catch(l){g=c.createElement("div"),j=c.body}function m(b){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(g),j.appendChild(g),g.addBehavior("#default#userData"),g.load(d);var e=b.apply(a,c);return j.removeChild(g),e}}function n(a){return"_"+a}a.set=m(function(b,c,e){c=n(c);if(e===undefined)return a.remove(c);b.setAttribute(c,a.serialize(e)),b.save(d)}),a.get=m(function(b,c){return c=n(c),a.deserialize(b.getAttribute(c))}),a.remove=m(function(a,b){b=n(b),a.removeAttribute(b),a.save(d)}),a.clear=m(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(d);for(var c=0,e;e=b[c];c++)a.removeAttribute(e.name);a.save(d)}),a.getAll=m(function(b){var c=b.XMLDocument.documentElement.attributes;b.load(d);var e={};for(var f=0,g;g=c[f];++f)e[g]=a.get(g);return e}),a.getKeys=m(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(d);var c=[];for(var e=0,f;f=b[e];++e)c.push(f);return c})}try{a.set(f,f),a.get(f)!=f&&(a.disabled=!0),a.remove(f)}catch(l){a.disabled=!0}return typeof module!="undefined"&&typeof module!="function"?module.exports=a:typeof define=="function"&&define.amd&&define("libs/precog/precog",a),a}();var Md5=function(){};Md5.prototype={bitOR:function(a,b){var lsb=a&1|b&1;var msb31=a>>>1|b>>>1;return msb31<<1|lsb},bitXOR:function(a,b){var lsb=a&1^b&1;var msb31=a>>>1^b>>>1;return msb31<<1|lsb},bitAND:function(a,b){var lsb=a&1&(b&1);var msb31=a>>>1&b>>>1;return msb31<<1|lsb},addme:function(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535},rhex:function(num){var str="";var hex_chr="0123456789abcdef";var _g=0;while(_g<4){var j=_g++;str+=hex_chr.charAt(num>>j*8+4&15)+hex_chr.charAt(num>>j*8&15)}return str},str2blks:function(str){var nblk=(str.length+8>>6)+1,blks=[],_g1=0,_g=nblk*16;while(_g1<_g){blks[++_g1]=0}var i=0;while(i<str.length){blks[i>>2]|=str.charCodeAt(i)<<(str.length*8+i)%4*8;i++}blks[i>>2]|=128<<(str.length*8+i)%4*8;var l=str.length*8;var k=nblk*16-2;blks[k]=l&255;blks[k]|=(l>>>8&255)<<8;blks[k]|=(l>>>16&255)<<16;blks[k]|=(l>>>24&255)<<24;return blks},rol:function(num,cnt){return num<<cnt|num>>>32-cnt},cmn:function(q,a,b,x,s,t){return this.addme(this.rol(this.addme(this.addme(a,q),this.addme(x,t)),s),b)},ff:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,x,s,t)},gg:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,x,s,t)},hh:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,x,s,t)},ii:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,x,s,t)},doEncode:function(str){var x=this.str2blks(str),a=1732584193,b=-271733879,c=-1732584194,d=271733878,step,i=0;while(i<x.length){var olda=a;var oldb=b;var oldc=c;var oldd=d;step=0;a=this.ff(a,b,c,d,x[i],7,-680876936);d=this.ff(d,a,b,c,x[i+1],12,-389564586);c=this.ff(c,d,a,b,x[i+2],17,606105819);b=this.ff(b,c,d,a,x[i+3],22,-1044525330);a=this.ff(a,b,c,d,x[i+4],7,-176418897);d=this.ff(d,a,b,c,x[i+5],12,1200080426);c=this.ff(c,d,a,b,x[i+6],17,-1473231341);b=this.ff(b,c,d,a,x[i+7],22,-45705983);a=this.ff(a,b,c,d,x[i+8],7,1770035416);d=this.ff(d,a,b,c,x[i+9],12,-1958414417);c=this.ff(c,d,a,b,x[i+10],17,-42063);b=this.ff(b,c,d,a,x[i+11],22,-1990404162);a=this.ff(a,b,c,d,x[i+12],7,1804603682);d=this.ff(d,a,b,c,x[i+13],12,-40341101);c=this.ff(c,d,a,b,x[i+14],17,-1502002290);b=this.ff(b,c,d,a,x[i+15],22,1236535329);a=this.gg(a,b,c,d,x[i+1],5,-165796510);d=this.gg(d,a,b,c,x[i+6],9,-1069501632);c=this.gg(c,d,a,b,x[i+11],14,643717713);b=this.gg(b,c,d,a,x[i],20,-373897302);a=this.gg(a,b,c,d,x[i+5],5,-701558691);d=this.gg(d,a,b,c,x[i+10],9,38016083);c=this.gg(c,d,a,b,x[i+15],14,-660478335);b=this.gg(b,c,d,a,x[i+4],20,-405537848);a=this.gg(a,b,c,d,x[i+9],5,568446438);d=this.gg(d,a,b,c,x[i+14],9,-1019803690);c=this.gg(c,d,a,b,x[i+3],14,-187363961);b=this.gg(b,c,d,a,x[i+8],20,1163531501);a=this.gg(a,b,c,d,x[i+13],5,-1444681467);d=this.gg(d,a,b,c,x[i+2],9,-51403784);c=this.gg(c,d,a,b,x[i+7],14,1735328473);b=this.gg(b,c,d,a,x[i+12],20,-1926607734);a=this.hh(a,b,c,d,x[i+5],4,-378558);d=this.hh(d,a,b,c,x[i+8],11,-2022574463);c=this.hh(c,d,a,b,x[i+11],16,1839030562);b=this.hh(b,c,d,a,x[i+14],23,-35309556);a=this.hh(a,b,c,d,x[i+1],4,-1530992060);d=this.hh(d,a,b,c,x[i+4],11,1272893353);c=this.hh(c,d,a,b,x[i+7],16,-155497632);b=this.hh(b,c,d,a,x[i+10],23,-1094730640);a=this.hh(a,b,c,d,x[i+13],4,681279174);d=this.hh(d,a,b,c,x[i],11,-358537222);c=this.hh(c,d,a,b,x[i+3],16,-722521979);b=this.hh(b,c,d,a,x[i+6],23,76029189);a=this.hh(a,b,c,d,x[i+9],4,-640364487);d=this.hh(d,a,b,c,x[i+12],11,-421815835);c=this.hh(c,d,a,b,x[i+15],16,530742520);b=this.hh(b,c,d,a,x[i+2],23,-995338651);a=this.ii(a,b,c,d,x[i],6,-198630844);d=this.ii(d,a,b,c,x[i+7],10,1126891415);c=this.ii(c,d,a,b,x[i+14],15,-1416354905);b=this.ii(b,c,d,a,x[i+5],21,-57434055);a=this.ii(a,b,c,d,x[i+12],6,1700485571);d=this.ii(d,a,b,c,x[i+3],10,-1894986606);c=this.ii(c,d,a,b,x[i+10],15,-1051523);b=this.ii(b,c,d,a,x[i+1],21,-2054922799);a=this.ii(a,b,c,d,x[i+8],6,1873313359);d=this.ii(d,a,b,c,x[i+15],10,-30611744);c=this.ii(c,d,a,b,x[i+6],15,-1560198380);b=this.ii(b,c,d,a,x[i+13],21,1309151649);a=this.ii(a,b,c,d,x[i+4],6,-145523070);d=this.ii(d,a,b,c,x[i+11],10,-1120210379);c=this.ii(c,d,a,b,x[i+2],15,718787259);b=this.ii(b,c,d,a,x[i+9],21,-343485551);a=this.addme(a,olda);b=this.addme(b,oldb);c=this.addme(c,oldc);d=this.addme(d,oldd);i+=16}return this.rhex(a)+this.rhex(b)+this.rhex(c)+this.rhex(d)}};$.Md5=function(s){return(new Md5).doEncode(s)};var executeQuery=function(query,success,failure,options){options=options||{};var description="Precog query "+query,parameters={apiKey:options.apiKey||$.Config.apiKey};if(options.limit)parameters.limit=options.limit||$.Config.limit;if(options.basePath)parameters.basePath=options.basePath;if(options.skip)parameters.skip=options.skip;if(options.order)parameters.order=options.order;if(options.sortOn)parameters.sortOn=JSON.stringify(options.sortOn);if(options.sortOrder)parameters.sortOrder=options.sortOrder;if("undefined"!==typeof options.format){parameters.format=options.format}if(parameters.format==="detailed"){var old=success;success=function(o,headers){old(o&&o.data,o,headers)}}return http.post(Util.actionUrl("analytics","fs",options)+Util.actionPath(null,options),query,Util.createCallbacks(success,failure,description),parameters,{"Content-Type":"text/x-quirrel-script"})};Precog.asyncQuery=function(query,success,failure,options){options=options||{};var description="Precog query "+query,parameters={apiKey:options.apiKey||$.Config.apiKey,q:query};if(options.limit)parameters.limit=options.limit||$.Config.limit;if(options.basePath)parameters.basePath=options.basePath;if(options.skip)parameters.skip=options.skip;if(options.order)parameters.order=options.order;if(options.sortOn)parameters.sortOn=JSON.stringify(options.sortOn);if(options.sortOrder)parameters.sortOrder=options.sortOrder;parameters.timeout=options.timeout||18e5;parameters.prefixPath=options.prefixPath||$.Config.basePath;if("undefined"!==typeof options.format){parameters.format=options.format}if(parameters.format==="detailed"){var old=success;success=function(o,headers){old(o.data,o,headers)}}return http.post(Util.actionUrl2("analytics","queries",options),undefined,Util.createCallbacks(success,failure,description),parameters)};Precog.asyncQueryResults=function(jobId,success,failure,options){var description="Return results of job Id: "+jobId;parameters={apiKey:options&&options.apiKey||$.Config.apiKey};function complete(data){if(data){data.completed=true}else{data={completed:false}}success(data)}return http.get(Util.actionUrl("analytics","queries",options)+jobId,Util.createCallbacks(complete,failure,description),parameters)};Precog.createAccount=function(email,password,success,failure,options){var description="Create account for "+email,post={email:email,password:password};if(options&&options.profile){post.profile=options.profile}http.post(Util.actionUrl("accounts","accounts",options),post,Util.createCallbacks(success,failure,description),null)};Precog.requestResetPassword=function(email,success,failure,options){var description="Request reset password for "+email;Precog.findAccount(email,function(accountId){http.post(Util.actionUrl("accounts","accounts",options)+accountId+"/password/reset",{email:email},Util.createCallbacks(success,failure,description),null)},failure)};Precog.findAccount=function(email,success,failure,options){var description="Find accounts for "+email;http.get(Util.actionUrl("accounts","accounts",options)+"search",Util.createCallbacks(function(data){try{success(data instanceof Array?data[0].accountId:data.accountId)}catch(e){failure(e)}},failure,description),{email:email})};Precog.describeAccount=function(email,password,accountId,success,failure,options){var description="Describe account "+accountId;http.get(Util.actionUrl("accounts","accounts",options)+accountId,Util.createCallbacks(success,failure,description),null,{Authorization:Util.makeBaseAuth(email,password)})};Precog.addGrantToAccount=function(email,password,accountId,grantId,success,failure,options){var description="Add grant "+grantId+" to account "+accountId;http.post(Util.actionUrl("accounts","accounts",options)+accountId+"/grants/",{grantId:grantId},Util.createCallbacks(success,failure,description),null,{Authorization:Util.makeBaseAuth(email,password)})};Precog.describePlan=function(email,password,accountId,success,failure,options){var description="Describe plan "+accountId;console.log(accountId);http.get(Util.actionUrl("accounts","accounts",options)+accountId+"/plan",Util.createCallbacks(success,failure,description),null,{Authorization:Util.makeBaseAuth(email,password)});console.log(Util.actionUrl("accounts","accounts",accountId,options)+"plan")};Precog.changePlan=function(email,password,accountId,type,success,failure,options){var description="Change plan to "+type+" for account "+accountId;http.put(Util.actionUrl("accounts","accounts",options)+accountId+"/plan",{type:type},Util.createCallbacks(success,failure,description),null,{Authorization:Util.makeBaseAuth(email,password)})};Precog.deletePlan=function(email,password,accountId,success,failure,options){var description="Delete account "+accountId;http.remove(Util.actionUrl("accounts","accounts",options)+accountId+"/plan",Util.createCallbacks(success,failure,description),null,{Authorization:Util.makeBaseAuth(email,password)})};Precog.listKeys=function(success,failure,options){var description="Precog Security List Keys",parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.get(Util.actionUrl("security","apikeys",options),Util.createCallbacks(success,failure,description),parameters)};Precog.createKey=function(grants,success,failure,options){var description="Create security Key ("+JSON.stringify(grants)+")",parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.post(Util.actionUrl("security","apikeys",options),grants,Util.createCallbacks(success,failure,description),parameters)};Precog.describeKey=function(apiKey,success,failure,options){var description="Describe security Key for "+apiKey,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.get(Util.actionUrl("security","apikeys",options)+apiKey,Util.createCallbacks(success,failure,description),parameters)};Precog.deleteKey=function(apiKey,success,failure,options){var description="Delete security Key for "+apiKey,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.remove(Util.actionUrl("security","apikeys",options)+apiKey,Util.createCallbacks(success,failure,description),parameters)};Precog.retrieveGrants=function(apiKey,success,failure,options){var description="Retrieve security grants for "+apiKey,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.get(Util.actionUrl("security","apikeys",options)+apiKey+"/grants/",Util.createCallbacks(success,failure,description),parameters)};Precog.addGrantToKey=function(apiKey,grant,success,failure,options){var description="Add grant "+JSON.stringify(grant)+" to "+apiKey,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.post(Util.actionUrl("security","apikeys",options)+apiKey+"/grants/",grant,Util.createCallbacks(success,failure,description),parameters)};Precog.removeGrant=function(apiKey,grantId,success,failure,options){var description="Remove grant "+grantId+" from key "+apiKey,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.remove(Util.actionUrl("security","apikeys",options)+apiKey+"/grants/"+grantId,Util.createCallbacks(success,failure,description),parameters)};Precog.createGrant=function(grant,success,failure,options){var description="Create new grant "+JSON.stringify(grant),parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.post(Util.actionUrl("security","grants",options),grant,Util.createCallbacks(success,failure,description),parameters)};Precog.describeGrant=function(grantId,success,failure,options){var description="Describe grant "+grantId,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.get(Util.actionUrl("security","grants",options)+grantId,Util.createCallbacks(success,failure,description),parameters)};Precog.deleteGrant=function(grantId,success,failure,options){var description="Delete grant "+grantId,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.remove(Util.actionUrl("security","grants",options)+grantId,Util.createCallbacks(success,failure,description),parameters)};Precog.listGrantChildren=function(grantId,success,failure,options){var description="List children grant "+grantId,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.get(Util.actionUrl("security","grants",options)+grantId+"/children/",Util.createCallbacks(success,failure,description),parameters)};Precog.createGrantChild=function(grantId,child,success,failure,options){var description="Create child grant "+JSON.stringify(child)+" for "+grantId,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.post(Util.actionUrl("security","grants",options)+grantId+"/children/",child,Util.createCallbacks(success,failure,description),parameters)};Precog.children=function(path,success,failure,options){path=Util.trimPath(path);var description="List children path of "+path,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");http.get(Util.actionUrl("meta","fs")+Util.actionPath(path,options),Util.createCallbacks(function(result){success(result["children"])},failure,description),parameters)};Precog.retrieveMetadata=function(path,success,failure,options){path=Util.trimPath(path);options=options||{type:""};var description="Precog retrieve metadata "+options.type,parameters={apiKey:options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");return http.get(Util.actionUrl("meta","fs",options)+Util.actionPath(path,options)+"#"+options.type,Util.createCallbacks(success,failure,description),parameters)};function occursAtLeast(needle,haystack,times){var pos=0,len=needle.length||1;while((pos=haystack.indexOf(needle,pos))>=0){pos+=len;times--;if(times===0)return true}return false}Precog.ingest=function(path,content,type,success,failure,options){options=options||{};path=Util.trimPath(path);if(!content)throw Error("argument 'content' must contain a non empty value formatted as described by type");var description="Ingest events in "+type+" format",parameters={apiKey:options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");switch(type.toLowerCase()){case"application/x-gzip":case"gz":case"gzip":type="application/x-gzip";break;case"zip":type="application/zip";break;case"application/json":case"json":type="application/json";break;case"text/csv":case"csv":type="text/csv";if(options.delimiter)parameters.delimiter=options.delimiter;if(options.quote)parameters.quote=options.quote;if(options.escape)parameters.escape=options.escape;break;default:throw Error("argument 'type' must be 'json' or 'csv'")}if(options.ownerAccountId)parameters.ownerAccountId=options.ownerAccountId;$.Http.Ajax.post(Util.actionUrl("ingest",(options.async?"async":"sync")+"/fs",options)+Util.actionPath(path,options),content,Util.createCallbacks(success,failure,description),parameters,{"Content-Type":type},options.progress?options.progress:null)};Precog.store=function(path,event,success,failure,options){path=Util.trimPath(path);if(event===null||"undefined"===typeof event)throw Error("argument 'events' cannot be null or undefined");var description="Store event ("+JSON.stringify(event)+")",parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(options&&options.ownerAccountId)parameters.ownerAccountId=options.ownerAccountId;if(!parameters.apiKey)throw Error("apiKey not specified");http.post(Util.actionUrl("ingest",(options&&options.async?"async":"sync")+"/fs",options)+Util.actionPath(path,options),event,Util.createCallbacks(success,failure,description),parameters)};Precog.deletePath=function(path,success,failure,options){path=Util.trimPath(path);var description="Delete path: "+path,parameters={apiKey:options&&options.apiKey||$.Config.apiKey};if(!parameters.apiKey)throw Error("apiKey not specified");
http.remove(Util.actionUrl("ingest","async/fs",options)+Util.actionPath(path,options),Util.createCallbacks(success,failure,description),parameters)};Precog.cache=function(){var VALUE_PREFIX="PRECOG_Q_",DATE_PREFIX="PRECOG_D_",enabled,timeout=3e5;function idDate(id){return DATE_PREFIX+id}function idValue(id){return VALUE_PREFIX+id}function ids(){var keys=$.Store.getKeys(),len=VALUE_PREFIX.length,result=[],count=keys.length;for(var i=0;i<count;i++){var key=keys[i];if(key.substr(0,len)!=VALUE_PREFIX)continue;result.push(key.substr(len))}return result}function delayedCleanup(id){setTimeout(function(){cacheRemove(id)},timeout)}function cacheRemove(id){$.Store.remove(idDate(id));$.Store.remove(idValue(id))}function cacheGet(id){clearValueIfOld(id);var v=$.Store.get(idValue(id));if(v){delayedCleanup(id);return v}else{return null}}function cacheSet(id,value){$.Store.set(idDate(id),(new Date).getTime());$.Store.set(idValue(id),value)}function clearValueIfOld(id){var idd=idDate(id);var v;try{v=$.Store.get(idd)}catch(_){cacheRemove(id)}if(!v)return;if(v<(new Date).getTime()-timeout*1e3){cacheRemove(id)}}function cleanOld(){var list=ids();for(var i=0;i<list.length;i++)clearValueIfOld(list[i])}function clearAll(){var list=ids();for(var i=0;i<list.length;i++)cacheRemove(list[i])}function format(template,args){for(var key in args){template=template.split("${"+key+"}").join(args[key])}return template}function uid(s,options){s=(s+JSON.stringify(options)).replace(/\s+/gi," ");return $.Md5(s)}var queue={};function executeCachedQuery(query,success,failure,options){var id=uid(query,options),args=cacheGet(id);if(args){success.apply(null,args)}else if(queue[id]){queue[id].push({success:success,failure:failure})}else{queue[id]=[{success:success,failure:failure}];executeQuery(query,function(){args=Array.prototype.slice.call(arguments);try{cacheSet(id,args);delayedCleanup(id)}catch(e){Precog.cache.disable()}for(var i=0;i<queue[id].length;i++){queue[id][i].success.apply(null,args)}delete queue[id]},function(){for(var i=0;i<queue[id].length;i++){queue[id][i].failure.apply(null,arguments)}delete queue[id]},options)}}cleanOld();return{isEnabled:function(){return enabled},enable:function(){if($.Store.disabled){this.disable()}else{enabled=true;Precog.query=executeCachedQuery}},disable:function(){enabled=false;Precog.query=executeQuery},setTimeout:function(t){timeout=+t},cachedResults:function(){return ids().length},cachedIds:function(){return ids()},clear:function(){clearAll()}}}();Precog.cache.enable();if(window.ReportGrid&&window.ReportGrid.query){var r=window.ReportGrid;r.query.precog=function(q,options){return r.query.load(function(handler){Precog.query(q,handler,null,options)})};var format=function(q,data){for(var key in data){if(data.hasOwnProperty(key)){var re=new RegExp("\\$\\{"+key+"\\}","g");q=q.replace(re,data[key])}}return q};var f=function(q){return this.data({}).stackCross().asyncEach(function(data,handler){Precog.query(format(q,data),handler)})};var pk=r.$.pk;pk.rg_query_BaseQuery.prototype.precog=pk.rg_query_Query.prototype.precog=f;if(pk.rg_query_ReportGridBaseQuery)pk.rg_query_ReportGridBaseQuery.prototype.precog=pk.rg_query_ReportGridQuery.prototype.precog=f}}();define("app/util/querystring",[],function(){var params={};function getCtx(ctx){if(!ctx){ctx=window.location.search.substr(1)}else if(ctx.substr(0,"http://".length)==="http://"||ctx.substr(0,"https://".length)==="https://"){var arr=ctx.split("?");arr.shift();ctx=arr.join("?")}else if(ctx.substr(0,1)==="?"){ctx=ctx.substr(1)}ctx=ctx.split("#");return ctx[0]}function getParameterByName(name,ctx){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="(?:^|&)"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(ctx);if(results==null)return"";else return decodeURIComponent(results[1].replace(/\+/g," "))}function getAll(ctx){var values={},e,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,d=function(s){return decodeURIComponent(s.replace(a," "))},q=ctx;while(e=r.exec(q))values[d(e[1])]=d(e[2]);return values}return{get:function(name,ctx){ctx=getCtx(ctx);return getParameterByName(name,ctx)},all:function(ctx){ctx=getCtx(ctx);if(!params[ctx]){params[ctx]=getAll(ctx)}return params[ctx]}}});define("app/util/precog",["app/util/querystring","app/util/md5","app/util/guid","app/util/ie","app/util/config","libs/precog/precog"],function(qs,md5,guid,ie,localConfig){var config=window.Precog.$.Config,params=["apiKey","analyticsService","basePath","limit","theme"],contexts=[null],reprecog=/(require|precog|quirrel)[^.]*.js[?]/i;if(!ie.isIE())window.Precog.$.Http.setUseJsonp(window.Precog.$.PageConfig.useJsonp==="true");var precog=".precog.com",host=window.location.host;if(host.substr(host.length-precog.length)===precog){config.analyticsService=window.location.protocol+"//"+host+"/"}$("script").each(function(){if(!this.src||!reprecog.test(this.src))return;contexts.push(this.src)});function appendConfig(ctx){for(var i=params.length-1;i>=0;i--){var param=params[i],value=qs.get(param,ctx);if(value!==""){config[param]=value;params.splice(i,1)}}}while(contexts.length>0&&params.length>0){appendConfig(contexts.shift())}if(!config.limit)config.limit=localConfig.get("queryLimit");$(localConfig).on("queryLimit",function(_,value){config.limit=value});var map={},q={ingest:function(path,data,type,progress,complete,error){window.Precog.ingest(path,data,type,complete,error,{progress:progress})},deletePath:function(path,recursive,callback){window.Precog.deletePath(path,function(r){callback&&callback(true)},function(code,e){if(callback)callback(false);else throw"Unable To Delete Path"},{recursive:recursive})},query:function(text,options){var params={},id=guid(),limit=config.limit;options=options||{};params.limit=options.limit&&options.limit<config.limit?options.limit:config.limit;if(options.skip)params.offset=options.skip;if(options.sort){params.sortOn=options.sort.map(function(v){return v.field});params.sortOrder=options.sort[0].asc?"asc":"desc"}params.format="detailed";$(q).trigger("execute",[text,this.lastExecution,id]);var me=this,start=(new Date).getTime();map[id]=window.Precog.query(text,function(data,result,headers){if(!map[id]){return}var errors=result.errors,warnings=result.warnings;if(result.serverErrors&&result.serverErrors.length)errors=errors.concat(result.serverErrors);if(result.serverWarnings&&result.serverWarnings.length)warnings=warnings.concat(result.serverWarnings);me.lastExecution=(new Date).getTime()-start;var extra=null;if("undefined"!==typeof options.skip){extra={skip:options.skip,limit:options.limit,count:headers["X-Quirrel-Count"]||1e3}}delete map[id];$(q).trigger("completed",[id,data,errors,warnings,extra])},function(code,e){if(!map[id]){return}if("string"==typeof e)e={message:e};delete map[id];$(q).trigger("failed",[id,e])},params)||true},paths:function(parent,callback){window.Precog.retrieveMetadata(parent,function(r){var paths=r.children.map(function(path){path=path.substr(-1)==="/"&&path.substr(0,path.length-1)||path;if(path.substr(0,1)!=="/")path="/"+path;return path}).sort(),has_records=r.size||r.structure&&r.structure.children&&r.structure.children.length>0;callback(paths,has_records,r.size)},function(code,e){throw"Unable To Query Path API"})},is_demo:function(){var domains=["labcoat.precog.com","demo.precog.com"],service=config.analyticsService;for(var i=0;i<domains.length;i++){if(service.indexOf("http://"+domains[i]+"/")===0||service.indexOf("https://"+domains[i]+"/")===0){return true}}return false},config:config,lastExecution:2e3,cache:window.Precog.cache,calculateHash:function(){q.hash=md5(config.apiKey||"")}};$(q).on("abort",function(_,id){if("undefined"===map[id])return;var xhr=map[id]&&map[id].abort?map[id]:null;delete map[id];if(xhr)xhr.abort();$(q).trigger("aborted",id)});q.calculateHash();return q});define("app/editors",["app/util/precog","app/util/md5","app/util/storagemonitor","app/util/utils"],function(precog,md5,createStore,utils){return function(){var STORE_KEY="pg-quirrel-editors-"+precog.hash,store=createStore(STORE_KEY,{list:[],editors:{}});function createId(){return md5(""+Math.random()).substr(0,8)}var list=[];var last=function(){var re=/query #(\d+)$/,m,ID=-1;function extractNumber(s){if(m=re.exec(s)){return parseInt(m[1])}else{return 0}}return function(){if(ID===-1){if(list.length==0)return ID=0;var max=0;$.each(list,function(_,id){var name=store.get(editorKey(id)+".name");if(!name)return;var v=extractNumber(name);if(v>max)max=v});return ID=max}else{return++ID}}}();function anonymousName(){return"query #"+(1+last())}function createEditor(o){o=$.extend({name:null,hasname:false,dirty:false},o);if(!o.name)o.name=anonymousName();if(!o.id)o.id=createId();return o}function editorKey(id){return"editors."+id}function editorByName(name){var editors=store.get("editors");for(var key in editors){if(editors.hasOwnProperty(key)){var editor=editors[key];if(editor.name===name){return editor}}}return null}var currentIndex=null,wrapper={save:function(editor){editor.dirty=false;store.set(editorKey(editor.id),editor,true);$(wrapper).trigger("saved",editor);return editor},open:function(name,code){var editor=editorByName(name);if(editor){this.activate(this.getIndexById(editor.id));return}this.add({name:name,code:code,hasname:true});this.activate(list.length-1)},add:function(options){var editor=createEditor(options);list.push(editor.id);store.set("list",list);store.set(editorKey(editor.id),editor,true);$(wrapper).trigger("added",editor);return editor},remove:function(index){if(list.length==1)return;var id=list[index],name=this.getName(index);if(!id)return;store.remove(editorKey(id),true);if(index===0&&index===currentIndex){this.activate(1)}if(index===currentIndex){this.activate(index-1)}else if(index<currentIndex){currentIndex--}list.splice(index,1);store.set("list",list,true);$(wrapper).trigger("removed",name)},list:function(){return list.splice(0)},count:function(){return list.length},get:function(index){return store.get(this.getKey(index))},getIndexById:function(id){return list.indexOf(id)},getIndexByName:function(name){var editor=editorByName(name);if(!editor)return-1;return this.getIndexById(editor.id)},getById:function(id){return this.get(list.indexOf(id))},getKey:function(index){if("undefined"===typeof index)index=this.current();return editorKey(list[index])},load:function(){var cached=store.get("list"),values=$.map(cached,function(v){return store.get(editorKey(v))});for(var i=0;i<cached.length;i++){this.add(values[i])}},activate:function(index){this.deactivate(currentIndex);currentIndex=index;$(wrapper).trigger("activated",index)},deactivate:function(index){if(null===currentIndex)return;currentIndex=null;$(wrapper).trigger("deactivated",index)},current:function(){return currentIndex},setField:function(field,value,index){store.set(this.getKey(index)+"."+field,value,true)},getField:function(field,alt,index){return store.get(this.getKey(index)+"."+field,alt)},getCode:function(index){return this.getField("code","",index)},setCode:function(code,index){this.setField("code",code,index)},setDirty:function(index){this.setField("dirty",true,index)},getOutputData:function(index){return this.getField("output.result",null,index)},setOutputData:function(result,index){this.setField("output.result",result,index)},getOutputResults:function(index){return this.getField("output.results",null,index)},setOutputResults:function(results,index){this.setField("output.results",results,index)},getOutputType:function(index){return this.getField("output.type",null,index)},setOutputType:function(type,index){this.setField("output.type",type,index)},getOutputOptions:function(index){return this.getField("output.options",{},index)},setOutputOptions:function(options,index){this.setField("output.options",options,index)},getName:function(index){return this.getField("name","",index)},monitor:store.monitor};store.monitor.bind("list",function(_,values){var removed=utils.arrayDiff(list,values),added=utils.arrayDiff(values,list);if(removed.length+added.length==0)return;store.load();var removedIndexes=$.map(removed,function(v){return list.indexOf(v)});for(var i=0;i<removedIndexes.length;i++){wrapper.remove(removedIndexes[i])}for(var i=0;i<added.length;i++){wrapper.add(store.get(editorKey(added[i])))}});return wrapper}});define("app/history",["app/util/precog","app/util/storage","app/util/md5"],function(precog,createStorage,md5){var wrapper,DEFAULT_MAX_VALUES=20;function encode(name){var map=this.map||(this.map={});if(!map[name]){map[name]=md5(name)}return map[name]}return function(){var STORAGE_KEY="pg-quirrel-history-"+precog.hash,store=createStorage(STORAGE_KEY);return wrapper={revisions:function(name){var id=encode(name),history=store.get("history."+id,[]);return history.slice(0)},save:function(name,code,data){var id=encode(name),history=store.get("history."+id,[]);code=code.trim();if(code===(history[0]&&history[0].code))return;var value=data&&"undefined"!==typeof data[0]?data[0]:null,length=data&&data.length||0,timestamp=+new Date;history.unshift({timestamp:timestamp,code:code,sample:{first:value,length:length}});store.set("result."+id+"."+timestamp,data);var values=this.getHistoryLength();while(history.length>values){var removed=history.pop();store.remove("result."+id+"."+removed.timestamp)}store.set("history."+id,history,true)},load:function(name,index){var history=this.revisions(name),rev=history[index];if(!rev)return null;var id=encode(name);return{index:index,timestamp:rev.timestamp,code:rev.code,data:store.get("result."+id+"."+rev.timestamp)}},setHistoryLength:function(values){store.set("max_values",+values)},getHistoryLength:function(){return store.get("max_values",DEFAULT_MAX_VALUES)},remove:function(name){var id=encode(name)},rename:function(oldname,newname){var oldid=encode(oldname),newid=encode(newname),history=store.get("history."+oldid),results=store.get("result."+oldid);store.remove("history."+oldid);store.remove("result."+oldid);store.set("history."+newid,history);store.set("result."+newid,results,true)}}}});define("app/config/eggs",[],function(utils){return[{question:"who did this?",answer:"Franco Ponticelli ... the amazing programmer"},{question:"who made this?",answer:"Franco Ponticelli ... the amazing programmer"},{question:"how many zombies does it take to screw in a light-bulb?",answer:"1 precog zombie, and as many minions an necessary"},{question:"who is Matthew?",answer:"BOB"}]});define("app/gatrack",[],function(){var INTERACTION="interaction",wrapper,queue=[];function processQueue(){if(queue.length===0)return;if("undefined"===typeof _gaq){clearInterval(this.timer);this.timer=setTimeout(function(){processQueue()},1e3);return}var item=queue.shift();_gaq.push(["_trackEvent",item.category,item.action,item.label,item.value]);processQueue()}function enqueue(category,action,label,value){queue.push({category:category,action:action,label:label,value:value});processQueue()}return wrapper={trackEvent:function(category,action,label,value){enqueue(category,action,label,value)},trackQueryExecution:function(kind){this.trackEvent(INTERACTION,"execute-query",kind)}}});define("app/util/iframesubmit",["jquery"],function($){$.iframeSubmit=function(method){var uid="ifr_"+Math.floor(Math.random()*214783647),settings={action:"",method:"post",window:window,data:{},complete:function(){},remove_after:1e4},methods={init:function(options){settings=$.extend(settings,options);var $iframe=$('<iframe name="'+uid+'" style="display:none"></iframe>').appendTo("body"),$form=$('<form action="'+settings.action+'" method="'+settings.method.toUpperCase()+'" target="'+uid+'" style="display:none"></form>').appendTo("body");for(var key in settings.data){if(!settings.data.hasOwnProperty(key))continue;$('<input type="hidden" name="'+key+'" value="'+settings.data[key]+'">').appendTo($form)}$iframe.on("load",function(){$form.remove();setTimeout(function(){$iframe.remove()},settings.remove_after);settings.complete()});$form.submit();return this}};if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.iframeSubmit")}};return $.iframeSubmit});define("rtext!templates/dialog.support.html",[],function(){return'<div class="pg-dialog-support">\n    <div class="pg-message ui-content ui-state-highlight ui-corner-all"></div>\n    <div class="pg-email">\n        <label for="pg-input-email">Your email:</label>\n        <br>\n        <input id="pg-input-email" type="text" name="email" class="ui-widget-content"/>\n    </div>\n    <div class="pg-request">\n        <label for="pg-input-request">request</label>\n        <br>\n        <textarea id="pg-input-request" name="request" class="ui-widget-content"></textarea>\n    </div>\n    <div class="pg-error ui-content ui-state-error ui-corner-all"></div>\n</div>'});define("app/util/converters",[],function(){return{jsonToCsv:function(json){if(!json)return"";var rows=[],o=json[0],values,key,keys=[],requote=/[",\n\r]/g,ren=/\n/g,rer=/\r/g,req=/"/g,i;function escape(s){return s.replace(ren,"\\n").replace(rer,"\\r").replace(req,'""')}function value(v){if("string"==typeof v){if(v.match(requote)){return'"'+escape(v)+'"'}else{return v}}else if(v instanceof Array||v instanceof Object){return value(JSON.stringify(v))}else{return""+v}}values=[];if(o instanceof Object){for(key in o){if(o.hasOwnProperty(key)){keys.push(key);values.push(value(key))}}rows.push(values.join(","));for(i=0;i<json.length;i++){values=[];o=json[i];for(var j=0;j<keys.length;j++){values.push(value(o[keys[j]]))}rows.push(values.join(","))}}else{rows.push(value("value"));for(i=0;i<json.length;i++){rows.push(value(json[i]))}}return rows.join("\n")},minifyQuirrel:function(code){var stringcontexts=[{open:'"',close:'"',escape:"\\",start:-1,end:-1,handler:function(s){return'"'+s+'"'}}],allcontexts=stringcontexts.concat([{open:"--",close:"\n",escape:false,start:-1,end:-1,handler:function(s){return" "}},{open:"(-",close:"-)",escape:false,start:-1,end:-1,handler:function(s){return" "}}]),defaultHandler=function(s){return s.replace(/(\s+)/g," ")};function findEnd(s,ctx,pos){if(ctx.escape){var elen=ctx.escape.length,npos;while(true){npos=s.indexOf(ctx.close,pos);if(npos<0)return npos;pos=npos+ctx.close.length;if(s.substr(npos-elen,elen)===ctx.escape){continue}else{break}}return npos}else{return s.indexOf(ctx.close,pos)}}function selectContext(contexts,s,pos){var minpos=s.length,npos,ctx;for(var i=0;i<contexts.length;i++){npos=s.indexOf(contexts[i].open,pos);if(npos>=0&&npos<minpos){ctx=contexts[i];ctx.start=minpos=npos}}if(!ctx)return null;ctx.end=findEnd(s,ctx,ctx.start+ctx.open.length);return ctx}function process(contexts,s){var result="",ctx,pos=0;var guard=20;do{ctx=selectContext(contexts,s,pos);if(!ctx)break;if(ctx.start>pos){result+=defaultHandler(s.substr(pos,ctx.start-pos))}if(ctx.end>=0){result+=ctx.handler(s.substr(ctx.start+ctx.open.length,ctx.end-(ctx.start+ctx.open.length)));pos=ctx.end+ctx.close.length}else{pos=-1}guard--;if(guard<0){console.log("GUARD REACHED",s);break}}while(ctx&&pos<s.length&&pos>=0);if(ctx){result+=ctx.handler(s.substr(ctx.start+ctx.open.length))}else{result+=defaultHandler(s.substr(pos))}return result.trim()}return process(stringcontexts,process(allcontexts,code))}}});!function($){var history_handle_top,timer,body,jwindow=$(window),styling={jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert",closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s",hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"},bootstrap:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign",closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play",hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"}};var do_when_ready=function(){body=$("body");jwindow=$(window);jwindow.bind("resize",function(){if(timer)clearTimeout(timer);timer=setTimeout($.pnotify_position_all,10)})};if(document.body)do_when_ready();else $(do_when_ready);$.extend({pnotify_remove_all:function(){var notices_data=jwindow.data("pnotify");if(notices_data&&notices_data.length){$.each(notices_data,function(){if(this.pnotify_remove)this.pnotify_remove()})}},pnotify_position_all:function(){if(timer)clearTimeout(timer);timer=null;var notices_data=jwindow.data("pnotify");if(!notices_data||!notices_data.length)return;$.each(notices_data,function(){var s=this.opts.stack;if(!s)return;s.nextpos1=s.firstpos1;s.nextpos2=s.firstpos2;s.addpos2=0;s.animation=true});$.each(notices_data,function(){this.pnotify_position()})},pnotify:function(options){var animating;var opts;if(typeof options!="object"){opts=$.extend({},$.pnotify.defaults);opts.text=options}else{opts=$.extend({},$.pnotify.defaults,options)}for(var i in opts){if(typeof i=="string"&&i.match(/^pnotify_/))opts[i.replace(/^pnotify_/,"")]=opts[i]}if(opts.before_init){if(opts.before_init(opts)===false)return null}var nonblock_last_elem;var nonblock_pass=function(e,e_name){pnotify.css("display","none");var element_below=document.elementFromPoint(e.clientX,e.clientY);pnotify.css("display","block");var jelement_below=$(element_below);var cursor_style=jelement_below.css("cursor");pnotify.css("cursor",cursor_style!="auto"?cursor_style:"default");if(!nonblock_last_elem||nonblock_last_elem.get(0)!=element_below){if(nonblock_last_elem){dom_event.call(nonblock_last_elem.get(0),"mouseleave",e.originalEvent);dom_event.call(nonblock_last_elem.get(0),"mouseout",e.originalEvent)}dom_event.call(element_below,"mouseenter",e.originalEvent);dom_event.call(element_below,"mouseover",e.originalEvent)}dom_event.call(element_below,e_name,e.originalEvent);nonblock_last_elem=jelement_below};var styles=styling[opts.styling];var pnotify=$("<div />",{"class":"ui-pnotify "+opts.addclass,css:{display:"none"},mouseenter:function(e){if(opts.nonblock)e.stopPropagation();if(opts.mouse_reset&&animating=="out"){pnotify.stop(true);animating="in";pnotify.css("height","auto").animate({width:opts.width,opacity:opts.nonblock?opts.nonblock_opacity:opts.opacity},"fast")}if(opts.nonblock){pnotify.animate({opacity:opts.nonblock_opacity},"fast")}if(opts.hide&&opts.mouse_reset)pnotify.pnotify_cancel_remove();if(opts.sticker&&!opts.nonblock)pnotify.sticker.trigger("pnotify_icon").css("visibility","visible");if(opts.closer&&!opts.nonblock)pnotify.closer.css("visibility","visible")},mouseleave:function(e){if(opts.nonblock)e.stopPropagation();nonblock_last_elem=null;pnotify.css("cursor","auto");if(opts.nonblock&&animating!="out")pnotify.animate({opacity:opts.opacity},"fast");if(opts.hide&&opts.mouse_reset)pnotify.pnotify_queue_remove();if(opts.sticker_hover)pnotify.sticker.css("visibility","hidden");if(opts.closer_hover)pnotify.closer.css("visibility","hidden");$.pnotify_position_all()},mouseover:function(e){if(opts.nonblock)e.stopPropagation()},mouseout:function(e){if(opts.nonblock)e.stopPropagation()},mousemove:function(e){if(opts.nonblock){e.stopPropagation();nonblock_pass(e,"onmousemove")}},mousedown:function(e){if(opts.nonblock){e.stopPropagation();e.preventDefault();nonblock_pass(e,"onmousedown")}},mouseup:function(e){if(opts.nonblock){e.stopPropagation();e.preventDefault();nonblock_pass(e,"onmouseup")}},click:function(e){if(opts.nonblock){e.stopPropagation();nonblock_pass(e,"onclick")}},dblclick:function(e){if(opts.nonblock){e.stopPropagation();nonblock_pass(e,"ondblclick")}}});pnotify.opts=opts;pnotify.container=$("<div />",{"class":styles.container+" ui-pnotify-container "+(opts.type=="error"?styles.error:opts.type=="info"?styles.info:opts.type=="success"?styles.success:styles.notice)}).appendTo(pnotify);if(opts.cornerclass!="")pnotify.container.removeClass("ui-corner-all").addClass(opts.cornerclass);if(opts.shadow)pnotify.container.addClass("ui-pnotify-shadow");pnotify.pnotify_version="1.2.0";pnotify.pnotify=function(options){var old_opts=opts;if(typeof options=="string")opts.text=options;else opts=$.extend({},opts,options);for(var i in opts){if(typeof i=="string"&&i.match(/^pnotify_/))opts[i.replace(/^pnotify_/,"")]=opts[i]}pnotify.opts=opts;if(opts.cornerclass!=old_opts.cornerclass)pnotify.container.removeClass("ui-corner-all").addClass(opts.cornerclass);if(opts.shadow!=old_opts.shadow){if(opts.shadow)pnotify.container.addClass("ui-pnotify-shadow");else pnotify.container.removeClass("ui-pnotify-shadow")}if(opts.addclass===false)pnotify.removeClass(old_opts.addclass);else if(opts.addclass!==old_opts.addclass)pnotify.removeClass(old_opts.addclass).addClass(opts.addclass);if(opts.title===false)pnotify.title_container.slideUp("fast");else if(opts.title!==old_opts.title){if(opts.title_escape)pnotify.title_container.text(opts.title).slideDown(200);else pnotify.title_container.html(opts.title).slideDown(200)}if(opts.text===false){pnotify.text_container.slideUp("fast")}else if(opts.text!==old_opts.text){if(opts.text_escape)pnotify.text_container.text(opts.text).slideDown(200);else pnotify.text_container.html(opts.insert_brs?String(opts.text).replace(/\n/g,"<br />"):opts.text).slideDown(200)}pnotify.pnotify_history=opts.history;pnotify.pnotify_hide=opts.hide;if(opts.type!=old_opts.type)pnotify.container.removeClass(styles.error+" "+styles.notice+" "+styles.success+" "+styles.info).addClass(opts.type=="error"?styles.error:opts.type=="info"?styles.info:opts.type=="success"?styles.success:styles.notice);if(opts.icon!==old_opts.icon||opts.icon===true&&opts.type!=old_opts.type){pnotify.container.find("div.ui-pnotify-icon").remove();if(opts.icon!==false){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":opts.icon===true?opts.type=="error"?styles.error_icon:opts.type=="info"?styles.info_icon:opts.type=="success"?styles.success_icon:styles.notice_icon:opts.icon})).prependTo(pnotify.container)}}if(opts.width!==old_opts.width)pnotify.animate({width:opts.width});if(opts.min_height!==old_opts.min_height)pnotify.container.animate({minHeight:opts.min_height});if(opts.opacity!==old_opts.opacity)pnotify.fadeTo(opts.animate_speed,opts.opacity);if(!opts.closer||opts.nonblock)pnotify.closer.css("display","none");else pnotify.closer.css("display","block");if(!opts.sticker||opts.nonblock)pnotify.sticker.css("display","none");else pnotify.sticker.css("display","block");pnotify.sticker.trigger("pnotify_icon");if(opts.sticker_hover)pnotify.sticker.css("visibility","hidden");else if(!opts.nonblock)pnotify.sticker.css("visibility","visible");if(opts.closer_hover)pnotify.closer.css("visibility","hidden");else if(!opts.nonblock)pnotify.closer.css("visibility","visible");if(!opts.hide)pnotify.pnotify_cancel_remove();else if(!old_opts.hide)pnotify.pnotify_queue_remove();pnotify.pnotify_queue_position();return pnotify};pnotify.pnotify_position=function(dont_skip_hidden){var s=pnotify.opts.stack;if(!s)return;if(!s.nextpos1)s.nextpos1=s.firstpos1;if(!s.nextpos2)s.nextpos2=s.firstpos2;if(!s.addpos2)s.addpos2=0;var hidden=pnotify.css("display")=="none";if(!hidden||dont_skip_hidden){var curpos1,curpos2;var animate={};var csspos1;switch(s.dir1){case"down":csspos1="top";break;case"up":csspos1="bottom";break;case"left":csspos1="right";break;case"right":csspos1="left";break}curpos1=parseInt(pnotify.css(csspos1));if(isNaN(curpos1))curpos1=0;if(typeof s.firstpos1=="undefined"&&!hidden){s.firstpos1=curpos1;s.nextpos1=s.firstpos1}var csspos2;switch(s.dir2){case"down":csspos2="top";break;case"up":csspos2="bottom";break;case"left":csspos2="right";break;case"right":csspos2="left";break}curpos2=parseInt(pnotify.css(csspos2));if(isNaN(curpos2))curpos2=0;if(typeof s.firstpos2=="undefined"&&!hidden){s.firstpos2=curpos2;s.nextpos2=s.firstpos2}if(s.dir1=="down"&&s.nextpos1+pnotify.height()>jwindow.height()||s.dir1=="up"&&s.nextpos1+pnotify.height()>jwindow.height()||s.dir1=="left"&&s.nextpos1+pnotify.width()>jwindow.width()||s.dir1=="right"&&s.nextpos1+pnotify.width()>jwindow.width()){s.nextpos1=s.firstpos1;s.nextpos2+=s.addpos2+(typeof s.spacing2=="undefined"?25:s.spacing2);s.addpos2=0}if(s.animation&&s.nextpos2<curpos2){switch(s.dir2){case"down":animate.top=s.nextpos2+"px";break;case"up":animate.bottom=s.nextpos2+"px";break;case"left":animate.right=s.nextpos2+"px";break;case"right":animate.left=s.nextpos2+"px";break}}else pnotify.css(csspos2,s.nextpos2+"px");switch(s.dir2){case"down":case"up":if(pnotify.outerHeight(true)>s.addpos2)s.addpos2=pnotify.height();break;case"left":case"right":if(pnotify.outerWidth(true)>s.addpos2)s.addpos2=pnotify.width();break}if(s.nextpos1){if(s.animation&&(curpos1>s.nextpos1||animate.top||animate.bottom||animate.right||animate.left)){switch(s.dir1){case"down":animate.top=s.nextpos1+"px";break;case"up":animate.bottom=s.nextpos1+"px";break;case"left":animate.right=s.nextpos1+"px";break;case"right":animate.left=s.nextpos1+"px";break}}else pnotify.css(csspos1,s.nextpos1+"px")}if(animate.top||animate.bottom||animate.right||animate.left)pnotify.animate(animate,{duration:500,queue:false});switch(s.dir1){case"down":case"up":s.nextpos1+=pnotify.height()+(typeof s.spacing1=="undefined"?25:s.spacing1);break;case"left":case"right":s.nextpos1+=pnotify.width()+(typeof s.spacing1=="undefined"?25:s.spacing1);break}}};pnotify.pnotify_queue_position=function(milliseconds){if(timer)clearTimeout(timer);if(!milliseconds)milliseconds=10;timer=setTimeout($.pnotify_position_all,milliseconds)};pnotify.pnotify_display=function(){if(!pnotify.parent().length)pnotify.appendTo(body);if(opts.before_open){if(opts.before_open(pnotify)===false)return}if(opts.stack.push!="top")pnotify.pnotify_position(true);if(opts.animation=="fade"||opts.animation.effect_in=="fade"){pnotify.show().fadeTo(0,0).hide()}else{if(opts.opacity!=1)pnotify.show().fadeTo(0,opts.opacity).hide()}pnotify.animate_in(function(){if(opts.after_open)opts.after_open(pnotify);pnotify.pnotify_queue_position();if(opts.hide)pnotify.pnotify_queue_remove()})};pnotify.pnotify_remove=function(){if(pnotify.timer){window.clearTimeout(pnotify.timer);pnotify.timer=null}if(opts.before_close){if(opts.before_close(pnotify)===false)return}pnotify.animate_out(function(){if(opts.after_close){if(opts.after_close(pnotify)===false)return}pnotify.pnotify_queue_position();if(opts.remove)pnotify.detach()})};pnotify.animate_in=function(callback){animating="in";var animation;if(typeof opts.animation.effect_in!="undefined")animation=opts.animation.effect_in;else animation=opts.animation;if(animation=="none"){pnotify.show();callback()}else if(animation=="show")pnotify.show(opts.animate_speed,callback);else if(animation=="fade")pnotify.show().fadeTo(opts.animate_speed,opts.opacity,callback);else if(animation=="slide")pnotify.slideDown(opts.animate_speed,callback);else if(typeof animation=="function")animation("in",callback,pnotify);else pnotify.show(animation,typeof opts.animation.options_in=="object"?opts.animation.options_in:{},opts.animate_speed,callback)};pnotify.animate_out=function(callback){animating="out";var animation;if(typeof opts.animation.effect_out!="undefined")animation=opts.animation.effect_out;else animation=opts.animation;if(animation=="none"){pnotify.hide();callback()}else if(animation=="show")pnotify.hide(opts.animate_speed,callback);else if(animation=="fade")pnotify.fadeOut(opts.animate_speed,callback);else if(animation=="slide")pnotify.slideUp(opts.animate_speed,callback);else if(typeof animation=="function")animation("out",callback,pnotify);else pnotify.hide(animation,typeof opts.animation.options_out=="object"?opts.animation.options_out:{},opts.animate_speed,callback)};pnotify.pnotify_cancel_remove=function(){if(pnotify.timer)window.clearTimeout(pnotify.timer)
};pnotify.pnotify_queue_remove=function(){pnotify.pnotify_cancel_remove();pnotify.timer=window.setTimeout(function(){pnotify.pnotify_remove()},isNaN(opts.delay)?0:opts.delay)};pnotify.closer=$("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:opts.closer_hover?"hidden":"visible"},click:function(){pnotify.pnotify_remove();pnotify.sticker.css("visibility","hidden");pnotify.closer.css("visibility","hidden")}}).append($("<span />",{"class":styles.closer})).appendTo(pnotify.container);if(!opts.closer||opts.nonblock)pnotify.closer.css("display","none");pnotify.sticker=$("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:opts.sticker_hover?"hidden":"visible"},click:function(){opts.hide=!opts.hide;if(opts.hide)pnotify.pnotify_queue_remove();else pnotify.pnotify_cancel_remove();$(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){$(this).children().removeClass(styles.pin_up+" "+styles.pin_down).addClass(opts.hide?styles.pin_up:styles.pin_down)}).append($("<span />",{"class":styles.pin_up})).appendTo(pnotify.container);if(!opts.sticker||opts.nonblock)pnotify.sticker.css("display","none");if(opts.icon!==false){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":opts.icon===true?opts.type=="error"?styles.error_icon:opts.type=="info"?styles.info_icon:opts.type=="success"?styles.success_icon:styles.notice_icon:opts.icon})).prependTo(pnotify.container)}pnotify.title_container=$("<h4 />",{"class":"ui-pnotify-title"}).appendTo(pnotify.container);if(opts.title===false)pnotify.title_container.hide();else if(opts.title_escape)pnotify.title_container.text(opts.title);else pnotify.title_container.html(opts.title);pnotify.text_container=$("<div />",{"class":"ui-pnotify-text"}).appendTo(pnotify.container);if(opts.text===false)pnotify.text_container.hide();else if(opts.text_escape)pnotify.text_container.text(opts.text);else pnotify.text_container.html(opts.insert_brs?String(opts.text).replace(/\n/g,"<br />"):opts.text);if(typeof opts.width=="string")pnotify.css("width",opts.width);if(typeof opts.min_height=="string")pnotify.container.css("min-height",opts.min_height);pnotify.pnotify_history=opts.history;pnotify.pnotify_hide=opts.hide;var notices_data=jwindow.data("pnotify");if(notices_data==null||typeof notices_data!="object")notices_data=[];if(opts.stack.push=="top")notices_data=$.merge([pnotify],notices_data);else notices_data=$.merge(notices_data,[pnotify]);jwindow.data("pnotify",notices_data);if(opts.stack.push=="top")pnotify.pnotify_queue_position(1);if(opts.after_init)opts.after_init(pnotify);if(opts.history){var history_menu=jwindow.data("pnotify_history");if(typeof history_menu=="undefined"){history_menu=$("<div />",{"class":"ui-pnotify-history-container "+styles.hi_menu,mouseleave:function(){history_menu.animate({top:"-"+history_handle_top+"px"},{duration:100,queue:false})}}).append($("<div />",{"class":"ui-pnotify-history-header",text:"Redisplay"})).append($("<button />",{"class":"ui-pnotify-history-all "+styles.hi_btn,text:"All",mouseenter:function(){$(this).addClass(styles.hi_btnhov)},mouseleave:function(){$(this).removeClass(styles.hi_btnhov)},click:function(){$.each(notices_data,function(){if(this.pnotify_history){if(this.is(":visible")){if(this.pnotify_hide)this.pnotify_queue_remove()}else if(this.pnotify_display)this.pnotify_display()}});return false}})).append($("<button />",{"class":"ui-pnotify-history-last "+styles.hi_btn,text:"Last",mouseenter:function(){$(this).addClass(styles.hi_btnhov)},mouseleave:function(){$(this).removeClass(styles.hi_btnhov)},click:function(){var i=-1;var notice;do{if(i==-1)notice=notices_data.slice(i);else notice=notices_data.slice(i,i+1);if(!notice[0])break;i--}while(!notice[0].pnotify_history||notice[0].is(":visible"));if(!notice[0])return false;if(notice[0].pnotify_display)notice[0].pnotify_display();return false}})).appendTo(body);var handle=$("<span />",{"class":"ui-pnotify-history-pulldown "+styles.hi_hnd,mouseenter:function(){history_menu.animate({top:"0"},{duration:100,queue:false})}}).appendTo(history_menu);history_handle_top=handle.offset().top+2;history_menu.css({top:"-"+history_handle_top+"px"});jwindow.data("pnotify_history",history_menu)}}opts.stack.animation=false;pnotify.pnotify_display();return pnotify}});var re_on=/^on/,re_mouse_events=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,re_ui_events=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,re_html_events=/^(scroll|resize|(un)?load|abort|error)$/;var dom_event=function(e,orig_e){var event_object;e=e.toLowerCase();if(document.createEvent&&this.dispatchEvent){e=e.replace(re_on,"");if(e.match(re_mouse_events)){$(this).offset();event_object=document.createEvent("MouseEvents");event_object.initMouseEvent(e,orig_e.bubbles,orig_e.cancelable,orig_e.view,orig_e.detail,orig_e.screenX,orig_e.screenY,orig_e.clientX,orig_e.clientY,orig_e.ctrlKey,orig_e.altKey,orig_e.shiftKey,orig_e.metaKey,orig_e.button,orig_e.relatedTarget)}else if(e.match(re_ui_events)){event_object=document.createEvent("UIEvents");event_object.initUIEvent(e,orig_e.bubbles,orig_e.cancelable,orig_e.view,orig_e.detail)}else if(e.match(re_html_events)){event_object=document.createEvent("HTMLEvents");event_object.initEvent(e,orig_e.bubbles,orig_e.cancelable)}if(!event_object)return;this.dispatchEvent(event_object)}else{if(!e.match(re_on))e="on"+e;event_object=document.createEventObject(orig_e);this.fireEvent(e,event_object)}};$.pnotify.defaults={title:false,title_escape:false,text:false,text_escape:false,styling:"bootstrap",addclass:"",cornerclass:"",nonblock:false,nonblock_opacity:.2,history:true,width:"300px",min_height:"16px",type:"notice",icon:true,animation:"fade",animate_speed:"slow",opacity:1,shadow:true,closer:true,closer_hover:true,sticker:true,sticker_hover:true,hide:true,delay:8e3,mouse_reset:true,remove:true,insert_brs:true,stack:{dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25}}}(jQuery);define("libs/jquery/pnotify/jquery.pnotify",function(){});define("app/util/notification",["app/util/dom","libs/jquery/pnotify/jquery.pnotify"],function(dom){var timeout=5e3,shorttimeout=2500,longtimeout=1e4;function defaultHandler(v){return v}var map=[{src:"text",dst:"text",handler:defaultHandler},{src:"type",dst:"type",handler:defaultHandler},{src:"icon",dst:"notice_icon",handler:function(v){return"ui-icon "+v}},{src:"timeout",dst:"delay",handler:defaultHandler},{src:"hide",dst:"hide",handler:defaultHandler},{src:"before_open",dst:"before_open",handler:defaultHandler},{src:"before_close",dst:"before_close",handler:defaultHandler},{src:"after_open",dst:"after_open",handler:defaultHandler},{src:"after_close",dst:"after_close",handler:defaultHandler},{src:"history",dst:"history",handler:defaultHandler},{src:"sticker",dst:"sticker",handler:defaultHandler},{src:"width",dst:"width",handler:defaultHandler},{src:"min_height",dst:"min_height",handler:defaultHandler},{src:"opacity",dst:"opacity",handler:defaultHandler},{src:"stack",dst:"stack",handler:defaultHandler},{src:"shadow",dst:"shadow",handler:defaultHandler}];function applyOptions(src,dst,map){for(var i=0;i<map.length;i++){if("undefined"!==typeof src[map[i].src]){dst[map[i].dst]=map[i].handler(src[map[i].src])}}}return{error:function(title,o){o=o||{};o.type="error";return this.success(title,o)},success:function(title,o){o=o||{};var options={title:title,history:false,shadow:true,delay:timeout,sticker:false,insert_brs:false,styling:"jqueryui",title_escape:false,text_escape:false};applyOptions(o,options,map);if(!options.text)options.text="";options.text+='\n<div class="pg-clear"></div>';return $.pnotify(options)},context:function(title,o){o=o||{};o.voffset=o.voffset||25;o.width=o.width||"420px";var n=this.tip(title,o);var close=function(){$("body").off("mousedown",close);n.remove()};n.mousedown(function(e){e.stopPropagation()});$("body").on("mousedown",close);return n},copier:function(title,o){o=o||{};var keycombo=navigator.userAgent.indexOf("Mac OS X")!=-1?"CMD+C":"CTRL+C";o.text='<div class="pg-message">'+o.text+'</div><div class="pg-textarea"><textarea>'+o.copy+'</textarea></div><div class="pg-footer">'+keycombo+" to copy the link</div>";var n=this.context(title,o),area=n.find("textarea");area.click(function(){dom.selectText(area.get(0))});setTimeout(function(){dom.selectText(area.get(0))},500);return n},tip:function(title,o){o=o||{};o.history=false;o.sticker=false;o.hide=false;o.stack=false;o.shadow=true;o.type=o.type||"info";o.opacity=.95;o.voffset=o.voffset||40;o.hoffset=o.hoffset||10;var el=o.target||document.body,n=this.success(title,o);function position(){var left,top;if(o.x){left=o.x-n.outerWidth()/2+o.hoffset;top=o.y}else{var pos=$(el).offset(),vw=$(el).outerWidth(),ww=n.outerWidth();left=(vw-ww)/2+pos.left;top=pos.top}if(left<o.hoffset)left=o.hoffset;else if(left+ww+o.hoffset>$(window).width())left=$(window).width()-o.hoffset-ww;n.css({left:left+"px",top:top+o.voffset+"px"})}if(!o.x){$(window).on("resize",position);function remove_resize(){$(window).off("resize",position)}}var old=o.before_close;o.before_close=function(e){console.log(old);if(old)old.apply(this,e);remove_resize(this,e)};setTimeout(position,0);return n},main:function(title,o){o=o||{};o.history=false;o.sticker=false;o.width="500px";if(!o.min_height)o.min_height="300px";o.hide=false;o.stack=false;o.shadow=true;o.type="info";o.opacity=.95;var old=o.before_close;o.before_close=function(e){if(old)old.apply(this,e);remove_resize(this,e)};var n=this.success(title,o);function center(){var vw=$(window).width(),vh=$(window).height(),ww=n.outerWidth(),wh=n.outerHeight();n.css({left:(vw-ww)/2+"px",top:(vh-wh)/2+"px"})}$(window).on("resize",center);function remove_resize(){$(window).off("resize",center)}setTimeout(center,0);return n},quick:function(title,o){o=o||{};o.timeout=shorttimeout;return this.success(title,o)},progress:function(title,o){var cur_value=1,pnotify,$progress,$message,text=o.text||"";var k;o.hide=false;o.text='<div class="pg-message">'+text+'</div><div class="pg-progress-bar"></div>';o.before_open=function(pn){pnotify=pn;$progress=pn.find("div.pg-progress-bar");$message=pn.find("div.pg-message")};o.progressStart=function(message){clearInterval(k);pnotify.show();$message.removeClass("ui-state-error");$message.html(message);$progress.show();$progress.progressbar({value:0})};o.progressStep=function(value){var v=value*100;if(v>100)v=100;$progress.progressbar({value:v})};o.progressComplete=function(message){$message.html(message);$progress.hide();k=setTimeout(function(){pnotify.hide()},longtimeout)};o.progressError=function(err){$progress.hide();$message.addClass("ui-state-error").html(err);k=setTimeout(function(){pnotify.hide()},longtimeout)};return o.el=this.success(title,o)}}});define("app/util/ui",["app/util/dom","app/util/notification","jquery","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.progressbar","libs/jquery/ui/jquery.ui.tabs","libs/jquery/ui/jquery.ui.menu"],function(dom,notification){var wrapper,uid=0;$.fn.outerHTML=function(){return!this.length?this:this[0].outerHTML||function(el){var div=document.createElement("div");div.appendChild(el.cloneNode(true));var contents=div.innerHTML;div=null;return contents}(this[0])};return wrapper={clickOrDoubleClick:function(el,clickHandler,dblClickHandler){var sequence=0;el.click(function(e){sequence++;if(sequence===1){setTimeout(function(){if(sequence!==1){sequence=0;return}sequence=0;clickHandler.call(this,e)},200)}else{sequence=0;dblClickHandler.call(this,e)}})},button:function(el,o){el=$(el);o=$.extend({disabled:false,label:"",text:false,handler:function(){},icons:null},o);var options={disabled:o.disabled,text:o.text,label:o.label,icons:o.icon?{primary:o.icon}:o.icons};if(!options.icons)delete options.icons;var button=el.append("<button></button>").find("button:last").button(options).click(function(e){o.handler.apply(button.get(0));e.preventDefault();return false});if(o.description)wrapper.tooltip(button,o.description);return button},menu:function(el,o){el=$(el);o=$.extend({disabled:false},o);return el.menu({disabled:o.disabled})},contextmenu:function(el,o){if("string"===typeof el){el=$("body").append(el).find("div:last ul")}else{el=$(el)}var parent=el.parent(),o=this.menu(el,o);parent.hide();parent.mouseleave(function(){parent.hide()}).click(function(){parent.hide()});return parent},tabs:function(el,o){el=$(el);return el.tabs(o)},radios:function(el,actions){var current;el=$(el);if(actions){el.find("*").remove();uid++;$(actions).each(function(i,action){var name=action.group,id="pg-buttonset-"+uid+"-"+i,label=action.label;action.btn=el.append('<input type="radio" id="'+id+'" name="'+name+'" '+(action.checked?'checked="checked" ':"")+'/><label for="'+id+'">'+label+"</label>").find("#"+id);action.btn.click(function(){$(actions).each(function(i,a){a.checked=a.token===action.token});action.handler(action)});if(action.checked)current=action.btn;if(action.description)wrapper.tooltip(btn,action.description)})}var buttons=el.buttonset();if(current){setTimeout(function(){current.click()},100)}return buttons},checks:function(el,actions){el=$(el);if(actions){el.find("*").remove();uid++;$(actions).each(function(i,action){var name=action.name||"",checked=action.checked||false,id="pg-buttonset-"+uid+"-"+i,label=action.label;var btn=el.append('<input type="checkbox" id="'+id+'" name="'+name+'" '+(checked?'checked="checked" ':"")+'/><label for="'+id+'">'+label+"</label>").find("#"+id);btn.click(function(e){action.checked=!!btn.attr("checked");if(action.handler)action.handler.call(btn,e,action)});if(action.description)wrapper.tooltip(btn,action.description)})}return el.buttonset()},buttonset:function(el){el=$(el);return el.buttonset()},progressbar:function(el){el=$(el);return el.progressbar()},tooltip:function(el,html){var f="function"===typeof html?html:function(){return html};$(el).attr("title",f.apply($(el),[]));return el},edit:function(el,options){el=$(el);options=$.extend({handler:function(t){return null},cancel:function(){}},options);var text=options.text||el.text().trim(),html=el.html(),edit=el.html('<input type="text" name="pg-editable" id="pg-editable" value="'+text+'" />').find("#pg-editable"),tip;function exit(){if(tip)tip.remove();el.html(html);options.cancel()}$(document.body).one("mousedown",function(){exit()});edit.change(function(){var newtext=edit.val();if(newtext===text){return exit()}options.handler(newtext,function(error){if(tip)tip.remove();if(error){tip=notification.tip("invalid value",{target:el,text:error,type:"error"});return}else{el.html(newtext)}})}).keyup(function(e){switch(e.which){case 9:case 13:edit.trigger("change");break;case 27:exit();break}});edit.focus();var selectable=el.get(0);if(!dom.canSelect(selectable))selectable=edit.get(0);dom.selectText(selectable,0,text.length)}}});define("app/util/dialog-confirm",["rtext!templates/dialog.confirm.html","app/util/ui","app/util/dom","app/util/numbercaptcha","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog"],function(tplDialog,ui,dom,createCaptcha){var elDialog,currentHandler,cancelHandler,currentType;function reposition(){elDialog.dialog("option","position","center")}function init(){elDialog=$("body").append(tplDialog).find(".pg-dialog-confirm:last").dialog({modal:true,autoOpen:false,resizable:false,dialogClass:"pg-el",closeOnEscape:true,buttons:[{text:"OK",click:function(){elDialog.dialog("close");if(currentHandler)currentHandler();return true},ref:"ok"},{text:"Cancel",click:function(){$(this).dialog("close");close();if(cancelHandler)cancelHandler()},ref:"cancel"}]});function close(e,ui){$(window).off("resize",reposition)}elDialog.bind("dialogopen",function(){$(window).on("resize",reposition)});elDialog.bind("dialogclose",close)}var inited=false,oldMessage,oldCaptcha;return function(title,message,handler,options){options=options||{};if(!inited){init();inited=true}currentHandler=handler;elDialog.dialog("option","position","center");elDialog.dialog("option","title",title);elDialog.dialog("option","width",options.width&&options.width||300);elDialog.dialog("option","height",options.height&&options.height||"auto");elDialog.dialog("open");cancelHandler=options.cancel;var ok=elDialog.parent().find("button[ref=ok]"),el=elDialog.find(".pg-message");if(oldMessage)oldMessage.detach();if(oldCaptcha)oldCaptcha.detach();oldMessage=message=!message||"string"===typeof message?$("<div>"+(message||"")+"</div>"):message;el.append(message);if(options.captcha){ok.button("disable");var cont=oldCaptcha=$('<div class="captcha"></div>'),captcha=createCaptcha(100);cont.append('<div class="ui-widget"><div class="ui-state-highlight"><p>Solve this simple problem if you want to delete the data: <b>'+captcha.description+" is equal to?</b></p></div></div>");var input=$('<input type="number" step="1">').keyup(function(){var val=$(this).attr("value");if(val===""+captcha.result){cont.children("*").remove();cont.append('<div class="ui-widget"><div class="ui-state-highlight"><p>Good Job! Now click OK to confirm</p></div></div>');ok.button("enable")}});cont.append($('<div class="ui-widget"></div>').append("<p></p>").append(input));el.append(cont)}else{ok.button("enable")}}});define("app/bar-main",["app/util/ui","rtext!templates/toolbar.main.html","app/util/fullscreen","app/theme","app/util/dialog-confirm","rtext!templates/dialog.global.settings.html","app/util/valuemodel","app/util/objectmodel","app/util/precog","app/util/config"],function(ui,tplToolbar,fullscreen,theme,openDialog,tplGlobalSettings,valueModel,objectModel,precog,config){var ABOUT_LINK="http://precog.com/products/labcoat",BRAND_LINK="http://precog.com/products/labcoat",BRAND_CLASS="pg-precog";return function(el){var wrapper={hideWizard:function(){wizardBtn.hide()}};switch(document.location.host){case"labcoat.gridgain.com":BRAND_LINK="http://www.gridgain.com/";BRAND_CLASS="pg-gridgain";break}function updateBrand(anchor){anchor.attr("href",BRAND_LINK);anchor.find(".pg-logo").addClass(BRAND_CLASS)}function extractFromConfig(){return precog.config[this.name]}function intValidator(min,max){return function(value){value=trimFilter(value);if(""+parseInt(value)!==""+value)return"must be an integer value";value=parseInt(value);if(min&&value<min)return"must be greater than "+min;if(max&&value>max)return"must be less than "+max;return null}}function trimFilter(value){return(""+value).trim()}function onlyTrailingSlash(value){value=trimFilter(value);var ext=value.split(".").pop().toLowerCase();if(value.substr(-1)!=="/"&&ext!=="htm"&&ext!=="html"){value+="/"}if(value.length===1)return value;while(value.substr(0,1)==="/")value=value.substr(1);return value}function ensureSlashes(value){value=trimFilter(value);if(value.substr(0,1)!=="/")value="/"+value;if(value.length===1)return value;if(value.substr(-1)!=="/")value+="/";return value}function toUpper(value){return trimFilter(value).toUpperCase()}function urlValidator(value){if(!!value.match(/^((\/?[a-z0-9_\-.]+)+)\/?$/i)){return null}else{return"invalid url"}}function uriValidator(value){if(!!value.match(/^((\/?[a-z0-9_\-.:]+)+)\/?$/i)){return null}else{return"invalid url"}}var message=$(tplGlobalSettings),qsSettings=[{name:"analyticsService",extract:function(){var url=extractFromConfig.call(this);url=url.split("://").pop();return onlyTrailingSlash(url)},filter:onlyTrailingSlash,validator:urlValidator},{name:"apiKey",extract:extractFromConfig,filter:toUpper,validator:function(value){if(!!value.match(/^([A-F0-9]{8})(-[A-F0-9]{4}){3}-([A-F0-9]{12})$/)){return null}else{return"invalid token pattern"}}},{name:"basePath",extract:extractFromConfig,defaultValue:"/",filter:ensureSlashes,validator:function(value){if(!!value.match(/^(\/?([a-z0-9_\-]+)(\/[a-z0-9_\-]+)*\/?)$/i)){return null}else{return"invalid path pattern"}}},{name:"labcoatHost",extract:function(){return window.location.hostname+window.location.pathname},filter:onlyTrailingSlash,validator:uriValidator}],userSettings=[{name:"limit",extract:extractFromConfig,validator:intValidator(1,null),filter:trimFilter},{name:"theme",extract:function(){return theme.current||extractFromConfig.call(this)},validator:function(value){return theme.list().map(function(el){return el.token}).indexOf(value)>=0?null:"invalid theme"},callback:function(value){theme.set(value)}}];var qsModel=objectModel(),userModel=objectModel(),output=message.find(".labcoatUrl");var $theme=message.find("#theme");$.each(theme.groups(),function(group){var optgroup=$('<optgroup label="'+group+' themes"></optgroup>').appendTo($theme);$.each(this,function(){optgroup.append($('<option value="'+this.token+'">'+this.name+"</option>"))})});function changeUrlSuccess(){var url=buildUrlSuccess();output.attr("href",url);output.text(url);message.find(".output").show()}function buildUrlSuccess(){var labcoat="https://"+qsModel.get("labcoatHost");var params=[],t;params.push("apiKey="+encodeURIComponent(qsModel.get("apiKey")));t="https://"+qsModel.get("analyticsService");if(t!==labcoat)params.push("analyticsService="+encodeURIComponent(t));t=qsModel.get("basePath");if(t!="/")params.push("basePath="+encodeURIComponent(t));return labcoat+"?"+params.join("&")}function changeUrlError(){message.find(".output").hide();output.attr("href","#");output.text("")}function wireValueModel(objectModel){return function(index,info){var model=valueModel(info.extract()||info.defaultValue,info.validator,info.filter);objectModel.addField(info.name,model);var input=message.find("#"+info.name);input.val(model.get());input.on("change",function(){model.set(input.val())});model.on("validation.error",function(error,newvalue){input.parent().find(".input-error").html(error).show()});model.on("value.change",function(newvalue,oldvalue){input.val(newvalue);input.parent().find(".input-error").hide();if(info.callback){info.callback(newvalue)}})}}$(qsSettings).each(wireValueModel(qsModel));qsModel.on("validation.error",changeUrlError);qsModel.on("validation.success",changeUrlSuccess);$(userSettings).each(wireValueModel(userModel));if(qsModel.isValid())changeUrlSuccess();else changeUrlError();el.append(tplToolbar);var right=el.find(".pg-toolbar-context");updateBrand(el.find("a.pg-brand"));var email=precog.config.email;if(email){right.append('<span class="user">'+email+' (<a href="#" class="logout">logout</a>)</span>');right.find("a.logout").click(function(e){e.preventDefault();window.location.reload(false);return false})}var wizardBtn=ui.button(right,{icon:"ui-icon-star",description:"Getting Started Tutorial"}).click(function(){$(wrapper).trigger("startWizard")});ui.button(right,{icon:"ui-icon-info",description:"about Labcoat"}).click(function(){window.open(ABOUT_LINK)});ui.button(right,{icon:"ui-icon-gear",description:"application settings"}).click(function(){var currentTheme=theme.current,title="Application Settings",handler=function(){if(!userModel.getField("limit").isDefault()){var value=parseInt(userModel.get("limit"));config.set("queryLimit",value,true);$(config).trigger("queryLimit",value)}if(qsModel.isValid()&&qsModel.hasChanged()){window.location=buildUrlSuccess()}},options={width:500,height:440,cancel:function(){if(theme.current!==currentTheme){theme.set(currentTheme)}}};userModel.getField("theme").setDefault(theme.current);userModel.getField("limit").setDefault(config.get("queryLimit"));openDialog(title,message,handler,options)});ui.button(right,{icon:fullscreen.isFullScreen()?"ui-icon-newwin":"ui-icon-arrow-4-diag",description:"toggle fullscreen",handler:function(){fullscreen.toggle();if(fullscreen.isFullScreen()){$(this).find(".pg-icon").removeClass("ui-icon-newwin").addClass("ui-icon-arrow-4-diag")}else{$(this).find(".pg-icon").removeClass("ui-icon-arrow-4-diag").addClass("ui-icon-newwin")}}});return wrapper}});define("app/util/dialog-lineinput",["rtext!templates/dialog.lineinput.html","app/util/ui","app/util/dom","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog"],function(tplDialog,ui,dom){var elDialog,currentHandler,currentValidator,currentType,curreantPayload;function ok(e){elDialog.find(".pg-error").hide();var value=elDialog.find(".pg-lineinput input[type="+currentType+"]").val();if(currentValidator){var message=currentValidator(value);if(message){elDialog.find(".pg-error").html(message).show();if(e)e.preventDefault();return false}}if(currentHandler)currentHandler(value,curreantPayload);elDialog.dialog("close")}function reposition(){elDialog.dialog("option","position","center")}function init(){elDialog=$("body").append(tplDialog).find(".pg-dialog-lineinput:last").dialog({modal:true,autoOpen:false,resizable:false,dialogClass:"pg-el",width:"400px",closeOnEscape:true,buttons:[{text:"Close",click:function(){elDialog.dialog("close");return true}},{text:"OK",click:ok}]});elDialog.bind("dialogopen",function(){$(window).on("resize",reposition)});elDialog.bind("dialogclose",function(){$(window).off("resize",reposition)})}var inited=false;return function(title,message,label,defaultInput,validator,handler,type){if(!type)type="text";currentType=type;if(!inited){init();inited=true}var html=elDialog.find("input").outerHTML().replace(/type=["'][^"']*["']/,'type="'+type+'"');elDialog.find("input").replaceWith(html);currentValidator=validator;currentHandler=handler;elDialog.find(".pg-message").html(message||"");elDialog.find(".pg-lineinput input[type="+currentType+"]").val(defaultInput||"").keyup(function(e){if(e.keyCode==13)ok()}).change(function(e){curreantPayload=e.target.files});elDialog.find(".pg-error").hide();elDialog.find("label").html(label&&label+":"||"");elDialog.dialog("option","position","center");elDialog.dialog("option","title",title);elDialog.dialog("open")}});define("app/config/output-languages",["app/util/converters","app/util/precog","app/util/ui"],function(convert,precog,ui){return function(){var apiKey=precog.config.apiKey,service=precog.config.analyticsService,basePath=(precog.config.basePath||"").trim(),version=precog.config.version;if(basePath.substr(-1)==="/")basePath=basePath.substr(0,basePath.length-1);if(basePath.substr(0,1)==="/")basePath=basePath.substr(1);function escapeQuotes(s){return s.replace(/"/g,'\\"')}function urlEncode(query){return service+"analytics/"+(version&&version!==false&&version!=="false"?"v"+version+"/":"")+"fs/"+basePath+"?apiKey="+encodeURIComponent(apiKey)+"&q="+encodeURIComponent(convert.minifyQuirrel(query))}function removeProtocol(url){url=url.split("//").pop();if(url.substr(-1)==="/")url=url.substr(0,url.length-1);return url}return[{token:"qrl",name:"Quirrel",handler:function(code,options){if(options.compact)return convert.minifyQuirrel(code);else return"-- Quirrel query generated with Labcoat by Precog\n\n"+code.trim()},options:{compact:false},buildOptions:function(el,handler){var action=this;ui.checks(el,[{name:"options",checked:this.options.compact,label:"compact",description:"remove newlines and comments from query",handler:function(){action.options.compact=$(this).prop("checked");handler()}}])}},{token:"html",name:"HTML",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));var url="http://api.reportgrid.com/js/precog.js?apiKey="+apiKey+(version===false||version==="false"?"&version=false":"")+(basePath?"&basePath="+encodeURIComponent(basePath):"")+"&analyticsService="+service;return'<!DOCTYPE html>\n<html>\n<head>\n<title>Quirrel Query</title>\n<script src="'+url+'"></script>\n'+"<script>\n"+"function init() {\n"+"  // Quirrel query in JavaScript generated with Labcoat by Precog\n"+'  Precog.query("'+code+'",\n    function(data) {\n      /* do something with the data */\n      console.log(data);\n    },\n    function(error) { console.log(error); }\n  );\n'+"}\n"+'</script>\n</head>\n<body onload="init()">\n</body>\n</html>'}},{token:"js",name:"JavaScript",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));return"// Quirrel query in JavaScript generated with Labcoat by Precog\n\n"+'Precog.query("'+code+'",\n  function(data) { /* do something with the data */ },\n  function(error) { console.log(error); }\n);'}},{token:"php",name:"PHP",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));return"<?php\n\n"+"// Quirrel query in PHP generated with Labcoat by Precog\n\n"+'require_once("Precog.php");\n\n'+""+'$precog = new PrecogAPI("'+apiKey+'", "/'+(basePath?basePath+"/":"")+'", "'+service+'");\n$result = $precog->query("'+code+'");\n'+"if(false === $precog) {\n"+"  die($precog->errorMessage());\n"+"} else {\n"+"  // do something with $result here\n"+"}\n?>"}},{token:"python",name:"Python",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));var s=removeProtocol(service);return'api = precog.Precog("'+apiKey+'", "'+s+'", 443)\n'+'response = api.query("/'+basePath+'", "'+code+'")'}},{token:"ruby",name:"Ruby",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));var s=removeProtocol(service);return'api = Precog::Precog.new("'+apiKey+'", "'+s+'", 443)\n'+'response = api.query("/'+basePath+'", "'+code+'")'}},{token:"java",name:"Java",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));var s=removeProtocol(service);return"// import com.precog.api.Client;\n"+"// import com.precog.api.Path;\n"+"// import com.precog.api.ServiceBuilder;\n\n"+'Client testClient = new Client(ServiceBuilder.service("'+s+'"), "'+apiKey+'");\n'+'String result = testClient.query(new Path("/'+basePath+'"), "'+code+'");'}},{token:"cs",name:"C#",handler:function(code){code=escapeQuotes(convert.minifyQuirrel(code));return"// using Precog.Client;\n\n"+'PrecogClient api = ServiceStack.CreatePrecogClient(new Uri("'+service+'"), "'+apiKey+'");\n'+'string[] result = api.Query<string[]>("/'+basePath+'", "'+code+'");'}},{token:"url",name:"URL",handler:function(code){return urlEncode(code)}},{token:"curl",name:"cURL",handler:function(code){return'curl "'+escapeQuotes(urlEncode(code))+'"'}}]}});define("app/bar-status",["app/util/ui","rtext!templates/toolbar.status.html","rtext!templates/menu.editor.status.html"],function(ui,tplToolbar,tplMenu){return function(el,editor,layout){var wrapper;el.append(tplToolbar);var menu=ui.contextmenu(tplMenu);el.find(".pg-editor-settings-trigger").click(function(){if(menu.is(":visible")){menu.hide();return}var pos=$(this).offset();menu.css({position:"absolute",top:pos.top-menu.outerHeight()+"px",left:pos.left+"px"}).show()});function updateTabSize(){var size=""+editor.getTabSize();el.find(".pg-tab-size").text(size);menu.find(".pg-tab-size-option").each(function(){if($(this).attr("data-tab-size")===size){$(this).addClass("ui-state-active")}else{$(this).removeClass("ui-state-active")}})}menu.find(".pg-tab-size-option").click(function(){editor.setTabSize(parseInt($(this).attr("data-tab-size")))});function updateSoftTabs(){var toggle=editor.getUseSoftTabs();menu.find(".pg-soft-tabs").each(function(){if(toggle){$(this).addClass("ui-state-active")}else{$(this).removeClass("ui-state-active")}})}menu.find(".pg-soft-tabs").click(function(){editor.setUseSoftTabs(!editor.getUseSoftTabs())});menu.find(".pg-change-orientation").click(function(){layout.setIoVertical(!layout.isIoVertical())});$(editor).on("tabSizeChanged",updateTabSize);$(editor).on("useSoftTabsChanged",updateSoftTabs);$(editor).on("change",function(_,code){el.find(".pg-words").text(code.split(/\b[a-z0-9]+?\b/gi).length-1);el.find(".pg-characters").text(code.length)});$(editor).on("changeCursor",function(_,pos){el.find(".pg-line").text(pos.row+1);
el.find(".pg-column").text(pos.column+1)});updateTabSize();updateSoftTabs();var elProgressBar=ui.progressbar(el.find(".pg-progressbar"));elProgressBar.hide();var elExecutionTime=el.find(".pg-execution-time");elExecutionTime.hide();var counter=0,progress={startTime:null,killProgress:null,lastExecution:2e3,start:function(){counter++;clearInterval(progress.killProgress);progress.startTime=(new Date).getTime();progress.update();progress.killProgress=setInterval(function(){progress.update()},50);elExecutionTime.hide();elProgressBar.show()},update:function(){var delta=(new Date).getTime()-progress.startTime,percent=parseInt(delta/progress.lastExecution*1e3)/10;if(percent>100)percent=100;else if(percent<0)percent=0;elProgressBar.progressbar("value",percent)},end:function(success){if(success){progress.lastExecution=(new Date).getTime()-progress.startTime;elExecutionTime.html("query time "+progress.lastExecution+" ms")}counter--;if(counter>0)return;elProgressBar.hide();elExecutionTime.show();clearInterval(progress.killProgress)}};var lastRequest=2;return wrapper={startRequest:function(){progress.start()},endRequest:function(success){progress.end(success)}}}});define("app/editor/editor.ace",["require","ace/ace","app/util/ui","ace/mode/quirrel"],function(require,ace,ui){return function(el,vertical){var wrapper,sess,editor=ace.edit($(el).get(0));function execute(){$(wrapper).trigger("execute",wrapper.get())}function executeSelected(){$(wrapper).trigger("execute",editor.session.getTextRange(editor.getSelectionRange()))}editor.commands.addCommand({name:"executeSelection",bindKey:{win:"Shift-Ctrl-Return",mac:"Shift-Ctrl-Return|Command-Ctrl-Return",sender:"editor|cli"},exec:executeSelected});editor.commands.addCommand({name:"executeAll",bindKey:{win:"Shift-Return",mac:"Shift-Return|Command-Return",sender:"editor|cli"},exec:execute});editor.setShowPrintMargin(false);sess=editor.getSession();sess.setUseWrapMode(true);sess.setMode(new(require("ace/mode/quirrel").Mode));sess.getSelection().on("changeCursor",function(){$(wrapper).trigger("changeCursor",editor.getCursorPosition())});sess.getSelection().on("changeSelection",function(e){$(wrapper).trigger("changeSelection",editor.getSelection());if(editor.getSelection().isEmpty())runselected.hide();else runselected.show()});sess.on("change",function(){var killChange;function trigger(){$(wrapper).trigger("change",wrapper.get())}return function(){clearInterval(killChange);killChange=setTimeout(trigger,250)}}());var run=ui.button(el,{label:"run",text:true,icons:{primary:"ui-icon-circle-triangle-s"},handler:execute}),runselected=ui.button(el,{label:"run selected",text:true,icons:{primary:"ui-icon-circle-triangle-s"},handler:executeSelected});function orientButton(vertical){run.css({display:"block",position:"absolute",right:"25px",bottom:vertical?"10px":"25px",zIndex:100});runselected.css({display:"block",position:"absolute",right:"100px",bottom:vertical?"10px":"25px",zIndex:100});if(vertical){run.find(".ui-icon-circle-triangle-e").removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-s");runselected.find(".ui-icon-circle-triangle-e").removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-s")}else{run.find(".ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-e");runselected.find(".ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-e")}}orientButton(vertical);runselected.hide();var annotations=[];function removeAnnotations(){annotations=[];sess.setAnnotations(annotations);sess.removeListener("change",removeAnnotations)}!function(){var timer,renderer=editor.renderer,$content=$(el).find(".ace_content"),coords={};function findWord(){var pos=$.extend({},renderer.screenToTextCoordinates(coords.x,coords.y));$(wrapper).trigger("mouseovertext",[coords,pos])}$content.on("mousemove",function(e){coords.x=e.clientX;coords.y=e.clientY;clearInterval(timer);timer=setTimeout(findWord,500)});$content.on("mouseexit",function(){clearInterval(timer)})}();wrapper={get:function(){return sess.getValue()},set:function(code){sess.setValue(code)},setTabSize:function(size){if(size===sess.getTabSize())return;sess.setTabSize(size);$(wrapper).trigger("tabSizeChanged",size)},setUseSoftTabs:function(toogle){if(toogle===sess.getUseSoftTabs())return;sess.setUseSoftTabs(toogle);$(wrapper).trigger("useSoftTabsChanged",toogle)},getTabSize:function(){return sess.getTabSize()},getUseSoftTabs:function(toogle){return sess.getUseSoftTabs()},setTheme:function(theme){var path="ace/theme/"+theme;require([path],function(){editor.setTheme(path)})},resize:function(){editor.resize()},engine:function(){return"ace"},focus:function(){editor.focus()},highlightSyntax:function(row,column,text,type){if(annotations.length==0)sess.on("change",removeAnnotations);annotations.push({row:row,column:column,text:text,type:type});sess.setAnnotations(annotations)},resetHighlightSyntax:function(){removeAnnotations()},setCursorPosition:function(row,column){editor.navigateTo(row,column);editor.focus()},triggerExecute:execute,orientButton:orientButton};return wrapper}});define("app/util/output-json",["app/util/ui"],function(ui){var wrapper,elPanel=$('<div class="ui-widget"><pre class="json ui-content"></pre></div>'),elOutput=elPanel.find(".json");var spaces=2,toolbar,options,currentData;return wrapper={type:"json",name:"Json",panel:function(){return elPanel},update:function(data,o){if(data){currentData=data}else{data=currentData}options=o;if(!options.json)options.json={compact:false};var json=options.json.compact?JSON.stringify(data):JSON.stringify(data,null,spaces);toolbar.find('input[type="checkbox"]').attr("checked",options.json.compact).button("refresh");elOutput.text(json)},activate:function(){if(!toolbar){toolbar=$(this.toolbar).append("<div></div>").find("div:last");ui.checks(toolbar,{label:"compact",handler:function(action){if(options.json.compact===action.checked)return;options.json.compact=action.checked;wrapper.update(null,options);$(wrapper).trigger("optionsChanged",options)}})}toolbar.show()},deactivate:function(){toolbar.hide()},preferredDownloadFormat:function(options){return"json"}}});define("app/config/output-formats",["app/util/converters","app/util/ui"],function(convert,ui){return[{token:"json",name:"Json",handler:function(json,options){if(options.compact)return JSON.stringify(json);else return JSON.stringify(json,null,2)},options:{compact:false},buildOptions:function(el,handler){var action=this;ui.checks(el,[{name:"options",checked:this.options.compact,label:"compact json",description:"format json output with no newlines and minimal spacing",handler:function(){action.options.compact=$(this).prop("checked");handler()}}])}},{token:"csv",name:"CSV",handler:function(json){return convert.jsonToCsv(json)}}]});define("app/queries",["app/util/precog","app/util/storagemonitor","app/util/ui","app/util/utils","app/config/demo-queries","app/util/dialog-lineinput","app/util/dialog-confirm","rtext!templates/toolbar.folders.html","libs/jquery/jstree/vakata","libs/jquery/jstree/jstree","libs/jquery/jstree/jstree.sort","libs/jquery/jstree/jstree.ui","libs/jquery/jstree/jstree.themes"],function(precog,createStore,ui,utils,demo,openRequestInputDialog,openConfirmDialog,tplToolbar){var list=[],DEMO_TOKEN="5CDA81E8-9817-438A-A340-F34E578E86F8";return function(el){var STORE_KEY="pg-quirrel-queries-"+precog.hash;var store=createStore(STORE_KEY,{queries:DEMO_TOKEN===precog.config.apiKey?demo:{},folders:[]});var wrapper;el.find(".pg-toolbar").append(tplToolbar);var elDescription=el.find(".pg-toolbar-description"),elActions=el.find(".pg-toolbar-actions"),elContext=el.find(".pg-toolbar-context"),elMain=el.find(".pg-queries"),elTree=elMain.append('<div class="pg-tree"></div><div class="pg-message ui-content ui-state-highlight ui-corner-all"><p>You don\'t have saved queries. To save a query use the "disk" button on the editor toolbar.</p></div>').find(".pg-tree"),elRoot=elTree.append('<div class="pg-root"></div>').find(".pg-root"),elFolders=elTree.append('<div class="pg-structure"></div>').find(".pg-structure"),contextButtons=[{el:ui.button(elContext,{text:false,icon:"ui-icon-new-folder",description:"create folder",handler:function(){var path=$(selectedNode).attr("data-path");if(path==="/")path="";requestFolderCreationAt(path)}}),groups:["root","folder"]},{el:ui.button(elContext,{text:false,icon:"ui-icon-new-query",description:"create query",handler:function(){var folder=selectedNode,path=$(folder).attr("data-path");addQueryToFolder(path==="/"?-1:folder,"   ",function(el){function removeTempNode(){tree.jstree("delete_node",el)}ui.edit($(el).find("a"),{handler:function(name,callback){if(path.substr(-1)!=="/")path+="/";var err=utils.validateQueryName(name,path+name,wrapper);callback(err);if(!err){removeTempNode();var p=(path+name).substr(1);wrapper.queryCreate(p,"")}},cancel:function(){tree.jstree("delete_node",el)}})})}}),groups:["root","folder"]},{el:ui.button(elContext,{text:false,icon:"ui-icon-trash",description:"remove folder/query",handler:function(){var path=$(selectedNode).attr("data-path");if(path.substr(0,1)==="/")requestFolderRemovalAt(path);else wrapper.queryRemove(path)}}),groups:["folder","query"]},{el:ui.button(elContext,{text:false,icon:"ui-icon-rename",description:"rename query",handler:function(){var path=$(selectedNode).attr("data-path");path=path.split("/");var name=path.pop();path=path.length===0?"":path.join("/")+"/";ui.edit($(selectedNode).find("a"),{handler:function(newname,callback){var err=utils.validateQueryName(newname,path+newname,wrapper);callback(err);if(!err){renameQuery(path+name,path+newname)}}})}}),groups:["query"]}],selectedNode;elDescription.html("query manager");function renameQuery(oldname,newname){var code=store.get("queries."+utils.normalizeQueryName(oldname)).code;wrapper.queryCreate(newname,code);wrapper.queryRemove(oldname)}function refreshActions(){var path=selectedNode&&$(selectedNode).attr("data-path");$.each(contextButtons,function(){$(this.el).button("disable")});if(path){var type=path==="/"?"root":path.substr(0,1)==="/"?"folder":"query";$.each(contextButtons,function(){if(this.groups.indexOf(type)>=0)$(this.el).button("enable")})}}refreshActions();function requestFolderRemovalAt(path){var title="Remove Folder",message="Are you sure you want to remove the folder <i>"+(path||"/")+"</i> and all if its content? The operation cannot be undone!";openConfirmDialog(title,message,function(){var queries=store.get("queries",{}),subqueries=[],parent=path.substr(1)+"/",len=parent.length;for(var key in queries){if(queries.hasOwnProperty(key)){if(key.substr(0,len)===parent)subqueries.push(key)}}var subfolders=[path];parent=path+"/";len=parent.length;for(var i=0;i<folders.length;i++){if(folders[i].substr(0,len)===parent)subfolders.push(folders[i])}for(var i=0;i<subqueries.length;i++){wrapper.queryRemove(subqueries[i])}for(var i=0;i<subfolders.length;i++){utils.arrayRemove(folders,subfolders[i])}store.set("folders",folders,true);var node=getFolderNodeByPath(path);tree.jstree("delete_node",node)})}function requestFolderCreationAt(path){var title="Create Folder",message="Create a sub folder at: <i>"+(path||"/")+"</i>";openRequestInputDialog(title,message,"folder name","",function(name){if(null!=name&&name.match(/^[a-z0-9]+$/i))return null;else return"path name cannot be empty and it can only be composed of alpha-numeric characters"},function(name){var p=path+"/"+name;folders.push(p);store.set("folders",folders,true);whenPathExists(p)})}var tree=elFolders.jstree({plugins:["themes","sort","ui","dnd"],sort:function(a,b){if($(a).attr("rel")>$(b).attr("rel")){return 1}return $(a).attr("data-path")>$(b).attr("data-path")?1:-1},types:{query:{valid_children:"none"},folder:{valid_children:["folder","query"]}},ui:{select_limit:1,selected_parent_close:"deselect",select_multiple_modifier:false,select_range_modifier:false}});elRoot.html('<div class="jstree jstree-default"><a href="#" data-path="/"><ins class="jstree-icon jstree-themeicon"> </ins>/</a></div>');elRoot.find("a").mouseenter(function(){$(this).addClass("jstree-hovered")}).mouseleave(function(){$(this).removeClass("jstree-hovered")}).click(function(){tree.jstree("deselect_all");$(this).addClass("jstree-clicked");selectedNode=this;refreshActions()});tree.bind("click.jstree",function(){elRoot.find("a").removeClass("jstree-clicked");selectedNode=tree.jstree("get_selected");refreshActions()});function openQuery(id){$(wrapper).trigger("requestopenquery",store.get("queries."+utils.normalizeQueryName(id)))}function hideMessage(){elTree.show();elMain.find(".pg-message").hide()}function showMessage(){elTree.hide();elMain.find(".pg-message").show()}function pathFromId(id){if(id.substr(0,1)==="/")id=id.substr(1);var t=id.split("/");t.pop();if(t.length===0)return"/";else return"/"+t.join("/")}function getFolderNodeByPath(path){if(!path||path==="/")return-1;var list=tree.find("li[rel=folder]"),len=list.length;for(var i=0;i<len;i++){if($(list.get(i)).attr("data-path")===path){return list.get(i)}}return null}function getQueryNodeByPath(path){if(!path||path==="/")return-1;var list=tree.find("li[rel=query]"),len=list.length;for(var i=0;i<len;i++){if($(list.get(i)).attr("data-path")===path){return list.get(i)}}return null}function createNodeCreatedHandler(path,callback){var f=function(e,data){var r=data.rslt,el=$(r.obj[0]);if(el.attr("data-path")!==path)return;tree.unbind("create_node.jstree",f);if(callback)callback(el)};return f}function addQueryToFolder(folder,name,callback){tree.bind("create_node.jstree",createNodeCreatedHandler(name,function(el){tree.jstree("set_icon",el,"pg-tree-leaf");$(el).dblclick(function(){var path=$(this).attr("data-path");openQuery(path)});if(callback)callback(el)}));return tree.jstree("create_node",folder,{title:name.split("/").pop(),li_attr:{"data-path":name,rel:"query"}},"last")}function addChildFolder(parent,name,callback){if(!parent)parent=-1;var path=(parent===-1?"":$(parent).attr("data-path"))+"/"+name;tree.bind("create_node.jstree",createNodeCreatedHandler(path,function(el){$(el).find("a:first").dblclick(function(e){tree.jstree("toggle_node",selectedNode);e.preventDefault();return false});if(callback)callback(el)}));return tree.jstree("create_node",parent,{title:name,li_attr:{"data-path":path,rel:"folder"}},"last")}function whenPathExists(path,handler){handler=handler||function(){};var fpath=path,parent;while(null===(parent=getFolderNodeByPath(fpath))){var parts=fpath.substr(1).split("/");parts.pop();fpath="/"+parts.join("/")}if(fpath===path){handler(parent);return}var segment=path.substr(fpath.length).split("/").filter(function(v){return!!v}).shift();addChildFolder(parent,segment,function(el){whenPathExists(path,handler)})}function addQuery(id,name){var path=pathFromId(id);whenPathExists(path,function(el){addQueryToFolder(el,name);hideMessage()})}function removeQuery(path){var node=getQueryNodeByPath(path);if(!node)return;tree.jstree("delete_node",node)}var queries=store.get("queries");for(var id in queries){if(queries.hasOwnProperty(id)){addQuery(id,queries[id].name)}}var folders=store.get("folders",[]);for(var i=0;i<folders.length;i++){var path=folders[i];whenPathExists(path)}store.monitor.bind("queries",function(_,q){var names=[];for(var query in q){if(q.hasOwnProperty(query))names.push(query)}var removed=utils.arrayDiff(list,names),added=utils.arrayDiff(names,list);store.load();for(var i=0;i<removed.length;i++){removeQuery(utils.normalizeQueryName(removed[i]));$(wrapper).trigger("removed",removed[i])}for(var i=0;i<added.length;i++){addQuery(utils.normalizeQueryName(added[i]),added[i])}list=names});store.monitor.bind("folders",function(_,names){var added=utils.arrayDiff(names,folders);store.load();for(var i=0;i<added.length;i++){whenPathExists(added[i])}folders=names});return wrapper={queryExist:function(name){var id=utils.normalizeQueryName(name);return!!store.get("queries."+id)},querySave:function(name,code){if(this.queryExist(name))return this.queryUpdate(name,code);else return this.queryCreate(name,code)},queryCreate:function(name,code){var id=utils.normalizeQueryName(name);var query=store.get("queries."+id);if(query)return false;store.set("queries."+id,query={name:name,code:code},true);addQuery(id,name);$(wrapper).trigger("created",query);return true},queryUpdate:function(name,code){var id=utils.normalizeQueryName(name);var query=store.get("queries."+id);if(!query)return false;query.code=code;store.set("queries."+id,query,true);$(wrapper).trigger("updated",query);return true},queryRemove:function(name){var id=utils.normalizeQueryName(name);var query=store.get("queries."+id);if(!query)return false;store.remove("queries."+id);removeQuery(name);$(wrapper).trigger("removed",query.name);return true},nameAtPath:function(name){if(!selectedNode)return name;var path=$(selectedNode).attr("data-path");if(!path||path==="/")return name;if(path.substr(0,1)==="/")return path.substr(1)+"/"+name;path=path.split("/");path.pop();return path.join("/")+"/"+name}}}});define("app/support",["app/util/ui"],function(ui){return function(el){var wrapper,index=0,callback,onchange={};var tabs=ui.tabs(el.append('<div class="pg-support-tabs"><ul></ul></div>').find(".pg-support-tabs").css({padding:0,margin:0,border:0}),{tabTemplate:"<li><a href='#{href}'>#{label}</a></li>",add:function(event,ui){$(ui.panel).css({padding:0,overflow:"hidden"});callback(ui.panel)}});tabs.removeClass("ui-corner-all");setTimeout(function(){tabs.find("ul").removeClass("ui-corner-all");tabs.on("tabsactivate",function(event,ui){var id="#"+ui.newPanel.attr("id");if(onchange[id])onchange[id]();return false})},0);return wrapper={addPanel:function(label,content_handler,onchange_handler){var id="#pg-support-tab-"+ ++index;if("function"!==typeof content_handler){var content;if("string"===typeof content_handler&&(content_handler.substr(0,8)==="https://"||content_handler.substr(0,7)==="http://")){content='<iframe src="'+content_handler+'" style="margin:0;padding:0;width:100%;height:100%;border:0"><iframe/>'}content_handler=function(el){$(el).append(content)}}onchange[id]=onchange_handler;callback=content_handler;tabs.tabs("add",id,label)},resize:function(){var h=el.innerHeight()-tabs.find("ul").outerHeight();tabs.find(".ui-tabs-panel").css({height:h+"px"})}}}});define("app/util/dialog-support",["rtext!templates/dialog.support.html","app/util/ui","app/util/dom","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog"],function(tplDialog,ui,dom){var elDialog,currentHandler,showRequest;function validate(email,request){var re_email=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!re_email.test(email)){return"invalid email address"}else if(!request.trim()){return"empty support request"}else{return null}}function ok(e){elDialog.find(".pg-error").hide();var email=elDialog.find("#pg-input-email").val(),request=elDialog.find("#pg-input-request").val();var validation_message=validate(email,request);if(validation_message){elDialog.find(".pg-error").html(validation_message).show();if(e)e.preventDefault();return false}if(currentHandler)currentHandler(email,request);elDialog.dialog("close")}function reposition(){elDialog.dialog("option","position","center")}function init(){elDialog=$("body").append(tplDialog).find(".pg-dialog-support:last").dialog({modal:true,autoOpen:false,resizable:false,dialogClass:"pg-el",width:"400px",closeOnEscape:true,buttons:[{text:"Close",click:function(){elDialog.dialog("close");return true}},{text:"OK",click:ok}]});elDialog.find(".pg-email").keyup(function(e){if(e.keyCode==13){if(showRequest){elDialog.find(".pg-request").focus()}else{ok()}}});elDialog.bind("dialogopen",function(){$(window).on("resize",reposition)});elDialog.bind("dialogclose",function(){$(window).off("resize",reposition)})}var inited=false;return function(title,message,email,request,show_request,handler){if(!inited){init();inited=true}currentHandler=handler;elDialog.find(".pg-message").html(message||"");elDialog.find("#pg-input-email").val(email||"");elDialog.find("#pg-input-request").val(request||"");if(showRequest=show_request){elDialog.find(".pg-request").show()}else{elDialog.find(".pg-request").hide()}elDialog.find(".pg-error").hide();elDialog.dialog("option","position","center");elDialog.dialog("option","title",title);elDialog.dialog("open")}});define("app/pardot_track",["app/util/iframesubmit","app/util/dialog-support","libs/jquery/jquery.cookie/jquery.cookie"],function(submit,displaySupport){var PAGE_ACTION="https://labcoat.precog.com/actions/",FORM_ACTION="http://www2.precog.com/l/",wrapper,queue=[],email=$.cookie("Precog_eMail"),action_map={quirrel_failure_default:"17892/2013-01-14/29k3q",quirrel_failure_custom:"17892/2013-01-14/29k52",generic_error:"17892/2013-01-14/29k5d"};var onprecog=Precog.$.Config.analyticsService.indexOf(".precog.com")>=0;if(onprecog){wrapper={track_page:function(action){submit({action:PAGE_ACTION+(action_map[action]||action),method:"get",complete:function(){}})}}}else{wrapper={track_page:function(action){}}}wrapper.track_error=function(action,params,user_message){params=params||{};if(!email){displaySupport("report error",user_message,null,params.error_message,false,function(e,r){email=e;$.cookie("Precog_eMail",email);params.error_message=r;wrapper.track_error(action,params,user_message)});return false}else{params.email=email;submit({action:FORM_ACTION+(action_map[action]||action),method:"post",data:params,complete:function(){}});return true}};wrapper.submit_form=function(url,params,callback){submit({action:url,method:"get",data:params,complete:function(){if(callback)callback()}})};return wrapper});define("app/util/dialog-account",["rtext!templates/dialog.account.html","app/util/ui","app/util/querystring","app/pardot_track","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog","libs/jquery/jquery.cookie/jquery.cookie"],function(tplDialog,ui,qs,pardot){var elDialog,precog;function validateEmail(email){var re_email=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!re_email.test(email)){return"invalid email address"}else{return null}}function reposition(){elDialog.dialog("option","position","center")}function Validator(){var map={},nextid=0,self=this;this.create=function(getvalue,geterrorcontainer,validatorhandler){var id="validation_"+ ++nextid;return map[id]={valid:false,validate:function(){var errorcontainer=geterrorcontainer();errorcontainer.hide();var value=getvalue();validatorhandler(value,function(response){if(response){map[id].valid=false;errorcontainer.html(response);errorcontainer.show();$(self).trigger("validation")}else{map[id].valid=true;errorcontainer.hide();$(self).trigger("validation")}})},reset:function(){map[id].validate();geterrorcontainer().hide()}}};this.createEmpty=function(getvalue,errorcontainer){return self.create(getvalue,errorcontainer,function(value,handler){var result=!value?"invalid empty field":null;handler(result)})};this.createMinLength=function(getvalue,errorcontainer,min){return self.create(getvalue,errorcontainer,function(value,handler){var result=(value||"").length<min?"should be at least "+min+" characters long":null;handler(result)})};this.validate=function(){for(var id in map){if(!map.hasOwnProperty(id))continue;map[id].validate()}};this.isValid=function(){for(var id in map){if(!map.hasOwnProperty(id))continue;if(!map[id].valid)return false}return true};this.reset=function(){for(var id in map){if(!map.hasOwnProperty(id))continue;map[id].reset()}}}function init(){elDialog=$("body").append(tplDialog).find(".pg-dialog-account:last").dialog({modal:true,autoOpen:false,resizable:false,dialogClass:"pg-el",width:"500px",dialogClass:"pg-el pg-dialog-account",closeOnEscape:false});elDialog.find("button.try-demo").click(function(e){e.preventDefault();elDialog.dialog("close");return false});var createPanel=elDialog.find("div.create"),recoverPanel=elDialog.find("div.recover");var login=new Validator;login.email=login.create(function(){return elDialog.find("input#email").val()},function(){return elDialog.find("div.error.email")},function(value,handler){handler(validateEmail(value))});login.password=login.createEmpty(function(){return elDialog.find("input#password").val()},function(){return elDialog.find("div.error.password")});var register=new Validator;register.email=register.create(function(){return elDialog.find("input#email").val()},function(){return elDialog.find("div.error.email")},function(value,handler){handler(validateEmail(value))});register.password=register.createMinLength(function(){return elDialog.find("input#password").val()},function(){return elDialog.find("div.error.password")},6);register.confirmPassword=register.create(function(){return elDialog.find("input#account-confirm-password").val()},function(){return elDialog.find("div.error.account-confirm-password")},function(value,handler){handler(elDialog.find("input#password").val()!==value?"confirmation password doesn't match":null)});register.name=register.createMinLength(function(){return elDialog.find("input#account-name").val()},function(){return elDialog.find("div.error.account-name")},3);register.company=register.createMinLength(function(){return elDialog.find("input#account-company").val()},function(){return elDialog.find("div.error.account-company")},2);register.title=register.createEmpty(function(){return elDialog.find("input#account-title").val()},function(){return elDialog.find("div.error.account-title")});register.accept=register.create(function(){return elDialog.find("input#account-accept").attr("checked")},function(){return elDialog.find("div.error.account-accept")},function(value,handler){handler(value?null:"you have to read and to accept the terms of service agreement")});function createToggle(selector,validator){var el=elDialog.find(selector);el.button({disabled:false})}login.toggle=createToggle("#account-login",login);$(login).on("validation",clearFormError);register.toggle=createToggle("#account-create",register);$(register).on("validation",clearFormError);elDialog.find("input#email").keydown(function(e){if(e.keyCode==13){e.preventDefault();return false}}).keyup(function(e){if(e.keyCode==13){if(!$(this).val()){}else if(!elDialog.find("input#password").val()){elDialog.find("input#password").focus()}else{$(this).blur();return}e.preventDefault();return false}});elDialog.find("input:not(#email)").keydown(function(e){if(e.keyCode==13){e.preventDefault();return false}}).keyup(function(e){if(e.keyCode==13){if(!$(this).val()){}else{$(this).blur();if(!currentToggle.button("option","disabled"))currentToggle.click();return}e.preventDefault();return false}});function wireLogin(){login.reset();elDialog.find("input#email").on("change blur",login.email.validate);elDialog.find("input#password").on("change blur keydown",login.password.validate)}function unwireLogin(){elDialog.find("input#email").off("change blur",login.email.validate);elDialog.find("input#password").off("change blur",login.password.validate)}function wireRegister(){register.reset();elDialog.find("input#email").on("change blur",register.email.validate);elDialog.find("input#password").on("change blur",register.password.validate);elDialog.find("input#account-confirm-password").on("change blur",register.confirmPassword.validate);elDialog.find("input#account-name").on("change blur",register.name.validate);elDialog.find("input#account-company").on("change blur",register.company.validate);elDialog.find("input#account-title").on("change blur",register.title.validate);elDialog.find("input#account-accept").on("change blur",register.accept.validate)}function unwireRegister(){elDialog.find("input#email").off("change blur",register.email.validate);elDialog.find("input#password").off("change blur",register.password.validate);elDialog.find("input#account-confirm-password").off("change blur",register.confirmPassword.validate);elDialog.find("input#account-name").off("change blur",register.name.validate);elDialog.find("input#account-company").off("change blur",register.company.validate);elDialog.find("input#account-title").off("change blur keydown",register.title.validate)}var currentToggle;function updateForm(){var mode=elDialog.find("input.choose-ui:checked").val();createPanel.hide();recoverPanel.hide();unwireLogin();unwireRegister();switch(mode){case"create":createPanel.show();wireRegister();currentToggle=elDialog.find("#account-create");break;case"login":recoverPanel.show();wireLogin();currentToggle=elDialog.find("#account-login");break}currentToggle.focus()}elDialog.find("input.choose-ui").change(updateForm);var email=$.cookie("Precog_eMail");if(email){elDialog.find('input.choose-ui[value="login"]').attr("checked",true);elDialog.find("input#email").val(email)}else elDialog.find('input.choose-ui[value="create"]').attr("checked",true);updateForm();elDialog.bind("dialogopen",function(){$(window).on("resize",reposition)});elDialog.bind("dialogclose",function(){$(window).off("resize",reposition)});setTimeout(reposition,0);function getHost(){return window.location.href.split("?").shift()}function formError(msg){elDialog.find("#form-error .error").html(msg).show()}function clearFormError(){elDialog.find("#form-error .error").hide()}function goToLabcoat(email,server,apiKey,basePath){$.cookie("Precog_eMail",email);elDialog.find("form").submit();precog.config.analyticsService=server;precog.config.apiKey=apiKey;precog.config.basePath=basePath;precog.config.email=email;elDialog.dialog("close")}function describeAndLogin(email,password,server,accountId){window.Precog.describeAccount(email,password,accountId,function(data){goToLabcoat(email,server,data.apiKey,data.rootPath)},function(){elDialog.find("#account-login").button("enable");formError("password is incorrect")},{analyticsService:server})}var urlserver=qs.get("analyticsService"),servers;if(urlserver){servers=[urlserver]}else{servers=["https://nebula.precog.com/","https://beta.precog.com/"]}function findAccount(email,success,error){var i=0;function execute(){if(i==servers.length){error("account not found");return}window.Precog.findAccount(email,function(accountId){success(servers[i],accountId)},function(err){i++;execute()},{analyticsService:servers[i]})}execute()}function actionLogin(email,password){elDialog.find("#account-login").button("disable");findAccount(email,function(server,accountId){describeAndLogin(email,password,server,accountId)},function(err){elDialog.find("#account-login").button("enable");formError("account not found for "+email)})}function trackAccountCreationWithPardot(email,profile,callback){pardot.submit_form("http://www2.precog.com/l/17892/2012-12-10/76rq ",{"jform[email1]":email,"jform[name]":profile.name,"jform[profile][company]":profile.company,"jform[username]":email,"jform[profile][jobtitle]":profile.title},callback)}function actionCreate(email,password,profile){elDialog.find("#account-create").button("disable");findAccount(email,function(){elDialog.find("#account-create").button("enable");formError("a user is already registered with the email "+email)},function(err){var server=servers[servers.length-1];window.Precog.createAccount(email,password,function(data){trackAccountCreationWithPardot(email,profile);describeAndLogin(email,password,server,data.accountId)},function(err){elDialog.find("#account-create").button("enable");
formError("failed to create an account: "+err)},{analyticsService:server,profile:profile})})}elDialog.find("#account-login").click(function(e){e.preventDefault();login.validate();if(!login.isValid())return false;actionLogin(elDialog.find("input#email").val(),elDialog.find("input#password").val());return false});elDialog.find("#account-create").click(function(e){e.preventDefault();register.validate();if(!register.isValid())return false;actionCreate(elDialog.find("input#email").val(),elDialog.find("input#password").val(),{title:elDialog.find("input#account-title").val(),name:elDialog.find("input#account-name").val(),company:elDialog.find("input#account-company").val()});return false});elDialog.find("#reset-password").click(function(e){e.preventDefault();var email=elDialog.find("input#email").val().trim();if(!email){formError("you need to provide an email to be able to reset your password");return false}$(this).hide();window.Precog.requestResetPassword(email,function(data){alert(data)},function(err){formError("an error occurred trying to reset your password: "+err)});return false})}var inited=false;return function(p,callback){precog=p;if(!inited){init();inited=true}elDialog.dialog("option","position","center");elDialog.dialog("option","title","Login to Labcoat");elDialog.dialog("open");if(callback){elDialog.bind("dialogclose",function(){callback()})}elDialog.find("input#email").focus()}});define("app/util/output-chart",["app/util/jsonmodel","app/util/ui","app/util/notification","rtext!templates/panel.options.chart-output.html","libs/precog/reportgrid-charts"],function(jsonmodel,ui,notification,tplOptionsPanel){ReportGrid.authCode="r59uh0XNfjFqI1M+yxJK33KGZ0Mm82UqEme9ShK7g12KlIHBhCZK1rFV7KdOHgZ7GAePArW/T4EuOgzCPCbZB+AGlqH7I8OeRMwxKJA5lSRO1GTNp5IkXcrS4rKVj0KT3jnc/kc6gJBjzZPBwwX10Xgdg2+/KI1QnoOCVhDJ8Hg=";var wrapper,elPanel=$('<div class="ui-widget ui-content pg-overflow-hidden"><div class="pg-chart"></div></div>'),elChart=elPanel.find(".pg-chart");var spaces=2,toolbar,options,currentData;var noti,model,optionButton,builderButton,params;function delayedRender(){clearInterval(this.k);this.k=setTimeout(render,50)}function render(){try{elChart.find("*").remove();ReportGrid.chart(elChart.get(0),params)}catch(e){}}function formatLabel(value,axis){if(axis.type.substr(0,5)==="time:"){return ReportGrid.format(typeof value==="number"?new Date(value):ReportGrid.date.parse(value),"DT")}else{return ReportGrid.humanize(value)}}function refresh(){clear();if(ReportGrid.tooltip)ReportGrid.tooltip.hide();if(!options.chart.x||!options.chart.y||options.chart.x===options.chart.y)return;if(!options.chart.samplesize)options.chart.samplesize=100;var x=jsonmodel.axis(model,options.chart.x),y=jsonmodel.axis(model,options.chart.y);if(!x||!y)return;var datapoints=currentData.slice(0);if(x.transformer){datapoints=x.transformer(datapoints)}if(y.transformer){datapoints=y.transformer(datapoints)}datapoints=dataSort(datapoints,options.chart.x);if(datapoints.length>options.chart.samplesize){datapoints=datapoints.slice(0,options.chart.samplesize)}params={axes:[x,y],data:datapoints,options:{displayrules:true,visualization:x.type.substr(0,5)==="time:"?"linechart":"barchart",label:{axis:function(axis){return axis},datapointover:function(dp,stats){return formatLabel(dp[options.chart.x],x)+": "+formatLabel(dp[options.chart.y],y)}}}};if(params.options.visualization==="linechart")params.options.effect="dropshadow";if(options.chart.segment)params.options.segmenton=options.chart.segment;delayedRender()}function dataSort(data,x){data=data.splice(0);data.sort(function(a,b){return ReportGrid.compare(a[x],b[x])});return data}function selectOption(title){function filterMultivalue(column){return!!column.multivalue}function filterNumbersAndMultivalue(column){return!!column.multivalue||column.type==="number"||column.subtype==="datetime"||options&&options.chart.x===column.field||options&&options.chart.y===column.field}function feed(select,columns,current,optional,filter){select.find("option").remove();if(optional)select.append('<option value="">[none]</option>');for(var i=0;i<columns.length;i++){var value=filter(columns[i]);if(value)continue;select.append('<option value="'+columns[i].field+'"'+(current===columns[i].field?" selected":"")+">"+columns[i].name+"</option>")}if(select.find("option").length===(optional?1:0)){select.closest(".pg-selection").hide()}else{select.closest(".pg-selection").show()}return select}function resetSegmentAndChangeOption(name){return function(){options.chart[name]=$(this).val();if(options.chart.segment===options.chart[name])options.chart.segment=null;feed(noti.find(".pg-segment"),model,options.chart.segment,true,filterNumbersAndMultivalue);$(wrapper).trigger("optionsChanged",options);refresh()}}function changeOption(name){return function(){options.chart[name]=$(this).val();$(wrapper).trigger("optionsChanged",options);refresh()}}return function(){if(noti)noti.remove();noti=notification.context(title,{width:"264px",text:tplOptionsPanel,target:this,before_open:function(){if(ReportGrid.tooltip)ReportGrid.tooltip.hide()},after_open:function(){var x=feed(noti.find(".pg-x"),model,options.chart.x,false,filterMultivalue).change(resetSegmentAndChangeOption("x"));feed(noti.find(".pg-y"),model,options.chart.y,false,filterMultivalue).change(resetSegmentAndChangeOption("y"));feed(noti.find(".pg-segment"),model,options.chart.segment,true,filterNumbersAndMultivalue).change(changeOption("segment"));noti.find(".pg-sample").val(options.chart.samplesize).change(changeOption("samplesize"));options.chart.x=noti.find(".pg-x").val();options.chart.y=noti.find(".pg-y").val();refresh()}})}}function clear(){elChart.find("*").remove().removeClass("rg");elChart.append('<div class="pg-message ui-content ui-state-highlight ui-corner-all"><p>Please select the chart axis using the options button above.</p></div>')}wrapper={type:"chart",name:"Chart",panel:function(){return elPanel},update:function(data,o){if(noti)noti.remove();if("undefined"==typeof o.chart)o.chart={samplesize:200};options=o;if(data){currentData=data}else{data=currentData}if(!data||data.length<=1){model=[];elChart.html('<div class="pg-message ui-content ui-state-highlight ui-corner-all">The dataset doesn\'t contain enough values to build a chart.</div>');if(optionButton)optionButton.button("disable");if(builderButton)builderButton.button("disable");return}model=jsonmodel.create(data);if(optionButton)optionButton.button("enable");if(builderButton)builderButton.button("enable");refresh()},resize:function(){elChart.css({width:elPanel.innerWidth()+"px",height:elPanel.innerHeight()+"px"});refresh()},activate:function(){if(!toolbar){toolbar=$(this.toolbar);optionButton=ui.button(toolbar,{label:"options",text:true,handler:selectOption("Chart Options"),disabled:true});builderButton=ui.button(toolbar,{label:"export to ReportGrid",text:true,handler:function(){$(wrapper).trigger("exportToBuilder")},disabled:true})}toolbar.show()},deactivate:function(){if(ReportGrid.tooltip)ReportGrid.tooltip.hide();if(noti)noti.remove();clear();toolbar.hide()}};return wrapper});define("app/config/output-results",["app/util/output-table","app/util/output-json","app/util/output-chart","app/util/output-error","app/util/output-message"],function(){var formats=arguments,empties=[{name:"update",f:function(){return function(_){}}},{name:"panel",f:function(){return function(){return $("<div></div>")}}},{name:"toolbar",f:function(){return function(){return $("<div></div>")}}},{name:"activate",f:function(){return function(){}}},{name:"deactivate",f:function(){return function(){}}},{name:"display",f:function(){return true}},{name:"resize",f:function(){return function(){}}},{name:"preferredDownloadFormat",f:function(){return function(){return null}}},{name:"paginationOptions",f:function(){return function(){return null}}}],inited=false;return function(){if(!inited){for(var i=0;i<formats.length;i++){var format=formats[i];if("function"===typeof format)formats[i]=format=format();$.each(empties,function(_,empty){if("undefined"===typeof format[empty.name]){format[empty.name]=empty.f()}})}inited=true}return formats}});define("app/startup-wizard",["app/util/notification","app/util/ui","app/util/storage","app/config/wizard-steps","rtext!templates/content.tip.main.html","rtext!templates/content.tip.codepane.html","rtext!templates/content.tip.filesystem.html","rtext!templates/content.tip.querybrowser.html","rtext!templates/content.tip.resultspane.html","rtext!templates/content.tip.supportpane.html"],function(notification,ui,createStore,createSteps,tplMain,tplCode,tplFileSystem,tplQueryBrowser,tplResultsPane,tplSupportPane){return function(ctx){var STORE_KEY="pg-quirrel-wizard",store=createStore(STORE_KEY,{dismissed:false}),current;var steps=createSteps();var $tip=$('<div class="pg-el pg-wizard"><div class="pg-frame"><div class="close"><a href="#" title="close wizard"><span class="ui-icon ui-icon-closethick"></span></a></div><div class="pg-content"></div></div><div class="pg-arrow"></div></div>').appendTo("body");$tip.hide();function displayStep(step,value){var content=$tip.find(".pg-content"),arrow=$tip.find(".pg-arrow"),closer=$tip.find(".close");closer.css("opacity",.35);$tip.mouseenter(function(){closer.css("opacity",1)});$tip.mouseleave(function(){closer.css("opacity",.35)});$tip.find(".pg-frame").css({width:(step&&step.width||200)+"px"});closer.find("a").click(function(){goTo("#end")});content.html(step.text);var position={my:step.position[0]||"left top",at:step.position[1]||"right bottom",of:step.target};$tip.position(position);arrow.removeClass("fade");var cls=position.my.replace(/[+-]\d+[%]?/g,"").split(" ").join("-");arrow.attr("class","pg-arrow "+cls);if(cls!="center-center"){setTimeout(function(){arrow.addClass("fade")},500)}if(step.init){step.ctx=ctx;step.init.call(content,goTo,step,value)}}function goTo(name,value){if(name===null){store.set("dismissed",true);$tip.remove();current=null;return}if(name==="#hide"){$tip.hide();return}else if(name==="#end"){$tip.hide();store.set("dismissed",true);return}$tip.show();current=steps.filter(function(step){return step.name==name})[0];displayStep(current,value)}if(!store.get("dismissed")){setTimeout(function(){$tip.show();goTo("welcome");setTimeout(function(){$tip.addClass("transition")},0)},1e3)}return{start:function(){store.set("dismissed",false);goTo("welcome");setTimeout(function(){$tip.addClass("transition")},0)}}}});define("app/eggmanager",["app/config/eggs","app/util/notification"],function(eggs,notification){function normalize(content){return content.toLowerCase().replace(/\W+/," ").replace(/\s+/gm," ").trim()}function cleanQuery(q){if(q.split("\n").length>1)return null;q=q.trim();if(q.substr(0,2)==="--")return q.substr(2);if(q.substr(0,2)==="(*"&&q.substr(q.length-2)==="*)")return q.substr(2,q.length-4);return null}for(var i=0;i<eggs.length;i++){eggs[i].normalized=normalize(eggs[i].question)}return{findEgg:function(content){var normalized=normalize(content);for(var i=0;i<eggs.length;i++){if(normalized===eggs[i].normalized){return i}}return-1},isEgg:function(content){return this.findEgg(content)>=0},displayEgg:function(index,question){if(index<0)return;notification.main(question,{text:'<div class="pg-easter">'+eggs[index].answer+"</div>",min_height:"100px"})},easterEgg:function(question){var q=cleanQuery(question);if(null===q)return false;var index=this.findEgg(q);if(index<0)return false;this.displayEgg(index,q);return true}}});define("app/editortips",["app/util/notification"],function(notification){var REFERENCE_URL="reference.json",reference;function extractFunctionName(header){return/^\s*([^\s]+)/.exec(header)[1]}$.get(REFERENCE_URL).then(function(data){if("string"===typeof data)data=JSON.parse(data);reference={};data.forEach(function(item){if(item.type)return;var key=extractFunctionName(item.header);reference[key]=item})});function extractImports(code){var p=/import\s+((?:\w+\:\:)+)/g,match,r=[];while((match=p.exec(code))!=null){r.push(match[1])}return r}function isSymbol(c){var i=c.charCodeAt(0);return!(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i==95)}function extractFunction(code,row,column){var line=code.split("\n")[row];if(!line)return null;var char=line[column];if(!char)return null;var issymbol=isSymbol(char);if(issymbol)return null;var len=line.length;cursor=column;while(++cursor<len&&isSymbol(line[cursor])===issymbol){char+=line[cursor]}while(cursor<len&&line[cursor]===" "){cursor++}if(line[cursor]!=="(")return null;var cursor=column;while(--cursor>=0&&isSymbol(line[cursor])===issymbol){char=line[cursor]+char}return char}return function(){var noti,wrapper={displayTip:function(coords,pos,code){if(!reference)return;var word=extractFunction(code,pos.row,pos.column);var imports=[""].concat(extractImports(code));for(var i=0;i<imports.length;i++){var key=imports[i]+word,item=reference[key];if(item){if(noti)noti.remove();noti=notification.tip(item.header,{x:coords.x,y:coords.y,voffset:10,hoffset:100,text:item.body,after_open:function(){var f=function f(){noti.remove();$("body").off("mousemove",f)};$("body").mousemove(f)}});break}}}};return wrapper}});define("app/util/uiconfig",[],function(){var config={disableUpload:$("head script[data-labcoat-disable-upload]").attr("data-labcoat-disable-upload")==="true",disableDownload:$("head script[data-labcoat-disable-download]").attr("data-labcoat-disable-download")==="true"};return config});define("app/util/dialog-export",["rtext!templates/dialog.export.html","app/util/uiconfig","app/util/ui","app/util/dom","app/util/precog","app/util/notification","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog","libs/jquery/zclip/jquery.zclip"],function(tplDialog,uiconfig,ui,dom,precog,notification){var downloadQueryService="http://api.reportgrid.com/services/viz/proxy/download-code.php",elText,elDialog,elActions,elForm,clip,formCallback,exportCallback,currentAction;function selectCode(){setTimeout(function(){dom.selectText(elText.get(0))},100)}function reposition(){elDialog.dialog("option","position","center")}function init(){var buttons=[{text:"Copy",click:function(){elDialog.dialog("close");if(exportCallback)exportCallback();return true}}];if(!uiconfig.disableDownload){buttons.push({text:"Download",click:function(){notification.quick("code downloaded");elForm.submit();if(exportCallback)exportCallback();elDialog.dialog("close")}})}elDialog=$("body").append(tplDialog).find(".pg-dialog-export").dialog({modal:true,autoOpen:false,resizable:false,width:820,height:480,dialogClass:"pg-el",closeOnEscape:true,buttons:buttons}),elActions=elDialog.find(".pg-actions"),elOptions=elDialog.find(".pg-options"),elText=elDialog.find(".pg-export textarea"),elForm=elDialog.find("form");elForm.attr("action",downloadQueryService);elForm.submit(function(e){if(formCallback)return formCallback.call(this,elText.text(),currentAction);else return true});elText.click(function(){selectCode()});elDialog.bind("dialogopen",function(){$(window).on("resize",reposition)});elDialog.bind("dialogclose",function(){$(window).off("resize",reposition)})}var inited=false;return function(title,actions,code,selected,callback,exportHandler){formCallback=callback;exportCallback=exportHandler;if(!inited){init();inited=true}elActions.find("*").remove();elOptions.find("*").remove();function execute(action){elDialog.find("input[name=name]").val("precog."+action.token);elOptions.find("*").remove();if(action.buildOptions){action.buildOptions(elOptions,function(){elText.text(action.handler(code,action.options));selectCode()})}elText.text(action.handler(code,action.options));selectCode()}selected=selected||actions[0].token;ui.radios(elActions,$(actions).map(function(i,action){if(action.token===selected)currentAction=action;return{label:action.name,handler:function(){currentAction=action;execute(action);return true},group:"actions",checked:action.token===selected}}));elActions.find(".ui-button:first").click();elDialog.dialog("option","position","center");elDialog.dialog("option","title",title);elDialog.dialog("open");if(clip){$(window).trigger("resize")}else{clip=elDialog.dialog("widget").find(".ui-dialog-buttonpane button.ui-button:first").css({zIndex:1e6}).zclip({path:"js/libs/jquery/zclip/ZeroClipboard.swf",copy:function(){var text=""+elText.val();return text},afterCopy:function(){notification.quick("copied to clipboard")}})}}});define("app/bar-editor",["app/util/ui","app/util/notification","app/util/querystring","app/util/converters","app/util/utils","app/util/precog","app/util/dialog-export","app/util/dialog-lineinput","app/config/output-languages","rtext!templates/toolbar.editor.html","libs/moment/moment"],function(ui,notification,qs,conv,utils,precog,openExportDialog,openInputDialog,createExportLanguages,tplToolbar){return function(el,queries,editors){var wrapper,exportLanguages=createExportLanguages();el.append(tplToolbar);var elContext=el.find(".pg-toolbar-context"),autoGoToTab=0,tabs=ui.tabs(el.find(".pg-editor-tabs"),{tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close pg-tab-close'>Remove Tab</span></li>",add:function(event,ui){var index=ui.index;if(autoGoToTab){tabs.tabs("select",index);editors.activate(index);autoGoToTab--}}}),index=0;tabs.on({click:function(){var index=$("li",tabs).index($(this).parent());editors.remove(index)}},".ui-icon-close");tabs.on({click:function(){var index=$("li",tabs).index($(this).parent());editors.activate(index)}},"li a");function getIndexByName(name){var len=tabs.find("li a").length;for(var i=0;i<len;i++){if(getTabName(i)===name)return i}return-1}function getTabName(index){return getTabLabelElement(index).attr("data")}function getTabLabelElement(index){return tabs.find("li:nth("+index+") a")}function changeTabName(index,value,dirty){var el=getTabLabelElement(index);el.attr("data",value).attr("title",value).html(utils.truncate(value.split("/").pop()));if(dirty){wrapper.invalidateTab(index)}}function invalidateTab(index){var el=getTabLabelElement(index),content=el.html();if(content&&content.substr(0,1)!=="*")el.html("*"+content)}function revalidateTab(index){var el=getTabLabelElement(index),content=el.html();if(content.substr(0,1)==="*")el.html(content.substr(1))}var history=ui.button(elContext,{icon:"ui-icon-clock",description:"display query history",handler:function(){$(wrapper).trigger("requesthistorylist")}});ui.button(elContext,{icon:"ui-icon-disk",description:"save query",handler:function(){var editor=editors.get();if(editor.hasname){editors.save(editor)}else{openInputDialog("Save Query","Select a unique identification name for your query",null,"",function(value){return utils.validateQueryName(value,queries.nameAtPath(value),queries)},function(value){editor.name=queries.nameAtPath(value);editor.hasname=true;editors.save(editor)})}}});ui.button(elContext,{icon:"ui-icon-mail-closed",description:"send query by email",handler:function(e){var email="support@precog.com",subject="Quirrel Help",body="I need help with the following query:\n\n"+editors.getCode();var url="mailto:"+email+"?subject="+encodeURIComponent(subject)+"&body="+encodeURIComponent(body);window.open(url,"_blank")}});var copier;ui.button(elContext,{icon:"ui-icon-link",description:"copy a link with the current query",handler:function(e){var base=document.location.protocol+"//"+document.location.hostname+document.location.pathname;var params={};params.q=editors.getCode();if(precog.config.apiKey)params.apiKey=precog.config.apiKey;if(precog.config.basePath)params.basePath=precog.config.basePath;if(precog.config.analyticsService)params.analyticsService=precog.config.analyticsService;if(copier)copier.remove();copier=notification.copier("Create Query Link",{text:"Copy this link to pass the current query to someone else.<br>Don't forget that the URL contains your token!",copy:base+"?"+$.param(params),target:this})}});ui.button(elContext,{icon:"ui-icon-arrowthickstop-1-s",description:"download query code",handler:function(){openExportDialog("Download Query",exportLanguages,editors.getCode(),null,null,function(){$(wrapper).trigger("exportCode")})}});ui.button(elContext,{icon:"ui-icon-plus",description:"create new empty tab",handler:function(){autoGoToTab++;editors.add()}});function formatHistoryItem(item){var numlines=3,tlen=40;var execution=moment(new Date(item.timestamp)).fromNow();var codeLines=item.code.split("\n");if(codeLines.length>numlines){var lines=codeLines.length-numlines;codeLines.splice(numlines-1);codeLines.push("... +"+lines+" more line(s)")}var code=codeLines.map(function(v){return utils.truncate(v,tlen)}).join("\n");return'<div class="pg-history-item ui-content ui-state-highlight ui-corner-all">'+'<div class="pg-header">query:</div>'+"<pre>"+code+"</pre>"+'<div class="pg-header">sample:</div>'+"<pre>"+utils.truncate(JSON.stringify(item.sample.first),tlen)+"</pre>"+'<div class="pg-info">generated '+item.sample.length+" records<br>executed "+execution+"</div>"+'<div class="pg-toolbar"></div>'+'<div class="pg-clear"></div>'+"</div>"}var historypanel;return wrapper={addTab:function(name,dirty){var a=tabs.tabs("add","#pg-editor-tab-"+ ++index,"");changeTabName(tabs.tabs("length")-1,name,dirty);var closers=tabs.find(".pg-tab-close");if(closers.length==1){closers.hide()}else if(closers.length==2){closers.show()}},removeTab:function(index){tabs.tabs("remove",index);var closers=tabs.find(".pg-tab-close");if(closers.length===1){closers.hide()}},removeTabByName:function(name){var index=getIndexByName(name);if(index>=0)this.removeTab(index)},activateTab:function(index){tabs.tabs("select",index)},changeTabName:function(index,name){var old=getTabName(index);changeTabName(index,name);$(wrapper).trigger("tabrenamed",{oldname:old,newname:name})},invalidateTab:function(index){invalidateTab(index)},revalidateTab:function(index){revalidateTab(index)},displayHistoryList:function(data){if(historypanel){historypanel.remove()}var text;if(data.length==0){text="No queries have been performed yet in this editor context."}else{text='<div class="pg-history"><ul><li>'+data.map(formatHistoryItem).join("</li><li>")+"</li></ul></div>"}historypanel=notification.context("History",{target:history,text:text});historypanel.find(".pg-toolbar").each(function(index){var item=data[index];$(this).append("open in ");if(index!==0){ui.button(this,{label:"current tab",handler:function(){historypanel.remove();$(wrapper).trigger("requestopenrevision",{usenewtab:false,index:index})}})}ui.button(this,{label:"new tab",handler:function(){historypanel.remove();$(wrapper).trigger("requestopenrevision",{usenewtab:true,index:index})}})})},historyPanelIsOpen:function(){return historypanel&&historypanel.is(":visible")}}}});define("app/output",["app/util/ui","app/config/output-results","app/config/output-formats","app/util/dialog-export","rtext!templates/toolbar.output.html"],function(ui,loadFormats,exportLanguages,openDialog,tplToolbar){var radioIndex=0;return function(el,editors){var map={},formats=loadFormats();$.each(formats,function(_,format){map[format.type]=format});radioIndex++;var wrapper,last={result:null,type:null,current:null},elToolbar=el.find(".pg-toolbar").append(tplToolbar),elToolbarTypeContext=el.find(".pg-toolbar-context .pg-toolbar-result-type"),elToolbarMainContext=el.find(".pg-toolbar-context .pg-toolbar-result-general"),elOutputs=elToolbar.find(".pg-output-formats"),elResult=el.find(".pg-result"),lastOptions;function downloadCallback(data,action){return true}var downloadButton=ui.button(elToolbarMainContext,{icon:"ui-icon-arrowthickstop-1-s",description:"download query result",handler:function(){var format=last&&map[last.current].preferredDownloadFormat(lastOptions);openDialog("Download Results",exportLanguages,editors.getOutputData(),format,downloadCallback)}});$.each(formats,function(i,format){if(format.display){var id="pg-output-type-radio-"+radioIndex+"-"+ ++i;format.display=elOutputs.append('<input type="radio" id="'+id+'" name="radio" data-format="'+format.type+'" /><label for="'+id+'">'+format.name+"</label>").find("#"+id);format.display.click(function(){if(format.type===last.type){last.current=format.type;return}wrapper.setOutput(last.result,format.type,lastOptions)})}format.panel=format.panel();elResult.append(format.panel);format.toolbar=format.toolbar();elToolbarTypeContext.append(format.toolbar);$(format.toolbar).hide();$(format.panel).hide();$(format).on("update",function(){wrapper.setOutput(null,null,lastOptions)});$(format).on("optionsChanged",function(_,options){$(wrapper).trigger("optionsChanged",options)});$(format).on("paginationChanged",function(_,pager){console.log("INTERCEPT PAGINATION");$(wrapper).trigger("paginationChanged",pager)});$(format).on("sortChanged",function(_,sort){console.log("INTERCEPT SORT");$(wrapper).trigger("sortChanged",sort)});$(format).on("exportToBuilder",function(){$(wrapper).trigger("exportToBuilder")})});ui.buttonset(elOutputs);function resize(){if(map[last.type]){var el=map[last.type].panel;el.css({width:el.parent().width()+"px",height:el.parent().height()+"px"});map[last.type].resize()}}function activatePanel(result,type,options){if(type!==last.type){if(last.type&&map[last.type]){map[last.type].deactivate();$(map[last.type].toolbar).hide();$(map[last.type].panel).hide()}$(map[type].toolbar).show();$(map[type].panel).show();map[type].activate();clearTimeout(this.killActivatePanel);this.killActivatePanel=setTimeout(resize,0)}if(map[type].display){map[type].display[0].checked=true;map[type].display.button("refresh")}map[type].update(result,options,wrapper)}return wrapper={setOutput:function(result,type,options){if("undefined"===typeof result)result=result||last.result||null;type=type||"table";if(!options){options={}}lastOptions=options;var enabled=false;if(result==null){activatePanel({message:"please, type and execute a query"},type="message",options)}else if(result instanceof Array&&result.length==0){activatePanel({message:"empty dataset"},type="message",options)}else if(map[type]){enabled=map[type].display;activatePanel(result,type,options)}else{enabled=false;activatePanel({message:"invalid result type: "+type},type="error",options)}if(result)last.result=result;if(last.type!=type){last.type=type;$(wrapper).trigger("typeChanged",type)}if(map[type]&&map[type].display){last.current=type}elOutputs.find("input[type=radio]").each(function(){$(this).attr("checked",$(this).attr("data-format")===type)});if(enabled){elOutputs.buttonset("enable");downloadButton.button("enable")}else{elOutputs.buttonset("disable");downloadButton.button("disable")}elOutputs.buttonset("refresh")},paginationOptions:function(){return map[last.current||"table"].paginationOptions()},last:last,resize:resize}}});define("app/folders",["app/util/precog","app/util/storagemonitor","app/util/uiconfig","app/util/ui","app/util/utils","app/util/notification","app/util/dialog-lineinput","app/util/dialog-confirm","app/util/humanize","rtext!templates/toolbar.folders.html","libs/jquery/jstree/vakata","libs/jquery/jstree/jstree","libs/jquery/jstree/jstree.sort","libs/jquery/jstree/jstree.ui","libs/jquery/jstree/jstree.themes"],function(precog,createStore,uiconfig,ui,utils,notification,openRequestInputDialog,openConfirmDialog,humanize,tplToolbar){var DOWNLOAD_SERVICE="download.php",LOAD_MORE_LABEL="[load more]",LOAD_MORE_NODE="[more]",RECORDS_LABEL="data: %0",RECORDS_NODE="[records]",STORE_KEY,basePath,store;function setVirtualPath(parent,name){var arr=getVirtualPaths(parent);if(arr.indexOf(name)<0){arr.push(name);store.set("virtuals."+parent,arr)}}function getAllVirtualPaths(){return store.get("virtuals",{})}function getVirtualPaths(parent){return store.get("virtuals."+parent,[])}function removeVirtualPaths(parent,name){var arr=store.get("virtuals."+parent,[]),pos=arr.indexOf(name);if(pos<0)return;arr.splice(pos,1);if(arr.length===0){store.remove("virtuals."+parent,true)}else{store.set("virtuals."+parent,arr,true)}}function normalizePath(path){path=path.replace(/\/+/g,"/");if(path.substr(-1)==="/")path=path.substr(0,path.length-1);return path}function ensureSlashes(path){path=path.replace(/\/+/g,"/");if(path.substr(-1)!=="/")path+="/";if(path.substr(0,1)!=="/")path+="/"+path;return path}function removeVirtualPath(path){path=normalizePath(path).substr(1);var parts=path.split("/");while(parts.length>0){var name=parts.pop();removeVirtualPaths("/"+parts.join("/"),name)}}function removeRecordsNodeFromPath(path){if(path.substr(-1)==="/")path=path.substr(0,path.length-1);if(path.substr(0,1)!=="/")path="/"+path;var test="/"+RECORDS_NODE,len=test.length;if(path.substr(-len)===test){path=path.substr(0,path.length-len)}if(path=="")path="/";return path}return function(el){STORE_KEY="pg-quirrel-virtualpaths-"+precog.hash;basePath=precog.config.basePath||"/";store=createStore(STORE_KEY,{virtuals:{}});var wrapper,map;el.find(".pg-toolbar").append(tplToolbar);var elDescription=el.find(".pg-toolbar-description"),elActions=el.find(".pg-toolbar-actions"),elContext=el.find(".pg-toolbar-context"),elRoot=el.find(".pg-tree").append('<div class="pg-root"></div>').find(".pg-root"),elFolders=el.find(".pg-tree").append('<div class="pg-structure"></div>').find(".pg-structure"),elUploader=el.append('<div style="display: none"><input name="files" type="file" multiple></div>').find("input[type=file]"),contextButtons=[],selectedNode,btnFolderCreate,btnFolderRemove,btnFolderQuery,btnFolderDownload,btnFolderUpload;if(!uiconfig.disableUpload){contextButtons.push(btnFolderCreate=ui.button(elContext,{text:false,icon:"ui-icon-new-folder",description:"create new folder",handler:function(){requestNodeCreationAt(removeRecordsNodeFromPath($(selectedNode).attr("data")))}}));contextButtons.push(btnFolderRemove=ui.button(elContext,{text:false,icon:"ui-icon-trash",description:"remove data",handler:function(){var path=$(selectedNode).attr("data"),npath=removeRecordsNodeFromPath(path);requestNodeRemovalAt(npath,path===npath)}}))}contextButtons.push(btnFolderQuery=ui.button(elContext,{text:false,icon:"ui-icon-query",description:"query data at path",handler:function(){triggerQuery(removeRecordsNodeFromPath(removeBasePath($(selectedNode).attr("data"))))}}));if(!uiconfig.disableDownload){contextButtons.push(btnFolderDownload=ui.button(elContext,{text:false,icon:"ui-icon-arrowthickstop-1-s",description:"download folder data",handler:function(){window.location.href=downloadUrl(removeRecordsNodeFromPath($(selectedNode).attr("data")))}}))}if(!uiconfig.disableUpload){contextButtons.push(btnFolderUpload=ui.button(elContext,{text:false,icon:"ui-icon-arrowthickstop-1-n",description:"upload data to folder",handler:function(){uploadDialog(removeRecordsNodeFromPath($(selectedNode).attr("data")))}}))}function refreshActions(){var path=selectedNode&&$(selectedNode).attr("data"),type=selectedNode&&$(selectedNode).attr("rel");$.each(contextButtons,function(){$(this).button("disable")});if(path){if(type==="folder"&&btnFolderCreate)btnFolderCreate.button("enable");if(path!=="/"&&type==="folder"){if(btnFolderDownload)btnFolderDownload.button("enable");if(btnFolderUpload)btnFolderUpload.button("enable")}else if(type==="records"){btnFolderRemove.button("enable");btnFolderQuery.button("enable");if(btnFolderUpload)btnFolderUpload.button("enable")}}}refreshActions();elDescription.html("file system");var tree=elFolders.jstree({plugins:["themes","sort","ui","types"],ui:{select_limit:1,selected_parent_close:"deselect",select_multiple_modifier:false,select_range_modifier:false},types:{more:{valid_children:"none"},folder:{valid_children:["folder","more"]}},sort:function(a,b){var ta=$(a).attr("rel"),tb=$(b).attr("rel");if(ta===tb){return ReportGrid.compare($(a).attr("data").split("/").pop(),$(b).attr("data").split("/").pop())}if(ta==="folder")return-1;if(tb==="folder")return 1;if(ta==="records")return-1;
return 1}});elRoot.html('<div class="jstree jstree-default"><a href="#" data="'+basePath+'" rel="folder"><ins class="jstree-icon jstree-themeicon"> </ins>/</a></div>');elRoot.find("a").mouseenter(function(){$(this).addClass("jstree-hovered")}).mouseleave(function(){$(this).removeClass("jstree-hovered")}).click(function(){tree.jstree("deselect_all");$(this).addClass("jstree-clicked");selectedNode=this;refreshActions()});tree.bind("click.jstree",function(){elRoot.find("a").removeClass("jstree-clicked");selectedNode=tree.jstree("get_selected");refreshActions()});tree.bind("open_node.jstree",function(e,data){var $el=$(data.rslt.obj),paths=$el.find('li[rel="folder"]'),node=nodeFromData(data),type=nodeType(node),path=$el.attr("data");if($el.find('li[rel="records"]').length){countRecords(path)}paths.each(function(i,el){var path=normalizePath($(el).attr("data"));if(map[path])return;loadAtPath(path,1,el)})});function triggerQuery(path){$(wrapper).trigger("querypath",normalizePath(path))}function createNodeAt(path,name){if(!(name&&path)){return}setVirtualPath(path,name);var parent=path===basePath||ensureSlashes(path)===basePath?-1:findNode(path);if(!parent)return;var p=normalizePath(("/"===path?"/":path+"/")+name);if(map[p])return;map[p]=true;addNodeFolder(name,p,null,parent)}function findNode(path){var list=tree.find("li"),len=list.length;for(var i=0;i<len;i++){if($(list.get(i)).attr("data")===path){return list.get(i)}}return null}function removeNode(path){if(!path&&(path=path.trim())==="/"){return}path=normalizePath(path);$(wrapper).trigger("requestPathDeletion",path);removeVirtualPath(path);delete map[path];for(var key in map){if(map.hasOwnProperty(key)){if(key.substr(0,path.length+1)===path+"/"){delete map[key]}}}removeFolder(path)}function requestNodeCreationAt(path){var p=removeBasePath(path),title="Create Folder",message="Create a sub folder at: <i>"+p+"</i>";openRequestInputDialog(title,message,"folder name","",function(name){if(null!=name&&name.match(/^[a-z0-9]+$/i))return null;else return"path name cannot be empty and it can only be composed of alpha-numeric characters"},function(name){createNodeAt(path,name)})}function removeBasePath(path){path=normalizePath(path);path=(path+"/").substr(0,basePath.length)===basePath?(path+"/").substr(basePath.length):path;if(!path)path="/";return path}function requestNodeRemovalAt(path,recursive){var p=removeBasePath(path),title="Delete "+recursive?"Folder":"Data",message=recursive?"Are you sure you want to delete the folder at: <i>"+path+"</i> and all of its content?<br>This operation cannot be undone!":"Are you sure you want to delete the data at: <i>"+path+"</i>?<br>This operation cannot be undone!";openConfirmDialog(title,message,function(){precog.deletePath(p,recursive,function(success){if(success){removeNode(path+(recursive?"":"/"+RECORDS_NODE))}else{alert("an error occurred deleting the path "+path)}})},{captcha:true})}function uploadDialog(path){var p=removeBasePath(path),title="Upload Data",message="Upload data at: <i>"+p+"</i><br>You can use a JSON file (one array of values/objects), a text file containing one JSON object per line, a CSV file (headers are mandatory) or a zip file containing any combination of the previous formats.";openRequestInputDialog(title,message,"file to upload","",function(name){if(name)return null;else return"select a file"},function(_,files){if(files){for(var i=0;i<files.length;i++){uploadFile(files[i],path)}}},"file")}function downloadUrl(path){return DOWNLOAD_SERVICE+"?apiKey="+encodeURIComponent(precog.config.apiKey)+"&analyticsService="+encodeURIComponent(precog.config.analyticsService)+"&path="+encodeURIComponent(path)}function addNodeFolder(name,path,callback,parent){if(!parent)parent=-1;return tree.jstree("create_node",parent,{title:name,data:path,li_attr:{data:path,rel:"folder"}},"last",function(el){$(el).find("a:first").dblclick(function(e){tree.jstree("toggle_node",selectedNode);e.preventDefault();return false});wireFileUpload(el,path);if(callback)callback.apply(el,[path,el]);return false})}function nodeFromData(data){var r=data.rslt;return $(r.obj[0])}function nodeType(node){return node.attr("rel")}tree.bind("create_node.jstree",function(e,data){var node=nodeFromData(data),type=nodeType(node);if(type==="more"){tree.jstree("set_icon",node,"pg-tree-more")}else if(type==="records"){tree.jstree("set_icon",node,"pg-tree-leaf")}});tree.bind("select_node.jstree",function(e,data){var node=nodeFromData(data),type=nodeType(node);if(type==="more"){tree.jstree("deselect_node",node)}});tree.bind("hover_node.jstree",function(e,data){var node=nodeFromData(data),type=nodeType(node);if(type==="more"){tree.jstree("dehover_node",node)}});function addNodeMore(path,callback){var parent=findNode(path)||-1,npath=path+"/"+LOAD_MORE_NODE;return tree.jstree("create_node",parent,{title:LOAD_MORE_LABEL,data:npath,rel:"more",li_attr:{data:npath,rel:"more"}},"last",function(el){$(el).click(function(){map[path].page++;loadPaths(path,2);tree.jstree("delete_node",el)});if(callback)callback.apply(el,[npath,el]);return false})}function countRecords(path,callback,records){var node=findNode(path+"/"+RECORDS_NODE),qp=function(){var p=removeBasePath(path);if(p.substr(0,1)!=="/")p="/"+p;return p}(),query='count(load("'+qp+'"))';function set(result){var count=callback&&callback(result)||window.ReportGrid.format(result);tree.jstree("set_text",node,RECORDS_LABEL.replace("%0",count))}if(node){if(typeof records=="undefined"&&node!=-1)records=parseInt($(node).attr("data-records"));if(records){set(records)}else{window.Precog.query(query,function(r){set(r[0])})}}}function addNodeRecords(path,callback,records){records=records||0;var parent=findNode(path)||-1,npath=path+"/"+RECORDS_NODE,el=findNode(npath);if(el){callback&&callback.apply(el,[npath,el,records]);return}var count=records&&window.ReportGrid.format(records)||"?";return tree.jstree("create_node",parent,{title:RECORDS_LABEL.replace("%0",count),data:npath,rel:"records",li_attr:{data:npath,"data-records":records,rel:"records"}},"last",function(el){$(el).dblclick(function(){triggerQuery(removeBasePath(path))});if(callback)callback&&callback.apply(el,[npath,el]);return false})}function removeFolder(path){var node=findNode(path);if(node===null)return;tree.jstree("delete_node",node)}var page_size=15;function loadPaths(path,levels){var parent=findNode(path);var base="/"===path?"":path;var pos=map[path].page*page_size,paths=map[path].paths.slice(pos,pos+page_size);function dequeue(){if(paths.length===0){if(map[path]&&(1+map[path].page)*page_size<map[path].paths.length){addNodeMore(path)}return}var p=base+paths.shift();addNodeFolder(p.split("/").pop(),p,function(){if(levels>1){loadAtPath(p,levels-1)}},parent||-1);setTimeout(dequeue,0)}dequeue()}function loadAtPath(path,levels){if("undefined"===typeof levels)levels=1;path=normalizePath(path);map[path]=true;var virtuals=getVirtualPaths(path||"/");precog.paths(removeBasePath(path),function(paths,has_records,records){$.each(virtuals,function(i,virtual){if(virtual.substr(0,1)!=="/")virtual="/"+virtual;if(paths.indexOf(virtual)<0)paths.push(virtual)});paths.sort();map[path]={paths:paths,page:0};loadPaths(path,levels);if(has_records){addNodeRecords(path,removeBasePath(path)==="/"?function(){countRecords(path,null,records)}:null,records)}})}ui.button(elActions,{icon:"ui-icon-refresh",description:"refresh folders",handler:function(){wrapper.refresh()}});wrapper={refresh:function(){map={};tree.jstree("delete_node","*");loadAtPath(basePath,2)},createNodeAt:function(path,name){createNodeAt(path,name)},requestNodeCreationAt:function(path){requestNodeCreationAt(path)}};elUploader.on("change",function(){e.preventDefault();return false});function recordsUploded(path){if(path.substr(0,1)!=="/")path="/"+path;path=normalizePath((basePath.substr(-1)=="/"?basePath.substr(0,basePath.length-1):basePath)+path);var start=-1,retries=3;function poll(){var startTime=+new Date;countRecords(path,function(count){if(count===start){retries--}if(retries===0)return ReportGrid.format(count);start=count;var span=+new Date-startTime;setTimeout(poll,2e3-span);return"<i>"+ReportGrid.format(count)+"+</i>"},false)}addNodeRecords(path,function(){tree.jstree("open_node",findNode(path));poll()})}function uploadFile(file,path){if(!file)return;var filename=file.fileName||file.name,extension=filename.split(".").pop().toLowerCase();if(["json","csv","zip"].indexOf(extension)<0){notification.error("invalid file type",{text:"You can only upload files of type json, csv or zip. Be sure that the file extension matches the type."});return}path=removeBasePath(path);var data=file;var noty={text:"Starting upload of '"+filename+"'"};notification.progress("upload file",noty);function progress(e){noty.progressStep(e.loaded/e.total);noty.el.find(".pg-message").html("uploaded "+humanize.filesize(e.loaded)+" of "+humanize.filesize(e.total))}function complete(e){if(e.failed){if(e.ingested===0){message="All of the "+humanize.numberFormat(e.total,0)+" events failed to be stored."}else{message=humanize.numberFormat(e.ingested,0)+" events have been stored correctly, "+humanize.numberFormat(e.failed,0)+" failed to be stored.";recordsUploded(path)}if(e.skipped){message+="<br>Skipped "+humanize.numberFormat(e.skipped,0)+" events (the ingest process stops after "+humanize.numberFormat(e.failed,0)+" errors)."}if(e.errors.length){var m={};$(e.errors).each(function(){var line=this.line,reason=this.reason,arr=m[reason]||(m[reason]=[]);arr.push(line)});var errors=[];for(var field in m){if(m.hasOwnProperty(field)){errors.push(field+" at line(s): "+m[field].join(", "))}}message+="<p>Error details:</p>"+'<ul class="errors"><li>'+errors.join("</li><li>")+"</li></ul>"}noty.progressError(message);$(wrapper).trigger("uploadError",e)}else{message="all of the "+humanize.numberFormat(e.total||e.ingested,0)+" events have been queued correctly and are now in the process to be ingested";noty.progressComplete(message);$(wrapper).trigger("uploadComplete",e);recordsUploded(path)}}function error(e){noty.progressError("An error occurred while uploading your file. No events have been stored in Precog: "+(e===400?"file is not properly formatted":JSON.stringify(e)));$(wrapper).trigger("uploadError",{failed:1,ingested:0,skipped:0,errors:[{line:0,reason:"file is not properly formatted"}]})}precog.ingest(path,data,extension,progress,complete,error);$(wrapper).trigger("uploadStart")}function traverseFiles(files,path){if(typeof files!=="undefined"){for(var i=0,l=files.length;i<l;i++){uploadFile(files[i],path)}}else{alert("No support for the File API in this web browser")}}var dragnoty;function removeDragNotification(){if(!dragnoty)return;dragnoty.hide();dragnoty.remove();dragnoty=null}var $pgide=$(el).parents(".pg-labcoat").on("dragenter",function(e){if(dragnoty)return;dragnoty=notification.success("Drag your file on a folder to upload data",{hide:false,history:false});e.preventDefault();return false}).on("dragleave",function(e){var x=e.originalEvent.pageX,y=e.originalEvent.pageY;var pos=$pgide.offset(),w=$pgide.outerWidth(),h=$pgide.outerHeight();if(x<=pos.left||x>=pos.left+w||y<=pos.top||y>=pos.top+h){removeDragNotification()}}).on("dragover",function(e){e.preventDefault();return false}).on("drop",function(e){removeDragNotification();e.preventDefault();return false});function wireFileUpload(el,path){$(el).on("dragleave",function(e){$(this).removeClass("ui-state-active");e.preventDefault();return false}).on("dragenter",function(e){$(this).addClass("ui-state-active");e.preventDefault();return false}).on("dragover",function(e){e.preventDefault();return false}).on("drop",function(e){$(this).removeClass("ui-state-active");traverseFiles(e.originalEvent.dataTransfer.files,path);removeDragNotification();e.preventDefault();return false})}wrapper.refresh();store.monitor.bind("virtuals",function(_,paths){var current=getAllVirtualPaths(),toadd=[];for(var path in paths){if(current.hasOwnProperty(path)){if(!current[paths]){var list=paths[path];for(var i=0;i<list.length;i++){toadd.push({path:path,name:list[i]})}}}}for(var i=0;i<toadd.length;i++){var o=toadd[i];createNodeAt(o.path,o.name)}});return wrapper}});requirejs.config({waitSeconds:20,baseUrl:"./js/",shim:{"libs/jquery/ui/jquery.ui.core":["jquery"],"libs/jquery/ui/jquery.ui.position":["libs/jquery/ui/jquery.ui.core"],"libs/jquery/ui/jquery.ui.widget":["libs/jquery/ui/jquery.ui.core"],"libs/jquery/ui/jquery.ui.mouse":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.resizable":["libs/jquery/ui/jquery.ui.mouse"],"libs/jquery/ui/jquery.ui.button":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.sortable":["libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.core"],"libs/jquery/ui/jquery.ui.draggable":["libs/jquery/ui/jquery.ui.mouse"],"libs/jquery/ui/jquery.ui.droppable":["libs/jquery/ui/jquery.ui.draggable"],"libs/jquery/ui/jquery.ui.dialog":["libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.resizable"],"libs/jquery/ui/jquery.ui.progressbar":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.tabs":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.menu":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/slickgrid/jquery.event.drag-2.0.min":["jquery","libs/jquery/ui/jquery.ui.sortable"],"libs/jquery/slickgrid/slick.core":["libs/jquery/slickgrid/jquery.event.drag-2.0.min","libs/jquery/ui/jquery.ui.sortable"],"libs/jquery/slickgrid/slick.grid":["libs/jquery/slickgrid/slick.core"],"libs/jquery/slickgrid/slick.dataview":["libs/jquery/slickgrid/slick.grid"],"libs/jquery/slickgrid/slick.pager":["libs/jquery/slickgrid/slick.dataview"],"libs/jquery/slickgrid/slick.columnpicker":["libs/jquery/slickgrid/slick.pager"],"app/util/output-table":["libs/jquery/slickgrid/slick.columnpicker","libs/jquery/ui/jquery.ui.sortable"],"app/util/ui":["libs/jquery/ui/jquery.ui.menu","libs/jquery/ui/jquery.ui.tabs","libs/jquery/ui/jquery.ui.progressbar","app/util/dom"],"libs/jquery/layout/jquery.layout":["libs/jquery/ui/jquery.ui.draggable"],"libs/jquery/jstree/jstree":["libs/jquery/jstree/vakata"],"libs/jquery/jstree/jstree.sort":["libs/jquery/jstree/jstree"],"libs/jquery/jstree/jstree.types":["libs/jquery/jstree/jstree"],"libs/jquery/jstree/jstree.themes":["libs/jquery/jstree/jstree"],"libs/jquery/jstree/jstree.ui":["libs/jquery/jstree/jstree"],"app/folders":["libs/jquery/jstree/jstree.themes"]}});require(["app/util/config","app/layout","app/util/dialog-account","app/editors","app/history","app/bar-main","app/bar-editor","app/bar-status","app/theme","app/editor/editor.ace","app/editorsync","app/output","app/folders","app/queries","app/support","app/startup-wizard","app/results","app/util/precog","app/util/querystring","app/eggmanager","app/gatrack","app/pardot_track","app/util/converters","app/util/notification","app/editortips","app/util/uiconfig"],function(config,createLayout,openAccountDialog,createEditors,createHistory,buildBarMain,buildBarEditor,buildBarStatus,theme,buildEditor,sync,buildOutput,buildFolders,buildQueries,buildSupport,buildWizard,buildResults,precog,qs,eastereggs,ga,pardot,convert,notification,editortips,uiconfig){function buildUrl(query){var version=precog.config.version,basePath=precog.config.basePath,service=precog.config.analyticsService,apiKey=precog.config.apiKey;if(!basePath){basePath=""}else{if(basePath.substring(-1)==="/")basePath=basePath.substr(0,basePath.length-1);if(basePath.substring(0,1)==="/")basePath=basePath.substr(1)}return service+"analytics/"+(version&&version!==false&&version!=="false"?"v"+version+"/":"")+"fs/"+basePath+"?apiKey="+encodeURIComponent(apiKey)+"&q="+encodeURIComponent(convert.minifyQuirrel(query))}$(function(){precog.cache.disable();var layout=createLayout(config.get("ioPanesVertical"));layout.getContainer().hide();$(theme).on("changed",function(){layout.refresh()});$(theme).on("change",function(e,name){config.set("theme",name)});function init(){var queries,editors=createEditors(),history=createHistory();var barmain=buildBarMain(layout.getBarMain());precog.calculateHash();var editor=buildEditor(layout.getCodeEditor(),config.get("ioPanesVertical"));editor.setTabSize(config.get("tabSize"));editor.setUseSoftTabs(config.get("softTabs"));$(layout).on("resizeCodeEditor",function(){editor.resize()});$(layout).on("ioOrientationChanged",function(_,vertical){config.set("ioPanesVertical",vertical);editor.orientButton(vertical)});$(theme).on("change",function(e,name){editor.setTheme(theme.getEditorTheme(name,editor.engine()))});$(editor).on("useSoftTabsChanged",function(_,value){config.set("softTabs",value)});$(editor).on("tabSizeChanged",function(_,value){config.set("tabSize",value)});!function(){var tips=editortips();$(editor).on("mouseovertext",function(_,coords,pos){tips.displayTip(coords,pos,editor.get())})}();var status=buildBarStatus(layout.getStatusBar(),editor,layout);var output=buildOutput(layout.getOutput(),editors);var support=buildSupport(layout.getSupport());support.addPanel("tutorial","https://quirrel.precog.com/tutorial.html",function(){pardot.track_page("support_tutorial")});support.addPanel("reference","https://quirrel.precog.com/reference.html",function(){pardot.track_page("support_reference")});support.addPanel("IRC channel","https://api.precog.com:9090/?channels=#quirrel",function(){pardot.track_page("support_irc")});$(layout).on("resizeCodeEditor",function(){output.resize();support.resize();results.resize()});$(output).on("syntaxError",function(_,pos){editor.resetHighlightSyntax();editor.highlightSyntax(pos.line-1,pos.column-1,pos.text,"error")});$(output).on("requestCursorChange",function(_,pos){editor.setCursorPosition(pos.line-1,pos.column-1)});$(output).on("typeChanged",function(_,type){editors.setOutputType(type)});$(output).on("exportToBuilder",function(){var code=editor.get(),path="/labcoat/"+editors.getName();window.open("http://builder.reportgrid.com/?data-name="+encodeURIComponent(path)+"&data-source="+encodeURIComponent(buildUrl(code)))});var results=buildResults(layout.getResults());$(results).on("resetHighlightSyntax",function(){editor.resetHighlightSyntax()});$(results).on("highlightSyntax",function(_,pos){editor.highlightSyntax(pos.line-1,pos.column-1,pos.text,pos.type)});$(results).on("goto",function(_,pos){editor.setCursorPosition(pos.line-1,pos.column-1)});var executions={};$(precog).on("execute",function(_,query,lastExecution,id){var workingid;for(var key in executions){if(!executions.hasOwnProperty(key))continue;if(executions[key].name===editors.getName()){workingid=key;break}}if(workingid){$(precog).trigger("abort",workingid)}executions[id]={query:query,name:editors.getName()};status.startRequest()});function is_example_query(name){return/^examples\//.test(name)}function is_custom_query(info){var is_query_load=function(q){var path=/^\s*\/(\/[a-z0-9-_.]+)+\s*$/i,load=/^\s*load\s*\(\s*"[^"]+"\s*\)\s*$/i;return path.test(q)||load.test(q)};if(precog.is_demo()){return!(is_example_query(info.name)||is_query_load(info.query))}else{return!is_query_load(info.query)}}$(precog).on("completed",function(_,id,data,errors,warnings,extra){var execution=executions[id];history.save(execution.name,execution.query,data);status.endRequest(true);if(editors.getName()===execution.name){output.setOutput(data,null,editors.getOutputOptions());results.setEditorMessages(errors,warnings);editors.setOutputData(data);editors.setOutputResults({errors:errors,warnings:warnings});if(editorbar.historyPanelIsOpen()){refreshHistoryList()}}else{var index=editors.getIndexByName(execution.name);if(index>=0){var currenttype=editors.getOutputType(index);if(currenttype==="message"||currenttype==="error")editors.setOutputType("table",index);editors.setOutputData(data,index);editors.setOutputResults({errors:errors,warnings:warnings},index)}}pardot.track_page("quirrel_success_"+(is_custom_query(execution)?"custom":"default"));ga.trackQueryExecution("success")});function convertErrorToResultErrors(e){var t=e.detail;e.detail=e.message;e.message=t;return[{message:"error",position:e,timestamp:+new Date}]}$(results).on("report",function(_,error){var info={name:editors.getName(),query:editors.getCode()};if(pardot.track_error("quirrel_failure_"+(is_custom_query(info)?"custom":"default"),{error_message:JSON.stringify({query:info.query,error:error})},"Uh oh, an error occurred while running a query. Can you please help our team by notifying us of your error? Please enter your email below.")){notification.success("Your report has been submitted!",{hide:true,history:true})}});$(precog).on("failed",function(_,id,data){data=data instanceof Array?data[0]:data;var execution=executions[id];delete executions[id];status.endRequest(false);var errors=convertErrorToResultErrors(data);if(editors.getName()===execution.name){output.setOutput(data,"error",editors.getOutputOptions());results.update(errors,[]);editors.setOutputData(data);editors.setOutputResults({errors:errors,warnings:[]})}else{var index=editors.getIndexByName(execution.name);if(index>=0){editors.setOutputData(data,index);editors.setOutputResults({errors:errors,warnings:warnings},index)}}ga.trackQueryExecution("undefined"!==typeof data.lineNum?"syntax-error":"service-error")});!function(){var old=window.onerror;window.onerror=function(e){var msg;try{msg=JSON.stringify(e)}catch(e){msg=""+e}pardot.track_error("generic_error",{error_message:msg},"Uh oh, an error occurred in Labcoat. Can you please help our team by notifying us of your error? Please enter your email below.");if(old)old(e)}}();$(precog).on("aborted",function(_,id){var execution=executions[id];delete executions[id];status.endRequest(false);ga.trackQueryExecution("aborted")});var execTimer;$(editor).on("execute",function(_,code){if(eastereggs.easterEgg(code))return;clearInterval(execTimer);execTimer=setTimeout(function(){var pagination=output.paginationOptions();precog.query(code)},0)});$(editors).on("activated",function(_,index){var data=editors.getOutputData(),type=editors.getOutputType(),options=editors.getOutputOptions(),oresults=editors.getOutputResults()||{errors:[],warnings:[]};output.setOutput(data,type,options);if(results)results.setEditorMessages(oresults.errors,oresults.warnings)});$(editors).on("saved",function(_,data){queries.querySave(data.name,data.code);pardot.track_page("query_saved")});sync(editor,editors,config);var folders=buildFolders(layout.getSystem());$(folders).on("querypath",function(e,path){if(path.substr(0,1)!=="/")path="/"+path;var q="/"+path.replace(/"/g,'"');if(q==="//")q='load("/")';if(editors.getCode().trim()==""){editor.set(q)}else{editors.add({code:q});editors.activate(editors.count()-1)}editor.triggerExecute()});$(folders).on("uploadComplete",function(){pardot.track_page("upload_success")});$(folders).on("uploadError",function(){pardot.track_page("upload_failure")});$(folders).on("uploadComplete",function(_,e){results.setMessages([{type:"upload",detail:"ingested "+e.ingested+" events"}])});$(folders).on("uploadError",function(_,e){var messages=[],maxerrors=10;if(e.ingested){messages.push({type:"upload",detail:"ingested "+e.ingested+" events"})}if(e.skipped){messages.push({type:"warning",detail:"skipped ingest of "+e.skipped+" events"})}for(var i=0;i<Math.min(maxerrors,e.failed);i++){var err=e.errors[i];messages.push({type:"error",detail:"ingestion error",nline:err.line,line:err.reason})}if(maxerrors<e.failed){messages.push({type:"error",detail:"... other "+(e.failed-maxerrors)+" events failed ingesting "})}results.setMessages(messages)});queries=buildQueries(layout.getQueries());$(queries).on("requestopenquery",function(_,data){editors.open(data.name,data.code);console.log(data);pardot.track_page("load_query_"+(precog.is_demo()&&is_example_query(data.name)?"default":"custom"))});$(queries).on("removed",function(_,name){var index=editors.getIndexByName(name);if(index>=0){editorbar.invalidateTab(index)}});var editorbar=buildBarEditor(layout.getBarEditor(),queries,editors);$(editors).on("saved",function(e,editor){var index=editors.getIndexById(editor.id);if(index<0)return;editorbar.changeTabName(index,editor.name)});$(editors).on("added",function(e,editor){editorbar.addTab(editor.name,!!editor.dirty)});$(editors).on("removed",function(e,name){editorbar.removeTabByName(name)});var invalidationSuspended=true;function currentTabInvalidator(){if(invalidationSuspended)return;editors.setDirty();editorbar.invalidateTab(editors.current())}$(editor).on("change",currentTabInvalidator);$(editors).on("activated",function(e,index){editorbar.activateTab(index);clearInterval(this.k);this.k=setTimeout(function(){invalidationSuspended=false},1e3);if(editorbar.historyPanelIsOpen()){refreshHistoryList()}});function refreshHistoryList(){var data=history.revisions(editors.getName());editorbar.displayHistoryList(data)}$(editors).on("deactivated",function(e,index){invalidationSuspended=true});$(editors).on("removed",function(e,name){if(!queries.queryExist(name))history.remove(name)});$(editorbar).on("requesthistorylist",refreshHistoryList);$(editorbar).on("requestopenrevision",function(e,info){var name=editors.getName(),data=history.load(name,info.index);if(info.usenewtab){editors.add({code:data.code,output:{result:data.data}});editors.activate(editors.count()-1)}else{editor.set(data.code)}output.setOutput(data.data,null,editors.getOutputOptions())});$(editorbar).on("tabrenamed",function(e,data){history.rename(data.oldname,data.newname);if(editorbar.historyPanelIsOpen()){refreshHistoryList()}});$(editorbar).on("exportCode",function(){pardot.track_page("download_code")});if(uiconfig.disableUpload){barmain.hideWizard()}else{var wizard=buildWizard({folders:folders});$(barmain).on("startWizard",function(){wizard.start()})}editors.load();var query=qs.get("q");function editorcontains(q){for(var i=0;i<editors.count();i++){if(editors.getCode(i)===q)return true}return false}if(!editors.count()||query&&!editorcontains(query)){editors.add(query&&{code:query})}setTimeout(function(){editors.activate(editors.count()-1);$(output).on("optionsChanged",function(_,options){editors.setOutputOptions(options)});theme.set(precog.config.theme||config.get("theme","gray"));config.monitor.bind("theme",function(e,name){theme.set(name)});config.monitor.bind("softTabs",function(_,value){editor.setUseSoftTabs(value)});config.monitor.bind("tabSize",function(_,value){editor.setTabSize(value)});layout.getContainer().show();layout.refresh()},150)}theme.set(precog.config.theme||config.get("theme","gray"));if(precog.config.apiKey)init();else openAccountDialog(precog,function(){if(!precog.config.apiKey){precog.config.apiKey="5CDA81E8-9817-438A-A340-F34E578E86F8";precog.config.analyticsService="https://labcoat.precog.com/"}init()})})});define("main",function(){});